var zy=Object.defineProperty;var Vy=(n,e,t)=>e in n?zy(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var Ke=(n,e,t)=>Vy(n,typeof e!="symbol"?e+"":e,t);import{r as ae,w as Qe,S as Oi,aw as Jp,ax as Sl,x as Oe,j as St,ag as ie,y as K,z as G,A as q,G as be,P as x,H as A,O as ke,a6 as Xe,u as $,L as te,M as ve,ay as Zs,e as em,i as Wn,ao as tm,R as Me,az as Xy,c as pe,B as Be,D as Ge,F as nm,g as Br,X as ra,o as Do,C as gt,n as Dn,a2 as By,W as im,J as Ee,aA as Uy,l as ja,ad as jy,k as Wy,aB as Ze,t as Bi,af as Ie,U as qc,E as Xt,K as ni,an as cr,h as qy,f as sm,a8 as rm,a1 as Yy,a9 as Gy,V as zh,aC as Hy,at as Fy,aD as Ky}from"./vue-DDR9gto8.js";import{E as We,a as om,b as am,c as ii,d as Ji,e as Fs,f as Et,g as _l,h as $e,i as es,j as Jy,k as e1,M as t1,l as Vh,m as n1,n as i1}from"./utils-Be68bvOs.js";import{r as s1,a as r1,b as o1}from"./xterm-BZdChWd0.js";import{C as a1,V as Je,M as us,T as rs,Q as oa,S as Xh,a as Mt,R as l1,P as u1,b as hr,c as c1,d as vu,e as lm,L as um,f as dr,F as Yc,h as wn,i as Ln,j as zn,k as ws,l as h1,m as cm,D as wu,n as aa,I as d1,o as f1,O as hm,p as p1,q as m1,B as $l,r as g1,s as dm,N as O1,t as y1,u as v1,v as bu,w as fm,x as xu,y as w1,z as b1,A as Ks,E as fr,G as No,H as Si,J as x1,K as Js,U as S1,W as Su,X as _1,Y as si,Z as _u,_ as $1,$ as k1,a0 as pr,a1 as Ni,a2 as pm,a3 as P1,a4 as Q1,a5 as T1,a6 as A1,a7 as C1,a8 as mm,a9 as E1,aa as Bh,ab as Uh,ac as jh,ad as Wh,ae as qh,af as M1,ag as R1,ah as Z1,ai as D1,aj as ts,ak as N1,al as I1,g as L1,am as kl,an as z1,ao as V1,ap as X1,aq as B1,ar as U1,as as j1,at as Yh,au as Gh,av as W1}from"./three-FCmarWxK.js";import{u as q1}from"./uplot-C0BbzL7s.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function t(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(s){if(s.ep)return;s.ep=!0;const r=t(s);fetch(s.href,r)}})();const eo={serial:{baudRate:115200,dataBits:8,stopBits:1,parity:"none",flowControl:"none"},display:{showTime:!0,showMs:!1,showHex:!0,showText:!0,showNewline:!0,autoScroll:!1,timeOut:5},send:{isHexSend:!1,addCRLF:!1,addCRLFType:`
`,autoSend:!1,autoSendInterval:1e3,addChecksum:!1,content:"",history:[],historyMaxLength:100},layout:{splitPaneSize:75,leftActiveTab:"0",rightActiveTab:"0"},charts:{list:[{id:1,name:"Chart 1",fields:["pitch","roll","yaw"]}]},canvas:{items:[]}},Qi=class Qi{constructor(){Ke(this,"configs",{});this.loadAllConfigs()}static getInstance(){return Qi.instance||(Qi.instance=new Qi),Qi.instance}loadAllConfigs(){for(const[e,t]of Object.entries(eo)){const i=localStorage.getItem(`config.${e}`);this.configs[e]=i?{...t,...JSON.parse(i)}:t}}getConfig(e){return this.configs[e]||eo[e]}setConfig(e,t){this.configs[e]={...this.configs[e],...t},localStorage.setItem(`config.${e}`,JSON.stringify(this.configs[e]))}useConfig(e){const t=ae(this.getConfig(e));return Qe(t,i=>{this.setConfig(e,i)},{deep:!0}),t}resetConfig(e){this.configs[e]={...eo[e]},localStorage.setItem(`config.${e}`,JSON.stringify(this.configs[e]))}resetAllConfigs(){Object.keys(eo).forEach(e=>{this.resetConfig(e)})}};Ke(Qi,"instance");let Vn=Qi;const Ti=class Ti{constructor(){Ke(this,"handlers",new Map)}static getInstance(){return Ti.instance||(Ti.instance=new Ti),Ti.instance}emit(e,t){const i=this.handlers.get(e);i&&(i.forEach((s,r)=>{s.callback(t),s.once&&i.splice(r,1)}),i.length===0&&this.handlers.delete(e))}on(e,t,i=!1){var s;this.handlers.has(e)||this.handlers.set(e,[]),(s=this.handlers.get(e))==null||s.push({callback:t,once:i})}once(e,t){this.on(e,t,!0)}off(e,t){if(!t){this.handlers.delete(e);return}const i=this.handlers.get(e);if(!i)return;const s=i.findIndex(r=>r.callback===t);s!==-1&&(i.splice(s,1),i.length===0&&this.handlers.delete(e))}useEvent(e,t){this.on(e,t),Oi(()=>{this.off(e,t)})}};Ke(Ti,"instance");let en=Ti;const He={SERIAL_DATA:"serial-data",SERIAL_SEND:"serial-send",DATA_UPDATE:"data-update",TERM_WRITE:"term-write",SERIAL_ERROR:"error"},Y1=en.getInstance(),Ai=class Ai{constructor(){Ke(this,"textEncoder");Ke(this,"textDecoder");Ke(this,"isConnected",!1);Ke(this,"sendQueue",[]);Ke(this,"maxQueueSize",1e3);Ke(this,"processingQueue",!1);this.textEncoder=new TextEncoder,this.textDecoder=new TextDecoder}static getInstance(){return Ai.instance||(Ai.instance=new Ai),Ai.instance}setConnected(e){this.isConnected=e,e||this.clearSendQueue()}isSerialConnected(){return this.isConnected}validateHexString(e){return/^[0-9A-Fa-f\s]*$/.test(e)&&e.replace(/\s/g,"").length%2===0}stringToUint8Array(e,t=!1){if(t){if(!this.validateHexString(e))throw new Error("无效的HEX格式字符串");const i=e.replace(/[^0-9A-Fa-f]/g,""),s=new Uint8Array(i.length/2);for(let r=0;r<i.length;r+=2)s[r/2]=parseInt(i.substr(r,2),16);return s}return this.textEncoder.encode(e)}uint8ArrayToHexString(e){return Array.from(e).map(t=>t.toString(16).padStart(2,"0").toUpperCase()).join(" ")}uint8ArrayToString(e){try{return this.textDecoder.decode(e)}catch(t){return console.error("解码数据时出错:",t),""}}formatLogMessage(e,t){try{const i=new Date,s=[];if(t.showTime){const o=i.toLocaleTimeString();if(t.showMs){const a=i.getMilliseconds().toString().padStart(3,"0");s.push(`[${o}.${a}]`)}else s.push(`[${o}]`)}if(t.showHex){const o=this.uint8ArrayToHexString(e);s.push(o)}if(t.showText){const o=this.uint8ArrayToString(e);t.showHex?s.push(`| ${o}`):s.push(o)}return t.showNewline?s.push(`
`):s.push(""),s.join(" ")}catch(i){return console.error("格式化日志消息时出错:",i),`[${new Date().toLocaleTimeString()}] 错误: 无法格式化消息
`}}async addToSendQueue(e){if(!this.isConnected)throw new Error("串口未连接");if(this.sendQueue.length>=this.maxQueueSize)throw new Error("发送队列已满");this.sendQueue.push(e),this.processingQueue||await this.processSendQueue()}clearSendQueue(){this.sendQueue=[],this.processingQueue=!1}async processSendQueue(){if(!(this.processingQueue||this.sendQueue.length===0)){for(this.processingQueue=!0;this.sendQueue.length>0&&this.isConnected;){const e=this.sendQueue.shift();if(e)try{Y1.emit(He.SERIAL_SEND,e),await new Promise(t=>setTimeout(t,10))}catch(t){console.error("发送数据时出错:",t)}}this.processingQueue=!1}}calculateChecksum(e){return e.reduce((t,i)=>t^i,0)}appendChecksum(e){const t=this.calculateChecksum(e),i=new Uint8Array(e.length+1);return i.set(e),i[e.length]=t,i}verifyChecksum(e){if(e.length<1)return!1;const t=e[e.length-1],i=this.calculateChecksum(e.slice(0,-1));return t===i}};Ke(Ai,"instance");let bs=Ai;const Io=(n,e,t,i)=>({id:n,key:e,name:e,keyAddr:0,keySize:0,dataType:i||"number",description:"",value:t,avg:typeof t=="number"?t:null,avgSum:typeof t=="number"?t:null,min:typeof t=="number"?t:null,max:typeof t=="number"?t:null,lastUpdate:Date.now(),updateCount:1,isEditing:!1}),G1=[Io(1,"pitch",0,"number"),Io(1,"roll",0,"number"),Io(1,"yaw",0,"number")],Gc=Jp("field",{state:()=>({fields:Sl("config.fields",G1),nextId:Sl("config.nextId",1),columnVisibility:Sl("config.columnVisibility",{key:!0,name:!1,keyAddr:!1,keySize:!1,dataType:!0,description:!1,value:!0,avg:!1,min:!1,max:!1,lastUpdate:!0,updateCount:!0})}),actions:{createField(n,e,t){const i=Io(this.nextId++,n,e,t);return this.fields.push(i),i},updateField(n,e){n.value=e,n.lastUpdate=Date.now(),n.updateCount++,typeof e=="number"&&(n.avgSum==null&&(n.avgSum=0),n.avgSum+=e,n.avg=Math.floor(n.avgSum/n.updateCount*1e3)/1e3,(n.min===null||e<n.min)&&(n.min=e),(n.max===null||e>n.max)&&(n.max=e))},deleteField(n){const e=this.fields.findIndex(t=>t.id===n);e!==-1&&this.fields.splice(e,1)},toggleColumnVisibility(){},saveToLocalStorage(){},loadFromLocalStorage(){},exportData(){const n=JSON.stringify(this.fields,null,2),e=new Blob([n],{type:"application/json"}),t=URL.createObjectURL(e),i=document.createElement("a");i.href=t,i.download=`data-export-${new Date().toISOString()}.json`,i.click(),URL.revokeObjectURL(t)},async importData(n){try{const e=await n.text(),t=JSON.parse(e);return this.fields=t,!0}catch(e){return console.error("导入数据失败:",e),!1}}}}),to=en.getInstance(),Hh=`let cache = '';

// 处理接收的数据
async function DataReceiver(data) {
  cache += uint8ArrayToString(data);
  // 数据格式："pitch:-0.13,roll:0.00,yaw:0.07\\n"

  if (cache.indexOf('\\n') !== -1) {
    const lines = cache.split('\\n');
    cache = lines.pop() || '';
    
    for (const line of lines) {
      let files = line.split(',')
      let data = {};
      files.map((str) => {
        let s2 = str.split(':')
        if (s2.length === 2) {
          data[s2[0]] = parseFloat(s2[1])
        }
      })
      
      // 更新到数据表
      updateDataTable(data);
    }
  }
  return data;
}

// 处理发送的数据
async function DataSender(data) {
  // checksum
  // await sleep(10);

  return data;
}

// 定时发送数据
setInterval(async () => {
  const bytes = new Uint8Array(3);
  // sendHex(bytes);
}, 1000);

// 支持的函数
// stringToUint8Array();
// uint8ArrayToHexString();
// uint8ArrayToString();

`,Ci=class Ci{constructor(){Ke(this,"scripts",[]);Ke(this,"currentScript",{id:Date.now(),name:"新建脚本",code:"",isRunning:!1});Ke(this,"serialHelper",bs.getInstance());Ke(this,"runtimer",{DataReceiverInterface:null,DataSenderInterface:null});Ke(this,"RuntimerTimerIntervals",[]);Ke(this,"RuntimerTimerouts",[]);this.loadScripts()}static getInstance(){return Ci.instance||(Ci.instance=new Ci),Ci.instance}getScripts(){return this.scripts}getCurrentScript(){return this.currentScript}setCurrentScript(e){this.currentScript=e}addScript(e="新脚本",t=Hh){const i={id:Date.now(),name:e,code:t,isRunning:!1};return this.scripts.push(i),this.currentScript=i,this.saveScripts(),i}removeScript(e){const t=this.scripts.findIndex(i=>i.id===e);t>-1&&(this.scripts.splice(t,1),this.currentScript.id===e&&(this.scripts.length===0&&this.addScript(),this.currentScript=this.scripts[0]),this.saveScripts())}async runScript(){let e=this.currentScript;if(!e.isRunning){e.isRunning=!0;try{const t={stringToUint8Array:this.serialHelper.stringToUint8Array.bind(this.serialHelper),uint8ArrayToHexString:this.serialHelper.uint8ArrayToHexString.bind(this.serialHelper),uint8ArrayToString:this.serialHelper.uint8ArrayToString.bind(this.serialHelper),sendText:r=>{const o=this.serialHelper.stringToUint8Array(r);to.emit(He.SERIAL_SEND,o)},sendHex:r=>{let o=r;typeof r=="string"&&(o=this.serialHelper.stringToUint8Array(r,!0)),to.emit(He.SERIAL_SEND,o)},updateDataTable:r=>{to.emit(He.DATA_UPDATE,r)},getDataTables:()=>{const r=Gc();return JSON.parse(JSON.stringify(r.fields))},sleep:r=>new Promise(o=>setTimeout(o,r)),setTimeout:(r,o)=>{const a=setTimeout(r,o);return this.RuntimerTimerouts.push(a),a},setInterval:(r,o)=>{const a=setInterval(r,o);return this.RuntimerTimerIntervals.push(a),a}},i=`
return (async function() {
  ${e.code}


  let DataReceiverInterface = typeof DataReceiver == 'undefined' ? null : DataReceiver;
  let DataSenderInterface = typeof DataSender == 'undefined'? null : DataSender;
  return { DataReceiverInterface, DataSenderInterface };
})()
      `,s=new Function("context",`with(context) { ${i} }`);this.runtimer=await s(t)}catch(t){console.error("脚本执行错误:",t),to.emit(He.SERIAL_ERROR,{error:t instanceof Error?t.message:"未知错误"}),this.stopScript()}}}stopScript(){this.currentScript.isRunning=!1,this.RuntimerTimerouts.forEach(clearTimeout),this.RuntimerTimerouts=[],this.RuntimerTimerIntervals.forEach(clearInterval),this.RuntimerTimerIntervals=[]}async getRuntimer(){return this.currentScript.isRunning||await this.runScript(),this.runtimer}saveScripts(){localStorage.setItem("config.serialScripts",JSON.stringify(this.scripts))}loadScripts(){const e=localStorage.getItem("config.serialScripts");if(e)try{this.scripts=JSON.parse(e)}catch(t){console.error("加载脚本失败:",t)}this.scripts.length===0&&this.addScript("数据处理Demo（key:val,key:val）",Hh),this.scripts.map(t=>{t.isRunning=!1}),this.currentScript=this.scripts[0]||this.currentScript}};Ke(Ci,"instance");let la=Ci;const Rt=ae([]),H1=Vn.getInstance(),F1=H1.useConfig("serial"),$u=ae(null),K1=[{name:"Arduino UNO",vendorId:"2341",productId:"0043"},{name:"Arduino Mega",vendorId:"2341",productId:"0010"},{name:"Arduino Nano",vendorId:"0403",productId:"6001"},{name:"ATmega32U4",vendorId:"2341",productId:"8036"},{name:"CP2102/CP2102N",vendorId:"10c4",productId:"ea60"},{name:"FT2232H",vendorId:"0403",productId:"6010"},{name:"FTDI Basic",vendorId:"0403",productId:"6001"},{name:"CH340",vendorId:"1a86",productId:"7523"},{name:"CH9102",vendorId:"1a86",productId:"55d4"},{name:"PL2303",vendorId:"067b",productId:"2303"},{name:"PL2303HX",vendorId:"067b",productId:"2303"},{name:"ESP USB_SERIAL_JTAG",vendorId:"303a",productId:"1001"},{name:"ESP USB Bridge",vendorId:"303a",productId:"1002"},{name:"ESP32-S2 USB CDC",vendorId:"303a",productId:"0002"},{name:"ESP32-S3 USB CDC",vendorId:"303a",productId:"0009"},{name:"CH9102F",vendorId:"1a86",productId:"55d4"},{name:"CH340G",vendorId:"1a86",productId:"7523"},{name:"STM32 Virtual COM Port",vendorId:"0483",productId:"5740"},{name:"STM32 USB CDC",vendorId:"0483",productId:"5740"}],J1=n=>{if(!n.getInfo().usbProductId)return"串口设备";const e=(n.getInfo().usbVendorId||0).toString(16).padStart(4,"0"),t=(n.getInfo().usbProductId||0).toString(16).padStart(4,"0"),i=K1.find(s=>s.vendorId.toLowerCase()===e.toLowerCase()&&s.productId.toLowerCase()===t.toLowerCase());return i?`${i.name} (VID:${e} PID:${t})`:`未知设备 (VID:${e} PID:${t})`},gm=n=>{var e;return"serialport_"+(((e=n.getInfo().usbProductId)==null?void 0:e.toString())||"")},Om=n=>({id:gm(n),title:J1(n),type:"serialport",port:n}),ev=async()=>{var n;(n=navigator.serial)==null||n.getPorts().then(e=>{e.map(t=>{let i=gm(t);Rt.value.find(r=>r.id===i)||Rt.value.push(Om(t))})})},tv=async()=>{try{const n=await navigator.serial.requestPort();return Om(n)}catch(n){n.message!="Failed to execute 'requestPort' on 'Serial': No port selected by the user."&&We.error("串口连接失败："+n),console.error(n)}return null},nv=async n=>{try{const e=n.port;await e.open(F1.value),$u.value=e;let t=e.writable.getWriter(),i=e.readable.getReader();return{writer:t,reader:i}}catch(e){We.error("串口连接失败："+e),console.log(e)}},iv=async()=>{try{$u.value&&await $u.value.close()}catch(n){We.error("断开设备失败："+n),console.log(n)}},Ei=class Ei{constructor(){Ke(this,"timers");this.timers=new Map}static getInstance(){return Ei.instance||(Ei.instance=new Ei),Ei.instance}animationFrame(e){const t=this.timers.get(e);if(!t||!t.isRunning)return;const i=performance.now(),s=i-t.lastTime;s>=t.interval&&(t.callback(),t.lastTime=i-s%t.interval),t.requestId=requestAnimationFrame(()=>this.animationFrame(e))}startTimer(e,t,i){this.timers.has(e)&&this.stopTimer(e),this.timers.set(e,{callback:t,interval:i,lastTime:performance.now(),requestId:null,isRunning:!0});const s=this.timers.get(e);s.requestId=requestAnimationFrame(()=>this.animationFrame(e))}stopTimer(e){const t=this.timers.get(e);t&&(t.isRunning=!1,t.requestId!==null&&(cancelAnimationFrame(t.requestId),t.requestId=null))}resumeTimer(e){const t=this.timers.get(e);t&&!t.isRunning&&(t.isRunning=!0,t.lastTime=performance.now(),t.requestId=requestAnimationFrame(()=>this.animationFrame(e)))}clearTimer(e){this.stopTimer(e),this.timers.delete(e)}clearAllTimers(){for(const e of this.timers.keys())this.clearTimer(e)}isTimerRunning(e){const t=this.timers.get(e);return t?t.isRunning:!1}};Ke(Ei,"instance");let ku=Ei;const sv=()=>"mock",rv=()=>"mock",ov=n=>({id:rv(),title:sv(),type:"mock",port:n});Rt.value.push(ov(null));const ym=ae(!1),vm=ku.getInstance(),wm="mock_imu_simulation",av=n=>new Promise(e=>setTimeout(e,n)),lv=async()=>{bm(),ym.value=!0;const{writable:n,readable:e}=new TransformStream({transform(a,l){l.enqueue(a)}});let t=n.getWriter(),i=e.getReader(),s=0,r=0,o=0;return await av(1e3-Date.now()%1e3),vm.startTimer(wm,()=>{s+=Math.random()*.4-.2,r+=Math.random()*.4-.1,o+=Math.random()*.4-0;let a=`pitch:${s.toFixed(2)},roll:${r.toFixed(2)},yaw:${o.toFixed(2)}
`;const l=new TextEncoder().encode(a);t.write(l)},50),{writer:t,reader:i}},bm=()=>{vm.stopTimer(wm),ym.value=!1},uv=async n=>lv(),cv=async()=>{bm()},hv=n=>"未知设备"+n,xm=n=>"usb",Sm=n=>({id:xm(),title:hv(n),type:"usb",port:n}),dv=async()=>{var n;(n=navigator.usb)==null||n.getDevices().then(e=>{e.map(t=>{let i=xm();Rt.value.find(r=>r.id===i)||Rt.value.push(Sm(t))})})},fv=async()=>{try{const n=await navigator.usb.requestDevice({filters:[]});return Sm(n)}catch(n){n.message!="Failed to execute 'requestDevice' on 'USB': No device selected."&&We.error("串口连接失败："+n),console.error(n)}return null},pv=async n=>(console.log(n),null),mv=n=>"未知设备"+n,gv=n=>"bluetooth",Ov=n=>({id:gv(),title:mv(n),type:"bluetooth",port:n}),yv=async()=>{try{const n=await navigator.bluetooth.requestDevice({acceptAllDevices:!0});return Ov(n)}catch(n){n.message!="User cancelled the requestDevice() chooser."&&We.error("串口连接失败："+n),console.error(n)}return null},vv=async n=>null,wv={class:"serial-config"},bv={class:"config-container"},xv={class:"port-section"},Sv={class:"port-list"},_v=Oe({__name:"SerialConfig",setup(n){const t=Vn.getInstance().useConfig("serial"),i=la.getInstance(),s=en.getInstance(),r=ae(null),o=ae(null),a=ae(!1),l=ae(""),u=[921600,460800,230400,115200,57600,38400,19200,9600,4800,2400,1200];Qe(t,async()=>{if(a.value){try{await p()}catch{}try{const g=Rt.value.find(k=>k.id===l.value);g&&await f(g)}catch(g){We.error("更新串口参数失败："+g)}}},{deep:!0});const h=async g=>{const k=await i.getRuntimer();k.DataReceiverInterface&&(g=await k.DataReceiverInterface(g)),s.emit(He.SERIAL_DATA,g)},d=async()=>{let g=null;switch(l.value){case"authorizedSerial":g=await tv();break;case"authorizedUSB":g=await fv();break;case"authorizedBluetooth":g=await yv();break;case"websocket":break;case"webstlink":case"script":case"dap":case"adb":We.warning("该设备类型开发中"),l.value="";break;default:g=Rt.value.find(k=>k.id===l.value)}g?f(g):l.value=""},f=async g=>{Rt.value.find(Q=>Q.id===g.id)||Rt.value.push(g);let S;try{g.type==="serialport"?S=await nv(g):g.type==="mock"?S=await uv(g):g.type==="usb"?S=await pv(g):g.type==="bluetooth"&&(S=await vv(g))}catch(Q){We.error("串口连接失败："+Q),console.log(Q)}S?(r.value=S.writer,o.value=S.reader,a.value=!0,We.success("串口连接成功"),m(),l.value=g.id):l.value=""},p=async()=>{try{o.value&&(await o.value.cancel(),o.value.releaseLock()),r.value&&(await r.value.close(),r.value.releaseLock())}catch(g){console.log(g)}a.value=!1;try{await iv(),await cv(),We.success("设备已断开")}catch(g){We.error("断开设备失败："+g),console.log(g)}},m=async()=>{for(;a.value&&o.value;)try{const{value:g,done:k}=await o.value.read();if(k)break;h(g)}catch(g){We.error("读取串口数据失败："+g);break}},O=async g=>{if(!a.value||!r.value){g.length==1&&g[0]==13?s.emit(He.TERM_WRITE,g):We.error("设备未连接");return}const k=await i.getRuntimer();k.DataSenderInterface&&(g=await k.DataSenderInterface(g));try{await r.value.write(g),We.success({message:"发送成功",grouping:!0,duration:1800,showClose:!0})}catch(S){console.log(S),We.error("发送数据失败："+S)}},y=ae({url:"",history:[]}),b=g=>{g&&(y.value.url=g,y.value.history.includes(g)||(y.value.history.push(g),localStorage.setItem("config.wsConfig",JSON.stringify(y.value))))};St(()=>{s.on(He.SERIAL_SEND,O),ev(),dv()}),Oi(()=>{s.off(He.SERIAL_SEND,O)});const v=()=>{if(a.value)p();else{const g=Rt.value.find(k=>k.id===l.value);g&&f(g)}};return(g,k)=>{const S=ie("el-option"),Q=ie("el-option-group"),T=ie("el-select"),P=ie("el-button"),B=ie("el-button-group"),W=ie("el-form-item"),C=ie("el-form");return G(),K("div",wv,[q("div",bv,[q("div",xv,[q("div",Sv,[x(T,{modelValue:l.value,"onUpdate:modelValue":k[0]||(k[0]=j=>l.value=j),onChange:d,placeholder:"选择设备",size:"small"},{default:A(()=>[x(S,{label:"选择设备",value:""}),x(Q,{label:"串口设备"},{default:A(()=>[x(S,{label:"授权串口设备",value:"authorizedSerial"}),(G(!0),K(ke,null,Xe($(Rt).filter(j=>j.type=="serialport"),j=>(G(),be(S,{key:j.id,label:j.title,value:j.id},null,8,["label","value"]))),128))]),_:1}),x(Q,{label:"WebUSB设备"},{default:A(()=>[x(S,{label:"授权WebUSB设备",value:"authorizedUSB"}),(G(!0),K(ke,null,Xe($(Rt).filter(j=>j.type=="usb"),j=>(G(),be(S,{key:j.id,label:j.title,value:j.id},null,8,["label","value"]))),128))]),_:1}),x(Q,{label:"蓝牙设备"},{default:A(()=>[x(S,{label:"授权蓝牙设备",value:"authorizedBluetooth"}),(G(!0),K(ke,null,Xe($(Rt).filter(j=>j.type=="bluetooth"),j=>(G(),be(S,{key:j.id,label:j.title,value:j.id},null,8,["label","value"]))),128))]),_:1}),x(Q,{label:"其他"},{default:A(()=>[x(S,{label:"WebSocket",value:"websocket"}),x(S,{label:"脚本",value:"script"}),x(S,{label:"Stlink",value:"webstlink"}),x(S,{label:"DAP",value:"dap"}),x(S,{label:"adb",value:"adb"}),x(S,{label:"模拟数据(IMU)",value:"mock"})]),_:1})]),_:1},8,["modelValue"])]),x(B,null,{default:A(()=>[x(P,{type:a.value?"danger":"primary",onClick:v,size:"small"},{default:A(()=>[te(ve(a.value?"断开":"连接"),1)]),_:1},8,["type"])]),_:1})]),l.value=="websocket"?(G(),be(C,{key:0,model:y.value,inline:!0,size:"small",class:"config-section"},{default:A(()=>[x(W,{label:"ws"},{default:A(()=>[x(T,{modelValue:y.value.url,"onUpdate:modelValue":k[1]||(k[1]=j=>y.value.url=j),filterable:"","allow-create":"",onChange:b,style:{width:"300px"}},{default:A(()=>[(G(!0),K(ke,null,Xe(y.value.history,j=>(G(),be(S,{key:j,label:j,value:j},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model"])):(G(),be(C,{key:1,model:$(t),inline:!0,size:"small",class:"config-section"},{default:A(()=>[x(W,{label:"波特率"},{default:A(()=>[x(T,{modelValue:$(t).baudRate,"onUpdate:modelValue":k[2]||(k[2]=j=>$(t).baudRate=j),style:{width:"80px"}},{default:A(()=>[(G(),K(ke,null,Xe(u,j=>x(S,{key:j,value:j},null,8,["value"])),64))]),_:1},8,["modelValue"])]),_:1}),x(W,{label:"数据位"},{default:A(()=>[x(T,{modelValue:$(t).dataBits,"onUpdate:modelValue":k[3]||(k[3]=j=>$(t).dataBits=j),style:{width:"50px"}},{default:A(()=>[(G(),K(ke,null,Xe([8,7,6,5],j=>x(S,{key:j,value:j},null,8,["value"])),64))]),_:1},8,["modelValue"])]),_:1}),x(W,{label:"停止位"},{default:A(()=>[x(T,{modelValue:$(t).stopBits,"onUpdate:modelValue":k[4]||(k[4]=j=>$(t).stopBits=j),style:{width:"50px"}},{default:A(()=>[(G(),K(ke,null,Xe([1,2],j=>x(S,{key:j,value:j},null,8,["value"])),64))]),_:1},8,["modelValue"])]),_:1}),x(W,{label:"校验位"},{default:A(()=>[x(T,{modelValue:$(t).parity,"onUpdate:modelValue":k[5]||(k[5]=j=>$(t).parity=j),style:{width:"60px"}},{default:A(()=>[x(S,{label:"无",value:"none"}),x(S,{label:"奇校验",value:"odd"}),x(S,{label:"偶校验",value:"even"})]),_:1},8,["modelValue"])]),_:1}),x(W,{label:"流控制"},{default:A(()=>[x(T,{modelValue:$(t).flowControl,"onUpdate:modelValue":k[6]||(k[6]=j=>$(t).flowControl=j),style:{width:"60px"}},{default:A(()=>[x(S,{label:"无",value:"none"}),x(S,{label:"硬件流控",value:"hardware"})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model"]))])])}}}),yt=(n,e)=>{const t=n.__vccOpts||n;for(const[i,s]of e)t[i]=s;return t},$v=yt(_v,[["__scopeId","data-v-1bd72a3e"]]);var kv=s1(),Pv=r1(),Qv=o1();const Tv={class:"serial-log"},Av={class:"controls"},Cv={class:"received-bytes"},Ev=Oe({__name:"SerialLogTerm",setup(n){const e=en.getInstance(),i=Vn.getInstance().useConfig("display"),s=Zs(),r=ae(i.value),o=bs.getInstance();let a=[],l=new Uint8Array,u=null,c=0,h=null,d=null;const f=ae(0),p=()=>{h&&h.clear(),a=[],f.value=0},m=T=>{e.emit(He.SERIAL_SEND,new TextEncoder().encode(T))},O=T=>T?{background:"#1e1e1e",foreground:"#d4d4d4",selectionBackground:"#3a3a3a"}:{background:"#ffffff",foreground:"#000000",selectionBackground:"#d4d4d4"},y=()=>{h=new kv.Terminal({cursorBlink:!0,convertEol:!0,fontFamily:"Consolas,Liberation Mono,Menlo,Courier,monospace",fontSize:14,theme:O(s.value),scrollback:1e4});const T=new Qv.SearchAddon;h.loadAddon(T),d=new Pv.FitAddon,h.loadAddon(d),h.onData(m);const P=document.getElementById("terminal");P&&(h.open(P),h.write(`
\x1B[36m   _____           _       _   _______          _ 
  / ____|         (_)     | | |__   __|        | |
 | (___   ___ _ __ _  __ _| |    | | ___   ___ | |
  \\___ \\ / _ \\ '__| |/ _\` | |    | |/ _ \\ / _ \\| |
  ____) |  __/ |  | | (_| | |    | | (_) | (_) | |
 |_____/ \\___|_|  |_|\\__,_|_|    |_|\\___/ \\___/|_|

\x1B[0m
\x1B[35m=== Serial Tool ===\x1B[0m
\x1B[32m版本: v2.1.0\x1B[0m
\x1B[0m
功能特点:
- 🔌 支持串口和WebUSB设备连接
- 📝 实时数据收发显示
- 🎨 支持文本和HEX格式数据发送
- 📜 支持自定义脚本编写和执行
- 🎯 快捷发送功能
- ⚙️ 可配置的显示选项
- 🌙 暗色主题支持

\x1B[33m开始使用:
1. 点击顶部的连接按钮选择串口设备
2. 配置串口参数（波特率等）
3. 开始接收/发送数据\x1B[0m

`)),setTimeout(()=>{d==null||d.fit()},120)},b=T=>{T in r.value&&(r.value[T]=!r.value[T])},v=T=>{if(l=new Uint8Array([...l,...T]),f.value+=T.length,r.value.timeOut==0){g();return}if(u&&clearTimeout(u),c==0)c=Date.now();else if(Date.now()-c>=r.value.timeOut){c=0,g();return}u=window.setTimeout(()=>{c=0,g()},r.value.timeOut)},g=()=>{const T=o.formatLogMessage(l,r.value);h&&(requestAnimationFrame(()=>{h&&(h.write(T),r.value.autoScroll&&h.scrollToBottom())}),a.push(T)),l=new Uint8Array};Qe(s,T=>{h&&(h.options.theme=O(T))});const k=()=>{setTimeout(()=>{d==null||d.fit()},120)},S=T=>{if(h){let P=o.uint8ArrayToString(T);h.write(P)}};St(()=>{y(),e.on(He.SERIAL_DATA,v),e.on(He.TERM_WRITE,S),window.addEventListener("resize",k)}),Oi(()=>{e.off(He.SERIAL_DATA,v),e.off(He.TERM_WRITE,S),window.removeEventListener("resize",k),u&&clearTimeout(u),h&&h.dispose()});const Q=()=>{if(!h)return;const P=`serial-log-${new Date().toISOString().replace(/[:.]/g,"-")}.txt`,B=a.join(`
`),W=new Blob([B],{type:"text/plain;charset=utf-8"}),C=URL.createObjectURL(W),j=document.createElement("a");j.href=C,j.download=P,document.body.appendChild(j),j.click(),document.body.removeChild(j),URL.revokeObjectURL(C)};return(T,P)=>{const B=ie("el-button"),W=ie("el-button-group"),C=ie("el-input-number"),j=ie("el-tooltip");return G(),K("div",Tv,[q("div",Av,[x(W,{class:"me-2"},{default:A(()=>[x(B,{type:r.value.showTime?"primary":"default",size:"small",onClick:P[0]||(P[0]=w=>b("showTime"))},{default:A(()=>P[7]||(P[7]=[te(" 时间 ")])),_:1},8,["type"]),x(B,{type:r.value.showMs?"primary":"default",size:"small",onClick:P[1]||(P[1]=w=>b("showMs"))},{default:A(()=>P[8]||(P[8]=[te(" 毫秒 ")])),_:1},8,["type"]),x(B,{type:r.value.showHex?"primary":"default",size:"small",onClick:P[2]||(P[2]=w=>b("showHex"))},{default:A(()=>P[9]||(P[9]=[te(" HEX ")])),_:1},8,["type"]),x(B,{type:r.value.showText?"primary":"default",size:"small",onClick:P[3]||(P[3]=w=>b("showText"))},{default:A(()=>P[10]||(P[10]=[te(" TEXT ")])),_:1},8,["type"]),x(B,{type:r.value.showNewline?"primary":"default",size:"small",onClick:P[4]||(P[4]=w=>b("showNewline"))},{default:A(()=>P[11]||(P[11]=[te(" 换行 ")])),_:1},8,["type"])]),_:1}),x(W,{class:"me-2",style:{"white-space":"nowrap"}},{default:A(()=>[x(B,{type:r.value.autoScroll?"primary":"default",size:"small",onClick:P[5]||(P[5]=w=>b("autoScroll"))},{default:A(()=>P[12]||(P[12]=[te(" 自动滚动 ")])),_:1},8,["type"]),x(B,{type:"danger",size:"small",onClick:p},{default:A(()=>P[13]||(P[13]=[te(" 清空 ")])),_:1}),x(B,{type:"primary",size:"small",onClick:Q},{default:A(()=>P[14]||(P[14]=[te(" 导出 ")])),_:1})]),_:1}),x(j,{class:"box-item",effect:"dark",content:"分包超时时间(ms)",placement:"bottom"},{default:A(()=>[x(C,{modelValue:r.value.timeOut,"onUpdate:modelValue":P[6]||(P[6]=w=>r.value.timeOut=w),min:0,max:3e3,step:5,size:"small"},{prefix:A(()=>P[15]||(P[15]=[])),suffix:A(()=>P[16]||(P[16]=[q("span",null,"ms",-1)])),_:1},8,["modelValue"])]),_:1}),q("div",Cv,[q("span",null,"接收: "+ve(f.value)+" 字节",1)])]),P[17]||(P[17]=q("div",{class:"terminal-container"},[q("div",{id:"terminal"})],-1))])}}}),Mv=yt(Ev,[["__scopeId","data-v-4cf5fd89"]]),Rv={class:"serial-send"},Zv={class:"controls"},Dv={class:"me-2",style:{display:"inline-block"}},Nv={class:"send-content"},Iv=Oe({__name:"SerialSend",setup(n){const e=en.getInstance(),i=Vn.getInstance().useConfig("send");let s=null;const r=bs.getInstance(),o=()=>{try{let h=i.value.content;i.value.addCRLF&&(h+=i.value.addCRLFType);let d=r.stringToUint8Array(h,i.value.isHexSend);i.value.addChecksum&&(d=r.appendChecksum(d)),e.emit(He.SERIAL_SEND,d),h&&!i.value.history.includes(i.value.content)&&(i.value.history.unshift(i.value.content),i.value.history.length>i.value.historyMaxLength&&i.value.history.pop())}catch(h){return console.error("发送数据时出错:",h),We.error("发送数据时出错"+h),e.emit(He.SERIAL_ERROR,{message:h instanceof Error?h.message:"发送数据时出错"}),!1}return!0},a=()=>{i.value.autoSend?s=window.setInterval(()=>{o()||(s&&(clearInterval(s),s=null),i.value.autoSend=!1)},i.value.autoSendInterval):s&&(clearInterval(s),s=null)},l=h=>{i.value.autoSendInterval=h,i.value.autoSend&&s&&(clearInterval(s),s=window.setInterval(o,h))};let u=-1;const c=h=>{if(!h.metaKey&&!h.ctrlKey&&!h.shiftKey&&h.key==="Enter")return o(),u=-1,h.preventDefault(),!1;const d=h.target;if(h.key==="ArrowUp"||h.key==="ArrowDown"){const f=d.selectionStart,m=!i.value.content.slice(0,f).includes(`
`);if(u==-1&&!m)return}else u=-1;h.key==="ArrowUp"?(h.preventDefault(),u===-1&&i.value.content.trim()&&!i.value.history.includes(i.value.content)&&(i.value.history.unshift(i.value.content),i.value.history.length>i.value.historyMaxLength&&i.value.history.pop()),i.value.history.length>0&&(u=Math.min(u+1,i.value.history.length-1),i.value.content=i.value.history[u],d.selectionStart=d.selectionEnd=0)):h.key==="ArrowDown"&&(h.preventDefault(),u>-1&&(u--,i.value.content=u===-1?"":i.value.history[u],d.selectionStart=d.selectionEnd=0))};return(h,d)=>{const f=ie("el-switch"),p=ie("el-checkbox"),m=ie("el-option"),O=ie("el-select"),y=ie("el-input-number"),b=ie("el-button"),v=ie("el-input");return G(),K("div",Rv,[q("div",Zv,[x(f,{modelValue:$(i).isHexSend,"onUpdate:modelValue":d[0]||(d[0]=g=>$(i).isHexSend=g),"active-text":"HEX","inactive-text":"TEXT",class:"me-2"},null,8,["modelValue"]),q("div",Dv,[x(p,{modelValue:$(i).addCRLF,"onUpdate:modelValue":d[1]||(d[1]=g=>$(i).addCRLF=g),label:"",class:"",style:{"vertical-align":"middle"}},null,8,["modelValue"]),x(O,{modelValue:$(i).addCRLFType,"onUpdate:modelValue":d[2]||(d[2]=g=>$(i).addCRLFType=g),size:"small",style:{width:"80px"},onChange:d[3]||(d[3]=g=>$(i).addCRLF=!0)},{default:A(()=>[x(m,{value:`\r
`,label:"CRLF(\\r\\n)"}),x(m,{value:"\r",label:"CR(\\r)"}),x(m,{value:`
`,label:"LF(\\n)"}),x(m,{value:`

`,label:"LF2(\\n\\n)"})]),_:1},8,["modelValue"])]),x(p,{modelValue:$(i).addChecksum,"onUpdate:modelValue":d[4]||(d[4]=g=>$(i).addChecksum=g),label:"校验和",class:"me-2"},null,8,["modelValue"]),x(p,{modelValue:$(i).autoSend,"onUpdate:modelValue":d[5]||(d[5]=g=>$(i).autoSend=g),onChange:a,label:"自动发送",class:"me-2"},null,8,["modelValue"]),x(y,{modelValue:$(i).autoSendInterval,"onUpdate:modelValue":d[6]||(d[6]=g=>$(i).autoSendInterval=g),step:100,onChange:l,size:"small",class:"me-2",title:"自动发送时间间隔"},{suffix:A(()=>d[8]||(d[8]=[q("span",null,"ms",-1)])),_:1},8,["modelValue"]),x(b,{type:"primary",onClick:o,class:"me-2"},{default:A(()=>d[9]||(d[9]=[te("发送")])),_:1})]),q("div",Nv,[x(v,{modelValue:$(i).content,"onUpdate:modelValue":d[7]||(d[7]=g=>$(i).content=g),type:"textarea",rows:5,placeholder:$(i).isHexSend?"请输入HEX格式数据，如：AA BB CC 11 22":"请输入要发送的文本",onKeydown:c},null,8,["modelValue","placeholder"])])])}}}),Lv=yt(Iv,[["__scopeId","data-v-f49a4901"]]),zv={class:"serial-log"},Vv=Oe({__name:"SerialLog",setup(n){return(e,t)=>(G(),K("div",zv,[x(Mv,{class:"serial-term"}),x(Lv,{class:"serial-send"})]))}}),Xv=yt(Vv,[["__scopeId","data-v-9a1e85ef"]]);function Wa(n){return em()?(Do(n),!0):!1}function An(n){return typeof n=="function"?n():$(n)}const Bv=typeof window<"u"&&typeof document<"u",Uv=n=>typeof n<"u",jv=Object.prototype.toString,Wv=n=>jv.call(n)==="[object Object]",qv=()=>{};function Yv(n,e){function t(...i){return new Promise((s,r)=>{Promise.resolve(n(()=>e.apply(this,i),{fn:e,thisArg:this,args:i})).then(s).catch(r)})}return t}const _m=n=>n();function Gv(n=_m){const e=ae(!0);function t(){e.value=!1}function i(){e.value=!0}const s=(...r)=>{e.value&&n(...r)};return{isActive:qy(e),pause:t,resume:i,eventFilter:s}}function Fh(n,e=!1,t="Timeout"){return new Promise((i,s)=>{setTimeout(e?()=>s(t):i,n)})}function Hv(n,e,t={}){const{eventFilter:i=_m,...s}=t;return Qe(n,Yv(i,e),s)}function ns(n,e,t={}){const{eventFilter:i,...s}=t,{eventFilter:r,pause:o,resume:a,isActive:l}=Gv(i);return{stop:Hv(n,e,{...s,eventFilter:r}),pause:o,resume:a,isActive:l}}function Fv(n,e={}){if(!ja(n))return jy(n);const t=Array.isArray(n.value)?Array.from({length:n.value.length}):{};for(const i in n.value)t[i]=Wy(()=>({get(){return n.value[i]},set(s){var r;if((r=An(e.replaceRef))!=null?r:!0)if(Array.isArray(n.value)){const a=[...n.value];a[i]=s,n.value=a}else{const a={...n.value,[i]:s};Object.setPrototypeOf(a,Object.getPrototypeOf(n.value)),n.value=a}else n.value[i]=s}}));return t}function Pu(n,e=!1){function t(h,{flush:d="sync",deep:f=!1,timeout:p,throwOnTimeout:m}={}){let O=null;const b=[new Promise(v=>{O=Qe(n,g=>{h(g)!==e&&(O==null||O(),v(g))},{flush:d,deep:f,immediate:!0})})];return p!=null&&b.push(Fh(p,m).then(()=>An(n)).finally(()=>O==null?void 0:O())),Promise.race(b)}function i(h,d){if(!ja(h))return t(g=>g===h,d);const{flush:f="sync",deep:p=!1,timeout:m,throwOnTimeout:O}=d??{};let y=null;const v=[new Promise(g=>{y=Qe([n,h],([k,S])=>{e!==(k===S)&&(y==null||y(),g(k))},{flush:f,deep:p,immediate:!0})})];return m!=null&&v.push(Fh(m,O).then(()=>An(n)).finally(()=>(y==null||y(),An(n)))),Promise.race(v)}function s(h){return t(d=>!!d,h)}function r(h){return i(null,h)}function o(h){return i(void 0,h)}function a(h){return t(Number.isNaN,h)}function l(h,d){return t(f=>{const p=Array.from(f);return p.includes(h)||p.includes(An(h))},d)}function u(h){return c(1,h)}function c(h=1,d){let f=-1;return t(()=>(f+=1,f>=h),d)}return Array.isArray(An(n))?{toMatch:t,toContains:l,changed:u,changedTimes:c,get not(){return Pu(n,!e)}}:{toMatch:t,toBe:i,toBeTruthy:s,toBeNull:r,toBeNaN:a,toBeUndefined:o,changed:u,changedTimes:c,get not(){return Pu(n,!e)}}}function Qu(n){return Pu(n)}function Kv(n){var e;const t=An(n);return(e=t==null?void 0:t.$el)!=null?e:t}const $m=Bv?window:void 0;function km(...n){let e,t,i,s;if(typeof n[0]=="string"||Array.isArray(n[0])?([t,i,s]=n,e=$m):[e,t,i,s]=n,!e)return qv;Array.isArray(t)||(t=[t]),Array.isArray(i)||(i=[i]);const r=[],o=()=>{r.forEach(c=>c()),r.length=0},a=(c,h,d,f)=>(c.addEventListener(h,d,f),()=>c.removeEventListener(h,d,f)),l=Qe(()=>[Kv(e),An(s)],([c,h])=>{if(o(),!c)return;const d=Wv(h)?{...h}:h;r.push(...t.flatMap(f=>i.map(p=>a(c,f,p,d))))},{immediate:!0,flush:"post"}),u=()=>{l(),o()};return Wa(u),u}function Jv(n){return typeof n=="function"?n:typeof n=="string"?e=>e.key===n:Array.isArray(n)?e=>n.includes(e.key):()=>!0}function Kh(...n){let e,t,i={};n.length===3?(e=n[0],t=n[1],i=n[2]):n.length===2?typeof n[1]=="object"?(e=!0,t=n[0],i=n[1]):(e=n[0],t=n[1]):(e=!0,t=n[0]);const{target:s=$m,eventName:r="keydown",passive:o=!1,dedupe:a=!1}=i,l=Jv(e);return km(s,r,c=>{c.repeat&&An(a)||l(c)&&t(c)},o)}function ew(n){return JSON.parse(JSON.stringify(n))}function Pl(n,e,t,i={}){var s,r,o;const{clone:a=!1,passive:l=!1,eventName:u,deep:c=!1,defaultValue:h,shouldEmit:d}=i,f=Br(),p=t||(f==null?void 0:f.emit)||((s=f==null?void 0:f.$emit)==null?void 0:s.bind(f))||((o=(r=f==null?void 0:f.proxy)==null?void 0:r.$emit)==null?void 0:o.bind(f==null?void 0:f.proxy));let m=u;e||(e="modelValue"),m=m||`update:${e.toString()}`;const O=v=>a?typeof a=="function"?a(v):ew(v):v,y=()=>Uv(n[e])?O(n[e]):h,b=v=>{d?d(v)&&p(m,v):p(m,v)};if(l){const v=y(),g=ae(v);let k=!1;return Qe(()=>n[e],S=>{k||(k=!0,g.value=O(S),Dn(()=>k=!1))}),Qe(g,S=>{!k&&(S!==n[e]||c)&&b(S)},{deep:c}),g}else return pe({get(){return y()},set(v){b(v)}})}var tw={value:()=>{}};function qa(){for(var n=0,e=arguments.length,t={},i;n<e;++n){if(!(i=arguments[n]+"")||i in t||/[\s.]/.test(i))throw new Error("illegal type: "+i);t[i]=[]}return new Lo(t)}function Lo(n){this._=n}function nw(n,e){return n.trim().split(/^|\s+/).map(function(t){var i="",s=t.indexOf(".");if(s>=0&&(i=t.slice(s+1),t=t.slice(0,s)),t&&!e.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:i}})}Lo.prototype=qa.prototype={constructor:Lo,on:function(n,e){var t=this._,i=nw(n+"",t),s,r=-1,o=i.length;if(arguments.length<2){for(;++r<o;)if((s=(n=i[r]).type)&&(s=iw(t[s],n.name)))return s;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++r<o;)if(s=(n=i[r]).type)t[s]=Jh(t[s],n.name,e);else if(e==null)for(s in t)t[s]=Jh(t[s],n.name,null);return this},copy:function(){var n={},e=this._;for(var t in e)n[t]=e[t].slice();return new Lo(n)},call:function(n,e){if((s=arguments.length-2)>0)for(var t=new Array(s),i=0,s,r;i<s;++i)t[i]=arguments[i+2];if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(r=this._[n],i=0,s=r.length;i<s;++i)r[i].value.apply(e,t)},apply:function(n,e,t){if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(var i=this._[n],s=0,r=i.length;s<r;++s)i[s].value.apply(e,t)}};function iw(n,e){for(var t=0,i=n.length,s;t<i;++t)if((s=n[t]).name===e)return s.value}function Jh(n,e,t){for(var i=0,s=n.length;i<s;++i)if(n[i].name===e){n[i]=tw,n=n.slice(0,i).concat(n.slice(i+1));break}return t!=null&&n.push({name:e,value:t}),n}var Tu="http://www.w3.org/1999/xhtml";const ed={svg:"http://www.w3.org/2000/svg",xhtml:Tu,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Ya(n){var e=n+="",t=e.indexOf(":");return t>=0&&(e=n.slice(0,t))!=="xmlns"&&(n=n.slice(t+1)),ed.hasOwnProperty(e)?{space:ed[e],local:n}:n}function sw(n){return function(){var e=this.ownerDocument,t=this.namespaceURI;return t===Tu&&e.documentElement.namespaceURI===Tu?e.createElement(n):e.createElementNS(t,n)}}function rw(n){return function(){return this.ownerDocument.createElementNS(n.space,n.local)}}function Pm(n){var e=Ya(n);return(e.local?rw:sw)(e)}function ow(){}function Hc(n){return n==null?ow:function(){return this.querySelector(n)}}function aw(n){typeof n!="function"&&(n=Hc(n));for(var e=this._groups,t=e.length,i=new Array(t),s=0;s<t;++s)for(var r=e[s],o=r.length,a=i[s]=new Array(o),l,u,c=0;c<o;++c)(l=r[c])&&(u=n.call(l,l.__data__,c,r))&&("__data__"in l&&(u.__data__=l.__data__),a[c]=u);return new Dt(i,this._parents)}function lw(n){return n==null?[]:Array.isArray(n)?n:Array.from(n)}function uw(){return[]}function Qm(n){return n==null?uw:function(){return this.querySelectorAll(n)}}function cw(n){return function(){return lw(n.apply(this,arguments))}}function hw(n){typeof n=="function"?n=cw(n):n=Qm(n);for(var e=this._groups,t=e.length,i=[],s=[],r=0;r<t;++r)for(var o=e[r],a=o.length,l,u=0;u<a;++u)(l=o[u])&&(i.push(n.call(l,l.__data__,u,o)),s.push(l));return new Dt(i,s)}function Tm(n){return function(){return this.matches(n)}}function Am(n){return function(e){return e.matches(n)}}var dw=Array.prototype.find;function fw(n){return function(){return dw.call(this.children,n)}}function pw(){return this.firstElementChild}function mw(n){return this.select(n==null?pw:fw(typeof n=="function"?n:Am(n)))}var gw=Array.prototype.filter;function Ow(){return Array.from(this.children)}function yw(n){return function(){return gw.call(this.children,n)}}function vw(n){return this.selectAll(n==null?Ow:yw(typeof n=="function"?n:Am(n)))}function ww(n){typeof n!="function"&&(n=Tm(n));for(var e=this._groups,t=e.length,i=new Array(t),s=0;s<t;++s)for(var r=e[s],o=r.length,a=i[s]=[],l,u=0;u<o;++u)(l=r[u])&&n.call(l,l.__data__,u,r)&&a.push(l);return new Dt(i,this._parents)}function Cm(n){return new Array(n.length)}function bw(){return new Dt(this._enter||this._groups.map(Cm),this._parents)}function ua(n,e){this.ownerDocument=n.ownerDocument,this.namespaceURI=n.namespaceURI,this._next=null,this._parent=n,this.__data__=e}ua.prototype={constructor:ua,appendChild:function(n){return this._parent.insertBefore(n,this._next)},insertBefore:function(n,e){return this._parent.insertBefore(n,e)},querySelector:function(n){return this._parent.querySelector(n)},querySelectorAll:function(n){return this._parent.querySelectorAll(n)}};function xw(n){return function(){return n}}function Sw(n,e,t,i,s,r){for(var o=0,a,l=e.length,u=r.length;o<u;++o)(a=e[o])?(a.__data__=r[o],i[o]=a):t[o]=new ua(n,r[o]);for(;o<l;++o)(a=e[o])&&(s[o]=a)}function _w(n,e,t,i,s,r,o){var a,l,u=new Map,c=e.length,h=r.length,d=new Array(c),f;for(a=0;a<c;++a)(l=e[a])&&(d[a]=f=o.call(l,l.__data__,a,e)+"",u.has(f)?s[a]=l:u.set(f,l));for(a=0;a<h;++a)f=o.call(n,r[a],a,r)+"",(l=u.get(f))?(i[a]=l,l.__data__=r[a],u.delete(f)):t[a]=new ua(n,r[a]);for(a=0;a<c;++a)(l=e[a])&&u.get(d[a])===l&&(s[a]=l)}function $w(n){return n.__data__}function kw(n,e){if(!arguments.length)return Array.from(this,$w);var t=e?_w:Sw,i=this._parents,s=this._groups;typeof n!="function"&&(n=xw(n));for(var r=s.length,o=new Array(r),a=new Array(r),l=new Array(r),u=0;u<r;++u){var c=i[u],h=s[u],d=h.length,f=Pw(n.call(c,c&&c.__data__,u,i)),p=f.length,m=a[u]=new Array(p),O=o[u]=new Array(p),y=l[u]=new Array(d);t(c,h,m,O,y,f,e);for(var b=0,v=0,g,k;b<p;++b)if(g=m[b]){for(b>=v&&(v=b+1);!(k=O[v])&&++v<p;);g._next=k||null}}return o=new Dt(o,i),o._enter=a,o._exit=l,o}function Pw(n){return typeof n=="object"&&"length"in n?n:Array.from(n)}function Qw(){return new Dt(this._exit||this._groups.map(Cm),this._parents)}function Tw(n,e,t){var i=this.enter(),s=this,r=this.exit();return typeof n=="function"?(i=n(i),i&&(i=i.selection())):i=i.append(n+""),e!=null&&(s=e(s),s&&(s=s.selection())),t==null?r.remove():t(r),i&&s?i.merge(s).order():s}function Aw(n){for(var e=n.selection?n.selection():n,t=this._groups,i=e._groups,s=t.length,r=i.length,o=Math.min(s,r),a=new Array(s),l=0;l<o;++l)for(var u=t[l],c=i[l],h=u.length,d=a[l]=new Array(h),f,p=0;p<h;++p)(f=u[p]||c[p])&&(d[p]=f);for(;l<s;++l)a[l]=t[l];return new Dt(a,this._parents)}function Cw(){for(var n=this._groups,e=-1,t=n.length;++e<t;)for(var i=n[e],s=i.length-1,r=i[s],o;--s>=0;)(o=i[s])&&(r&&o.compareDocumentPosition(r)^4&&r.parentNode.insertBefore(o,r),r=o);return this}function Ew(n){n||(n=Mw);function e(h,d){return h&&d?n(h.__data__,d.__data__):!h-!d}for(var t=this._groups,i=t.length,s=new Array(i),r=0;r<i;++r){for(var o=t[r],a=o.length,l=s[r]=new Array(a),u,c=0;c<a;++c)(u=o[c])&&(l[c]=u);l.sort(e)}return new Dt(s,this._parents).order()}function Mw(n,e){return n<e?-1:n>e?1:n>=e?0:NaN}function Rw(){var n=arguments[0];return arguments[0]=this,n.apply(null,arguments),this}function Zw(){return Array.from(this)}function Dw(){for(var n=this._groups,e=0,t=n.length;e<t;++e)for(var i=n[e],s=0,r=i.length;s<r;++s){var o=i[s];if(o)return o}return null}function Nw(){let n=0;for(const e of this)++n;return n}function Iw(){return!this.node()}function Lw(n){for(var e=this._groups,t=0,i=e.length;t<i;++t)for(var s=e[t],r=0,o=s.length,a;r<o;++r)(a=s[r])&&n.call(a,a.__data__,r,s);return this}function zw(n){return function(){this.removeAttribute(n)}}function Vw(n){return function(){this.removeAttributeNS(n.space,n.local)}}function Xw(n,e){return function(){this.setAttribute(n,e)}}function Bw(n,e){return function(){this.setAttributeNS(n.space,n.local,e)}}function Uw(n,e){return function(){var t=e.apply(this,arguments);t==null?this.removeAttribute(n):this.setAttribute(n,t)}}function jw(n,e){return function(){var t=e.apply(this,arguments);t==null?this.removeAttributeNS(n.space,n.local):this.setAttributeNS(n.space,n.local,t)}}function Ww(n,e){var t=Ya(n);if(arguments.length<2){var i=this.node();return t.local?i.getAttributeNS(t.space,t.local):i.getAttribute(t)}return this.each((e==null?t.local?Vw:zw:typeof e=="function"?t.local?jw:Uw:t.local?Bw:Xw)(t,e))}function Em(n){return n.ownerDocument&&n.ownerDocument.defaultView||n.document&&n||n.defaultView}function qw(n){return function(){this.style.removeProperty(n)}}function Yw(n,e,t){return function(){this.style.setProperty(n,e,t)}}function Gw(n,e,t){return function(){var i=e.apply(this,arguments);i==null?this.style.removeProperty(n):this.style.setProperty(n,i,t)}}function Hw(n,e,t){return arguments.length>1?this.each((e==null?qw:typeof e=="function"?Gw:Yw)(n,e,t??"")):xs(this.node(),n)}function xs(n,e){return n.style.getPropertyValue(e)||Em(n).getComputedStyle(n,null).getPropertyValue(e)}function Fw(n){return function(){delete this[n]}}function Kw(n,e){return function(){this[n]=e}}function Jw(n,e){return function(){var t=e.apply(this,arguments);t==null?delete this[n]:this[n]=t}}function eb(n,e){return arguments.length>1?this.each((e==null?Fw:typeof e=="function"?Jw:Kw)(n,e)):this.node()[n]}function Mm(n){return n.trim().split(/^|\s+/)}function Fc(n){return n.classList||new Rm(n)}function Rm(n){this._node=n,this._names=Mm(n.getAttribute("class")||"")}Rm.prototype={add:function(n){var e=this._names.indexOf(n);e<0&&(this._names.push(n),this._node.setAttribute("class",this._names.join(" ")))},remove:function(n){var e=this._names.indexOf(n);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(n){return this._names.indexOf(n)>=0}};function Zm(n,e){for(var t=Fc(n),i=-1,s=e.length;++i<s;)t.add(e[i])}function Dm(n,e){for(var t=Fc(n),i=-1,s=e.length;++i<s;)t.remove(e[i])}function tb(n){return function(){Zm(this,n)}}function nb(n){return function(){Dm(this,n)}}function ib(n,e){return function(){(e.apply(this,arguments)?Zm:Dm)(this,n)}}function sb(n,e){var t=Mm(n+"");if(arguments.length<2){for(var i=Fc(this.node()),s=-1,r=t.length;++s<r;)if(!i.contains(t[s]))return!1;return!0}return this.each((typeof e=="function"?ib:e?tb:nb)(t,e))}function rb(){this.textContent=""}function ob(n){return function(){this.textContent=n}}function ab(n){return function(){var e=n.apply(this,arguments);this.textContent=e??""}}function lb(n){return arguments.length?this.each(n==null?rb:(typeof n=="function"?ab:ob)(n)):this.node().textContent}function ub(){this.innerHTML=""}function cb(n){return function(){this.innerHTML=n}}function hb(n){return function(){var e=n.apply(this,arguments);this.innerHTML=e??""}}function db(n){return arguments.length?this.each(n==null?ub:(typeof n=="function"?hb:cb)(n)):this.node().innerHTML}function fb(){this.nextSibling&&this.parentNode.appendChild(this)}function pb(){return this.each(fb)}function mb(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function gb(){return this.each(mb)}function Ob(n){var e=typeof n=="function"?n:Pm(n);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function yb(){return null}function vb(n,e){var t=typeof n=="function"?n:Pm(n),i=e==null?yb:typeof e=="function"?e:Hc(e);return this.select(function(){return this.insertBefore(t.apply(this,arguments),i.apply(this,arguments)||null)})}function wb(){var n=this.parentNode;n&&n.removeChild(this)}function bb(){return this.each(wb)}function xb(){var n=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(n,this.nextSibling):n}function Sb(){var n=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(n,this.nextSibling):n}function _b(n){return this.select(n?Sb:xb)}function $b(n){return arguments.length?this.property("__data__",n):this.node().__data__}function kb(n){return function(e){n.call(this,e,this.__data__)}}function Pb(n){return n.trim().split(/^|\s+/).map(function(e){var t="",i=e.indexOf(".");return i>=0&&(t=e.slice(i+1),e=e.slice(0,i)),{type:e,name:t}})}function Qb(n){return function(){var e=this.__on;if(e){for(var t=0,i=-1,s=e.length,r;t<s;++t)r=e[t],(!n.type||r.type===n.type)&&r.name===n.name?this.removeEventListener(r.type,r.listener,r.options):e[++i]=r;++i?e.length=i:delete this.__on}}}function Tb(n,e,t){return function(){var i=this.__on,s,r=kb(e);if(i){for(var o=0,a=i.length;o<a;++o)if((s=i[o]).type===n.type&&s.name===n.name){this.removeEventListener(s.type,s.listener,s.options),this.addEventListener(s.type,s.listener=r,s.options=t),s.value=e;return}}this.addEventListener(n.type,r,t),s={type:n.type,name:n.name,value:e,listener:r,options:t},i?i.push(s):this.__on=[s]}}function Ab(n,e,t){var i=Pb(n+""),s,r=i.length,o;if(arguments.length<2){var a=this.node().__on;if(a){for(var l=0,u=a.length,c;l<u;++l)for(s=0,c=a[l];s<r;++s)if((o=i[s]).type===c.type&&o.name===c.name)return c.value}return}for(a=e?Tb:Qb,s=0;s<r;++s)this.each(a(i[s],e,t));return this}function Nm(n,e,t){var i=Em(n),s=i.CustomEvent;typeof s=="function"?s=new s(e,t):(s=i.document.createEvent("Event"),t?(s.initEvent(e,t.bubbles,t.cancelable),s.detail=t.detail):s.initEvent(e,!1,!1)),n.dispatchEvent(s)}function Cb(n,e){return function(){return Nm(this,n,e)}}function Eb(n,e){return function(){return Nm(this,n,e.apply(this,arguments))}}function Mb(n,e){return this.each((typeof e=="function"?Eb:Cb)(n,e))}function*Rb(){for(var n=this._groups,e=0,t=n.length;e<t;++e)for(var i=n[e],s=0,r=i.length,o;s<r;++s)(o=i[s])&&(yield o)}var Im=[null];function Dt(n,e){this._groups=n,this._parents=e}function Ur(){return new Dt([[document.documentElement]],Im)}function Zb(){return this}Dt.prototype=Ur.prototype={constructor:Dt,select:aw,selectAll:hw,selectChild:mw,selectChildren:vw,filter:ww,data:kw,enter:bw,exit:Qw,join:Tw,merge:Aw,selection:Zb,order:Cw,sort:Ew,call:Rw,nodes:Zw,node:Dw,size:Nw,empty:Iw,each:Lw,attr:Ww,style:Hw,property:eb,classed:sb,text:lb,html:db,raise:pb,lower:gb,append:Ob,insert:vb,remove:bb,clone:_b,datum:$b,on:Ab,dispatch:Mb,[Symbol.iterator]:Rb};function Gt(n){return typeof n=="string"?new Dt([[document.querySelector(n)]],[document.documentElement]):new Dt([[n]],Im)}function Db(n){let e;for(;e=n.sourceEvent;)n=e;return n}function dn(n,e){if(n=Db(n),e===void 0&&(e=n.currentTarget),e){var t=e.ownerSVGElement||e;if(t.createSVGPoint){var i=t.createSVGPoint();return i.x=n.clientX,i.y=n.clientY,i=i.matrixTransform(e.getScreenCTM().inverse()),[i.x,i.y]}if(e.getBoundingClientRect){var s=e.getBoundingClientRect();return[n.clientX-s.left-e.clientLeft,n.clientY-s.top-e.clientTop]}}return[n.pageX,n.pageY]}const Nb={passive:!1},br={capture:!0,passive:!1};function Ql(n){n.stopImmediatePropagation()}function cs(n){n.preventDefault(),n.stopImmediatePropagation()}function Lm(n){var e=n.document.documentElement,t=Gt(n).on("dragstart.drag",cs,br);"onselectstart"in e?t.on("selectstart.drag",cs,br):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function zm(n,e){var t=n.document.documentElement,i=Gt(n).on("dragstart.drag",null);e&&(i.on("click.drag",cs,br),setTimeout(function(){i.on("click.drag",null)},0)),"onselectstart"in t?i.on("selectstart.drag",null):(t.style.MozUserSelect=t.__noselect,delete t.__noselect)}const no=n=>()=>n;function Au(n,{sourceEvent:e,subject:t,target:i,identifier:s,active:r,x:o,y:a,dx:l,dy:u,dispatch:c}){Object.defineProperties(this,{type:{value:n,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},subject:{value:t,enumerable:!0,configurable:!0},target:{value:i,enumerable:!0,configurable:!0},identifier:{value:s,enumerable:!0,configurable:!0},active:{value:r,enumerable:!0,configurable:!0},x:{value:o,enumerable:!0,configurable:!0},y:{value:a,enumerable:!0,configurable:!0},dx:{value:l,enumerable:!0,configurable:!0},dy:{value:u,enumerable:!0,configurable:!0},_:{value:c}})}Au.prototype.on=function(){var n=this._.on.apply(this._,arguments);return n===this._?this:n};function Ib(n){return!n.ctrlKey&&!n.button}function Lb(){return this.parentNode}function zb(n,e){return e??{x:n.x,y:n.y}}function Vb(){return navigator.maxTouchPoints||"ontouchstart"in this}function Xb(){var n=Ib,e=Lb,t=zb,i=Vb,s={},r=qa("start","drag","end"),o=0,a,l,u,c,h=0;function d(g){g.on("mousedown.drag",f).filter(i).on("touchstart.drag",O).on("touchmove.drag",y,Nb).on("touchend.drag touchcancel.drag",b).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function f(g,k){if(!(c||!n.call(this,g,k))){var S=v(this,e.call(this,g,k),g,k,"mouse");S&&(Gt(g.view).on("mousemove.drag",p,br).on("mouseup.drag",m,br),Lm(g.view),Ql(g),u=!1,a=g.clientX,l=g.clientY,S("start",g))}}function p(g){if(cs(g),!u){var k=g.clientX-a,S=g.clientY-l;u=k*k+S*S>h}s.mouse("drag",g)}function m(g){Gt(g.view).on("mousemove.drag mouseup.drag",null),zm(g.view,u),cs(g),s.mouse("end",g)}function O(g,k){if(n.call(this,g,k)){var S=g.changedTouches,Q=e.call(this,g,k),T=S.length,P,B;for(P=0;P<T;++P)(B=v(this,Q,g,k,S[P].identifier,S[P]))&&(Ql(g),B("start",g,S[P]))}}function y(g){var k=g.changedTouches,S=k.length,Q,T;for(Q=0;Q<S;++Q)(T=s[k[Q].identifier])&&(cs(g),T("drag",g,k[Q]))}function b(g){var k=g.changedTouches,S=k.length,Q,T;for(c&&clearTimeout(c),c=setTimeout(function(){c=null},500),Q=0;Q<S;++Q)(T=s[k[Q].identifier])&&(Ql(g),T("end",g,k[Q]))}function v(g,k,S,Q,T,P){var B=r.copy(),W=dn(P||S,k),C,j,w;if((w=t.call(g,new Au("beforestart",{sourceEvent:S,target:d,identifier:T,active:o,x:W[0],y:W[1],dx:0,dy:0,dispatch:B}),Q))!=null)return C=w.x-W[0]||0,j=w.y-W[1]||0,function R(_,D,N){var U=W,V;switch(_){case"start":s[T]=R,V=o++;break;case"end":delete s[T],--o;case"drag":W=dn(N||D,k),V=o;break}B.call(_,g,new Au(_,{sourceEvent:D,subject:w,target:d,identifier:T,active:V,x:W[0]+C,y:W[1]+j,dx:W[0]-U[0],dy:W[1]-U[1],dispatch:B}),Q)}}return d.filter=function(g){return arguments.length?(n=typeof g=="function"?g:no(!!g),d):n},d.container=function(g){return arguments.length?(e=typeof g=="function"?g:no(g),d):e},d.subject=function(g){return arguments.length?(t=typeof g=="function"?g:no(g),d):t},d.touchable=function(g){return arguments.length?(i=typeof g=="function"?g:no(!!g),d):i},d.on=function(){var g=r.on.apply(r,arguments);return g===r?d:g},d.clickDistance=function(g){return arguments.length?(h=(g=+g)*g,d):Math.sqrt(h)},d}function Kc(n,e,t){n.prototype=e.prototype=t,t.constructor=n}function Vm(n,e){var t=Object.create(n.prototype);for(var i in e)t[i]=e[i];return t}function jr(){}var xr=.7,ca=1/xr,hs="\\s*([+-]?\\d+)\\s*",Sr="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",On="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Bb=/^#([0-9a-f]{3,8})$/,Ub=new RegExp(`^rgb\\(${hs},${hs},${hs}\\)$`),jb=new RegExp(`^rgb\\(${On},${On},${On}\\)$`),Wb=new RegExp(`^rgba\\(${hs},${hs},${hs},${Sr}\\)$`),qb=new RegExp(`^rgba\\(${On},${On},${On},${Sr}\\)$`),Yb=new RegExp(`^hsl\\(${Sr},${On},${On}\\)$`),Gb=new RegExp(`^hsla\\(${Sr},${On},${On},${Sr}\\)$`),td={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Kc(jr,_r,{copy(n){return Object.assign(new this.constructor,this,n)},displayable(){return this.rgb().displayable()},hex:nd,formatHex:nd,formatHex8:Hb,formatHsl:Fb,formatRgb:id,toString:id});function nd(){return this.rgb().formatHex()}function Hb(){return this.rgb().formatHex8()}function Fb(){return Xm(this).formatHsl()}function id(){return this.rgb().formatRgb()}function _r(n){var e,t;return n=(n+"").trim().toLowerCase(),(e=Bb.exec(n))?(t=e[1].length,e=parseInt(e[1],16),t===6?sd(e):t===3?new Pt(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):t===8?io(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):t===4?io(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=Ub.exec(n))?new Pt(e[1],e[2],e[3],1):(e=jb.exec(n))?new Pt(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=Wb.exec(n))?io(e[1],e[2],e[3],e[4]):(e=qb.exec(n))?io(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=Yb.exec(n))?ad(e[1],e[2]/100,e[3]/100,1):(e=Gb.exec(n))?ad(e[1],e[2]/100,e[3]/100,e[4]):td.hasOwnProperty(n)?sd(td[n]):n==="transparent"?new Pt(NaN,NaN,NaN,0):null}function sd(n){return new Pt(n>>16&255,n>>8&255,n&255,1)}function io(n,e,t,i){return i<=0&&(n=e=t=NaN),new Pt(n,e,t,i)}function Kb(n){return n instanceof jr||(n=_r(n)),n?(n=n.rgb(),new Pt(n.r,n.g,n.b,n.opacity)):new Pt}function Cu(n,e,t,i){return arguments.length===1?Kb(n):new Pt(n,e,t,i??1)}function Pt(n,e,t,i){this.r=+n,this.g=+e,this.b=+t,this.opacity=+i}Kc(Pt,Cu,Vm(jr,{brighter(n){return n=n==null?ca:Math.pow(ca,n),new Pt(this.r*n,this.g*n,this.b*n,this.opacity)},darker(n){return n=n==null?xr:Math.pow(xr,n),new Pt(this.r*n,this.g*n,this.b*n,this.opacity)},rgb(){return this},clamp(){return new Pt(Ii(this.r),Ii(this.g),Ii(this.b),ha(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:rd,formatHex:rd,formatHex8:Jb,formatRgb:od,toString:od}));function rd(){return`#${Mi(this.r)}${Mi(this.g)}${Mi(this.b)}`}function Jb(){return`#${Mi(this.r)}${Mi(this.g)}${Mi(this.b)}${Mi((isNaN(this.opacity)?1:this.opacity)*255)}`}function od(){const n=ha(this.opacity);return`${n===1?"rgb(":"rgba("}${Ii(this.r)}, ${Ii(this.g)}, ${Ii(this.b)}${n===1?")":`, ${n})`}`}function ha(n){return isNaN(n)?1:Math.max(0,Math.min(1,n))}function Ii(n){return Math.max(0,Math.min(255,Math.round(n)||0))}function Mi(n){return n=Ii(n),(n<16?"0":"")+n.toString(16)}function ad(n,e,t,i){return i<=0?n=e=t=NaN:t<=0||t>=1?n=e=NaN:e<=0&&(n=NaN),new Ht(n,e,t,i)}function Xm(n){if(n instanceof Ht)return new Ht(n.h,n.s,n.l,n.opacity);if(n instanceof jr||(n=_r(n)),!n)return new Ht;if(n instanceof Ht)return n;n=n.rgb();var e=n.r/255,t=n.g/255,i=n.b/255,s=Math.min(e,t,i),r=Math.max(e,t,i),o=NaN,a=r-s,l=(r+s)/2;return a?(e===r?o=(t-i)/a+(t<i)*6:t===r?o=(i-e)/a+2:o=(e-t)/a+4,a/=l<.5?r+s:2-r-s,o*=60):a=l>0&&l<1?0:o,new Ht(o,a,l,n.opacity)}function ex(n,e,t,i){return arguments.length===1?Xm(n):new Ht(n,e,t,i??1)}function Ht(n,e,t,i){this.h=+n,this.s=+e,this.l=+t,this.opacity=+i}Kc(Ht,ex,Vm(jr,{brighter(n){return n=n==null?ca:Math.pow(ca,n),new Ht(this.h,this.s,this.l*n,this.opacity)},darker(n){return n=n==null?xr:Math.pow(xr,n),new Ht(this.h,this.s,this.l*n,this.opacity)},rgb(){var n=this.h%360+(this.h<0)*360,e=isNaN(n)||isNaN(this.s)?0:this.s,t=this.l,i=t+(t<.5?t:1-t)*e,s=2*t-i;return new Pt(Tl(n>=240?n-240:n+120,s,i),Tl(n,s,i),Tl(n<120?n+240:n-120,s,i),this.opacity)},clamp(){return new Ht(ld(this.h),so(this.s),so(this.l),ha(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const n=ha(this.opacity);return`${n===1?"hsl(":"hsla("}${ld(this.h)}, ${so(this.s)*100}%, ${so(this.l)*100}%${n===1?")":`, ${n})`}`}}));function ld(n){return n=(n||0)%360,n<0?n+360:n}function so(n){return Math.max(0,Math.min(1,n||0))}function Tl(n,e,t){return(n<60?e+(t-e)*n/60:n<180?t:n<240?e+(t-e)*(240-n)/60:e)*255}const Bm=n=>()=>n;function tx(n,e){return function(t){return n+t*e}}function nx(n,e,t){return n=Math.pow(n,t),e=Math.pow(e,t)-n,t=1/t,function(i){return Math.pow(n+i*e,t)}}function ix(n){return(n=+n)==1?Um:function(e,t){return t-e?nx(e,t,n):Bm(isNaN(e)?t:e)}}function Um(n,e){var t=e-n;return t?tx(n,t):Bm(isNaN(n)?e:n)}const ud=function n(e){var t=ix(e);function i(s,r){var o=t((s=Cu(s)).r,(r=Cu(r)).r),a=t(s.g,r.g),l=t(s.b,r.b),u=Um(s.opacity,r.opacity);return function(c){return s.r=o(c),s.g=a(c),s.b=l(c),s.opacity=u(c),s+""}}return i.gamma=n,i}(1);function Fn(n,e){return n=+n,e=+e,function(t){return n*(1-t)+e*t}}var Eu=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Al=new RegExp(Eu.source,"g");function sx(n){return function(){return n}}function rx(n){return function(e){return n(e)+""}}function ox(n,e){var t=Eu.lastIndex=Al.lastIndex=0,i,s,r,o=-1,a=[],l=[];for(n=n+"",e=e+"";(i=Eu.exec(n))&&(s=Al.exec(e));)(r=s.index)>t&&(r=e.slice(t,r),a[o]?a[o]+=r:a[++o]=r),(i=i[0])===(s=s[0])?a[o]?a[o]+=s:a[++o]=s:(a[++o]=null,l.push({i:o,x:Fn(i,s)})),t=Al.lastIndex;return t<e.length&&(r=e.slice(t),a[o]?a[o]+=r:a[++o]=r),a.length<2?l[0]?rx(l[0].x):sx(e):(e=l.length,function(u){for(var c=0,h;c<e;++c)a[(h=l[c]).i]=h.x(u);return a.join("")})}var cd=180/Math.PI,Mu={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function jm(n,e,t,i,s,r){var o,a,l;return(o=Math.sqrt(n*n+e*e))&&(n/=o,e/=o),(l=n*t+e*i)&&(t-=n*l,i-=e*l),(a=Math.sqrt(t*t+i*i))&&(t/=a,i/=a,l/=a),n*i<e*t&&(n=-n,e=-e,l=-l,o=-o),{translateX:s,translateY:r,rotate:Math.atan2(e,n)*cd,skewX:Math.atan(l)*cd,scaleX:o,scaleY:a}}var ro;function ax(n){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(n+"");return e.isIdentity?Mu:jm(e.a,e.b,e.c,e.d,e.e,e.f)}function lx(n){return n==null||(ro||(ro=document.createElementNS("http://www.w3.org/2000/svg","g")),ro.setAttribute("transform",n),!(n=ro.transform.baseVal.consolidate()))?Mu:(n=n.matrix,jm(n.a,n.b,n.c,n.d,n.e,n.f))}function Wm(n,e,t,i){function s(u){return u.length?u.pop()+" ":""}function r(u,c,h,d,f,p){if(u!==h||c!==d){var m=f.push("translate(",null,e,null,t);p.push({i:m-4,x:Fn(u,h)},{i:m-2,x:Fn(c,d)})}else(h||d)&&f.push("translate("+h+e+d+t)}function o(u,c,h,d){u!==c?(u-c>180?c+=360:c-u>180&&(u+=360),d.push({i:h.push(s(h)+"rotate(",null,i)-2,x:Fn(u,c)})):c&&h.push(s(h)+"rotate("+c+i)}function a(u,c,h,d){u!==c?d.push({i:h.push(s(h)+"skewX(",null,i)-2,x:Fn(u,c)}):c&&h.push(s(h)+"skewX("+c+i)}function l(u,c,h,d,f,p){if(u!==h||c!==d){var m=f.push(s(f)+"scale(",null,",",null,")");p.push({i:m-4,x:Fn(u,h)},{i:m-2,x:Fn(c,d)})}else(h!==1||d!==1)&&f.push(s(f)+"scale("+h+","+d+")")}return function(u,c){var h=[],d=[];return u=n(u),c=n(c),r(u.translateX,u.translateY,c.translateX,c.translateY,h,d),o(u.rotate,c.rotate,h,d),a(u.skewX,c.skewX,h,d),l(u.scaleX,u.scaleY,c.scaleX,c.scaleY,h,d),u=c=null,function(f){for(var p=-1,m=d.length,O;++p<m;)h[(O=d[p]).i]=O.x(f);return h.join("")}}}var ux=Wm(ax,"px, ","px)","deg)"),cx=Wm(lx,", ",")",")"),hx=1e-12;function hd(n){return((n=Math.exp(n))+1/n)/2}function dx(n){return((n=Math.exp(n))-1/n)/2}function fx(n){return((n=Math.exp(2*n))-1)/(n+1)}const px=function n(e,t,i){function s(r,o){var a=r[0],l=r[1],u=r[2],c=o[0],h=o[1],d=o[2],f=c-a,p=h-l,m=f*f+p*p,O,y;if(m<hx)y=Math.log(d/u)/e,O=function(Q){return[a+Q*f,l+Q*p,u*Math.exp(e*Q*y)]};else{var b=Math.sqrt(m),v=(d*d-u*u+i*m)/(2*u*t*b),g=(d*d-u*u-i*m)/(2*d*t*b),k=Math.log(Math.sqrt(v*v+1)-v),S=Math.log(Math.sqrt(g*g+1)-g);y=(S-k)/e,O=function(Q){var T=Q*y,P=hd(k),B=u/(t*b)*(P*fx(e*T+k)-dx(k));return[a+B*f,l+B*p,u*P/hd(e*T+k)]}}return O.duration=y*1e3*e/Math.SQRT2,O}return s.rho=function(r){var o=Math.max(.001,+r),a=o*o,l=a*a;return n(o,a,l)},s}(Math.SQRT2,2,4);var Ss=0,er=0,Ls=0,qm=1e3,da,tr,fa=0,Ui=0,Ga=0,$r=typeof performance=="object"&&performance.now?performance:Date,Ym=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(n){setTimeout(n,17)};function Jc(){return Ui||(Ym(mx),Ui=$r.now()+Ga)}function mx(){Ui=0}function pa(){this._call=this._time=this._next=null}pa.prototype=Gm.prototype={constructor:pa,restart:function(n,e,t){if(typeof n!="function")throw new TypeError("callback is not a function");t=(t==null?Jc():+t)+(e==null?0:+e),!this._next&&tr!==this&&(tr?tr._next=this:da=this,tr=this),this._call=n,this._time=t,Ru()},stop:function(){this._call&&(this._call=null,this._time=1/0,Ru())}};function Gm(n,e,t){var i=new pa;return i.restart(n,e,t),i}function gx(){Jc(),++Ss;for(var n=da,e;n;)(e=Ui-n._time)>=0&&n._call.call(void 0,e),n=n._next;--Ss}function dd(){Ui=(fa=$r.now())+Ga,Ss=er=0;try{gx()}finally{Ss=0,yx(),Ui=0}}function Ox(){var n=$r.now(),e=n-fa;e>qm&&(Ga-=e,fa=n)}function yx(){for(var n,e=da,t,i=1/0;e;)e._call?(i>e._time&&(i=e._time),n=e,e=e._next):(t=e._next,e._next=null,e=n?n._next=t:da=t);tr=n,Ru(i)}function Ru(n){if(!Ss){er&&(er=clearTimeout(er));var e=n-Ui;e>24?(n<1/0&&(er=setTimeout(dd,n-$r.now()-Ga)),Ls&&(Ls=clearInterval(Ls))):(Ls||(fa=$r.now(),Ls=setInterval(Ox,qm)),Ss=1,Ym(dd))}}function fd(n,e,t){var i=new pa;return e=e==null?0:+e,i.restart(s=>{i.stop(),n(s+e)},e,t),i}var vx=qa("start","end","cancel","interrupt"),wx=[],Hm=0,pd=1,Zu=2,zo=3,md=4,Du=5,Vo=6;function Ha(n,e,t,i,s,r){var o=n.__transition;if(!o)n.__transition={};else if(t in o)return;bx(n,t,{name:e,index:i,group:s,on:vx,tween:wx,time:r.time,delay:r.delay,duration:r.duration,ease:r.ease,timer:null,state:Hm})}function eh(n,e){var t=sn(n,e);if(t.state>Hm)throw new Error("too late; already scheduled");return t}function bn(n,e){var t=sn(n,e);if(t.state>zo)throw new Error("too late; already running");return t}function sn(n,e){var t=n.__transition;if(!t||!(t=t[e]))throw new Error("transition not found");return t}function bx(n,e,t){var i=n.__transition,s;i[e]=t,t.timer=Gm(r,0,t.time);function r(u){t.state=pd,t.timer.restart(o,t.delay,t.time),t.delay<=u&&o(u-t.delay)}function o(u){var c,h,d,f;if(t.state!==pd)return l();for(c in i)if(f=i[c],f.name===t.name){if(f.state===zo)return fd(o);f.state===md?(f.state=Vo,f.timer.stop(),f.on.call("interrupt",n,n.__data__,f.index,f.group),delete i[c]):+c<e&&(f.state=Vo,f.timer.stop(),f.on.call("cancel",n,n.__data__,f.index,f.group),delete i[c])}if(fd(function(){t.state===zo&&(t.state=md,t.timer.restart(a,t.delay,t.time),a(u))}),t.state=Zu,t.on.call("start",n,n.__data__,t.index,t.group),t.state===Zu){for(t.state=zo,s=new Array(d=t.tween.length),c=0,h=-1;c<d;++c)(f=t.tween[c].value.call(n,n.__data__,t.index,t.group))&&(s[++h]=f);s.length=h+1}}function a(u){for(var c=u<t.duration?t.ease.call(null,u/t.duration):(t.timer.restart(l),t.state=Du,1),h=-1,d=s.length;++h<d;)s[h].call(n,c);t.state===Du&&(t.on.call("end",n,n.__data__,t.index,t.group),l())}function l(){t.state=Vo,t.timer.stop(),delete i[e];for(var u in i)return;delete n.__transition}}function Xo(n,e){var t=n.__transition,i,s,r=!0,o;if(t){e=e==null?null:e+"";for(o in t){if((i=t[o]).name!==e){r=!1;continue}s=i.state>Zu&&i.state<Du,i.state=Vo,i.timer.stop(),i.on.call(s?"interrupt":"cancel",n,n.__data__,i.index,i.group),delete t[o]}r&&delete n.__transition}}function xx(n){return this.each(function(){Xo(this,n)})}function Sx(n,e){var t,i;return function(){var s=bn(this,n),r=s.tween;if(r!==t){i=t=r;for(var o=0,a=i.length;o<a;++o)if(i[o].name===e){i=i.slice(),i.splice(o,1);break}}s.tween=i}}function _x(n,e,t){var i,s;if(typeof t!="function")throw new Error;return function(){var r=bn(this,n),o=r.tween;if(o!==i){s=(i=o).slice();for(var a={name:e,value:t},l=0,u=s.length;l<u;++l)if(s[l].name===e){s[l]=a;break}l===u&&s.push(a)}r.tween=s}}function $x(n,e){var t=this._id;if(n+="",arguments.length<2){for(var i=sn(this.node(),t).tween,s=0,r=i.length,o;s<r;++s)if((o=i[s]).name===n)return o.value;return null}return this.each((e==null?Sx:_x)(t,n,e))}function th(n,e,t){var i=n._id;return n.each(function(){var s=bn(this,i);(s.value||(s.value={}))[e]=t.apply(this,arguments)}),function(s){return sn(s,i).value[e]}}function Fm(n,e){var t;return(typeof e=="number"?Fn:e instanceof _r?ud:(t=_r(e))?(e=t,ud):ox)(n,e)}function kx(n){return function(){this.removeAttribute(n)}}function Px(n){return function(){this.removeAttributeNS(n.space,n.local)}}function Qx(n,e,t){var i,s=t+"",r;return function(){var o=this.getAttribute(n);return o===s?null:o===i?r:r=e(i=o,t)}}function Tx(n,e,t){var i,s=t+"",r;return function(){var o=this.getAttributeNS(n.space,n.local);return o===s?null:o===i?r:r=e(i=o,t)}}function Ax(n,e,t){var i,s,r;return function(){var o,a=t(this),l;return a==null?void this.removeAttribute(n):(o=this.getAttribute(n),l=a+"",o===l?null:o===i&&l===s?r:(s=l,r=e(i=o,a)))}}function Cx(n,e,t){var i,s,r;return function(){var o,a=t(this),l;return a==null?void this.removeAttributeNS(n.space,n.local):(o=this.getAttributeNS(n.space,n.local),l=a+"",o===l?null:o===i&&l===s?r:(s=l,r=e(i=o,a)))}}function Ex(n,e){var t=Ya(n),i=t==="transform"?cx:Fm;return this.attrTween(n,typeof e=="function"?(t.local?Cx:Ax)(t,i,th(this,"attr."+n,e)):e==null?(t.local?Px:kx)(t):(t.local?Tx:Qx)(t,i,e))}function Mx(n,e){return function(t){this.setAttribute(n,e.call(this,t))}}function Rx(n,e){return function(t){this.setAttributeNS(n.space,n.local,e.call(this,t))}}function Zx(n,e){var t,i;function s(){var r=e.apply(this,arguments);return r!==i&&(t=(i=r)&&Rx(n,r)),t}return s._value=e,s}function Dx(n,e){var t,i;function s(){var r=e.apply(this,arguments);return r!==i&&(t=(i=r)&&Mx(n,r)),t}return s._value=e,s}function Nx(n,e){var t="attr."+n;if(arguments.length<2)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;var i=Ya(n);return this.tween(t,(i.local?Zx:Dx)(i,e))}function Ix(n,e){return function(){eh(this,n).delay=+e.apply(this,arguments)}}function Lx(n,e){return e=+e,function(){eh(this,n).delay=e}}function zx(n){var e=this._id;return arguments.length?this.each((typeof n=="function"?Ix:Lx)(e,n)):sn(this.node(),e).delay}function Vx(n,e){return function(){bn(this,n).duration=+e.apply(this,arguments)}}function Xx(n,e){return e=+e,function(){bn(this,n).duration=e}}function Bx(n){var e=this._id;return arguments.length?this.each((typeof n=="function"?Vx:Xx)(e,n)):sn(this.node(),e).duration}function Ux(n,e){if(typeof e!="function")throw new Error;return function(){bn(this,n).ease=e}}function jx(n){var e=this._id;return arguments.length?this.each(Ux(e,n)):sn(this.node(),e).ease}function Wx(n,e){return function(){var t=e.apply(this,arguments);if(typeof t!="function")throw new Error;bn(this,n).ease=t}}function qx(n){if(typeof n!="function")throw new Error;return this.each(Wx(this._id,n))}function Yx(n){typeof n!="function"&&(n=Tm(n));for(var e=this._groups,t=e.length,i=new Array(t),s=0;s<t;++s)for(var r=e[s],o=r.length,a=i[s]=[],l,u=0;u<o;++u)(l=r[u])&&n.call(l,l.__data__,u,r)&&a.push(l);return new Xn(i,this._parents,this._name,this._id)}function Gx(n){if(n._id!==this._id)throw new Error;for(var e=this._groups,t=n._groups,i=e.length,s=t.length,r=Math.min(i,s),o=new Array(i),a=0;a<r;++a)for(var l=e[a],u=t[a],c=l.length,h=o[a]=new Array(c),d,f=0;f<c;++f)(d=l[f]||u[f])&&(h[f]=d);for(;a<i;++a)o[a]=e[a];return new Xn(o,this._parents,this._name,this._id)}function Hx(n){return(n+"").trim().split(/^|\s+/).every(function(e){var t=e.indexOf(".");return t>=0&&(e=e.slice(0,t)),!e||e==="start"})}function Fx(n,e,t){var i,s,r=Hx(e)?eh:bn;return function(){var o=r(this,n),a=o.on;a!==i&&(s=(i=a).copy()).on(e,t),o.on=s}}function Kx(n,e){var t=this._id;return arguments.length<2?sn(this.node(),t).on.on(n):this.each(Fx(t,n,e))}function Jx(n){return function(){var e=this.parentNode;for(var t in this.__transition)if(+t!==n)return;e&&e.removeChild(this)}}function eS(){return this.on("end.remove",Jx(this._id))}function tS(n){var e=this._name,t=this._id;typeof n!="function"&&(n=Hc(n));for(var i=this._groups,s=i.length,r=new Array(s),o=0;o<s;++o)for(var a=i[o],l=a.length,u=r[o]=new Array(l),c,h,d=0;d<l;++d)(c=a[d])&&(h=n.call(c,c.__data__,d,a))&&("__data__"in c&&(h.__data__=c.__data__),u[d]=h,Ha(u[d],e,t,d,u,sn(c,t)));return new Xn(r,this._parents,e,t)}function nS(n){var e=this._name,t=this._id;typeof n!="function"&&(n=Qm(n));for(var i=this._groups,s=i.length,r=[],o=[],a=0;a<s;++a)for(var l=i[a],u=l.length,c,h=0;h<u;++h)if(c=l[h]){for(var d=n.call(c,c.__data__,h,l),f,p=sn(c,t),m=0,O=d.length;m<O;++m)(f=d[m])&&Ha(f,e,t,m,d,p);r.push(d),o.push(c)}return new Xn(r,o,e,t)}var iS=Ur.prototype.constructor;function sS(){return new iS(this._groups,this._parents)}function rS(n,e){var t,i,s;return function(){var r=xs(this,n),o=(this.style.removeProperty(n),xs(this,n));return r===o?null:r===t&&o===i?s:s=e(t=r,i=o)}}function Km(n){return function(){this.style.removeProperty(n)}}function oS(n,e,t){var i,s=t+"",r;return function(){var o=xs(this,n);return o===s?null:o===i?r:r=e(i=o,t)}}function aS(n,e,t){var i,s,r;return function(){var o=xs(this,n),a=t(this),l=a+"";return a==null&&(l=a=(this.style.removeProperty(n),xs(this,n))),o===l?null:o===i&&l===s?r:(s=l,r=e(i=o,a))}}function lS(n,e){var t,i,s,r="style."+e,o="end."+r,a;return function(){var l=bn(this,n),u=l.on,c=l.value[r]==null?a||(a=Km(e)):void 0;(u!==t||s!==c)&&(i=(t=u).copy()).on(o,s=c),l.on=i}}function uS(n,e,t){var i=(n+="")=="transform"?ux:Fm;return e==null?this.styleTween(n,rS(n,i)).on("end.style."+n,Km(n)):typeof e=="function"?this.styleTween(n,aS(n,i,th(this,"style."+n,e))).each(lS(this._id,n)):this.styleTween(n,oS(n,i,e),t).on("end.style."+n,null)}function cS(n,e,t){return function(i){this.style.setProperty(n,e.call(this,i),t)}}function hS(n,e,t){var i,s;function r(){var o=e.apply(this,arguments);return o!==s&&(i=(s=o)&&cS(n,o,t)),i}return r._value=e,r}function dS(n,e,t){var i="style."+(n+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(e==null)return this.tween(i,null);if(typeof e!="function")throw new Error;return this.tween(i,hS(n,e,t??""))}function fS(n){return function(){this.textContent=n}}function pS(n){return function(){var e=n(this);this.textContent=e??""}}function mS(n){return this.tween("text",typeof n=="function"?pS(th(this,"text",n)):fS(n==null?"":n+""))}function gS(n){return function(e){this.textContent=n.call(this,e)}}function OS(n){var e,t;function i(){var s=n.apply(this,arguments);return s!==t&&(e=(t=s)&&gS(s)),e}return i._value=n,i}function yS(n){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(n==null)return this.tween(e,null);if(typeof n!="function")throw new Error;return this.tween(e,OS(n))}function vS(){for(var n=this._name,e=this._id,t=Jm(),i=this._groups,s=i.length,r=0;r<s;++r)for(var o=i[r],a=o.length,l,u=0;u<a;++u)if(l=o[u]){var c=sn(l,e);Ha(l,n,t,u,o,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new Xn(i,this._parents,n,t)}function wS(){var n,e,t=this,i=t._id,s=t.size();return new Promise(function(r,o){var a={value:o},l={value:function(){--s===0&&r()}};t.each(function(){var u=bn(this,i),c=u.on;c!==n&&(e=(n=c).copy(),e._.cancel.push(a),e._.interrupt.push(a),e._.end.push(l)),u.on=e}),s===0&&r()})}var bS=0;function Xn(n,e,t,i){this._groups=n,this._parents=e,this._name=t,this._id=i}function Jm(){return++bS}var _n=Ur.prototype;Xn.prototype={constructor:Xn,select:tS,selectAll:nS,selectChild:_n.selectChild,selectChildren:_n.selectChildren,filter:Yx,merge:Gx,selection:sS,transition:vS,call:_n.call,nodes:_n.nodes,node:_n.node,size:_n.size,empty:_n.empty,each:_n.each,on:Kx,attr:Ex,attrTween:Nx,style:uS,styleTween:dS,text:mS,textTween:yS,remove:eS,tween:$x,delay:zx,duration:Bx,ease:jx,easeVarying:qx,end:wS,[Symbol.iterator]:_n[Symbol.iterator]};function xS(n){return((n*=2)<=1?n*n*n:(n-=2)*n*n+2)/2}var SS={time:null,delay:0,duration:250,ease:xS};function _S(n,e){for(var t;!(t=n.__transition)||!(t=t[e]);)if(!(n=n.parentNode))throw new Error(`transition ${e} not found`);return t}function $S(n){var e,t;n instanceof Xn?(e=n._id,n=n._name):(e=Jm(),(t=SS).time=Jc(),n=n==null?null:n+"");for(var i=this._groups,s=i.length,r=0;r<s;++r)for(var o=i[r],a=o.length,l,u=0;u<a;++u)(l=o[u])&&Ha(l,n,e,u,o,t||_S(l,e));return new Xn(i,this._parents,n,e)}Ur.prototype.interrupt=xx;Ur.prototype.transition=$S;const oo=n=>()=>n;function kS(n,{sourceEvent:e,target:t,transform:i,dispatch:s}){Object.defineProperties(this,{type:{value:n,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:t,enumerable:!0,configurable:!0},transform:{value:i,enumerable:!0,configurable:!0},_:{value:s}})}function En(n,e,t){this.k=n,this.x=e,this.y=t}En.prototype={constructor:En,scale:function(n){return n===1?this:new En(this.k*n,this.x,this.y)},translate:function(n,e){return n===0&e===0?this:new En(this.k,this.x+this.k*n,this.y+this.k*e)},apply:function(n){return[n[0]*this.k+this.x,n[1]*this.k+this.y]},applyX:function(n){return n*this.k+this.x},applyY:function(n){return n*this.k+this.y},invert:function(n){return[(n[0]-this.x)/this.k,(n[1]-this.y)/this.k]},invertX:function(n){return(n-this.x)/this.k},invertY:function(n){return(n-this.y)/this.k},rescaleX:function(n){return n.copy().domain(n.range().map(this.invertX,this).map(n.invert,n))},rescaleY:function(n){return n.copy().domain(n.range().map(this.invertY,this).map(n.invert,n))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var _s=new En(1,0,0);En.prototype;function Cl(n){n.stopImmediatePropagation()}function zs(n){n.preventDefault(),n.stopImmediatePropagation()}function PS(n){return(!n.ctrlKey||n.type==="wheel")&&!n.button}function QS(){var n=this;return n instanceof SVGElement?(n=n.ownerSVGElement||n,n.hasAttribute("viewBox")?(n=n.viewBox.baseVal,[[n.x,n.y],[n.x+n.width,n.y+n.height]]):[[0,0],[n.width.baseVal.value,n.height.baseVal.value]]):[[0,0],[n.clientWidth,n.clientHeight]]}function gd(){return this.__zoom||_s}function TS(n){return-n.deltaY*(n.deltaMode===1?.05:n.deltaMode?1:.002)*(n.ctrlKey?10:1)}function AS(){return navigator.maxTouchPoints||"ontouchstart"in this}function CS(n,e,t){var i=n.invertX(e[0][0])-t[0][0],s=n.invertX(e[1][0])-t[1][0],r=n.invertY(e[0][1])-t[0][1],o=n.invertY(e[1][1])-t[1][1];return n.translate(s>i?(i+s)/2:Math.min(0,i)||Math.max(0,s),o>r?(r+o)/2:Math.min(0,r)||Math.max(0,o))}function ES(){var n=PS,e=QS,t=CS,i=TS,s=AS,r=[0,1/0],o=[[-1/0,-1/0],[1/0,1/0]],a=250,l=px,u=qa("start","zoom","end"),c,h,d,f=500,p=150,m=0,O=10;function y(w){w.property("__zoom",gd).on("wheel.zoom",T,{passive:!1}).on("mousedown.zoom",P).on("dblclick.zoom",B).filter(s).on("touchstart.zoom",W).on("touchmove.zoom",C).on("touchend.zoom touchcancel.zoom",j).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}y.transform=function(w,R,_,D){var N=w.selection?w.selection():w;N.property("__zoom",gd),w!==N?k(w,R,_,D):N.interrupt().each(function(){S(this,arguments).event(D).start().zoom(null,typeof R=="function"?R.apply(this,arguments):R).end()})},y.scaleBy=function(w,R,_,D){y.scaleTo(w,function(){var N=this.__zoom.k,U=typeof R=="function"?R.apply(this,arguments):R;return N*U},_,D)},y.scaleTo=function(w,R,_,D){y.transform(w,function(){var N=e.apply(this,arguments),U=this.__zoom,V=_==null?g(N):typeof _=="function"?_.apply(this,arguments):_,Y=U.invert(V),E=typeof R=="function"?R.apply(this,arguments):R;return t(v(b(U,E),V,Y),N,o)},_,D)},y.translateBy=function(w,R,_,D){y.transform(w,function(){return t(this.__zoom.translate(typeof R=="function"?R.apply(this,arguments):R,typeof _=="function"?_.apply(this,arguments):_),e.apply(this,arguments),o)},null,D)},y.translateTo=function(w,R,_,D,N){y.transform(w,function(){var U=e.apply(this,arguments),V=this.__zoom,Y=D==null?g(U):typeof D=="function"?D.apply(this,arguments):D;return t(_s.translate(Y[0],Y[1]).scale(V.k).translate(typeof R=="function"?-R.apply(this,arguments):-R,typeof _=="function"?-_.apply(this,arguments):-_),U,o)},D,N)};function b(w,R){return R=Math.max(r[0],Math.min(r[1],R)),R===w.k?w:new En(R,w.x,w.y)}function v(w,R,_){var D=R[0]-_[0]*w.k,N=R[1]-_[1]*w.k;return D===w.x&&N===w.y?w:new En(w.k,D,N)}function g(w){return[(+w[0][0]+ +w[1][0])/2,(+w[0][1]+ +w[1][1])/2]}function k(w,R,_,D){w.on("start.zoom",function(){S(this,arguments).event(D).start()}).on("interrupt.zoom end.zoom",function(){S(this,arguments).event(D).end()}).tween("zoom",function(){var N=this,U=arguments,V=S(N,U).event(D),Y=e.apply(N,U),E=_==null?g(Y):typeof _=="function"?_.apply(N,U):_,X=Math.max(Y[1][0]-Y[0][0],Y[1][1]-Y[0][1]),H=N.__zoom,J=typeof R=="function"?R.apply(N,U):R,me=l(H.invert(E).concat(X/H.k),J.invert(E).concat(X/J.k));return function(oe){if(oe===1)oe=J;else{var xe=me(oe),ye=X/xe[2];oe=new En(ye,E[0]-xe[0]*ye,E[1]-xe[1]*ye)}V.zoom(null,oe)}})}function S(w,R,_){return!_&&w.__zooming||new Q(w,R)}function Q(w,R){this.that=w,this.args=R,this.active=0,this.sourceEvent=null,this.extent=e.apply(w,R),this.taps=0}Q.prototype={event:function(w){return w&&(this.sourceEvent=w),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(w,R){return this.mouse&&w!=="mouse"&&(this.mouse[1]=R.invert(this.mouse[0])),this.touch0&&w!=="touch"&&(this.touch0[1]=R.invert(this.touch0[0])),this.touch1&&w!=="touch"&&(this.touch1[1]=R.invert(this.touch1[0])),this.that.__zoom=R,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(w){var R=Gt(this.that).datum();u.call(w,this.that,new kS(w,{sourceEvent:this.sourceEvent,target:y,transform:this.that.__zoom,dispatch:u}),R)}};function T(w,...R){if(!n.apply(this,arguments))return;var _=S(this,R).event(w),D=this.__zoom,N=Math.max(r[0],Math.min(r[1],D.k*Math.pow(2,i.apply(this,arguments)))),U=dn(w);if(_.wheel)(_.mouse[0][0]!==U[0]||_.mouse[0][1]!==U[1])&&(_.mouse[1]=D.invert(_.mouse[0]=U)),clearTimeout(_.wheel);else{if(D.k===N)return;_.mouse=[U,D.invert(U)],Xo(this),_.start()}zs(w),_.wheel=setTimeout(V,p),_.zoom("mouse",t(v(b(D,N),_.mouse[0],_.mouse[1]),_.extent,o));function V(){_.wheel=null,_.end()}}function P(w,...R){if(d||!n.apply(this,arguments))return;var _=w.currentTarget,D=S(this,R,!0).event(w),N=Gt(w.view).on("mousemove.zoom",E,!0).on("mouseup.zoom",X,!0),U=dn(w,_),V=w.clientX,Y=w.clientY;Lm(w.view),Cl(w),D.mouse=[U,this.__zoom.invert(U)],Xo(this),D.start();function E(H){if(zs(H),!D.moved){var J=H.clientX-V,me=H.clientY-Y;D.moved=J*J+me*me>m}D.event(H).zoom("mouse",t(v(D.that.__zoom,D.mouse[0]=dn(H,_),D.mouse[1]),D.extent,o))}function X(H){N.on("mousemove.zoom mouseup.zoom",null),zm(H.view,D.moved),zs(H),D.event(H).end()}}function B(w,...R){if(n.apply(this,arguments)){var _=this.__zoom,D=dn(w.changedTouches?w.changedTouches[0]:w,this),N=_.invert(D),U=_.k*(w.shiftKey?.5:2),V=t(v(b(_,U),D,N),e.apply(this,R),o);zs(w),a>0?Gt(this).transition().duration(a).call(k,V,D,w):Gt(this).call(y.transform,V,D,w)}}function W(w,...R){if(n.apply(this,arguments)){var _=w.touches,D=_.length,N=S(this,R,w.changedTouches.length===D).event(w),U,V,Y,E;for(Cl(w),V=0;V<D;++V)Y=_[V],E=dn(Y,this),E=[E,this.__zoom.invert(E),Y.identifier],N.touch0?!N.touch1&&N.touch0[2]!==E[2]&&(N.touch1=E,N.taps=0):(N.touch0=E,U=!0,N.taps=1+!!c);c&&(c=clearTimeout(c)),U&&(N.taps<2&&(h=E[0],c=setTimeout(function(){c=null},f)),Xo(this),N.start())}}function C(w,...R){if(this.__zooming){var _=S(this,R).event(w),D=w.changedTouches,N=D.length,U,V,Y,E;for(zs(w),U=0;U<N;++U)V=D[U],Y=dn(V,this),_.touch0&&_.touch0[2]===V.identifier?_.touch0[0]=Y:_.touch1&&_.touch1[2]===V.identifier&&(_.touch1[0]=Y);if(V=_.that.__zoom,_.touch1){var X=_.touch0[0],H=_.touch0[1],J=_.touch1[0],me=_.touch1[1],oe=(oe=J[0]-X[0])*oe+(oe=J[1]-X[1])*oe,xe=(xe=me[0]-H[0])*xe+(xe=me[1]-H[1])*xe;V=b(V,Math.sqrt(oe/xe)),Y=[(X[0]+J[0])/2,(X[1]+J[1])/2],E=[(H[0]+me[0])/2,(H[1]+me[1])/2]}else if(_.touch0)Y=_.touch0[0],E=_.touch0[1];else return;_.zoom("touch",t(v(V,Y,E),_.extent,o))}}function j(w,...R){if(this.__zooming){var _=S(this,R).event(w),D=w.changedTouches,N=D.length,U,V;for(Cl(w),d&&clearTimeout(d),d=setTimeout(function(){d=null},f),U=0;U<N;++U)V=D[U],_.touch0&&_.touch0[2]===V.identifier?delete _.touch0:_.touch1&&_.touch1[2]===V.identifier&&delete _.touch1;if(_.touch1&&!_.touch0&&(_.touch0=_.touch1,delete _.touch1),_.touch0)_.touch0[1]=this.__zoom.invert(_.touch0[0]);else if(_.end(),_.taps===2&&(V=dn(V,this),Math.hypot(h[0]-V[0],h[1]-V[1])<O)){var Y=Gt(this).on("dblclick.zoom");Y&&Y.apply(this,arguments)}}}return y.wheelDelta=function(w){return arguments.length?(i=typeof w=="function"?w:oo(+w),y):i},y.filter=function(w){return arguments.length?(n=typeof w=="function"?w:oo(!!w),y):n},y.touchable=function(w){return arguments.length?(s=typeof w=="function"?w:oo(!!w),y):s},y.extent=function(w){return arguments.length?(e=typeof w=="function"?w:oo([[+w[0][0],+w[0][1]],[+w[1][0],+w[1][1]]]),y):e},y.scaleExtent=function(w){return arguments.length?(r[0]=+w[0],r[1]=+w[1],y):[r[0],r[1]]},y.translateExtent=function(w){return arguments.length?(o[0][0]=+w[0][0],o[1][0]=+w[1][0],o[0][1]=+w[0][1],o[1][1]=+w[1][1],y):[[o[0][0],o[0][1]],[o[1][0],o[1][1]]]},y.constrain=function(w){return arguments.length?(t=w,y):t},y.duration=function(w){return arguments.length?(a=+w,y):a},y.interpolate=function(w){return arguments.length?(l=w,y):l},y.on=function(){var w=u.on.apply(u,arguments);return w===u?y:w},y.clickDistance=function(w){return arguments.length?(m=(w=+w)*w,y):Math.sqrt(m)},y.tapDistance=function(w){return arguments.length?(O=+w,y):O},y}var ce=(n=>(n.Left="left",n.Top="top",n.Right="right",n.Bottom="bottom",n))(ce||{}),nh=(n=>(n.Partial="partial",n.Full="full",n))(nh||{}),_i=(n=>(n.Bezier="default",n.SimpleBezier="simple-bezier",n.Straight="straight",n.Step="step",n.SmoothStep="smoothstep",n))(_i||{}),ci=(n=>(n.Strict="strict",n.Loose="loose",n))(ci||{}),Nu=(n=>(n.Arrow="arrow",n.ArrowClosed="arrowclosed",n))(Nu||{}),mr=(n=>(n.Free="free",n.Vertical="vertical",n.Horizontal="horizontal",n))(mr||{}),eg=(n=>(n.TopLeft="top-left",n.TopCenter="top-center",n.TopRight="top-right",n.BottomLeft="bottom-left",n.BottomCenter="bottom-center",n.BottomRight="bottom-right",n))(eg||{});function Iu(n){var e,t;const i=((t=(e=n.composedPath)==null?void 0:e.call(n))==null?void 0:t[0])||n.target,s=typeof(i==null?void 0:i.hasAttribute)=="function"?i.hasAttribute("contenteditable"):!1,r=typeof(i==null?void 0:i.closest)=="function"?i.closest(".nokey"):null;return["INPUT","SELECT","TEXTAREA"].includes(i==null?void 0:i.nodeName)||s||!!r}function MS(n){return n.ctrlKey||n.metaKey||n.shiftKey}function Od(n,e,t,i){const s=e.replace("+",`
`).replace(`

`,`
+`).split(`
`).map(o=>o.trim().toLowerCase());if(s.length===1)return n.toLowerCase()===e.toLowerCase();i||t.add(n.toLowerCase());const r=s.every((o,a)=>t.has(o)&&Array.from(t.values())[a]===s[a]);return i&&t.delete(n.toLowerCase()),r}function RS(n,e){return t=>{if(!t.code&&!t.key)return!1;const i=ZS(t.code,n);return Array.isArray(n)?n.some(s=>Od(t[i],s,e,t.type==="keyup")):Od(t[i],n,e,t.type==="keyup")}}function ZS(n,e){return e.includes(n)?"code":"key"}function gr(n,e){const t=Me(()=>Ze(e==null?void 0:e.actInsideInputWithModifier)??!1),i=Me(()=>Ze(e==null?void 0:e.target)??window),s=ae(Ze(n)===!0);let r=!1;const o=new Set;let a=u(Ze(n));Qe(()=>Ze(n),(c,h)=>{typeof h=="boolean"&&typeof c!="boolean"&&l(),a=u(c)},{immediate:!0}),km(["blur","contextmenu"],l),Kh((...c)=>a(...c),c=>{r=MS(c),!((!r||r&&!t.value)&&Iu(c))&&(c.preventDefault(),s.value=!0)},{eventName:"keydown",target:i}),Kh((...c)=>a(...c),c=>{if(s.value){if((!r||r&&!t.value)&&Iu(c))return;r=!1,s.value=!1}},{eventName:"keyup",target:i});function l(){r=!1,o.clear(),s.value=Ze(n)===!0}function u(c){return c===null?(l(),()=>!1):typeof c=="boolean"?(l(),s.value=c,()=>!1):Array.isArray(c)||typeof c=="string"?RS(c,o):c}return s}const tg="vue-flow__node-desc",ng="vue-flow__edge-desc",DS="vue-flow__aria-live",ig=["Enter"," ","Escape"],ds={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};function ma(n){return{...n.computedPosition||{x:0,y:0},width:n.dimensions.width||0,height:n.dimensions.height||0}}function ga(n,e){const t=Math.max(0,Math.min(n.x+n.width,e.x+e.width)-Math.max(n.x,e.x)),i=Math.max(0,Math.min(n.y+n.height,e.y+e.height)-Math.max(n.y,e.y));return Math.ceil(t*i)}function Fa(n){return{width:n.offsetWidth,height:n.offsetHeight}}function Bn(n,e=0,t=1){return Math.min(Math.max(n,e),t)}function sg(n,e){return{x:Bn(n.x,e[0][0],e[1][0]),y:Bn(n.y,e[0][1],e[1][1])}}function yd(n){const e=n.getRootNode();return"elementFromPoint"in e?e:window.document}function hi(n){return n&&typeof n=="object"&&"id"in n&&"source"in n&&"target"in n}function Li(n){return n&&typeof n=="object"&&"id"in n&&"position"in n&&!hi(n)}function nr(n){return Li(n)&&"computedPosition"in n}function ao(n){return!Number.isNaN(n)&&Number.isFinite(n)}function NS(n){return ao(n.width)&&ao(n.height)&&ao(n.x)&&ao(n.y)}function IS(n,e,t){const i={id:n.id.toString(),type:n.type??"default",dimensions:cr({width:0,height:0}),computedPosition:cr({z:0,...n.position}),handleBounds:{source:[],target:[]},draggable:void 0,selectable:void 0,connectable:void 0,focusable:void 0,selected:!1,dragging:!1,resizing:!1,initialized:!1,isParent:!1,position:{x:0,y:0},data:it(n.data)?n.data:{},events:cr(it(n.events)?n.events:{})};return Object.assign(e??i,n,{id:n.id.toString(),parentNode:t})}function rg(n,e,t){var i,s;const r={id:n.id.toString(),type:n.type??(e==null?void 0:e.type)??"default",source:n.source.toString(),target:n.target.toString(),sourceHandle:(i=n.sourceHandle)==null?void 0:i.toString(),targetHandle:(s=n.targetHandle)==null?void 0:s.toString(),updatable:n.updatable??(t==null?void 0:t.updatable),selectable:n.selectable??(t==null?void 0:t.selectable),focusable:n.focusable??(t==null?void 0:t.focusable),data:it(n.data)?n.data:{},events:cr(it(n.events)?n.events:{}),label:n.label??"",interactionWidth:n.interactionWidth??(t==null?void 0:t.interactionWidth),...t??{}};return Object.assign(e??r,n,{id:n.id.toString()})}function og(n,e,t,i){const s=typeof n=="string"?n:n.id,r=new Set,o=i==="source"?"target":"source";for(const a of t)a[o]===s&&r.add(a[i]);return e.filter(a=>r.has(a.id))}function LS(...n){if(n.length===3){const[r,o,a]=n;return og(r,o,a,"target")}const[e,t]=n,i=typeof e=="string"?e:e.id;return t.filter(r=>hi(r)&&r.source===i).map(r=>t.find(o=>Li(o)&&o.id===r.target))}function zS(...n){if(n.length===3){const[r,o,a]=n;return og(r,o,a,"source")}const[e,t]=n,i=typeof e=="string"?e:e.id;return t.filter(r=>hi(r)&&r.target===i).map(r=>t.find(o=>Li(o)&&o.id===r.source))}function ag({source:n,sourceHandle:e,target:t,targetHandle:i}){return`vueflow__edge-${n}${e??""}-${t}${i??""}`}function VS(n,e){return e.some(t=>hi(t)&&t.source===n.source&&t.target===n.target&&(t.sourceHandle===n.sourceHandle||!t.sourceHandle&&!n.sourceHandle)&&(t.targetHandle===n.targetHandle||!t.targetHandle&&!n.targetHandle))}function Lu({x:n,y:e},{x:t,y:i,zoom:s}){return{x:n*s+t,y:e*s+i}}function kr({x:n,y:e},{x:t,y:i,zoom:s},r=!1,o=[1,1]){const a={x:(n-t)/s,y:(e-i)/s};return r?Ja(a,o):a}function lg(n,e){return{x:Math.min(n.x,e.x),y:Math.min(n.y,e.y),x2:Math.max(n.x2,e.x2),y2:Math.max(n.y2,e.y2)}}function Oa({x:n,y:e,width:t,height:i}){return{x:n,y:e,x2:n+t,y2:e+i}}function ug({x:n,y:e,x2:t,y2:i}){return{x:n,y:e,width:t-n,height:i-e}}function XS(n,e){return ug(lg(Oa(n),Oa(e)))}function Ka(n){let e={x:Number.POSITIVE_INFINITY,y:Number.POSITIVE_INFINITY,x2:Number.NEGATIVE_INFINITY,y2:Number.NEGATIVE_INFINITY};for(let t=0;t<n.length;t++){const i=n[t];e=lg(e,Oa({...i.computedPosition,...i.dimensions}))}return ug(e)}function cg(n,e,t={x:0,y:0,zoom:1},i=!1,s=!1){const r={...kr(e,t),width:e.width/t.zoom,height:e.height/t.zoom},o=[];for(const a of n){const{dimensions:l,selectable:u=!0,hidden:c=!1}=a,h=l.width??a.width??null,d=l.height??a.height??null;if(s&&!u||c)continue;const f=ga(r,ma(a)),p=h===null||d===null,m=i&&f>0,O=(h??0)*(d??0);(p||m||f>=O||a.dragging)&&o.push(a)}return o}function $i(n,e){const t=new Set;if(typeof n=="string")t.add(n);else if(n.length>=1)for(const i of n)t.add(i.id);return e.filter(i=>t.has(i.source)||t.has(i.target))}function vd(n,e,t,i,s,r=.1,o={x:0,y:0}){const a=e/(n.width*(1+r)),l=t/(n.height*(1+r)),u=Math.min(a,l),c=Bn(u,i,s),h=n.x+n.width/2,d=n.y+n.height/2,f=e/2-h*c+(o.x??0),p=t/2-d*c+(o.y??0);return{x:f,y:p,zoom:c}}function BS(n,e){return{x:e.x+n.x,y:e.y+n.y,z:(n.z>e.z?n.z:e.z)+1}}function hg(n,e){if(!n.parentNode)return!1;const t=e(n.parentNode);return t?t.selected?!0:hg(t,e):!1}function Pr(n,e){return typeof n>"u"?"":typeof n=="string"?n:`${e?`${e}__`:""}${Object.keys(n).sort().map(i=>`${i}=${n[i]}`).join("&")}`}function wd(n,e,t){return n<e?Bn(Math.abs(n-e),1,e)/e:n>t?-Bn(Math.abs(n-t),1,e)/e:0}function dg(n,e,t=15,i=40){const s=wd(n.x,i,e.width-i)*t,r=wd(n.y,i,e.height-i)*t;return[s,r]}function El(n,e){if(e){const t=n.position.x+n.dimensions.width-e.dimensions.width,i=n.position.y+n.dimensions.height-e.dimensions.height;if(t>0||i>0||n.position.x<0||n.position.y<0){let s={};if(typeof e.style=="function"?s={...e.style(e)}:e.style&&(s={...e.style}),s.width=s.width??`${e.dimensions.width}px`,s.height=s.height??`${e.dimensions.height}px`,t>0)if(typeof s.width=="string"){const r=Number(s.width.replace("px",""));s.width=`${r+t}px`}else s.width+=t;if(i>0)if(typeof s.height=="string"){const r=Number(s.height.replace("px",""));s.height=`${r+i}px`}else s.height+=i;if(n.position.x<0){const r=Math.abs(n.position.x);if(e.position.x=e.position.x-r,typeof s.width=="string"){const o=Number(s.width.replace("px",""));s.width=`${o+r}px`}else s.width+=r;n.position.x=0}if(n.position.y<0){const r=Math.abs(n.position.y);if(e.position.y=e.position.y-r,typeof s.height=="string"){const o=Number(s.height.replace("px",""));s.height=`${o+r}px`}else s.height+=r;n.position.y=0}e.dimensions.width=Number(s.width.toString().replace("px","")),e.dimensions.height=Number(s.height.toString().replace("px","")),typeof e.style=="function"?e.style=r=>{const o=e.style;return{...o(r),...s}}:e.style={...e.style,...s}}}}function bd(n,e){var t,i;const s=n.filter(o=>o.type==="add"||o.type==="remove");for(const o of s)if(o.type==="add")e.findIndex(l=>l.id===o.item.id)===-1&&e.push(o.item);else if(o.type==="remove"){const a=e.findIndex(l=>l.id===o.id);a!==-1&&e.splice(a,1)}const r=e.map(o=>o.id);for(const o of e)for(const a of n)if(a.id===o.id)switch(a.type){case"select":o.selected=a.selected;break;case"position":if(nr(o)&&(typeof a.position<"u"&&(o.position=a.position),typeof a.dragging<"u"&&(o.dragging=a.dragging),o.expandParent&&o.parentNode)){const l=e[r.indexOf(o.parentNode)];l&&nr(l)&&El(o,l)}break;case"dimensions":if(nr(o)&&(typeof a.dimensions<"u"&&(o.dimensions=a.dimensions),typeof a.updateStyle<"u"&&a.updateStyle&&(o.style={...o.style||{},width:`${(t=a.dimensions)==null?void 0:t.width}px`,height:`${(i=a.dimensions)==null?void 0:i.height}px`}),typeof a.resizing<"u"&&(o.resizing=a.resizing),o.expandParent&&o.parentNode)){const l=e[r.indexOf(o.parentNode)];l&&nr(l)&&(!!l.dimensions.width&&!!l.dimensions.height?El(o,l):Dn(()=>{El(o,l)}))}break}return e}function Gn(n,e){return{id:n,type:"select",selected:e}}function xd(n){return{item:n,type:"add"}}function Sd(n){return{id:n,type:"remove"}}function _d(n,e,t,i,s){return{id:n,source:e,target:t,sourceHandle:i||null,targetHandle:s||null,type:"remove"}}function Kn(n,e=new Set,t=!1){const i=[];for(const[s,r]of n){const o=e.has(s);!(r.selected===void 0&&!o)&&r.selected!==o&&(t&&(r.selected=o),i.push(Gn(r.id,o)))}return i}function se(n){const e=new Set;let t=!1;const i=()=>e.size>0;n&&(t=!0,e.add(n));const s=a=>{e.delete(a)};return{on:a=>{n&&t&&e.delete(n),e.add(a);const l=()=>{s(a),n&&t&&e.add(n)};return Wa(l),{off:l}},off:s,trigger:a=>Promise.all(Array.from(e).map(l=>l(a))),hasListeners:i,fns:e}}function $d(n,e,t){let i=n;do{if(i&&i.matches(e))return!0;if(i===t)return!1;i=i.parentElement}while(i);return!1}function US(n,e,t,i,s){var r,o;const a=[];for(const l of n)(l.selected||l.id===s)&&(!l.parentNode||!hg(l,i))&&(l.draggable||e&&typeof l.draggable>"u")&&a.push(cr({id:l.id,position:l.position||{x:0,y:0},distance:{x:t.x-((r=l.computedPosition)==null?void 0:r.x)||0,y:t.y-((o=l.computedPosition)==null?void 0:o.y)||0},from:l.computedPosition,extent:l.extent,parentNode:l.parentNode,dimensions:l.dimensions,expandParent:l.expandParent}));return a}function Ml({id:n,dragItems:e,findNode:t}){const i=[];for(const s of e){const r=t(s.id);r&&i.push(r)}return[n?i.find(s=>s.id===n):i[0],i]}function fg(n){if(Array.isArray(n))switch(n.length){case 1:return[n[0],n[0],n[0],n[0]];case 2:return[n[0],n[1],n[0],n[1]];case 3:return[n[0],n[1],n[2],n[1]];case 4:return n;default:return[0,0,0,0]}return[n,n,n,n]}function jS(n,e,t){const[i,s,r,o]=typeof n!="string"?fg(n.padding):[0,0,0,0];return t&&typeof t.computedPosition.x<"u"&&typeof t.computedPosition.y<"u"&&typeof t.dimensions.width<"u"&&typeof t.dimensions.height<"u"?[[t.computedPosition.x+o,t.computedPosition.y+i],[t.computedPosition.x+t.dimensions.width-s,t.computedPosition.y+t.dimensions.height-r]]:!1}function WS(n,e,t,i){let s=n.extent||t;if((s==="parent"||!Array.isArray(s)&&(s==null?void 0:s.range)==="parent")&&!n.expandParent)if(n.parentNode&&i&&n.dimensions.width&&n.dimensions.height){const r=jS(s,n,i);r&&(s=r)}else e(new lt(st.NODE_EXTENT_INVALID,n.id)),s=t;else if(Array.isArray(s)){const r=(i==null?void 0:i.computedPosition.x)||0,o=(i==null?void 0:i.computedPosition.y)||0;s=[[s[0][0]+r,s[0][1]+o],[s[1][0]+r,s[1][1]+o]]}else if(s!=="parent"&&(s!=null&&s.range)&&Array.isArray(s.range)){const[r,o,a,l]=fg(s.padding),u=(i==null?void 0:i.computedPosition.x)||0,c=(i==null?void 0:i.computedPosition.y)||0;s=[[s.range[0][0]+u+l,s.range[0][1]+c+r],[s.range[1][0]+u-o,s.range[1][1]+c-a]]}return s==="parent"?[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]]:s}function qS({width:n,height:e},t){return[t[0],[t[1][0]-(n||0),t[1][1]-(e||0)]]}function ih(n,e,t,i,s){const r=qS(n.dimensions,WS(n,t,i,s)),o=sg(e,r);return{position:{x:o.x-((s==null?void 0:s.computedPosition.x)||0),y:o.y-((s==null?void 0:s.computedPosition.y)||0)},computedPosition:o}}function $s(n,e,t=ce.Left,i=!1){const s=((e==null?void 0:e.x)??0)+n.computedPosition.x,r=((e==null?void 0:e.y)??0)+n.computedPosition.y,{width:o,height:a}=e??HS(n);if(i)return{x:s+o/2,y:r+a/2};switch((e==null?void 0:e.position)??t){case ce.Top:return{x:s+o/2,y:r};case ce.Right:return{x:s+o,y:r+a/2};case ce.Bottom:return{x:s+o/2,y:r+a};case ce.Left:return{x:s,y:r+a/2}}}function kd(n,e){return n&&(e?n.find(t=>t.id===e):n[0])||null}function YS({sourcePos:n,targetPos:e,sourceWidth:t,sourceHeight:i,targetWidth:s,targetHeight:r,width:o,height:a,viewport:l}){const u={x:Math.min(n.x,e.x),y:Math.min(n.y,e.y),x2:Math.max(n.x+t,e.x+s),y2:Math.max(n.y+i,e.y+r)};u.x===u.x2&&(u.x2+=1),u.y===u.y2&&(u.y2+=1);const c=Oa({x:(0-l.x)/l.zoom,y:(0-l.y)/l.zoom,width:o/l.zoom,height:a/l.zoom}),h=Math.max(0,Math.min(c.x2,u.x2)-Math.max(c.x,u.x)),d=Math.max(0,Math.min(c.y2,u.y2)-Math.max(c.y,u.y));return Math.ceil(h*d)>0}function GS(n,e,t=!1){const i=typeof n.zIndex=="number";let s=i?n.zIndex:0;const r=e(n.source),o=e(n.target);return!r||!o?0:(t&&(s=i?n.zIndex:Math.max(r.computedPosition.z||0,o.computedPosition.z||0)),s)}var st=(n=>(n.MISSING_STYLES="MISSING_STYLES",n.MISSING_VIEWPORT_DIMENSIONS="MISSING_VIEWPORT_DIMENSIONS",n.NODE_INVALID="NODE_INVALID",n.NODE_NOT_FOUND="NODE_NOT_FOUND",n.NODE_MISSING_PARENT="NODE_MISSING_PARENT",n.NODE_TYPE_MISSING="NODE_TYPE_MISSING",n.NODE_EXTENT_INVALID="NODE_EXTENT_INVALID",n.EDGE_INVALID="EDGE_INVALID",n.EDGE_NOT_FOUND="EDGE_NOT_FOUND",n.EDGE_SOURCE_MISSING="EDGE_SOURCE_MISSING",n.EDGE_TARGET_MISSING="EDGE_TARGET_MISSING",n.EDGE_TYPE_MISSING="EDGE_TYPE_MISSING",n.EDGE_SOURCE_TARGET_SAME="EDGE_SOURCE_TARGET_SAME",n.EDGE_SOURCE_TARGET_MISSING="EDGE_SOURCE_TARGET_MISSING",n.EDGE_ORPHANED="EDGE_ORPHANED",n.USEVUEFLOW_OPTIONS="USEVUEFLOW_OPTIONS",n))(st||{});const Pd={MISSING_STYLES:()=>"It seems that you haven't loaded the necessary styles. Please import '@vue-flow/core/dist/style.css' to ensure that the graph is rendered correctly",MISSING_VIEWPORT_DIMENSIONS:()=>"The Vue Flow parent container needs a width and a height to render the graph",NODE_INVALID:n=>`Node is invalid
Node: ${n}`,NODE_NOT_FOUND:n=>`Node not found
Node: ${n}`,NODE_MISSING_PARENT:(n,e)=>`Node is missing a parent
Node: ${n}
Parent: ${e}`,NODE_TYPE_MISSING:n=>`Node type is missing
Type: ${n}`,NODE_EXTENT_INVALID:n=>`Only child nodes can use a parent extent
Node: ${n}`,EDGE_INVALID:n=>`An edge needs a source and a target
Edge: ${n}`,EDGE_SOURCE_MISSING:(n,e)=>`Edge source is missing
Edge: ${n} 
Source: ${e}`,EDGE_TARGET_MISSING:(n,e)=>`Edge target is missing
Edge: ${n} 
Target: ${e}`,EDGE_TYPE_MISSING:n=>`Edge type is missing
Type: ${n}`,EDGE_SOURCE_TARGET_SAME:(n,e,t)=>`Edge source and target are the same
Edge: ${n} 
Source: ${e} 
Target: ${t}`,EDGE_SOURCE_TARGET_MISSING:(n,e,t)=>`Edge source or target is missing
Edge: ${n} 
Source: ${e} 
Target: ${t}`,EDGE_ORPHANED:n=>`Edge was orphaned (suddenly missing source or target) and has been removed
Edge: ${n}`,EDGE_NOT_FOUND:n=>`Edge not found
Edge: ${n}`,USEVUEFLOW_OPTIONS:()=>"The options parameter is deprecated and will be removed in the next major version. Please use the id parameter instead"};class lt extends Error{constructor(e,...t){var i;super((i=Pd[e])==null?void 0:i.call(Pd,...t)),this.name="VueFlowError",this.code=e,this.args=t}}function sh(n){return"clientX"in n}function pg(n){return"sourceEvent"in n}function ui(n,e){var t,i;const s=sh(n),r=s?n.clientX:(t=n.touches)==null?void 0:t[0].clientX,o=s?n.clientY:(i=n.touches)==null?void 0:i[0].clientY;return{x:r-((e==null?void 0:e.left)??0),y:o-((e==null?void 0:e.top)??0)}}const ya=()=>{var n;return typeof navigator<"u"&&((n=navigator==null?void 0:navigator.userAgent)==null?void 0:n.indexOf("Mac"))>=0};function HS(n){var e,t;return{width:((e=n.dimensions)==null?void 0:e.width)??n.width??0,height:((t=n.dimensions)==null?void 0:t.height)??n.height??0}}function Ja(n,e=[1,1]){return{x:e[0]*Math.round(n.x/e[0]),y:e[1]*Math.round(n.y/e[1])}}const FS=()=>!0;function Rl(n){n==null||n.classList.remove("valid","connecting","vue-flow__handle-valid","vue-flow__handle-connecting")}function KS(n,e,t){const i=[],s={x:n.x-t,y:n.y-t,width:t*2,height:t*2};for(const r of e.values())ga(s,ma(r))>0&&i.push(r);return i}const JS=250;function e_(n,e,t,i){var s,r;let o=[],a=Number.POSITIVE_INFINITY;const l=KS(n,t,e+JS);for(const u of l){const c=[...((s=u.handleBounds)==null?void 0:s.source)??[],...((r=u.handleBounds)==null?void 0:r.target)??[]];for(const h of c){if(i.nodeId===h.nodeId&&i.type===h.type&&i.id===h.id)continue;const{x:d,y:f}=$s(u,h,h.position,!0),p=Math.sqrt((d-n.x)**2+(f-n.y)**2);p>e||(p<a?(o=[{...h,x:d,y:f}],a=p):p===a&&o.push({...h,x:d,y:f}))}}if(!o.length)return null;if(o.length>1){const u=i.type==="source"?"target":"source";return o.find(c=>c.type===u)??o[0]}return o[0]}function Qd(n,{handle:e,connectionMode:t,fromNodeId:i,fromHandleId:s,fromType:r,doc:o,lib:a,flowId:l,isValidConnection:u=FS},c,h,d){const f=r==="target",p=e?o.querySelector(`.${a}-flow__handle[data-id="${l}-${e==null?void 0:e.nodeId}-${e==null?void 0:e.id}-${e==null?void 0:e.type}"]`):null,{x:m,y:O}=ui(n),y=o.elementFromPoint(m,O),b=y!=null&&y.classList.contains(`${a}-flow__handle`)?y:p,v={handleDomNode:b,isValid:!1,connection:null,toHandle:null};if(b){const g=mg(void 0,b),k=b.getAttribute("data-nodeid"),S=b.getAttribute("data-handleid"),Q=b.classList.contains("connectable"),T=b.classList.contains("connectableend");if(!k||!g)return v;const P={source:f?k:i,sourceHandle:f?S:s,target:f?i:k,targetHandle:f?s:S};v.connection=P;const W=Q&&T&&(t===ci.Strict?f&&g==="source"||!f&&g==="target":k!==i||S!==s);v.isValid=W&&u(P,{nodes:h,edges:c,sourceNode:d(i),targetNode:d(k)}),v.toHandle=e}return v}function mg(n,e){return n||(e!=null&&e.classList.contains("target")?"target":e!=null&&e.classList.contains("source")?"source":null)}function t_(n,e){let t=null;return e?t="valid":n&&!e&&(t="invalid"),t}function n_(n,e){let t=null;return e?t=!0:n&&!e&&(t=!1),t}function i_(n,e,t,i,s,r=!1){var o,a,l;const u=i.get(n);if(!u)return null;const c=s===ci.Strict?(o=u.handleBounds)==null?void 0:o[e]:[...((a=u.handleBounds)==null?void 0:a.source)??[],...((l=u.handleBounds)==null?void 0:l.target)??[]],h=(t?c==null?void 0:c.find(d=>d.id===t):c==null?void 0:c[0])??null;return h&&r?{...h,...$s(u,h,h.position,!0)}:h}const zu={[ce.Left]:ce.Right,[ce.Right]:ce.Left,[ce.Top]:ce.Bottom,[ce.Bottom]:ce.Top},s_=["production","prod"];function el(n,...e){gg()&&console.warn(`[Vue Flow]: ${n}`,...e)}function gg(){return!s_.includes("production")}function Td(n,e,t,i){const s=e.querySelectorAll(`.vue-flow__handle.${n}`);return Array.from(s).map(o=>{const a=o.getBoundingClientRect();return{id:o.getAttribute("data-handleid"),position:o.getAttribute("data-handlepos"),nodeId:o.getAttribute("data-nodeid"),type:n,x:(a.left-t.left)/i,y:(a.top-t.top)/i,...Fa(o)}})}function Vu(n,e,t,i,s,r=!1,o){s.value=!1,n.selected?(r||n.selected&&e)&&(i([n]),Dn(()=>{o.blur()})):t([n])}function it(n){return typeof $(n)<"u"}function r_(n,e,t,i){if(!n||!n.source||!n.target)return t(new lt(st.EDGE_INVALID,(n==null?void 0:n.id)??"[ID UNKNOWN]")),!1;let s;return hi(n)?s=n:s={...n,id:ag(n)},s=rg(s,void 0,i),VS(s,e)?!1:s}function o_(n,e,t,i,s){if(!e.source||!e.target)return s(new lt(st.EDGE_INVALID,n.id)),!1;if(!t)return s(new lt(st.EDGE_NOT_FOUND,n.id)),!1;const{id:r,...o}=n;return{...o,id:i?ag(e):r,source:e.source,target:e.target,sourceHandle:e.sourceHandle,targetHandle:e.targetHandle}}function Ad(n,e,t){const i={},s=[];for(let r=0;r<n.length;++r){const o=n[r];if(!Li(o)){t(new lt(st.NODE_INVALID,o==null?void 0:o.id)||`[ID UNKNOWN|INDEX ${r}]`);continue}const a=IS(o,e(o.id),o.parentNode);o.parentNode&&(i[o.parentNode]=!0),s[r]=a}for(const r of s){const o=e(r.parentNode)||s.find(a=>a.id===r.parentNode);r.parentNode&&!o&&t(new lt(st.NODE_MISSING_PARENT,r.id,r.parentNode)),(r.parentNode||i[r.id])&&(i[r.id]&&(r.isParent=!0),o&&(o.isParent=!0))}return s}function Cd(n,e,t,i,s,r){let o=s;const a=i.get(o)||new Map;i.set(o,a.set(t,e)),o=`${s}-${n}`;const l=i.get(o)||new Map;if(i.set(o,l.set(t,e)),r){o=`${s}-${n}-${r}`;const u=i.get(o)||new Map;i.set(o,u.set(t,e))}}function Zl(n,e,t){n.clear(),e.clear();for(const i of t){const{source:s,target:r,sourceHandle:o=null,targetHandle:a=null}=i,l={edgeId:i.id,source:s,target:r,sourceHandle:o,targetHandle:a},u=`${s}-${o}--${r}-${a}`,c=`${r}-${a}--${s}-${o}`;Cd("source",l,c,n,s,o),Cd("target",l,u,n,r,a),e.set(i.id,i)}}function Ed(n,e){if(n.size!==e.size)return!1;for(const t of n)if(!e.has(t))return!1;return!0}function Dl(n,e,t,i,s,r,o,a){const l=[];for(const u of n){const c=hi(u)?u:r_(u,a,s,r);if(!c)continue;const h=t(c.source),d=t(c.target);if(!h||!d){s(new lt(st.EDGE_SOURCE_TARGET_MISSING,c.id,c.source,c.target));continue}if(!h){s(new lt(st.EDGE_SOURCE_MISSING,c.id,c.source));continue}if(!d){s(new lt(st.EDGE_TARGET_MISSING,c.id,c.target));continue}if(e&&!e(c,{edges:a,nodes:o,sourceNode:h,targetNode:d})){s(new lt(st.EDGE_INVALID,c.id));continue}const f=i(c.id);l.push({...rg(c,f,r),sourceNode:h,targetNode:d})}return l}const Md=Symbol("vueFlow"),tl=Symbol("nodeId"),Og=Symbol("nodeRef"),a_=Symbol("edgeId"),l_=Symbol("edgeRef"),nl=Symbol("slots");function yg(n){const{vueFlowRef:e,snapToGrid:t,snapGrid:i,noDragClassName:s,nodes:r,nodeExtent:o,nodeDragThreshold:a,viewport:l,autoPanOnNodeDrag:u,autoPanSpeed:c,nodesDraggable:h,panBy:d,findNode:f,multiSelectionActive:p,nodesSelectionActive:m,selectNodesOnDrag:O,removeSelectedElements:y,addSelectedNodes:b,updateNodePositions:v,emits:g}=Le(),{onStart:k,onDrag:S,onStop:Q,onClick:T,el:P,disabled:B,id:W,selectable:C,dragHandle:j}=n,w=ae(!1);let R=[],_,D=null,N={x:void 0,y:void 0},U={x:0,y:0},V=null,Y=!1,E=0,X=!1;const H=vg(),J=({x:he,y:le})=>{N={x:he,y:le};let we=!1;if(R=R.map(Z=>{const M={x:he-Z.distance.x,y:le-Z.distance.y},{computedPosition:z}=ih(Z,t.value?Ja(M,i.value):M,g.error,o.value,Z.parentNode?f(Z.parentNode):void 0);return we=we||Z.position.x!==z.x||Z.position.y!==z.y,Z.position=z,Z}),!!we&&(v(R,!0,!0),w.value=!0,V)){const[Z,M]=Ml({id:W,dragItems:R,findNode:f});S({event:V,node:Z,nodes:M})}},me=()=>{if(!D)return;const[he,le]=dg(U,D,c.value);if(he!==0||le!==0){const we={x:(N.x??0)-he/l.value.zoom,y:(N.y??0)-le/l.value.zoom};d({x:he,y:le})&&J(we)}E=requestAnimationFrame(me)},oe=(he,le)=>{Y=!0;const we=f(W);!O.value&&!p.value&&we&&(we.selected||y()),we&&Ze(C)&&O.value&&Vu(we,p.value,b,y,m,!1,le);const Z=H(he.sourceEvent);if(N=Z,R=US(r.value,h.value,Z,f,W),R.length){const[M,z]=Ml({id:W,dragItems:R,findNode:f});k({event:he.sourceEvent,node:M,nodes:z})}},xe=(he,le)=>{var we;he.sourceEvent.type==="touchmove"&&he.sourceEvent.touches.length>1||(a.value===0&&oe(he,le),N=H(he.sourceEvent),D=((we=e.value)==null?void 0:we.getBoundingClientRect())||null,U=ui(he.sourceEvent,D))},ye=(he,le)=>{const we=H(he.sourceEvent);if(!X&&Y&&u.value&&(X=!0,me()),!Y){const Z=we.xSnapped-(N.x??0),M=we.ySnapped-(N.y??0);Math.sqrt(Z*Z+M*M)>a.value&&oe(he,le)}(N.x!==we.xSnapped||N.y!==we.ySnapped)&&R.length&&Y&&(V=he.sourceEvent,U=ui(he.sourceEvent,D),J(we))},Re=he=>{if(!pg(he)&&!Y&&!w.value&&!p.value){const le=he,we=H(le),Z=we.xSnapped-(N.x??0),M=we.ySnapped-(N.y??0),z=Math.sqrt(Z*Z+M*M);z!==0&&z<=a.value&&(T==null||T(le));return}if(w.value=!1,X=!1,Y=!1,N={x:void 0,y:void 0},cancelAnimationFrame(E),R.length){v(R,!1,!1);const[le,we]=Ml({id:W,dragItems:R,findNode:f});Q({event:he.sourceEvent,node:le,nodes:we})}};return Qe([()=>Ze(B),P],([he,le],we,Z)=>{if(le){const M=Gt(le);he||(_=Xb().on("start",z=>xe(z,le)).on("drag",z=>ye(z,le)).on("end",z=>Re(z)).filter(z=>{const L=z.target,F=Ze(j);return!z.button&&(!s.value||!$d(L,`.${s.value}`,le)&&(!F||$d(L,F,le)))}),M.call(_)),Z(()=>{M.on(".drag",null),_&&(_.on("start",null),_.on("drag",null),_.on("end",null))})}}),w}function u_(){return{doubleClick:se(),click:se(),mouseEnter:se(),mouseMove:se(),mouseLeave:se(),contextMenu:se(),updateStart:se(),update:se(),updateEnd:se()}}function c_(n,e){const t=u_();return t.doubleClick.on(i=>{var s,r;e.edgeDoubleClick(i),(r=(s=n.events)==null?void 0:s.doubleClick)==null||r.call(s,i)}),t.click.on(i=>{var s,r;e.edgeClick(i),(r=(s=n.events)==null?void 0:s.click)==null||r.call(s,i)}),t.mouseEnter.on(i=>{var s,r;e.edgeMouseEnter(i),(r=(s=n.events)==null?void 0:s.mouseEnter)==null||r.call(s,i)}),t.mouseMove.on(i=>{var s,r;e.edgeMouseMove(i),(r=(s=n.events)==null?void 0:s.mouseMove)==null||r.call(s,i)}),t.mouseLeave.on(i=>{var s,r;e.edgeMouseLeave(i),(r=(s=n.events)==null?void 0:s.mouseLeave)==null||r.call(s,i)}),t.contextMenu.on(i=>{var s,r;e.edgeContextMenu(i),(r=(s=n.events)==null?void 0:s.contextMenu)==null||r.call(s,i)}),t.updateStart.on(i=>{var s,r;e.edgeUpdateStart(i),(r=(s=n.events)==null?void 0:s.updateStart)==null||r.call(s,i)}),t.update.on(i=>{var s,r;e.edgeUpdate(i),(r=(s=n.events)==null?void 0:s.update)==null||r.call(s,i)}),t.updateEnd.on(i=>{var s,r;e.edgeUpdateEnd(i),(r=(s=n.events)==null?void 0:s.updateEnd)==null||r.call(s,i)}),Object.entries(t).reduce((i,[s,r])=>(i.emit[s]=r.trigger,i.on[s]=r.on,i),{emit:{},on:{}})}function vg(){const{viewport:n,snapGrid:e,snapToGrid:t}=Le();return i=>{const s=pg(i)?i.sourceEvent:i,{x:r,y:o}=ui(s),a=kr({x:r,y:o},n.value),{x:l,y:u}=t.value?Ja(a,e.value):a;return{xSnapped:l,ySnapped:u,...a}}}function lo(){return!0}function wg({handleId:n,nodeId:e,type:t,isValidConnection:i,edgeUpdaterType:s,onEdgeUpdate:r,onEdgeUpdateEnd:o}){const{id:a,vueFlowRef:l,connectionMode:u,connectionRadius:c,connectOnClick:h,connectionClickStartHandle:d,nodesConnectable:f,autoPanOnConnect:p,autoPanSpeed:m,findNode:O,panBy:y,startConnection:b,updateConnection:v,endConnection:g,emits:k,viewport:S,edges:Q,nodes:T,isValidConnection:P,nodeLookup:B}=Le();let W=null,C=!1,j=null;function w(_){var D;const N=Ze(t)==="target",U=sh(_),V=yd(_.target);if(U&&_.button===0||!U){let Y=function(Se){Z=ui(Se,he),J=e_(kr(Z,S.value,!1,[1,1]),c.value,B.value,L),M||(z(),M=!0);const Ae=Qd(Se,{handle:J,connectionMode:u.value,fromNodeId:Ze(e),fromHandleId:Ze(n),fromType:N?"target":"source",isValidConnection:H,doc:V,lib:"vue",flowId:a,nodeLookup:B.value},Q.value,T.value,O);j=Ae.handleDomNode,W=Ae.connection,C=n_(!!J,Ae.isValid);const Ce={...fe,isValid:C,to:J&&C?Lu({x:J.x,y:J.y},S.value):Z,toHandle:Ae.toHandle,toPosition:C&&Ae.toHandle?Ae.toHandle.position:zu[L.position],toNode:Ae.toHandle?B.value.get(Ae.toHandle.nodeId):null};if(!(C&&J&&(fe!=null&&fe.toHandle)&&Ce.toHandle&&fe.toHandle.type===Ce.toHandle.type&&fe.toHandle.nodeId===Ce.toHandle.nodeId&&fe.toHandle.id===Ce.toHandle.id&&fe.to.x===Ce.to.x&&fe.to.y===Ce.to.y)){if(v(J&&C?Lu({x:J.x,y:J.y},S.value):Z,Ae.toHandle,t_(!!J,C)),fe=Ce,!J&&!C&&!j)return Rl(we);W&&W.source!==W.target&&j&&(Rl(we),we=j,j.classList.add("connecting","vue-flow__handle-connecting"),j.classList.toggle("valid",!!C),j.classList.toggle("vue-flow__handle-valid",!!C))}},E=function(Se){(J||j)&&W&&C&&(r?r(Se,W):k.connect(W)),k.connectEnd(Se),s&&(o==null||o(Se)),Rl(we),cancelAnimationFrame(me),g(Se),M=!1,C=!1,W=null,j=null,V.removeEventListener("mousemove",Y),V.removeEventListener("mouseup",E),V.removeEventListener("touchmove",Y),V.removeEventListener("touchend",E)};const X=O(Ze(e));let H=Ze(i)||P.value||lo;!H&&X&&(H=(N?X.isValidSourcePos:X.isValidTargetPos)||lo);let J,me=0;const{x:oe,y:xe}=ui(_),ye=V==null?void 0:V.elementFromPoint(oe,xe),Re=mg(Ze(s),ye),he=(D=l.value)==null?void 0:D.getBoundingClientRect();if(!he||!Re)return;const le=i_(Ze(e),Re,Ze(n),B.value,u.value);if(!le)return;let we,Z=ui(_,he),M=!1;const z=()=>{if(!p.value)return;const[Se,Ae]=dg(Z,he,m.value);y({x:Se,y:Ae}),me=requestAnimationFrame(z)},L={...le,nodeId:Ze(e),type:Re,position:le.position},F=B.value.get(Ze(e)),de={inProgress:!0,isValid:null,from:$s(F,L,ce.Left,!0),fromHandle:L,fromPosition:L.position,fromNode:F,to:Z,toHandle:null,toPosition:zu[L.position],toNode:null};b({nodeId:Ze(e),id:Ze(n),type:Re,position:(ye==null?void 0:ye.getAttribute("data-handlepos"))||ce.Top},{x:oe-he.left,y:xe-he.top}),k.connectStart({event:_,nodeId:Ze(e),handleId:Ze(n),handleType:Re});let fe=de;V.addEventListener("mousemove",Y),V.addEventListener("mouseup",E),V.addEventListener("touchmove",Y),V.addEventListener("touchend",E)}}function R(_){var D,N;if(!h.value)return;const U=Ze(t)==="target";if(!d.value){k.clickConnectStart({event:_,nodeId:Ze(e),handleId:Ze(n)}),b({nodeId:Ze(e),type:Ze(t),id:Ze(n),position:ce.Top},void 0,!0);return}let V=Ze(i)||P.value||lo;const Y=O(Ze(e));if(!V&&Y&&(V=(U?Y.isValidSourcePos:Y.isValidTargetPos)||lo),Y&&(typeof Y.connectable>"u"?f.value:Y.connectable)===!1)return;const E=yd(_.target),X=Qd(_,{handle:{nodeId:Ze(e),id:Ze(n),type:Ze(t),position:ce.Top},connectionMode:u.value,fromNodeId:d.value.nodeId,fromHandleId:d.value.id||null,fromType:d.value.type,isValidConnection:V,doc:E,lib:"vue",flowId:a,nodeLookup:B.value},Q.value,T.value,O),H=((D=X.connection)==null?void 0:D.source)===((N=X.connection)==null?void 0:N.target);X.isValid&&X.connection&&!H&&k.connect(X.connection),k.clickConnectEnd(_),g(_,!0)}return{handlePointerDown:w,handleClick:R}}function h_(){return Wn(tl,"")}function bg(n){const e=n??h_()??"",t=Wn(Og,ae(null)),{findNode:i,edges:s,emits:r}=Le(),o=i(e);return o||r.error(new lt(st.NODE_NOT_FOUND,e)),{id:e,nodeEl:t,node:o,parentNode:pe(()=>i(o.parentNode)),connectedEdges:pe(()=>$i([o],s.value))}}function d_(){return{doubleClick:se(),click:se(),mouseEnter:se(),mouseMove:se(),mouseLeave:se(),contextMenu:se(),dragStart:se(),drag:se(),dragStop:se()}}function f_(n,e){const t=d_();return t.doubleClick.on(i=>{var s,r;e.nodeDoubleClick(i),(r=(s=n.events)==null?void 0:s.doubleClick)==null||r.call(s,i)}),t.click.on(i=>{var s,r;e.nodeClick(i),(r=(s=n.events)==null?void 0:s.click)==null||r.call(s,i)}),t.mouseEnter.on(i=>{var s,r;e.nodeMouseEnter(i),(r=(s=n.events)==null?void 0:s.mouseEnter)==null||r.call(s,i)}),t.mouseMove.on(i=>{var s,r;e.nodeMouseMove(i),(r=(s=n.events)==null?void 0:s.mouseMove)==null||r.call(s,i)}),t.mouseLeave.on(i=>{var s,r;e.nodeMouseLeave(i),(r=(s=n.events)==null?void 0:s.mouseLeave)==null||r.call(s,i)}),t.contextMenu.on(i=>{var s,r;e.nodeContextMenu(i),(r=(s=n.events)==null?void 0:s.contextMenu)==null||r.call(s,i)}),t.dragStart.on(i=>{var s,r;e.nodeDragStart(i),(r=(s=n.events)==null?void 0:s.dragStart)==null||r.call(s,i)}),t.drag.on(i=>{var s,r;e.nodeDrag(i),(r=(s=n.events)==null?void 0:s.drag)==null||r.call(s,i)}),t.dragStop.on(i=>{var s,r;e.nodeDragStop(i),(r=(s=n.events)==null?void 0:s.dragStop)==null||r.call(s,i)}),Object.entries(t).reduce((i,[s,r])=>(i.emit[s]=r.trigger,i.on[s]=r.on,i),{emit:{},on:{}})}function xg(){const{getSelectedNodes:n,nodeExtent:e,updateNodePositions:t,findNode:i,snapGrid:s,snapToGrid:r,nodesDraggable:o,emits:a}=Le();return(l,u=!1)=>{const c=r.value?s.value[0]:5,h=r.value?s.value[1]:5,d=u?4:1,f=l.x*c*d,p=l.y*h*d,m=[];for(const O of n.value)if(O.draggable||o&&typeof O.draggable>"u"){const y={x:O.computedPosition.x+f,y:O.computedPosition.y+p},{computedPosition:b}=ih(O,y,a.error,e.value,O.parentNode?i(O.parentNode):void 0);m.push({id:O.id,position:b,from:O.position,distance:{x:l.x,y:l.y},dimensions:O.dimensions})}t(m,!0,!1)}}const Nl=.1;function qn(){return el("Viewport not initialized yet."),Promise.resolve(!1)}const p_={zoomIn:qn,zoomOut:qn,zoomTo:qn,fitView:qn,setCenter:qn,fitBounds:qn,project:n=>n,screenToFlowCoordinate:n=>n,flowToScreenCoordinate:n=>n,setViewport:qn,setTransform:qn,getViewport:()=>({x:0,y:0,zoom:1}),getTransform:()=>({x:0,y:0,zoom:1}),viewportInitialized:!1};function m_(n){function e(i,s){return new Promise(r=>{n.d3Selection&&n.d3Zoom?n.d3Zoom.scaleBy(Il(n.d3Selection,s,()=>{r(!0)}),i):r(!1)})}function t(i,s,r,o){return new Promise(a=>{const{x:l,y:u}=sg({x:-i,y:-s},n.translateExtent),c=_s.translate(-l,-u).scale(r);n.d3Selection&&n.d3Zoom?n.d3Zoom.transform(Il(n.d3Selection,o,()=>{a(!0)}),c):a(!1)})}return pe(()=>n.d3Zoom&&n.d3Selection&&n.dimensions.width&&n.dimensions.height?{viewportInitialized:!0,zoomIn:s=>e(1.2,s==null?void 0:s.duration),zoomOut:s=>e(1/1.2,s==null?void 0:s.duration),zoomTo:(s,r)=>new Promise(o=>{n.d3Selection&&n.d3Zoom?n.d3Zoom.scaleTo(Il(n.d3Selection,r==null?void 0:r.duration,()=>{o(!0)}),s):o(!1)}),setViewport:(s,r)=>t(s.x,s.y,s.zoom,r==null?void 0:r.duration),setTransform:(s,r)=>t(s.x,s.y,s.zoom,r==null?void 0:r.duration),getViewport:()=>({x:n.viewport.x,y:n.viewport.y,zoom:n.viewport.zoom}),getTransform:()=>({x:n.viewport.x,y:n.viewport.y,zoom:n.viewport.zoom}),fitView:(s={padding:Nl,includeHiddenNodes:!1,duration:0})=>{var r,o;const a=[];for(const d of n.nodes)d.dimensions.width&&d.dimensions.height&&((s==null?void 0:s.includeHiddenNodes)||!d.hidden)&&(!((r=s.nodes)!=null&&r.length)||(o=s.nodes)!=null&&o.length&&s.nodes.includes(d.id))&&a.push(d);if(!a.length)return Promise.resolve(!1);const l=Ka(a),{x:u,y:c,zoom:h}=vd(l,n.dimensions.width,n.dimensions.height,s.minZoom??n.minZoom,s.maxZoom??n.maxZoom,s.padding??Nl,s.offset);return t(u,c,h,s==null?void 0:s.duration)},setCenter:(s,r,o)=>{const a=typeof(o==null?void 0:o.zoom)<"u"?o.zoom:n.maxZoom,l=n.dimensions.width/2-s*a,u=n.dimensions.height/2-r*a;return t(l,u,a,o==null?void 0:o.duration)},fitBounds:(s,r={padding:Nl})=>{const{x:o,y:a,zoom:l}=vd(s,n.dimensions.width,n.dimensions.height,n.minZoom,n.maxZoom,r.padding);return t(o,a,l,r==null?void 0:r.duration)},project:s=>kr(s,n.viewport,n.snapToGrid,n.snapGrid),screenToFlowCoordinate:s=>{if(n.vueFlowRef){const{x:r,y:o}=n.vueFlowRef.getBoundingClientRect(),a={x:s.x-r,y:s.y-o};return kr(a,n.viewport,n.snapToGrid,n.snapGrid)}return{x:0,y:0}},flowToScreenCoordinate:s=>{if(n.vueFlowRef){const{x:r,y:o}=n.vueFlowRef.getBoundingClientRect(),a={x:s.x+r,y:s.y+o};return Lu(a,n.viewport)}return{x:0,y:0}}}:p_)}function Il(n,e=0,t){return n.transition().duration(e).on("end",t)}function g_(n,e,t){const i=tm(!0);return i.run(()=>{const s=()=>{i.run(()=>{let m,O,y=!!(t.nodes.value.length||t.edges.value.length);m=ns([n.modelValue,()=>{var b,v;return(v=(b=n.modelValue)==null?void 0:b.value)==null?void 0:v.length}],([b])=>{b&&Array.isArray(b)&&(O==null||O.pause(),t.setElements(b),!O&&!y&&b.length?y=!0:O==null||O.resume())}),O=ns([t.nodes,t.edges,()=>t.edges.value.length,()=>t.nodes.value.length],([b,v])=>{var g;(g=n.modelValue)!=null&&g.value&&Array.isArray(n.modelValue.value)&&(m==null||m.pause(),n.modelValue.value=[...b,...v],Dn(()=>{m==null||m.resume()}))},{immediate:y}),Do(()=>{m==null||m.stop(),O==null||O.stop()})})},r=()=>{i.run(()=>{let m,O,y=!!t.nodes.value.length;m=ns([n.nodes,()=>{var b,v;return(v=(b=n.nodes)==null?void 0:b.value)==null?void 0:v.length}],([b])=>{b&&Array.isArray(b)&&(O==null||O.pause(),t.setNodes(b),!O&&!y&&b.length?y=!0:O==null||O.resume())}),O=ns([t.nodes,()=>t.nodes.value.length],([b])=>{var v;(v=n.nodes)!=null&&v.value&&Array.isArray(n.nodes.value)&&(m==null||m.pause(),n.nodes.value=[...b],Dn(()=>{m==null||m.resume()}))},{immediate:y}),Do(()=>{m==null||m.stop(),O==null||O.stop()})})},o=()=>{i.run(()=>{let m,O,y=!!t.edges.value.length;m=ns([n.edges,()=>{var b,v;return(v=(b=n.edges)==null?void 0:b.value)==null?void 0:v.length}],([b])=>{b&&Array.isArray(b)&&(O==null||O.pause(),t.setEdges(b),!O&&!y&&b.length?y=!0:O==null||O.resume())}),O=ns([t.edges,()=>t.edges.value.length],([b])=>{var v;(v=n.edges)!=null&&v.value&&Array.isArray(n.edges.value)&&(m==null||m.pause(),n.edges.value=[...b],Dn(()=>{m==null||m.resume()}))},{immediate:y}),Do(()=>{m==null||m.stop(),O==null||O.stop()})})},a=()=>{i.run(()=>{Qe(()=>e.maxZoom,()=>{e.maxZoom&&it(e.maxZoom)&&t.setMaxZoom(e.maxZoom)},{immediate:!0})})},l=()=>{i.run(()=>{Qe(()=>e.minZoom,()=>{e.minZoom&&it(e.minZoom)&&t.setMinZoom(e.minZoom)},{immediate:!0})})},u=()=>{i.run(()=>{Qe(()=>e.translateExtent,()=>{e.translateExtent&&it(e.translateExtent)&&t.setTranslateExtent(e.translateExtent)},{immediate:!0})})},c=()=>{i.run(()=>{Qe(()=>e.nodeExtent,()=>{e.nodeExtent&&it(e.nodeExtent)&&t.setNodeExtent(e.nodeExtent)},{immediate:!0})})},h=()=>{i.run(()=>{Qe(()=>e.applyDefault,()=>{it(e.applyDefault)&&(t.applyDefault.value=e.applyDefault)},{immediate:!0})})},d=()=>{i.run(()=>{const m=async O=>{let y=O;typeof e.autoConnect=="function"&&(y=await e.autoConnect(O)),y!==!1&&t.addEdges([y])};Qe(()=>e.autoConnect,()=>{it(e.autoConnect)&&(t.autoConnect.value=e.autoConnect)},{immediate:!0}),Qe(t.autoConnect,(O,y,b)=>{O?t.onConnect(m):t.hooks.value.connect.off(m),b(()=>{t.hooks.value.connect.off(m)})},{immediate:!0})})},f=()=>{const m=["id","modelValue","translateExtent","nodeExtent","edges","nodes","maxZoom","minZoom","applyDefault","autoConnect"];for(const O of Object.keys(e)){const y=O;if(!m.includes(y)){const b=Me(()=>e[y]),v=t[y];ja(v)&&i.run(()=>{Qe(b,g=>{it(g)&&(v.value=g)},{immediate:!0})})}}};(()=>{s(),r(),o(),l(),a(),u(),c(),h(),d(),f()})()}),()=>i.stop()}function O_(){return{edgesChange:se(),nodesChange:se(),nodeDoubleClick:se(),nodeClick:se(),nodeMouseEnter:se(),nodeMouseMove:se(),nodeMouseLeave:se(),nodeContextMenu:se(),nodeDragStart:se(),nodeDrag:se(),nodeDragStop:se(),nodesInitialized:se(),miniMapNodeClick:se(),miniMapNodeDoubleClick:se(),miniMapNodeMouseEnter:se(),miniMapNodeMouseMove:se(),miniMapNodeMouseLeave:se(),connect:se(),connectStart:se(),connectEnd:se(),clickConnectStart:se(),clickConnectEnd:se(),paneReady:se(),init:se(),move:se(),moveStart:se(),moveEnd:se(),selectionDragStart:se(),selectionDrag:se(),selectionDragStop:se(),selectionContextMenu:se(),selectionStart:se(),selectionEnd:se(),viewportChangeStart:se(),viewportChange:se(),viewportChangeEnd:se(),paneScroll:se(),paneClick:se(),paneContextMenu:se(),paneMouseEnter:se(),paneMouseMove:se(),paneMouseLeave:se(),edgeContextMenu:se(),edgeMouseEnter:se(),edgeMouseMove:se(),edgeMouseLeave:se(),edgeDoubleClick:se(),edgeClick:se(),edgeUpdateStart:se(),edgeUpdate:se(),edgeUpdateEnd:se(),updateNodeInternals:se(),error:se(n=>el(n.message))}}function y_(n,e){By(()=>{for(const[t,i]of Object.entries(e.value)){const s=r=>{n(t,r)};i.fns.add(s),Wa(()=>{i.off(s)})}})}function Sg(){return{vueFlowRef:null,viewportRef:null,nodes:[],edges:[],connectionLookup:new Map,nodeTypes:{},edgeTypes:{},initialized:!1,dimensions:{width:0,height:0},viewport:{x:0,y:0,zoom:1},d3Zoom:null,d3Selection:null,d3ZoomHandler:null,minZoom:.5,maxZoom:2,translateExtent:[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],nodeExtent:[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],selectionMode:nh.Full,paneDragging:!1,preventScrolling:!0,zoomOnScroll:!0,zoomOnPinch:!0,zoomOnDoubleClick:!0,panOnScroll:!1,panOnScrollSpeed:.5,panOnScrollMode:mr.Free,paneClickDistance:0,panOnDrag:!0,edgeUpdaterRadius:10,onlyRenderVisibleElements:!1,defaultViewport:{x:0,y:0,zoom:1},nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,defaultMarkerColor:"#b1b1b7",connectionLineStyle:{},connectionLineType:null,connectionLineOptions:{type:_i.Bezier,style:{}},connectionMode:ci.Loose,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectionPosition:{x:Number.NaN,y:Number.NaN},connectionRadius:20,connectOnClick:!0,connectionStatus:null,isValidConnection:null,snapGrid:[15,15],snapToGrid:!1,edgesUpdatable:!1,edgesFocusable:!0,nodesFocusable:!0,nodesConnectable:!0,nodesDraggable:!0,nodeDragThreshold:1,elementsSelectable:!0,selectNodesOnDrag:!0,multiSelectionActive:!1,selectionKeyCode:"Shift",multiSelectionKeyCode:ya()?"Meta":"Control",zoomActivationKeyCode:ya()?"Meta":"Control",deleteKeyCode:"Backspace",panActivationKeyCode:"Space",hooks:O_(),applyDefault:!0,autoConnect:!1,fitViewOnInit:!1,fitViewOnInitDone:!1,noDragClassName:"nodrag",noWheelClassName:"nowheel",noPanClassName:"nopan",defaultEdgeOptions:void 0,elevateEdgesOnSelect:!1,elevateNodesOnSelect:!0,autoPanOnNodeDrag:!0,autoPanOnConnect:!0,autoPanSpeed:15,disableKeyboardA11y:!1,ariaLiveMessage:""}}const v_=["id","vueFlowRef","viewportRef","initialized","modelValue","nodes","edges","maxZoom","minZoom","translateExtent","hooks","defaultEdgeOptions"];function w_(n,e,t){const i=m_(n),s=Z=>{const M=Z??[];n.hooks.updateNodeInternals.trigger(M)},r=Z=>zS(Z,n.nodes,n.edges),o=Z=>LS(Z,n.nodes,n.edges),a=Z=>$i(Z,n.edges),l=({id:Z,type:M,nodeId:z})=>{var L;return Array.from(((L=n.connectionLookup.get(`${z}-${M}-${Z??null}`))==null?void 0:L.values())??[])},u=Z=>{if(Z)return e.value.get(Z)},c=Z=>{if(Z)return t.value.get(Z)},h=(Z,M,z)=>{var L,F;const ue=[];for(const de of Z){const fe={id:de.id,type:"position",dragging:z,from:de.from};if(M&&(fe.position=de.position,de.parentNode)){const Se=u(de.parentNode);fe.position={x:fe.position.x-(((L=Se==null?void 0:Se.computedPosition)==null?void 0:L.x)??0),y:fe.position.y-(((F=Se==null?void 0:Se.computedPosition)==null?void 0:F.y)??0)}}ue.push(fe)}ue!=null&&ue.length&&n.hooks.nodesChange.trigger(ue)},d=Z=>{if(!n.vueFlowRef)return;const M=n.vueFlowRef.querySelector(".vue-flow__transformationpane");if(!M)return;const z=window.getComputedStyle(M),{m22:L}=new window.DOMMatrixReadOnly(z.transform),F=[];for(let ue=0;ue<Z.length;++ue){const de=Z[ue],fe=u(de.id);if(fe){const Se=Fa(de.nodeElement);if(!!(Se.width&&Se.height&&(fe.dimensions.width!==Se.width||fe.dimensions.height!==Se.height||de.forceUpdate))){const Ce=de.nodeElement.getBoundingClientRect();fe.dimensions=Se,fe.handleBounds.source=Td("source",de.nodeElement,Ce,L),fe.handleBounds.target=Td("target",de.nodeElement,Ce,L),F.push({id:fe.id,type:"dimensions",dimensions:Se})}}}!n.fitViewOnInitDone&&n.fitViewOnInit&&i.value.fitView().then(()=>{n.fitViewOnInitDone=!0}),F.length&&n.hooks.nodesChange.trigger(F)},f=(Z,M)=>{const z=new Set,L=new Set;for(const de of Z)Li(de)?z.add(de.id):hi(de)&&L.add(de.id);const F=Kn(e.value,z,!0),ue=Kn(t.value,L);if(n.multiSelectionActive){for(const de of z)F.push(Gn(de,M));for(const de of L)ue.push(Gn(de,M))}F.length&&n.hooks.nodesChange.trigger(F),ue.length&&n.hooks.edgesChange.trigger(ue)},p=Z=>{if(n.multiSelectionActive){const M=Z.map(z=>Gn(z.id,!0));n.hooks.nodesChange.trigger(M);return}n.hooks.nodesChange.trigger(Kn(e.value,new Set(Z.map(M=>M.id)),!0)),n.hooks.edgesChange.trigger(Kn(t.value))},m=Z=>{if(n.multiSelectionActive){const M=Z.map(z=>Gn(z.id,!0));n.hooks.edgesChange.trigger(M);return}n.hooks.edgesChange.trigger(Kn(t.value,new Set(Z.map(M=>M.id)))),n.hooks.nodesChange.trigger(Kn(e.value,new Set,!0))},O=Z=>{f(Z,!0)},y=Z=>{const z=(Z||n.nodes).map(L=>(L.selected=!1,Gn(L.id,!1)));n.hooks.nodesChange.trigger(z)},b=Z=>{const z=(Z||n.edges).map(L=>(L.selected=!1,Gn(L.id,!1)));n.hooks.edgesChange.trigger(z)},v=Z=>{if(!Z||!Z.length)return f([],!1);const M=Z.reduce((z,L)=>{const F=Gn(L.id,!1);return Li(L)?z.nodes.push(F):z.edges.push(F),z},{nodes:[],edges:[]});M.nodes.length&&n.hooks.nodesChange.trigger(M.nodes),M.edges.length&&n.hooks.edgesChange.trigger(M.edges)},g=Z=>{var M;(M=n.d3Zoom)==null||M.scaleExtent([Z,n.maxZoom]),n.minZoom=Z},k=Z=>{var M;(M=n.d3Zoom)==null||M.scaleExtent([n.minZoom,Z]),n.maxZoom=Z},S=Z=>{var M;(M=n.d3Zoom)==null||M.translateExtent(Z),n.translateExtent=Z},Q=Z=>{n.nodeExtent=Z,s()},T=Z=>{var M;(M=n.d3Zoom)==null||M.clickDistance(Z)},P=Z=>{n.nodesDraggable=Z,n.nodesConnectable=Z,n.elementsSelectable=Z},B=Z=>{const M=Z instanceof Function?Z(n.nodes):Z;!n.initialized&&!M.length||(n.nodes=Ad(M,u,n.hooks.error.trigger))},W=Z=>{const M=Z instanceof Function?Z(n.edges):Z;if(!n.initialized&&!M.length)return;const z=Dl(M,n.isValidConnection,u,c,n.hooks.error.trigger,n.defaultEdgeOptions,n.nodes,n.edges);Zl(n.connectionLookup,t.value,z),n.edges=z},C=Z=>{const M=Z instanceof Function?Z([...n.nodes,...n.edges]):Z;!n.initialized&&!M.length||(B(M.filter(Li)),W(M.filter(hi)))},j=Z=>{let M=Z instanceof Function?Z(n.nodes):Z;M=Array.isArray(M)?M:[M];const z=Ad(M,u,n.hooks.error.trigger),L=[];for(const F of z)L.push(xd(F));L.length&&n.hooks.nodesChange.trigger(L)},w=Z=>{let M=Z instanceof Function?Z(n.edges):Z;M=Array.isArray(M)?M:[M];const z=Dl(M,n.isValidConnection,u,c,n.hooks.error.trigger,n.defaultEdgeOptions,n.nodes,n.edges),L=[];for(const F of z)L.push(xd(F));L.length&&n.hooks.edgesChange.trigger(L)},R=(Z,M=!0,z=!1)=>{const L=Z instanceof Function?Z(n.nodes):Z,F=Array.isArray(L)?L:[L],ue=[],de=[];function fe(Ae){const Ce=a(Ae);for(const qe of Ce)(!it(qe.deletable)||qe.deletable)&&de.push(_d(qe.id,qe.source,qe.target,qe.sourceHandle,qe.targetHandle))}function Se(Ae){const Ce=[];for(const qe of n.nodes)qe.parentNode===Ae&&Ce.push(qe);if(Ce.length){for(const qe of Ce)ue.push(Sd(qe.id));M&&fe(Ce);for(const qe of Ce)Se(qe.id)}}for(const Ae of F){const Ce=typeof Ae=="string"?u(Ae):Ae;Ce&&(it(Ce.deletable)&&!Ce.deletable||(ue.push(Sd(Ce.id)),M&&fe([Ce]),z&&Se(Ce.id)))}de.length&&n.hooks.edgesChange.trigger(de),ue.length&&n.hooks.nodesChange.trigger(ue)},_=Z=>{const M=Z instanceof Function?Z(n.edges):Z,z=Array.isArray(M)?M:[M],L=[];for(const F of z){const ue=typeof F=="string"?c(F):F;ue&&(it(ue.deletable)&&!ue.deletable||L.push(_d(typeof F=="string"?F:F.id,ue.source,ue.target,ue.sourceHandle,ue.targetHandle)))}n.hooks.edgesChange.trigger(L)},D=(Z,M,z=!0)=>{const L=c(Z.id),F=o_(Z,M,L,z,n.hooks.error.trigger);if(F){const[ue]=Dl([F],n.isValidConnection,u,c,n.hooks.error.trigger,n.defaultEdgeOptions,n.nodes,n.edges);return n.edges.splice(n.edges.indexOf(L),1,ue),Zl(n.connectionLookup,t.value,[ue]),ue}return!1},N=(Z,M,z={replace:!1})=>{const L=c(Z);if(!L)return;const F=typeof M=="function"?M(L):M;L.data=z.replace?F:{...L.data,...F}},U=Z=>bd(Z,n.nodes),V=Z=>{const M=bd(Z,n.edges);return Zl(n.connectionLookup,t.value,M),M},Y=(Z,M,z={replace:!1})=>{const L=u(Z);if(!L)return;const F=typeof M=="function"?M(L):M;z.replace?n.nodes.splice(n.nodes.indexOf(L),1,F):Object.assign(L,F)},E=(Z,M,z={replace:!1})=>{const L=u(Z);if(!L)return;const F=typeof M=="function"?M(L):M;L.data=z.replace?F:{...L.data,...F}},X=(Z,M,z=!1)=>{z?n.connectionClickStartHandle=Z:n.connectionStartHandle=Z,n.connectionEndHandle=null,n.connectionStatus=null,M&&(n.connectionPosition=M)},H=(Z,M=null,z=null)=>{n.connectionStartHandle&&(n.connectionPosition=Z,n.connectionEndHandle=M,n.connectionStatus=z)},J=(Z,M)=>{n.connectionPosition={x:Number.NaN,y:Number.NaN},n.connectionEndHandle=null,n.connectionStatus=null,M?n.connectionClickStartHandle=null:n.connectionStartHandle=null},me=Z=>{const M=NS(Z),z=M?null:nr(Z)?Z:u(Z.id);return!M&&!z?[null,null,M]:[M?Z:ma(z),z,M]},oe=(Z,M=!0,z=n.nodes)=>{const[L,F,ue]=me(Z);if(!L)return[];const de=[];for(const fe of z||n.nodes){if(!ue&&(fe.id===F.id||!fe.computedPosition))continue;const Se=ma(fe),Ae=ga(Se,L);(M&&Ae>0||Ae>=Number(L.width)*Number(L.height))&&de.push(fe)}return de},xe=(Z,M,z=!0)=>{const[L]=me(Z);if(!L)return!1;const F=ga(L,M);return z&&F>0||F>=Number(L.width)*Number(L.height)},ye=Z=>{const{viewport:M,dimensions:z,d3Zoom:L,d3Selection:F,translateExtent:ue}=n;if(!L||!F||!Z.x&&!Z.y)return!1;const de=_s.translate(M.x+Z.x,M.y+Z.y).scale(M.zoom),fe=[[0,0],[z.width,z.height]],Se=L.constrain()(de,fe,ue),Ae=n.viewport.x!==Se.x||n.viewport.y!==Se.y||n.viewport.zoom!==Se.k;return L.transform(F,Se),Ae},Re=Z=>{const M=Z instanceof Function?Z(n):Z,z=["d3Zoom","d3Selection","d3ZoomHandler","viewportRef","vueFlowRef","dimensions","hooks"];it(M.defaultEdgeOptions)&&(n.defaultEdgeOptions=M.defaultEdgeOptions);const L=M.modelValue||M.nodes||M.edges?[]:void 0;L&&(M.modelValue&&L.push(...M.modelValue),M.nodes&&L.push(...M.nodes),M.edges&&L.push(...M.edges),C(L));const F=()=>{it(M.maxZoom)&&k(M.maxZoom),it(M.minZoom)&&g(M.minZoom),it(M.translateExtent)&&S(M.translateExtent)};for(const ue of Object.keys(M)){const de=ue,fe=M[de];![...v_,...z].includes(de)&&it(fe)&&(n[de]=fe)}Qu(()=>n.d3Zoom).not.toBeNull().then(F),n.initialized||(n.initialized=!0)};return{updateNodePositions:h,updateNodeDimensions:d,setElements:C,setNodes:B,setEdges:W,addNodes:j,addEdges:w,removeNodes:R,removeEdges:_,findNode:u,findEdge:c,updateEdge:D,updateEdgeData:N,updateNode:Y,updateNodeData:E,applyEdgeChanges:V,applyNodeChanges:U,addSelectedElements:O,addSelectedNodes:p,addSelectedEdges:m,setMinZoom:g,setMaxZoom:k,setTranslateExtent:S,setNodeExtent:Q,setPaneClickDistance:T,removeSelectedElements:v,removeSelectedNodes:y,removeSelectedEdges:b,startConnection:X,updateConnection:H,endConnection:J,setInteractive:P,setState:Re,getIntersectingNodes:oe,getIncomers:r,getOutgoers:o,getConnectedEdges:a,getHandleConnections:l,isNodeIntersecting:xe,panBy:ye,fitView:Z=>i.value.fitView(Z),zoomIn:Z=>i.value.zoomIn(Z),zoomOut:Z=>i.value.zoomOut(Z),zoomTo:(Z,M)=>i.value.zoomTo(Z,M),setViewport:(Z,M)=>i.value.setViewport(Z,M),setTransform:(Z,M)=>i.value.setTransform(Z,M),getViewport:()=>i.value.getViewport(),getTransform:()=>i.value.getTransform(),setCenter:(Z,M,z)=>i.value.setCenter(Z,M,z),fitBounds:(Z,M)=>i.value.fitBounds(Z,M),project:Z=>i.value.project(Z),screenToFlowCoordinate:Z=>i.value.screenToFlowCoordinate(Z),flowToScreenCoordinate:Z=>i.value.flowToScreenCoordinate(Z),toObject:()=>{const Z=[],M=[];for(const z of n.nodes){const{computedPosition:L,handleBounds:F,selected:ue,dimensions:de,isParent:fe,resizing:Se,dragging:Ae,events:Ce,...qe}=z;Z.push(qe)}for(const z of n.edges){const{selected:L,sourceNode:F,targetNode:ue,events:de,...fe}=z;M.push(fe)}return JSON.parse(JSON.stringify({nodes:Z,edges:M,position:[n.viewport.x,n.viewport.y],zoom:n.viewport.zoom,viewport:n.viewport}))},fromObject:Z=>new Promise(M=>{const{nodes:z,edges:L,position:F,zoom:ue,viewport:de}=Z;if(z&&B(z),L&&W(L),de!=null&&de.x&&(de!=null&&de.y)||F){const fe=(de==null?void 0:de.x)||F[0],Se=(de==null?void 0:de.y)||F[1],Ae=(de==null?void 0:de.zoom)||ue||n.viewport.zoom;return Qu(()=>i.value.viewportInitialized).toBe(!0).then(()=>{i.value.setViewport({x:fe,y:Se,zoom:Ae}).then(()=>{M(!0)})})}else M(!0)}),updateNodeInternals:s,viewportHelper:i,$reset:()=>{const Z=Sg();if(n.edges=[],n.nodes=[],n.d3Zoom&&n.d3Selection){const M=_s.translate(Z.defaultViewport.x??0,Z.defaultViewport.y??0).scale(Bn(Z.defaultViewport.zoom??1,Z.minZoom,Z.maxZoom)),z=n.viewportRef.getBoundingClientRect(),L=[[0,0],[z.width,z.height]],F=n.d3Zoom.constrain()(M,L,Z.translateExtent);n.d3Zoom.transform(n.d3Selection,F)}Re(Z)},$destroy:()=>{}}}const b_=["data-id","data-handleid","data-nodeid","data-handlepos"],x_={name:"Handle",compatConfig:{MODE:3}},Ot=Oe({...x_,props:{id:{default:null},type:{},position:{default:()=>ce.Top},isValidConnection:{type:Function},connectable:{type:[Boolean,Number,String,Function],default:void 0},connectableStart:{type:Boolean,default:!0},connectableEnd:{type:Boolean,default:!0}},setup(n,{expose:e}){const t=Xy(n,["position","connectable","connectableStart","connectableEnd","id"]),i=Me(()=>t.type??"source"),s=Me(()=>t.isValidConnection??null),{id:r,connectionStartHandle:o,connectionClickStartHandle:a,connectionEndHandle:l,vueFlowRef:u,nodesConnectable:c,noDragClassName:h,noPanClassName:d}=Le(),{id:f,node:p,nodeEl:m,connectedEdges:O}=bg(),y=ae(),b=Me(()=>typeof n.connectableStart<"u"?n.connectableStart:!0),v=Me(()=>typeof n.connectableEnd<"u"?n.connectableEnd:!0),g=Me(()=>{var W,C,j,w,R,_;return((W=o.value)==null?void 0:W.nodeId)===f&&((C=o.value)==null?void 0:C.id)===n.id&&((j=o.value)==null?void 0:j.type)===i.value||((w=l.value)==null?void 0:w.nodeId)===f&&((R=l.value)==null?void 0:R.id)===n.id&&((_=l.value)==null?void 0:_.type)===i.value}),k=Me(()=>{var W,C,j;return((W=a.value)==null?void 0:W.nodeId)===f&&((C=a.value)==null?void 0:C.id)===n.id&&((j=a.value)==null?void 0:j.type)===i.value}),{handlePointerDown:S,handleClick:Q}=wg({nodeId:f,handleId:n.id,isValidConnection:s,type:i}),T=pe(()=>typeof n.connectable=="string"&&n.connectable==="single"?!O.value.some(W=>{const C=W[`${i.value}Handle`];return W[i.value]!==f?!1:C?C===n.id:!0}):typeof n.connectable=="number"?O.value.filter(W=>{const C=W[`${i.value}Handle`];return W[i.value]!==f?!1:C?C===n.id:!0}).length<n.connectable:typeof n.connectable=="function"?n.connectable(p,O.value):it(n.connectable)?n.connectable:c.value);St(()=>{var W;if(!p.dimensions.width||!p.dimensions.height)return;const C=(W=p.handleBounds[i.value])==null?void 0:W.find(U=>U.id===n.id);if(!u.value||C)return;const j=u.value.querySelector(".vue-flow__transformationpane");if(!m.value||!y.value||!j||!n.id)return;const w=m.value.getBoundingClientRect(),R=y.value.getBoundingClientRect(),_=window.getComputedStyle(j),{m22:D}=new window.DOMMatrixReadOnly(_.transform),N={id:n.id,position:n.position,x:(R.left-w.left)/D,y:(R.top-w.top)/D,type:i.value,nodeId:f,...Fa(y.value)};p.handleBounds[i.value]=[...p.handleBounds[i.value]??[],N]}),Oi(()=>{const W=p.handleBounds[i.value];W&&(p.handleBounds[i.value]=W.filter(C=>C.id!==n.id))});function P(W){const C=sh(W);T.value&&b.value&&(C&&W.button===0||!C)&&S(W)}function B(W){!f||!a.value&&!b.value||T.value&&Q(W)}return e({handleClick:Q,handlePointerDown:S,onClick:B,onPointerDown:P}),(W,C)=>(G(),K("div",{ref_key:"handle",ref:y,"data-id":`${$(r)}-${$(f)}-${n.id}-${i.value}`,"data-handleid":n.id,"data-nodeid":$(f),"data-handlepos":W.position,class:Ge(["vue-flow__handle",[`vue-flow__handle-${W.position}`,`vue-flow__handle-${n.id}`,$(h),$(d),i.value,{connectable:T.value,connecting:k.value,connectablestart:b.value,connectableend:v.value,connectionindicator:T.value&&(b.value&&!g.value||v.value&&g.value)}]]),onMousedown:P,onTouchstartPassive:P,onClick:B},[Be(W.$slots,"default",{id:W.id})],42,b_))}}),il=function({sourcePosition:n=ce.Bottom,targetPosition:e=ce.Top,label:t,connectable:i=!0,isValidTargetPos:s,isValidSourcePos:r,data:o}){const a=o.label||t;return[Ie(Ot,{type:"target",position:e,connectable:i,isValidConnection:s}),typeof a!="string"&&a?Ie(a):Ie(ke,[a]),Ie(Ot,{type:"source",position:n,connectable:i,isValidConnection:r})]};il.props=["sourcePosition","targetPosition","label","isValidTargetPos","isValidSourcePos","connectable","data"];il.inheritAttrs=!1;il.compatConfig={MODE:3};const S_=il,sl=function({targetPosition:n=ce.Top,label:e,connectable:t=!0,isValidTargetPos:i,data:s}){const r=s.label||e;return[Ie(Ot,{type:"target",position:n,connectable:t,isValidConnection:i}),typeof r!="string"&&r?Ie(r):Ie(ke,[r])]};sl.props=["targetPosition","label","isValidTargetPos","connectable","data"];sl.inheritAttrs=!1;sl.compatConfig={MODE:3};const __=sl,rl=function({sourcePosition:n=ce.Bottom,label:e,connectable:t=!0,isValidSourcePos:i,data:s}){const r=s.label||e;return[typeof r!="string"&&r?Ie(r):Ie(ke,[r]),Ie(Ot,{type:"source",position:n,connectable:t,isValidConnection:i})]};rl.props=["sourcePosition","label","isValidSourcePos","connectable","data"];rl.inheritAttrs=!1;rl.compatConfig={MODE:3};const $_=rl,k_=["transform"],P_=["width","height","x","y","rx","ry"],Q_=["y"],T_={name:"EdgeText",compatConfig:{MODE:3}},A_=Oe({...T_,props:{x:{},y:{},label:{},labelStyle:{default:()=>({})},labelShowBg:{type:Boolean,default:!0},labelBgStyle:{default:()=>({})},labelBgPadding:{default:()=>[2,4]},labelBgBorderRadius:{default:2}},setup(n){const e=ae({x:0,y:0,width:0,height:0}),t=ae(null),i=pe(()=>`translate(${n.x-e.value.width/2} ${n.y-e.value.height/2})`);St(s),Qe([()=>n.x,()=>n.y,t,()=>n.label],s);function s(){if(!t.value)return;const r=t.value.getBBox();(r.width!==e.value.width||r.height!==e.value.height)&&(e.value=r)}return(r,o)=>(G(),K("g",{transform:i.value,class:"vue-flow__edge-textwrapper"},[r.labelShowBg?(G(),K("rect",{key:0,class:"vue-flow__edge-textbg",width:`${e.value.width+2*r.labelBgPadding[0]}px`,height:`${e.value.height+2*r.labelBgPadding[1]}px`,x:-r.labelBgPadding[0],y:-r.labelBgPadding[1],style:gt(r.labelBgStyle),rx:r.labelBgBorderRadius,ry:r.labelBgBorderRadius},null,12,P_)):Ee("",!0),q("text",Xt(r.$attrs,{ref_key:"el",ref:t,class:"vue-flow__edge-text",y:e.value.height/2,dy:"0.3em",style:r.labelStyle}),[Be(r.$slots,"default",{},()=>[typeof r.label!="string"?(G(),be(ni(r.label),{key:0})):(G(),K(ke,{key:1},[te(ve(r.label),1)],64))])],16,Q_)],8,k_))}}),C_=["id","d","marker-end","marker-start"],E_=["d","stroke-width"],M_={name:"BaseEdge",inheritAttrs:!1,compatConfig:{MODE:3}},ol=Oe({...M_,props:{id:{},labelX:{},labelY:{},path:{},label:{},markerStart:{},markerEnd:{},interactionWidth:{default:20},labelStyle:{},labelShowBg:{type:Boolean},labelBgStyle:{},labelBgPadding:{},labelBgBorderRadius:{}},setup(n,{expose:e}){const t=ae(null),i=ae(null),s=ae(null),r=qc();return e({pathEl:t,interactionEl:i,labelEl:s}),(o,a)=>(G(),K(ke,null,[q("path",Xt($(r),{id:o.id,ref_key:"pathEl",ref:t,d:o.path,class:"vue-flow__edge-path","marker-end":o.markerEnd,"marker-start":o.markerStart}),null,16,C_),o.interactionWidth?(G(),K("path",{key:0,ref_key:"interactionEl",ref:i,fill:"none",d:o.path,"stroke-width":o.interactionWidth,"stroke-opacity":0,class:"vue-flow__edge-interaction"},null,8,E_)):Ee("",!0),o.label&&o.labelX&&o.labelY?(G(),be(A_,{key:1,ref_key:"labelEl",ref:s,x:o.labelX,y:o.labelY,label:o.label,"label-show-bg":o.labelShowBg,"label-bg-style":o.labelBgStyle,"label-bg-padding":o.labelBgPadding,"label-bg-border-radius":o.labelBgBorderRadius,"label-style":o.labelStyle},null,8,["x","y","label","label-show-bg","label-bg-style","label-bg-padding","label-bg-border-radius","label-style"])):Ee("",!0)],64))}});function _g({sourceX:n,sourceY:e,targetX:t,targetY:i}){const s=Math.abs(t-n)/2,r=t<n?t+s:t-s,o=Math.abs(i-e)/2,a=i<e?i+o:i-o;return[r,a,s,o]}function $g({sourceX:n,sourceY:e,targetX:t,targetY:i,sourceControlX:s,sourceControlY:r,targetControlX:o,targetControlY:a}){const l=n*.125+s*.375+o*.375+t*.125,u=e*.125+r*.375+a*.375+i*.125,c=Math.abs(l-n),h=Math.abs(u-e);return[l,u,c,h]}function uo(n,e){return n>=0?.5*n:e*25*Math.sqrt(-n)}function Rd({pos:n,x1:e,y1:t,x2:i,y2:s,c:r}){let o,a;switch(n){case ce.Left:o=e-uo(e-i,r),a=t;break;case ce.Right:o=e+uo(i-e,r),a=t;break;case ce.Top:o=e,a=t-uo(t-s,r);break;case ce.Bottom:o=e,a=t+uo(s-t,r);break}return[o,a]}function kg(n){const{sourceX:e,sourceY:t,sourcePosition:i=ce.Bottom,targetX:s,targetY:r,targetPosition:o=ce.Top,curvature:a=.25}=n,[l,u]=Rd({pos:i,x1:e,y1:t,x2:s,y2:r,c:a}),[c,h]=Rd({pos:o,x1:s,y1:r,x2:e,y2:t,c:a}),[d,f,p,m]=$g({sourceX:e,sourceY:t,targetX:s,targetY:r,sourceControlX:l,sourceControlY:u,targetControlX:c,targetControlY:h});return[`M${e},${t} C${l},${u} ${c},${h} ${s},${r}`,d,f,p,m]}function Zd({pos:n,x1:e,y1:t,x2:i,y2:s}){let r,o;switch(n){case ce.Left:case ce.Right:r=.5*(e+i),o=t;break;case ce.Top:case ce.Bottom:r=e,o=.5*(t+s);break}return[r,o]}function Pg(n){const{sourceX:e,sourceY:t,sourcePosition:i=ce.Bottom,targetX:s,targetY:r,targetPosition:o=ce.Top}=n,[a,l]=Zd({pos:i,x1:e,y1:t,x2:s,y2:r}),[u,c]=Zd({pos:o,x1:s,y1:r,x2:e,y2:t}),[h,d,f,p]=$g({sourceX:e,sourceY:t,targetX:s,targetY:r,sourceControlX:a,sourceControlY:l,targetControlX:u,targetControlY:c});return[`M${e},${t} C${a},${l} ${u},${c} ${s},${r}`,h,d,f,p]}const Dd={[ce.Left]:{x:-1,y:0},[ce.Right]:{x:1,y:0},[ce.Top]:{x:0,y:-1},[ce.Bottom]:{x:0,y:1}};function R_({source:n,sourcePosition:e=ce.Bottom,target:t}){return e===ce.Left||e===ce.Right?n.x<t.x?{x:1,y:0}:{x:-1,y:0}:n.y<t.y?{x:0,y:1}:{x:0,y:-1}}function Nd(n,e){return Math.sqrt((e.x-n.x)**2+(e.y-n.y)**2)}function Z_({source:n,sourcePosition:e=ce.Bottom,target:t,targetPosition:i=ce.Top,center:s,offset:r}){const o=Dd[e],a=Dd[i],l={x:n.x+o.x*r,y:n.y+o.y*r},u={x:t.x+a.x*r,y:t.y+a.y*r},c=R_({source:l,sourcePosition:e,target:u}),h=c.x!==0?"x":"y",d=c[h];let f,p,m;const O={x:0,y:0},y={x:0,y:0},[b,v,g,k]=_g({sourceX:n.x,sourceY:n.y,targetX:t.x,targetY:t.y});if(o[h]*a[h]===-1){p=s.x??b,m=s.y??v;const Q=[{x:p,y:l.y},{x:p,y:u.y}],T=[{x:l.x,y:m},{x:u.x,y:m}];o[h]===d?f=h==="x"?Q:T:f=h==="x"?T:Q}else{const Q=[{x:l.x,y:u.y}],T=[{x:u.x,y:l.y}];if(h==="x"?f=o.x===d?T:Q:f=o.y===d?Q:T,e===i){const j=Math.abs(n[h]-t[h]);if(j<=r){const w=Math.min(r-1,r-j);o[h]===d?O[h]=(l[h]>n[h]?-1:1)*w:y[h]=(u[h]>t[h]?-1:1)*w}}if(e!==i){const j=h==="x"?"y":"x",w=o[h]===a[j],R=l[j]>u[j],_=l[j]<u[j];(o[h]===1&&(!w&&R||w&&_)||o[h]!==1&&(!w&&_||w&&R))&&(f=h==="x"?Q:T)}const P={x:l.x+O.x,y:l.y+O.y},B={x:u.x+y.x,y:u.y+y.y},W=Math.max(Math.abs(P.x-f[0].x),Math.abs(B.x-f[0].x)),C=Math.max(Math.abs(P.y-f[0].y),Math.abs(B.y-f[0].y));W>=C?(p=(P.x+B.x)/2,m=f[0].y):(p=f[0].x,m=(P.y+B.y)/2)}return[[n,{x:l.x+O.x,y:l.y+O.y},...f,{x:u.x+y.x,y:u.y+y.y},t],p,m,g,k]}function D_(n,e,t,i){const s=Math.min(Nd(n,e)/2,Nd(e,t)/2,i),{x:r,y:o}=e;if(n.x===r&&r===t.x||n.y===o&&o===t.y)return`L${r} ${o}`;if(n.y===o){const u=n.x<t.x?-1:1,c=n.y<t.y?1:-1;return`L ${r+s*u},${o}Q ${r},${o} ${r},${o+s*c}`}const a=n.x<t.x?1:-1,l=n.y<t.y?-1:1;return`L ${r},${o+s*l}Q ${r},${o} ${r+s*a},${o}`}function Xu(n){const{sourceX:e,sourceY:t,sourcePosition:i=ce.Bottom,targetX:s,targetY:r,targetPosition:o=ce.Top,borderRadius:a=5,centerX:l,centerY:u,offset:c=20}=n,[h,d,f,p,m]=Z_({source:{x:e,y:t},sourcePosition:i,target:{x:s,y:r},targetPosition:o,center:{x:l,y:u},offset:c});return[h.reduce((y,b,v)=>{let g;return v>0&&v<h.length-1?g=D_(h[v-1],b,h[v+1],a):g=`${v===0?"M":"L"}${b.x} ${b.y}`,y+=g,y},""),d,f,p,m]}function N_(n){const{sourceX:e,sourceY:t,targetX:i,targetY:s}=n,[r,o,a,l]=_g({sourceX:e,sourceY:t,targetX:i,targetY:s});return[`M ${e},${t}L ${i},${s}`,r,o,a,l]}const I_=Oe({name:"StraightEdge",props:["label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","markerEnd","markerStart","interactionWidth"],compatConfig:{MODE:3},setup(n,{attrs:e}){return()=>{const[t,i,s]=N_(n);return Ie(ol,{path:t,labelX:i,labelY:s,...e,...n})}}}),L_=I_,z_=Oe({name:"SmoothStepEdge",props:["sourcePosition","targetPosition","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","borderRadius","markerEnd","markerStart","interactionWidth","offset"],compatConfig:{MODE:3},setup(n,{attrs:e}){return()=>{const[t,i,s]=Xu({...n,sourcePosition:n.sourcePosition??ce.Bottom,targetPosition:n.targetPosition??ce.Top});return Ie(ol,{path:t,labelX:i,labelY:s,...e,...n})}}}),Qg=z_,V_=Oe({name:"StepEdge",props:["sourcePosition","targetPosition","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","markerEnd","markerStart","interactionWidth"],setup(n,{attrs:e}){return()=>Ie(Qg,{...n,...e,borderRadius:0})}}),X_=V_,B_=Oe({name:"BezierEdge",props:["sourcePosition","targetPosition","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","curvature","markerEnd","markerStart","interactionWidth"],compatConfig:{MODE:3},setup(n,{attrs:e}){return()=>{const[t,i,s]=kg({...n,sourcePosition:n.sourcePosition??ce.Bottom,targetPosition:n.targetPosition??ce.Top});return Ie(ol,{path:t,labelX:i,labelY:s,...e,...n})}}}),U_=B_,j_=Oe({name:"SimpleBezierEdge",props:["sourcePosition","targetPosition","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","markerEnd","markerStart","interactionWidth"],compatConfig:{MODE:3},setup(n,{attrs:e}){return()=>{const[t,i,s]=Pg({...n,sourcePosition:n.sourcePosition??ce.Bottom,targetPosition:n.targetPosition??ce.Top});return Ie(ol,{path:t,labelX:i,labelY:s,...e,...n})}}}),W_=j_,q_={input:$_,default:S_,output:__},Y_={default:U_,straight:L_,step:X_,smoothstep:Qg,simplebezier:W_};function G_(n,e,t){const i=pe(()=>m=>e.value.get(m)),s=pe(()=>m=>t.value.get(m)),r=pe(()=>{const m={...Y_,...n.edgeTypes},O=Object.keys(m);for(const y of n.edges)y.type&&!O.includes(y.type)&&(m[y.type]=y.type);return m}),o=pe(()=>{const m={...q_,...n.nodeTypes},O=Object.keys(m);for(const y of n.nodes)y.type&&!O.includes(y.type)&&(m[y.type]=y.type);return m}),a=pe(()=>n.onlyRenderVisibleElements?cg(n.nodes,{x:0,y:0,width:n.dimensions.width,height:n.dimensions.height},n.viewport,!0):n.nodes),l=pe(()=>{if(n.onlyRenderVisibleElements){const m=[];for(const O of n.edges){const y=e.value.get(O.source),b=e.value.get(O.target);YS({sourcePos:y.computedPosition||{x:0,y:0},targetPos:b.computedPosition||{x:0,y:0},sourceWidth:y.dimensions.width,sourceHeight:y.dimensions.height,targetWidth:b.dimensions.width,targetHeight:b.dimensions.height,width:n.dimensions.width,height:n.dimensions.height,viewport:n.viewport})&&m.push(O)}return m}return n.edges}),u=pe(()=>[...a.value,...l.value]),c=pe(()=>{const m=[];for(const O of n.nodes)O.selected&&m.push(O);return m}),h=pe(()=>{const m=[];for(const O of n.edges)O.selected&&m.push(O);return m}),d=pe(()=>[...c.value,...h.value]),f=pe(()=>{const m=[];for(const O of n.nodes)O.dimensions.width&&O.dimensions.height&&O.handleBounds!==void 0&&m.push(O);return m}),p=pe(()=>a.value.length>0&&f.value.length===a.value.length);return{getNode:i,getEdge:s,getElements:u,getEdgeTypes:r,getNodeTypes:o,getEdges:l,getNodes:a,getSelectedElements:d,getSelectedNodes:c,getSelectedEdges:h,getNodesInitialized:f,areNodesInitialized:p}}class ki{constructor(){this.currentId=0,this.flows=new Map}static getInstance(){var e;const t=(e=Br())==null?void 0:e.appContext.app,i=(t==null?void 0:t.config.globalProperties.$vueFlowStorage)??ki.instance;return ki.instance=i??new ki,t&&(t.config.globalProperties.$vueFlowStorage=ki.instance),ki.instance}set(e,t){return this.flows.set(e,t)}get(e){return this.flows.get(e)}remove(e){return this.flows.delete(e)}create(e,t){const i=Sg(),s=ra(i),r={};for(const[d,f]of Object.entries(s.hooks)){const p=`on${d.charAt(0).toUpperCase()+d.slice(1)}`;r[p]=f.on}const o={};for(const[d,f]of Object.entries(s.hooks))o[d]=f.trigger;const a=pe(()=>{const d=new Map;for(const f of s.nodes)d.set(f.id,f);return d}),l=pe(()=>{const d=new Map;for(const f of s.edges)d.set(f.id,f);return d}),u=G_(s,a,l),c=w_(s,a,l);c.setState({...s,...t});const h={...r,...u,...c,...Fv(s),nodeLookup:a,edgeLookup:l,emits:o,id:e,vueFlowVersion:"1.42.1",$destroy:()=>{this.remove(e)}};return this.set(e,h),h}getId(){return`vue-flow-${this.currentId++}`}}function Le(n){const e=ki.getInstance(),t=em(),i=typeof n=="object",s=i?n:{id:n},r=s.id,o=r??(t==null?void 0:t.vueFlowId);let a;if(t){const l=Wn(Md,null);typeof l<"u"&&l!==null&&(!o||l.id===o)&&(a=l)}if(a||o&&(a=e.get(o)),!a||o&&a.id!==o){const l=r??e.getId(),u=e.create(l,s);a=u,(t??tm(!0)).run(()=>{Qe(u.applyDefault,(h,d,f)=>{const p=O=>{u.applyNodeChanges(O)},m=O=>{u.applyEdgeChanges(O)};h?(u.onNodesChange(p),u.onEdgesChange(m)):(u.hooks.value.nodesChange.off(p),u.hooks.value.edgesChange.off(m)),f(()=>{u.hooks.value.nodesChange.off(p),u.hooks.value.edgesChange.off(m)})},{immediate:!0}),Wa(()=>{if(a){const h=e.get(a.id);h?h.$destroy():el(`No store instance found for id ${a.id} in storage.`)}})})}else i&&a.setState(s);if(t&&(Bi(Md,a),t.vueFlowId=a.id),i){const l=Br();(l==null?void 0:l.type.name)!=="VueFlow"&&a.emits.error(new lt(st.USEVUEFLOW_OPTIONS))}return a}function H_(n){const{emits:e,dimensions:t}=Le();let i;St(()=>{const s=n.value,r=()=>{if(!s)return;const o=Fa(s);(o.width===0||o.height===0)&&e.error(new lt(st.MISSING_VIEWPORT_DIMENSIONS)),t.value={width:o.width||500,height:o.height||500}};r(),window.addEventListener("resize",r),s&&(i=new ResizeObserver(()=>r()),i.observe(s)),im(()=>{window.removeEventListener("resize",r),i&&s&&i.unobserve(s)})})}const F_={name:"UserSelection",compatConfig:{MODE:3}},K_=Oe({...F_,props:{userSelectionRect:{}},setup(n){return(e,t)=>(G(),K("div",{class:"vue-flow__selection vue-flow__container",style:gt({width:`${e.userSelectionRect.width}px`,height:`${e.userSelectionRect.height}px`,transform:`translate(${e.userSelectionRect.x}px, ${e.userSelectionRect.y}px)`})},null,4))}}),J_=["tabIndex"],e$={name:"NodesSelection",compatConfig:{MODE:3}},t$=Oe({...e$,setup(n){const{emits:e,viewport:t,getSelectedNodes:i,noPanClassName:s,disableKeyboardA11y:r,userSelectionActive:o}=Le(),a=xg(),l=ae(null),u=yg({el:l,onStart(p){e.selectionDragStart(p)},onDrag(p){e.selectionDrag(p)},onStop(p){e.selectionDragStop(p)}});St(()=>{var p;r.value||(p=l.value)==null||p.focus({preventScroll:!0})});const c=pe(()=>Ka(i.value)),h=pe(()=>({width:`${c.value.width}px`,height:`${c.value.height}px`,top:`${c.value.y}px`,left:`${c.value.x}px`}));function d(p){e.selectionContextMenu({event:p,nodes:i.value})}function f(p){r||ds[p.key]&&(p.preventDefault(),a({x:ds[p.key].x,y:ds[p.key].y},p.shiftKey))}return(p,m)=>!$(o)&&c.value.width&&c.value.height?(G(),K("div",{key:0,class:Ge(["vue-flow__nodesselection vue-flow__container",$(s)]),style:gt({transform:`translate(${$(t).x}px,${$(t).y}px) scale(${$(t).zoom})`})},[q("div",{ref_key:"el",ref:l,class:Ge([{dragging:$(u)},"vue-flow__nodesselection-rect"]),style:gt(h.value),tabIndex:$(r)?void 0:-1,onContextmenu:d,onKeydown:f},null,46,J_)],6)):Ee("",!0)}});function n$(n,e){return{x:n.clientX-e.left,y:n.clientY-e.top}}const i$={name:"Pane",compatConfig:{MODE:3}},s$=Oe({...i$,props:{isSelecting:{type:Boolean},selectionKeyPressed:{type:Boolean}},setup(n){const{vueFlowRef:e,nodes:t,viewport:i,emits:s,userSelectionActive:r,removeSelectedElements:o,userSelectionRect:a,elementsSelectable:l,nodesSelectionActive:u,getSelectedEdges:c,getSelectedNodes:h,removeNodes:d,removeEdges:f,selectionMode:p,deleteKeyCode:m,multiSelectionKeyCode:O,multiSelectionActive:y,edgeLookup:b,nodeLookup:v,connectionLookup:g,defaultEdgeOptions:k}=Le(),S=ae(null),Q=ae(new Set),T=ae(new Set),P=ae(),B=Me(()=>l.value&&(n.isSelecting||r.value));let W=!1,C=!1;const j=gr(m,{actInsideInputWithModifier:!1}),w=gr(O);Qe(j,E=>{E&&(d(h.value),f(c.value),u.value=!1)}),Qe(w,E=>{y.value=E});function R(E,X){return H=>{H.target===X&&(E==null||E(H))}}function _(E){if(W){W=!1;return}s.paneClick(E),o(),u.value=!1}function D(E){E.preventDefault(),E.stopPropagation(),s.paneContextMenu(E)}function N(E){s.paneScroll(E)}function U(E){var X,H,J;if(P.value=(X=e.value)==null?void 0:X.getBoundingClientRect(),!l.value||!n.isSelecting||E.button!==0||E.target!==S.value||!P.value)return;(J=(H=E.target)==null?void 0:H.setPointerCapture)==null||J.call(H,E.pointerId);const{x:me,y:oe}=n$(E,P.value);C=!0,W=!1,o(),a.value={width:0,height:0,startX:me,startY:oe,x:me,y:oe},s.selectionStart(E)}function V(E){var X;if(!P.value||!a.value)return;W=!0;const{x:H,y:J}=ui(E,P.value),{startX:me=0,startY:oe=0}=a.value,xe={startX:me,startY:oe,x:H<me?H:me,y:J<oe?J:oe,width:Math.abs(H-me),height:Math.abs(J-oe)},ye=Q.value,Re=T.value;Q.value=new Set(cg(t.value,xe,i.value,p.value===nh.Partial,!0).map(le=>le.id)),T.value=new Set;const he=((X=k.value)==null?void 0:X.selectable)??!0;for(const le of Q.value){const we=g.value.get(le);if(we)for(const{edgeId:Z}of we.values()){const M=b.value.get(Z);M&&(M.selectable??he)&&T.value.add(Z)}}if(!Ed(ye,Q.value)){const le=Kn(v.value,Q.value,!0);s.nodesChange(le)}if(!Ed(Re,T.value)){const le=Kn(b.value,T.value);s.edgesChange(le)}a.value=xe,r.value=!0,u.value=!1}function Y(E){var X;E.button!==0||!C||((X=E.target)==null||X.releasePointerCapture(E.pointerId),!r.value&&a.value&&E.target===S.value&&_(E),r.value=!1,a.value=null,u.value=Q.value.size>0,s.selectionEnd(E),n.selectionKeyPressed&&(W=!1),C=!1)}return(E,X)=>(G(),K("div",{ref_key:"container",ref:S,class:Ge(["vue-flow__pane vue-flow__container",{selection:E.isSelecting}]),onClick:X[0]||(X[0]=H=>B.value?void 0:R(_,S.value)(H)),onContextmenu:X[1]||(X[1]=H=>R(D,S.value)(H)),onWheelPassive:X[2]||(X[2]=H=>R(N,S.value)(H)),onPointerenter:X[3]||(X[3]=H=>B.value?void 0:$(s).paneMouseEnter(H)),onPointerdown:X[4]||(X[4]=H=>B.value?U(H):$(s).paneMouseMove(H)),onPointermove:X[5]||(X[5]=H=>B.value?V(H):$(s).paneMouseMove(H)),onPointerup:X[6]||(X[6]=H=>B.value?Y(H):void 0),onPointerleave:X[7]||(X[7]=H=>$(s).paneMouseLeave(H))},[Be(E.$slots,"default"),$(r)&&$(a)?(G(),be(K_,{key:0,"user-selection-rect":$(a)},null,8,["user-selection-rect"])):Ee("",!0),$(u)&&$(h).length?(G(),be(t$,{key:1})):Ee("",!0)],34))}}),r$={name:"Transform",compatConfig:{MODE:3}},o$=Oe({...r$,setup(n){const{viewport:e,fitViewOnInit:t,fitViewOnInitDone:i}=Le(),s=pe(()=>t.value?!i.value:!1),r=pe(()=>`translate(${e.value.x}px,${e.value.y}px) scale(${e.value.zoom})`);return(o,a)=>(G(),K("div",{class:"vue-flow__transformationpane vue-flow__container",style:gt({transform:r.value,opacity:s.value?0:void 0})},[Be(o.$slots,"default")],4))}}),a$={name:"Viewport",compatConfig:{MODE:3}},l$=Oe({...a$,setup(n){const{minZoom:e,maxZoom:t,defaultViewport:i,translateExtent:s,zoomActivationKeyCode:r,selectionKeyCode:o,panActivationKeyCode:a,panOnScroll:l,panOnScrollMode:u,panOnScrollSpeed:c,panOnDrag:h,zoomOnDoubleClick:d,zoomOnPinch:f,zoomOnScroll:p,preventScrolling:m,noWheelClassName:O,noPanClassName:y,emits:b,connectionStartHandle:v,userSelectionActive:g,paneDragging:k,d3Zoom:S,d3Selection:Q,d3ZoomHandler:T,viewport:P,viewportRef:B,paneClickDistance:W}=Le();H_(B);const C=ae(!1),j=ae(!1);let w=null,R=!1,_=0,D={x:0,y:0,zoom:0};const N=gr(a),U=gr(o),V=gr(r),Y=Me(()=>(!U.value||U.value&&o.value===!0)&&(N.value||h.value)),E=Me(()=>N.value||l.value),X=Me(()=>U.value||o.value===!0&&Y.value!==!0);St(()=>{if(!B.value){el("Viewport element is missing");return}const ye=B.value,Re=ye.getBoundingClientRect(),he=ES().clickDistance(W.value).scaleExtent([e.value,t.value]).translateExtent(s.value),le=Gt(ye).call(he),we=le.on("wheel.zoom"),Z=_s.translate(i.value.x??0,i.value.y??0).scale(Bn(i.value.zoom??1,e.value,t.value)),M=[[0,0],[Re.width,Re.height]],z=he.constrain()(Z,M,s.value);he.transform(le,z),he.wheelDelta(J),S.value=he,Q.value=le,T.value=we,P.value={x:z.x,y:z.y,zoom:z.k},he.on("start",L=>{var F;if(!L.sourceEvent)return null;_=L.sourceEvent.button,C.value=!0;const ue=oe(L.transform);((F=L.sourceEvent)==null?void 0:F.type)==="mousedown"&&(k.value=!0),D=ue,b.viewportChangeStart(ue),b.moveStart({event:L,flowTransform:ue})}),he.on("end",L=>{if(!L.sourceEvent)return null;if(C.value=!1,k.value=!1,H(Y.value,_??0)&&!R&&b.paneContextMenu(L.sourceEvent),R=!1,me(D,L.transform)){const F=oe(L.transform);D=F,b.viewportChangeEnd(F),b.moveEnd({event:L,flowTransform:F})}}),he.filter(L=>{var F;const ue=V.value||p.value,de=f.value&&L.ctrlKey,fe=L.button;if(fe===1&&L.type==="mousedown"&&(xe(L,"vue-flow__node")||xe(L,"vue-flow__edge")))return!0;if(!Y.value&&!ue&&!E.value&&!d.value&&!f.value||g.value||!d.value&&L.type==="dblclick"||xe(L,O.value)&&L.type==="wheel"||xe(L,y.value)&&(L.type!=="wheel"||E.value&&L.type==="wheel"&&!V.value)||!f.value&&L.ctrlKey&&L.type==="wheel"||!ue&&!E.value&&!de&&L.type==="wheel")return!1;if(!f&&L.type==="touchstart"&&((F=L.touches)==null?void 0:F.length)>1)return L.preventDefault(),!1;if(!Y.value&&(L.type==="mousedown"||L.type==="touchstart")||o.value===!0&&Array.isArray(h.value)&&h.value.includes(0)&&fe===0||Array.isArray(h.value)&&!h.value.includes(fe)&&(L.type==="mousedown"||L.type==="touchstart"))return!1;const Se=Array.isArray(h.value)&&h.value.includes(fe)||o.value===!0&&Array.isArray(h.value)&&!h.value.includes(0)||!fe||fe<=1;return(!L.ctrlKey||N.value||L.type==="wheel")&&Se}),Qe([g,Y],()=>{g.value&&!C.value?he.on("zoom",null):g.value||he.on("zoom",L=>{P.value={x:L.transform.x,y:L.transform.y,zoom:L.transform.k};const F=oe(L.transform);R=H(Y.value,_??0),b.viewportChange(F),b.move({event:L,flowTransform:F})})},{immediate:!0}),Qe([g,E,u,V,f,m,O],()=>{E.value&&!V.value&&!g.value?le.on("wheel.zoom",L=>{if(xe(L,O.value))return!1;const F=V.value||p.value,ue=f.value&&L.ctrlKey;if(!(!m.value||E.value||F||ue))return!1;L.preventDefault(),L.stopImmediatePropagation();const fe=le.property("__zoom").k||1,Se=ya();if(!N.value&&L.ctrlKey&&f.value&&Se){const Is=dn(L),Iy=J(L),Ly=fe*2**Iy;he.scaleTo(le,Ly,Is,L);return}const Ae=L.deltaMode===1?20:1;let Ce=u.value===mr.Vertical?0:L.deltaX*Ae,qe=u.value===mr.Horizontal?0:L.deltaY*Ae;!Se&&L.shiftKey&&u.value!==mr.Vertical&&!Ce&&qe&&(Ce=qe,qe=0),he.translateBy(le,-(Ce/fe)*c.value,-(qe/fe)*c.value);const an=oe(le.property("__zoom"));w&&clearTimeout(w),j.value?(b.move({event:L,flowTransform:an}),b.viewportChange(an),w=setTimeout(()=>{b.moveEnd({event:L,flowTransform:an}),b.viewportChangeEnd(an),j.value=!1},150)):(j.value=!0,b.moveStart({event:L,flowTransform:an}),b.viewportChangeStart(an))},{passive:!1}):typeof we<"u"&&le.on("wheel.zoom",function(L,F){const ue=!m.value&&L.type==="wheel"&&!L.ctrlKey,de=V.value||p.value,fe=f.value&&L.ctrlKey;if(!de&&!l.value&&!fe&&L.type==="wheel"||ue||xe(L,O.value))return null;L.preventDefault(),we.call(this,L,F)},{passive:!1})},{immediate:!0})});function H(ye,Re){return Re===2&&Array.isArray(ye)&&ye.includes(2)}function J(ye){const Re=ye.ctrlKey&&ya()?10:1;return-ye.deltaY*(ye.deltaMode===1?.05:ye.deltaMode?1:.002)*Re}function me(ye,Re){return ye.x!==Re.x&&!Number.isNaN(Re.x)||ye.y!==Re.y&&!Number.isNaN(Re.y)||ye.zoom!==Re.k&&!Number.isNaN(Re.k)}function oe(ye){return{x:ye.x,y:ye.y,zoom:ye.k}}function xe(ye,Re){return ye.target.closest(`.${Re}`)}return(ye,Re)=>(G(),K("div",{ref_key:"viewportRef",ref:B,class:"vue-flow__viewport vue-flow__container"},[x(s$,{"is-selecting":X.value,"selection-key-pressed":$(U),class:Ge({connecting:!!$(v),dragging:$(k),draggable:$(h)===!0||Array.isArray($(h))&&$(h).includes(0)})},{default:A(()=>[x(o$,null,{default:A(()=>[Be(ye.$slots,"default")]),_:3})]),_:3},8,["is-selecting","selection-key-pressed","class"])],512))}}),u$=["id"],c$=["id"],h$=["id"],d$={name:"A11yDescriptions",compatConfig:{MODE:3}},f$=Oe({...d$,setup(n){const{id:e,disableKeyboardA11y:t,ariaLiveMessage:i}=Le();return(s,r)=>(G(),K(ke,null,[q("div",{id:`${$(tg)}-${$(e)}`,style:{display:"none"}}," Press enter or space to select a node. "+ve($(t)?"":"You can then use the arrow keys to move the node around.")+" You can then use the arrow keys to move the node around, press delete to remove it and press escape to cancel. ",9,u$),q("div",{id:`${$(ng)}-${$(e)}`,style:{display:"none"}}," Press enter or space to select an edge. You can then press delete to remove it or press escape to cancel. ",8,c$),$(t)?Ee("",!0):(G(),K("div",{key:0,id:`${$(DS)}-${$(e)}`,"aria-live":"assertive","aria-atomic":"true",style:{position:"absolute",width:"1px",height:"1px",margin:"-1px",border:"0",padding:"0",overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)","clip-path":"inset(100%)"}},ve($(i)),9,h$))],64))}});function p$(){const n=Le();Qe(()=>n.viewportHelper.value.viewportInitialized,e=>{e&&setTimeout(()=>{n.emits.init(n),n.emits.paneReady(n)},1)})}function m$(n,e,t){return t===ce.Left?n-e:t===ce.Right?n+e:n}function g$(n,e,t){return t===ce.Top?n-e:t===ce.Bottom?n+e:n}const rh=function({radius:n=10,centerX:e=0,centerY:t=0,position:i=ce.Top,type:s}){return Ie("circle",{class:`vue-flow__edgeupdater vue-flow__edgeupdater-${s}`,cx:m$(e,n,i),cy:g$(t,n,i),r:n,stroke:"transparent",fill:"transparent"})};rh.props=["radius","centerX","centerY","position","type"];rh.compatConfig={MODE:3};const Id=rh,O$=Oe({name:"Edge",compatConfig:{MODE:3},props:["id"],setup(n){const{id:e,addSelectedEdges:t,connectionMode:i,edgeUpdaterRadius:s,emits:r,nodesSelectionActive:o,noPanClassName:a,getEdgeTypes:l,removeSelectedEdges:u,findEdge:c,findNode:h,isValidConnection:d,multiSelectionActive:f,disableKeyboardA11y:p,elementsSelectable:m,edgesUpdatable:O,edgesFocusable:y,hooks:b}=Le(),v=pe(()=>c(n.id)),{emit:g,on:k}=c_(v.value,r),S=Wn(nl),Q=Br(),T=ae(!1),P=ae(!1),B=ae(""),W=ae(null),C=ae("source"),j=ae(null),w=Me(()=>typeof v.value.selectable>"u"?m.value:v.value.selectable),R=Me(()=>typeof v.value.updatable>"u"?O.value:v.value.updatable),_=Me(()=>typeof v.value.focusable>"u"?y.value:v.value.focusable);Bi(a_,n.id),Bi(l_,j);const D=pe(()=>v.value.class instanceof Function?v.value.class(v.value):v.value.class),N=pe(()=>v.value.style instanceof Function?v.value.style(v.value):v.value.style),U=pe(()=>{const M=v.value.type||"default",z=S==null?void 0:S[`edge-${M}`];if(z)return z;let L=v.value.template??l.value[M];if(typeof L=="string"&&Q){const F=Object.keys(Q.appContext.components);F&&F.includes(M)&&(L=ie(M,!1))}return L&&typeof L!="string"?L:(r.error(new lt(st.EDGE_TYPE_MISSING,L)),!1)}),{handlePointerDown:V}=wg({nodeId:B,handleId:W,type:C,isValidConnection:d,edgeUpdaterType:C,onEdgeUpdate:X,onEdgeUpdateEnd:H});return()=>{const M=h(v.value.source),z=h(v.value.target),L="pathOptions"in v.value?v.value.pathOptions:{};if(!M&&!z)return r.error(new lt(st.EDGE_SOURCE_TARGET_MISSING,v.value.id,v.value.source,v.value.target)),null;if(!M)return r.error(new lt(st.EDGE_SOURCE_MISSING,v.value.id,v.value.source)),null;if(!z)return r.error(new lt(st.EDGE_TARGET_MISSING,v.value.id,v.value.target)),null;if(!v.value||v.value.hidden||M.hidden||z.hidden)return null;let F;i.value===ci.Strict?F=M.handleBounds.source:F=[...M.handleBounds.source||[],...M.handleBounds.target||[]];const ue=kd(F,v.value.sourceHandle);let de;i.value===ci.Strict?de=z.handleBounds.target:de=[...z.handleBounds.target||[],...z.handleBounds.source||[]];const fe=kd(de,v.value.targetHandle),Se=(ue==null?void 0:ue.position)||ce.Bottom,Ae=(fe==null?void 0:fe.position)||ce.Top,{x:Ce,y:qe}=$s(M,ue,Se),{x:an,y:Is}=$s(z,fe,Ae);return v.value.sourceX=Ce,v.value.sourceY=qe,v.value.targetX=an,v.value.targetY=Is,Ie("g",{ref:j,key:n.id,"data-id":n.id,class:["vue-flow__edge",`vue-flow__edge-${U.value===!1?"default":v.value.type||"default"}`,a.value,D.value,{updating:T.value,selected:v.value.selected,animated:v.value.animated,inactive:!w.value&&!b.value.edgeClick.hasListeners()}],onClick:me,onContextmenu:oe,onDblclick:xe,onMouseenter:ye,onMousemove:Re,onMouseleave:he,onKeyDown:_.value?Z:void 0,tabIndex:_.value?0:void 0,"aria-label":v.value.ariaLabel===null?void 0:v.value.ariaLabel||`Edge from ${v.value.source} to ${v.value.target}`,"aria-describedby":_.value?`${ng}-${e}`:void 0,role:_.value?"button":"img"},[P.value?null:Ie(U.value===!1?l.value.default:U.value,{id:n.id,sourceNode:M,targetNode:z,source:v.value.source,target:v.value.target,type:v.value.type,updatable:R.value,selected:v.value.selected,animated:v.value.animated,label:v.value.label,labelStyle:v.value.labelStyle,labelShowBg:v.value.labelShowBg,labelBgStyle:v.value.labelBgStyle,labelBgPadding:v.value.labelBgPadding,labelBgBorderRadius:v.value.labelBgBorderRadius,data:v.value.data,events:{...v.value.events,...k},style:N.value,markerStart:`url('#${Pr(v.value.markerStart,e)}')`,markerEnd:`url('#${Pr(v.value.markerEnd,e)}')`,sourcePosition:Se,targetPosition:Ae,sourceX:Ce,sourceY:qe,targetX:an,targetY:Is,sourceHandleId:v.value.sourceHandle,targetHandleId:v.value.targetHandle,interactionWidth:v.value.interactionWidth,...L}),[R.value==="source"||R.value===!0?[Ie("g",{onMousedown:le,onMouseenter:Y,onMouseout:E},Ie(Id,{position:Se,centerX:Ce,centerY:qe,radius:s.value,type:"source","data-type":"source"}))]:null,R.value==="target"||R.value===!0?[Ie("g",{onMousedown:we,onMouseenter:Y,onMouseout:E},Ie(Id,{position:Ae,centerX:an,centerY:Is,radius:s.value,type:"target","data-type":"target"}))]:null]])};function Y(){T.value=!0}function E(){T.value=!1}function X(M,z){g.update({event:M,edge:v.value,connection:z})}function H(M){g.updateEnd({event:M,edge:v.value}),P.value=!1}function J(M,z){M.button===0&&(P.value=!0,B.value=z?v.value.target:v.value.source,W.value=(z?v.value.targetHandle:v.value.sourceHandle)??"",C.value=z?"target":"source",g.updateStart({event:M,edge:v.value}),V(M))}function me(M){var z;const L={event:M,edge:v.value};w.value&&(o.value=!1,v.value.selected&&f.value?(u([v.value]),(z=j.value)==null||z.blur()):t([v.value])),g.click(L)}function oe(M){g.contextMenu({event:M,edge:v.value})}function xe(M){g.doubleClick({event:M,edge:v.value})}function ye(M){g.mouseEnter({event:M,edge:v.value})}function Re(M){g.mouseMove({event:M,edge:v.value})}function he(M){g.mouseLeave({event:M,edge:v.value})}function le(M){J(M,!0)}function we(M){J(M,!1)}function Z(M){var z;!p.value&&ig.includes(M.key)&&w.value&&(M.key==="Escape"?((z=j.value)==null||z.blur(),u([c(n.id)])):t([c(n.id)]))}}}),y$=O$,v$=Oe({name:"ConnectionLine",compatConfig:{MODE:3},setup(){var n;const{id:e,connectionMode:t,connectionStartHandle:i,connectionEndHandle:s,connectionPosition:r,connectionLineType:o,connectionLineStyle:a,connectionLineOptions:l,connectionStatus:u,viewport:c,findNode:h}=Le(),d=(n=Wn(nl))==null?void 0:n["connection-line"],f=pe(()=>{var b;return h((b=i.value)==null?void 0:b.nodeId)}),p=pe(()=>{var b;return h((b=s.value)==null?void 0:b.nodeId)??null}),m=pe(()=>({x:(r.value.x-c.value.x)/c.value.zoom,y:(r.value.y-c.value.y)/c.value.zoom})),O=pe(()=>l.value.markerStart?`url(#${Pr(l.value.markerStart,e)})`:""),y=pe(()=>l.value.markerEnd?`url(#${Pr(l.value.markerEnd,e)})`:"");return()=>{var b,v,g;if(!f.value||!i.value)return null;const k=i.value.id,S=i.value.type,Q=f.value.handleBounds;let T=(Q==null?void 0:Q[S])||[];if(t.value===ci.Loose){const N=(Q==null?void 0:Q[S==="source"?"target":"source"])||[];T=[...T,...N]}if(!T)return null;const P=(k?T.find(N=>N.id===k):T[0])??null,B=(P==null?void 0:P.position)||ce.Top,{x:W,y:C}=$s(f.value,P,B);let j=null;p.value&&(t.value===ci.Strict?j=((b=p.value.handleBounds[S==="source"?"target":"source"])==null?void 0:b.find(N=>{var U;return N.id===((U=s.value)==null?void 0:U.id)}))||null:j=((v=[...p.value.handleBounds.source||[],...p.value.handleBounds.target||[]])==null?void 0:v.find(N=>{var U;return N.id===((U=s.value)==null?void 0:U.id)}))||null);const w=((g=s.value)==null?void 0:g.position)??(B?zu[B]:null);if(!B||!w)return null;const R=o.value??l.value.type??_i.Bezier;let _="";const D={sourceX:W,sourceY:C,sourcePosition:B,targetX:m.value.x,targetY:m.value.y,targetPosition:w};return R===_i.Bezier?[_]=kg(D):R===_i.Step?[_]=Xu({...D,borderRadius:0}):R===_i.SmoothStep?[_]=Xu(D):R===_i.SimpleBezier?[_]=Pg(D):_=`M${W},${C} ${m.value.x},${m.value.y}`,Ie("svg",{class:"vue-flow__edges vue-flow__connectionline vue-flow__container"},Ie("g",{class:"vue-flow__connection"},d?Ie(d,{sourceX:W,sourceY:C,sourcePosition:B,targetX:m.value.x,targetY:m.value.y,targetPosition:w,sourceNode:f.value,sourceHandle:P,targetNode:p.value,targetHandle:j,markerEnd:y.value,markerStart:O.value,connectionStatus:u.value}):Ie("path",{d:_,class:[l.value.class,u,"vue-flow__connection-path"],style:{...a.value,...l.value.style},"marker-end":y.value,"marker-start":O.value})))}}}),w$=v$,b$=["id","markerWidth","markerHeight","markerUnits","orient"],x$={name:"MarkerType",compatConfig:{MODE:3}},S$=Oe({...x$,props:{id:{},type:{},color:{default:"none"},width:{default:12.5},height:{default:12.5},markerUnits:{default:"strokeWidth"},orient:{default:"auto-start-reverse"},strokeWidth:{default:1}},setup(n){return(e,t)=>(G(),K("marker",{id:e.id,class:"vue-flow__arrowhead",viewBox:"-10 -10 20 20",refX:"0",refY:"0",markerWidth:`${e.width}`,markerHeight:`${e.height}`,markerUnits:e.markerUnits,orient:e.orient},[e.type===$(Nu).ArrowClosed?(G(),K("polyline",{key:0,style:gt({stroke:e.color,fill:e.color,strokeWidth:e.strokeWidth}),"stroke-linecap":"round","stroke-linejoin":"round",points:"-5,-4 0,0 -5,4 -5,-4"},null,4)):Ee("",!0),e.type===$(Nu).Arrow?(G(),K("polyline",{key:1,style:gt({stroke:e.color,strokeWidth:e.strokeWidth}),"stroke-linecap":"round","stroke-linejoin":"round",fill:"none",points:"-5,-4 0,0 -5,4"},null,4)):Ee("",!0)],8,b$))}}),_$={class:"vue-flow__marker vue-flow__container"},$$={name:"MarkerDefinitions",compatConfig:{MODE:3}},k$=Oe({...$$,setup(n){const{id:e,edges:t,connectionLineOptions:i,defaultMarkerColor:s}=Le(),r=pe(()=>{const o=new Set,a=[],l=u=>{if(u){const c=Pr(u,e);o.has(c)||(typeof u=="object"?a.push({...u,id:c,color:u.color||s.value}):a.push({id:c,color:s.value,type:u}),o.add(c))}};for(const u of[i.value.markerEnd,i.value.markerStart])l(u);for(const u of t.value)for(const c of[u.markerStart,u.markerEnd])l(c);return a.sort((u,c)=>u.id.localeCompare(c.id))});return(o,a)=>(G(),K("svg",_$,[q("defs",null,[(G(!0),K(ke,null,Xe(r.value,l=>(G(),be(S$,{id:l.id,key:l.id,type:l.type,color:l.color,width:l.width,height:l.height,markerUnits:l.markerUnits,"stroke-width":l.strokeWidth,orient:l.orient},null,8,["id","type","color","width","height","markerUnits","stroke-width","orient"]))),128))])]))}}),P$={name:"Edges",compatConfig:{MODE:3}},Q$=Oe({...P$,setup(n){const{findNode:e,getEdges:t,elevateEdgesOnSelect:i}=Le();return(s,r)=>(G(),K(ke,null,[x(k$),(G(!0),K(ke,null,Xe($(t),o=>(G(),K("svg",{key:o.id,class:"vue-flow__edges vue-flow__container",style:gt({zIndex:$(GS)(o,$(e),$(i))})},[x($(y$),{id:o.id},null,8,["id"])],4))),128)),x($(w$))],64))}}),T$=Oe({name:"Node",compatConfig:{MODE:3},props:["id","resizeObserver"],setup(n){const{id:e,noPanClassName:t,selectNodesOnDrag:i,nodesSelectionActive:s,multiSelectionActive:r,emits:o,removeSelectedNodes:a,addSelectedNodes:l,updateNodeDimensions:u,onUpdateNodeInternals:c,getNodeTypes:h,nodeExtent:d,elevateNodesOnSelect:f,disableKeyboardA11y:p,ariaLiveMessage:m,snapToGrid:O,snapGrid:y,nodeDragThreshold:b,nodesDraggable:v,elementsSelectable:g,nodesConnectable:k,nodesFocusable:S,hooks:Q}=Le(),T=ae(null);Bi(Og,T),Bi(tl,n.id);const P=Wn(nl),B=Br(),W=xg(),{node:C,parentNode:j}=bg(n.id),{emit:w,on:R}=f_(C,o),_=Me(()=>typeof C.draggable>"u"?v.value:C.draggable),D=Me(()=>typeof C.selectable>"u"?g.value:C.selectable),N=Me(()=>typeof C.connectable>"u"?k.value:C.connectable),U=Me(()=>typeof C.focusable>"u"?S.value:C.focusable),V=Me(()=>D.value||_.value||Q.value.nodeClick.hasListeners()||Q.value.nodeDoubleClick.hasListeners()||Q.value.nodeMouseEnter.hasListeners()||Q.value.nodeMouseMove.hasListeners()||Q.value.nodeMouseLeave.hasListeners()),Y=Me(()=>!!C.dimensions.width&&!!C.dimensions.height),E=pe(()=>{const z=C.type||"default",L=P==null?void 0:P[`node-${z}`];if(L)return L;let F=C.template||h.value[z];if(typeof F=="string"&&B){const ue=Object.keys(B.appContext.components);ue&&ue.includes(z)&&(F=ie(z,!1))}return F&&typeof F!="string"?F:(o.error(new lt(st.NODE_TYPE_MISSING,F)),!1)}),X=yg({id:n.id,el:T,disabled:()=>!_.value,selectable:D,dragHandle:()=>C.dragHandle,onStart(z){w.dragStart(z)},onDrag(z){w.drag(z)},onStop(z){w.dragStop(z)},onClick(z){Z(z)}}),H=pe(()=>C.class instanceof Function?C.class(C):C.class),J=pe(()=>{const z=(C.style instanceof Function?C.style(C):C.style)||{},L=C.width instanceof Function?C.width(C):C.width,F=C.height instanceof Function?C.height(C):C.height;return!z.width&&L&&(z.width=typeof L=="string"?L:`${L}px`),!z.height&&F&&(z.height=typeof F=="string"?F:`${F}px`),z}),me=Me(()=>Number(C.zIndex??J.value.zIndex??0));return c(z=>{(z.includes(n.id)||!z.length)&&xe()}),St(()=>{Qe(()=>C.hidden,(z=!1,L,F)=>{!z&&T.value&&(n.resizeObserver.observe(T.value),F(()=>{T.value&&n.resizeObserver.unobserve(T.value)}))},{immediate:!0,flush:"post"})}),Qe([()=>C.type,()=>C.sourcePosition,()=>C.targetPosition],()=>{Dn(()=>{u([{id:n.id,nodeElement:T.value,forceUpdate:!0}])})}),Qe([()=>C.position.x,()=>C.position.y,()=>{var z;return(z=j.value)==null?void 0:z.computedPosition.x},()=>{var z;return(z=j.value)==null?void 0:z.computedPosition.y},()=>{var z;return(z=j.value)==null?void 0:z.computedPosition.z},me,()=>C.selected,()=>C.dimensions.height,()=>C.dimensions.width,()=>{var z;return(z=j.value)==null?void 0:z.dimensions.height},()=>{var z;return(z=j.value)==null?void 0:z.dimensions.width}],([z,L,F,ue,de,fe])=>{const Se={x:z,y:L,z:fe+(f.value&&C.selected?1e3:0)};typeof F<"u"&&typeof ue<"u"?C.computedPosition=BS({x:F,y:ue,z:de},Se):C.computedPosition=Se},{flush:"post",immediate:!0}),Qe([()=>C.extent,d],([z,L],[F,ue])=>{(z!==F||L!==ue)&&oe()}),C.extent==="parent"||typeof C.extent=="object"&&"range"in C.extent&&C.extent.range==="parent"?Qu(()=>Y).toBe(!0).then(oe):oe(),()=>C.hidden?null:Ie("div",{ref:T,"data-id":C.id,class:["vue-flow__node",`vue-flow__node-${E.value===!1?"default":C.type||"default"}`,{[t.value]:_.value,dragging:X==null?void 0:X.value,draggable:_.value,selected:C.selected,selectable:D.value,parent:C.isParent},H.value],style:{visibility:Y.value?"visible":"hidden",zIndex:C.computedPosition.z??me.value,transform:`translate(${C.computedPosition.x}px,${C.computedPosition.y}px)`,pointerEvents:V.value?"all":"none",...J.value},tabIndex:U.value?0:void 0,role:U.value?"button":void 0,"aria-describedby":p.value?void 0:`${tg}-${e}`,"aria-label":C.ariaLabel,onMouseenter:ye,onMousemove:Re,onMouseleave:he,onContextmenu:le,onClick:Z,onDblclick:we,onKeydown:M},[Ie(E.value===!1?h.value.default:E.value,{id:C.id,type:C.type,data:C.data,events:{...C.events,...R},selected:C.selected,resizing:C.resizing,dragging:X.value,connectable:N.value,position:C.computedPosition,dimensions:C.dimensions,isValidTargetPos:C.isValidTargetPos,isValidSourcePos:C.isValidSourcePos,parent:C.parentNode,parentNodeId:C.parentNode,zIndex:C.computedPosition.z??me.value,targetPosition:C.targetPosition,sourcePosition:C.sourcePosition,label:C.label,dragHandle:C.dragHandle,onUpdateNodeInternals:xe})]);function oe(){const z=C.computedPosition,{computedPosition:L,position:F}=ih(C,O.value?Ja(z,y.value):z,o.error,d.value,j.value);(C.computedPosition.x!==L.x||C.computedPosition.y!==L.y)&&(C.computedPosition={...C.computedPosition,...L}),(C.position.x!==F.x||C.position.y!==F.y)&&(C.position=F)}function xe(){T.value&&u([{id:n.id,nodeElement:T.value,forceUpdate:!0}])}function ye(z){X!=null&&X.value||w.mouseEnter({event:z,node:C})}function Re(z){X!=null&&X.value||w.mouseMove({event:z,node:C})}function he(z){X!=null&&X.value||w.mouseLeave({event:z,node:C})}function le(z){return w.contextMenu({event:z,node:C})}function we(z){return w.doubleClick({event:z,node:C})}function Z(z){D.value&&(!i.value||!_.value||b.value>0)&&Vu(C,r.value,l,a,s,!1,T.value),w.click({event:z,node:C})}function M(z){if(!(Iu(z)||p.value))if(ig.includes(z.key)&&D.value){const L=z.key==="Escape";Vu(C,r.value,l,a,s,L,T.value)}else _.value&&C.selected&&ds[z.key]&&(z.preventDefault(),m.value=`Moved selected node ${z.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~C.position.x}, y: ${~~C.position.y}`,W({x:ds[z.key].x,y:ds[z.key].y},z.shiftKey))}}}),A$=T$;function C$(n={includeHiddenNodes:!1}){const{nodes:e}=Le();return pe(()=>{if(e.value.length===0)return!1;for(const t of e.value)if((n.includeHiddenNodes||!t.hidden)&&((t==null?void 0:t.handleBounds)===void 0||t.dimensions.width===0||t.dimensions.height===0))return!1;return!0})}const E$={class:"vue-flow__nodes vue-flow__container"},M$={name:"Nodes",compatConfig:{MODE:3}},R$=Oe({...M$,setup(n){const{getNodes:e,updateNodeDimensions:t,emits:i}=Le(),s=C$(),r=ae();return Qe(s,o=>{o&&Dn(()=>{i.nodesInitialized(e.value)})},{immediate:!0}),St(()=>{r.value=new ResizeObserver(o=>{const a=o.map(l=>({id:l.target.getAttribute("data-id"),nodeElement:l.target,forceUpdate:!0}));Dn(()=>t(a))})}),im(()=>{var o;return(o=r.value)==null?void 0:o.disconnect()}),(o,a)=>(G(),K("div",E$,[r.value?(G(!0),K(ke,{key:0},Xe($(e),(l,u,c,h)=>{const d=[l.id];if(h&&h.key===l.id&&Uy(h,d))return h;const f=(G(),be($(A$),{id:l.id,key:l.id,"resize-observer":r.value},null,8,["id","resize-observer"]));return f.memo=d,f},a,0),128)):Ee("",!0)]))}});function Z$(){const{emits:n}=Le();St(()=>{if(gg()){const e=document.querySelector(".vue-flow__pane");e&&window.getComputedStyle(e).zIndex!=="1"&&n.error(new lt(st.MISSING_STYLES))}})}const D$=q("div",{class:"vue-flow__edge-labels"},null,-1),N$={name:"VueFlow",compatConfig:{MODE:3}},I$=Oe({...N$,props:{id:{},modelValue:{},nodes:{},edges:{},edgeTypes:{},nodeTypes:{},connectionMode:{},connectionLineType:{},connectionLineStyle:{default:void 0},connectionLineOptions:{default:void 0},connectionRadius:{},isValidConnection:{type:[Function,null],default:void 0},deleteKeyCode:{default:void 0},selectionKeyCode:{type:[Boolean,null],default:void 0},multiSelectionKeyCode:{default:void 0},zoomActivationKeyCode:{default:void 0},panActivationKeyCode:{default:void 0},snapToGrid:{type:Boolean,default:void 0},snapGrid:{},onlyRenderVisibleElements:{type:Boolean,default:void 0},edgesUpdatable:{type:[Boolean,String],default:void 0},nodesDraggable:{type:Boolean,default:void 0},nodesConnectable:{type:Boolean,default:void 0},nodeDragThreshold:{},elementsSelectable:{type:Boolean,default:void 0},selectNodesOnDrag:{type:Boolean,default:void 0},panOnDrag:{type:[Boolean,Array],default:void 0},minZoom:{},maxZoom:{},defaultViewport:{},translateExtent:{},nodeExtent:{},defaultMarkerColor:{},zoomOnScroll:{type:Boolean,default:void 0},zoomOnPinch:{type:Boolean,default:void 0},panOnScroll:{type:Boolean,default:void 0},panOnScrollSpeed:{},panOnScrollMode:{},paneClickDistance:{},zoomOnDoubleClick:{type:Boolean,default:void 0},preventScrolling:{type:Boolean,default:void 0},selectionMode:{},edgeUpdaterRadius:{},fitViewOnInit:{type:Boolean,default:void 0},connectOnClick:{type:Boolean,default:void 0},applyDefault:{type:Boolean,default:void 0},autoConnect:{type:[Boolean,Function],default:void 0},noDragClassName:{},noWheelClassName:{},noPanClassName:{},defaultEdgeOptions:{},elevateEdgesOnSelect:{type:Boolean,default:void 0},elevateNodesOnSelect:{type:Boolean,default:void 0},disableKeyboardA11y:{type:Boolean,default:void 0},edgesFocusable:{type:Boolean,default:void 0},nodesFocusable:{type:Boolean,default:void 0},autoPanOnConnect:{type:Boolean,default:void 0},autoPanOnNodeDrag:{type:Boolean,default:void 0},autoPanSpeed:{}},emits:["nodesChange","edgesChange","nodesInitialized","paneReady","init","updateNodeInternals","error","connect","connectStart","connectEnd","clickConnectStart","clickConnectEnd","moveStart","move","moveEnd","selectionDragStart","selectionDrag","selectionDragStop","selectionContextMenu","selectionStart","selectionEnd","viewportChangeStart","viewportChange","viewportChangeEnd","paneScroll","paneClick","paneContextMenu","paneMouseEnter","paneMouseMove","paneMouseLeave","edgeUpdate","edgeContextMenu","edgeMouseEnter","edgeMouseMove","edgeMouseLeave","edgeDoubleClick","edgeClick","edgeUpdateStart","edgeUpdateEnd","nodeContextMenu","nodeMouseEnter","nodeMouseMove","nodeMouseLeave","nodeDoubleClick","nodeClick","nodeDragStart","nodeDrag","nodeDragStop","miniMapNodeClick","miniMapNodeDoubleClick","miniMapNodeMouseEnter","miniMapNodeMouseMove","miniMapNodeMouseLeave","update:modelValue","update:nodes","update:edges"],setup(n,{expose:e,emit:t}){const i=n,s=nm(),r=Pl(i,"modelValue",t),o=Pl(i,"nodes",t),a=Pl(i,"edges",t),l=Le(i),u=g_({modelValue:r,nodes:o,edges:a},i,l);return y_(t,l.hooks),p$(),Z$(),Bi(nl,s),Oi(()=>{u()}),e(l),(c,h)=>(G(),K("div",{ref:$(l).vueFlowRef,class:"vue-flow"},[x(l$,null,{default:A(()=>[x(Q$),D$,x(R$),Be(c.$slots,"zoom-pane")]),_:3}),Be(c.$slots,"default"),x(f$)],512))}}),L$={name:"Panel",compatConfig:{MODE:3}},Tg=Oe({...L$,props:{position:{}},setup(n){const e=n,{userSelectionActive:t}=Le(),i=pe(()=>`${e.position}`.split("-"));return(s,r)=>(G(),K("div",{class:Ge(["vue-flow__panel",i.value]),style:gt({pointerEvents:$(t)?"none":"all"})},[Be(s.$slots,"default")],6))}});var Mn=(n=>(n.Lines="lines",n.Dots="dots",n))(Mn||{});const Ag=function({dimensions:n,size:e,color:t}){return Ie("path",{stroke:t,"stroke-width":e,d:`M${n[0]/2} 0 V${n[1]} M0 ${n[1]/2} H${n[0]}`})},Cg=function({radius:n,color:e}){return Ie("circle",{cx:n,cy:n,r:n,fill:e})};Mn.Lines+"",Mn.Dots+"";const z$={[Mn.Dots]:"#81818a",[Mn.Lines]:"#eee"},V$=["id","x","y","width","height","patternTransform"],X$={key:2,height:"100",width:"100"},B$=["fill"],U$=["x","y","fill"],j$={name:"Background",compatConfig:{MODE:3}},W$=Oe({...j$,props:{id:{},variant:{default:()=>Mn.Dots},gap:{default:20},size:{default:1},lineWidth:{default:1},patternColor:{},color:{},bgColor:{},height:{default:100},width:{default:100},x:{default:0},y:{default:0},offset:{default:0}},setup(n){const{id:e,viewport:t}=Le(),i=pe(()=>{const o=t.value.zoom,[a,l]=Array.isArray(n.gap)?n.gap:[n.gap,n.gap],u=[a*o||1,l*o||1],c=n.size*o,[h,d]=Array.isArray(n.offset)?n.offset:[n.offset,n.offset],f=[h*o||1+u[0]/2,d*o||1+u[1]/2];return{scaledGap:u,offset:f,size:c}}),s=Me(()=>`pattern-${e}${n.id?`-${n.id}`:""}`),r=Me(()=>n.color||n.patternColor||z$[n.variant||Mn.Dots]);return(o,a)=>(G(),K("svg",{class:"vue-flow__background vue-flow__container",style:gt({height:`${o.height>100?100:o.height}%`,width:`${o.width>100?100:o.width}%`})},[Be(o.$slots,"pattern-container",{id:s.value},()=>[q("pattern",{id:s.value,x:$(t).x%i.value.scaledGap[0],y:$(t).y%i.value.scaledGap[1],width:i.value.scaledGap[0],height:i.value.scaledGap[1],patternTransform:`translate(-${i.value.offset[0]},-${i.value.offset[1]})`,patternUnits:"userSpaceOnUse"},[Be(o.$slots,"pattern",{},()=>[o.variant===$(Mn).Lines?(G(),be($(Ag),{key:0,size:o.lineWidth,color:r.value,dimensions:i.value.scaledGap},null,8,["size","color","dimensions"])):o.variant===$(Mn).Dots?(G(),be($(Cg),{key:1,color:r.value,radius:i.value.size/2},null,8,["color","radius"])):Ee("",!0),o.bgColor?(G(),K("svg",X$,[q("rect",{width:"100%",height:"100%",fill:o.bgColor},null,8,B$)])):Ee("",!0)])],8,V$)]),q("rect",{x:o.x,y:o.y,width:"100%",height:"100%",fill:`url(#${s.value})`},null,8,U$),Be(o.$slots,"default",{id:s.value})],4))}}),q$={name:"ControlButton",compatConfig:{MODE:3}},Y$=(n,e)=>{const t=n.__vccOpts||n;for(const[i,s]of e)t[i]=s;return t},G$={class:"vue-flow__controls-button"};function H$(n,e,t,i,s,r){return G(),K("button",G$,[Be(n.$slots,"default")])}const co=Y$(q$,[["render",H$]]),F$={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},K$=q("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"},null,-1),J$=[K$];function ek(n,e){return G(),K("svg",F$,J$)}const tk={render:ek},nk={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5"},ik=q("path",{d:"M0 0h32v4.2H0z"},null,-1),sk=[ik];function rk(n,e){return G(),K("svg",nk,sk)}const ok={render:rk},ak={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30"},lk=q("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0 0 27.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94a.919.919 0 0 1-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"},null,-1),uk=[lk];function ck(n,e){return G(),K("svg",ak,uk)}const hk={render:ck},dk={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},fk=q("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 0 0 0 13.714v15.238A3.056 3.056 0 0 0 3.048 32h18.285a3.056 3.056 0 0 0 3.048-3.048V13.714a3.056 3.056 0 0 0-3.048-3.047zM12.19 24.533a3.056 3.056 0 0 1-3.047-3.047 3.056 3.056 0 0 1 3.047-3.048 3.056 3.056 0 0 1 3.048 3.048 3.056 3.056 0 0 1-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"},null,-1),pk=[fk];function mk(n,e){return G(),K("svg",dk,pk)}const gk={render:mk},Ok={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},yk=q("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 0 0 0 13.714v15.238A3.056 3.056 0 0 0 3.048 32h18.285a3.056 3.056 0 0 0 3.048-3.048V13.714a3.056 3.056 0 0 0-3.048-3.047zM12.19 24.533a3.056 3.056 0 0 1-3.047-3.047 3.056 3.056 0 0 1 3.047-3.048 3.056 3.056 0 0 1 3.048 3.048 3.056 3.056 0 0 1-3.048 3.047z"},null,-1),vk=[yk];function wk(n,e){return G(),K("svg",Ok,vk)}const bk={render:wk},xk={name:"Controls",compatConfig:{MODE:3}},Sk=Oe({...xk,props:{showZoom:{type:Boolean,default:!0},showFitView:{type:Boolean,default:!0},showInteractive:{type:Boolean,default:!0},fitViewParams:{},position:{default:()=>eg.BottomLeft}},emits:["zoomIn","zoomOut","fitView","interactionChange"],setup(n,{emit:e}){const{nodesDraggable:t,nodesConnectable:i,elementsSelectable:s,setInteractive:r,zoomIn:o,zoomOut:a,fitView:l,viewport:u,minZoom:c,maxZoom:h}=Le(),d=Me(()=>t.value||i.value||s.value),f=Me(()=>u.value.zoom<=c.value),p=Me(()=>u.value.zoom>=h.value);function m(){o(),e("zoomIn")}function O(){a(),e("zoomOut")}function y(){l(n.fitViewParams),e("fitView")}function b(){r(!d.value),e("interactionChange",!d.value)}return(v,g)=>(G(),be($(Tg),{class:"vue-flow__controls",position:v.position},{default:A(()=>[Be(v.$slots,"top"),v.showZoom?(G(),K(ke,{key:0},[Be(v.$slots,"control-zoom-in",{},()=>[x(co,{class:"vue-flow__controls-zoomin",disabled:p.value,onClick:m},{default:A(()=>[Be(v.$slots,"icon-zoom-in",{},()=>[(G(),be(ni($(tk))))])]),_:3},8,["disabled"])]),Be(v.$slots,"control-zoom-out",{},()=>[x(co,{class:"vue-flow__controls-zoomout",disabled:f.value,onClick:O},{default:A(()=>[Be(v.$slots,"icon-zoom-out",{},()=>[(G(),be(ni($(ok))))])]),_:3},8,["disabled"])])],64)):Ee("",!0),v.showFitView?Be(v.$slots,"control-fit-view",{key:1},()=>[x(co,{class:"vue-flow__controls-fitview",onClick:y},{default:A(()=>[Be(v.$slots,"icon-fit-view",{},()=>[(G(),be(ni($(hk))))])]),_:3})]):Ee("",!0),v.showInteractive?Be(v.$slots,"control-interactive",{key:2},()=>[v.showInteractive?(G(),be(co,{key:0,class:"vue-flow__controls-interactive",onClick:b},{default:A(()=>[d.value?Be(v.$slots,"icon-unlock",{key:0},()=>[(G(),be(ni($(bk))))]):Ee("",!0),d.value?Ee("",!0):Be(v.$slots,"icon-lock",{key:1},()=>[(G(),be(ni($(gk))))])]),_:3})):Ee("",!0)]):Ee("",!0),Be(v.$slots,"default")]),_:3},8,["position"]))}});var _k={value:()=>{}};function oh(){for(var n=0,e=arguments.length,t={},i;n<e;++n){if(!(i=arguments[n]+"")||i in t||/[\s.]/.test(i))throw new Error("illegal type: "+i);t[i]=[]}return new Bo(t)}function Bo(n){this._=n}function $k(n,e){return n.trim().split(/^|\s+/).map(function(t){var i="",s=t.indexOf(".");if(s>=0&&(i=t.slice(s+1),t=t.slice(0,s)),t&&!e.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:i}})}Bo.prototype=oh.prototype={constructor:Bo,on:function(n,e){var t=this._,i=$k(n+"",t),s,r=-1,o=i.length;if(arguments.length<2){for(;++r<o;)if((s=(n=i[r]).type)&&(s=kk(t[s],n.name)))return s;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++r<o;)if(s=(n=i[r]).type)t[s]=Ld(t[s],n.name,e);else if(e==null)for(s in t)t[s]=Ld(t[s],n.name,null);return this},copy:function(){var n={},e=this._;for(var t in e)n[t]=e[t].slice();return new Bo(n)},call:function(n,e){if((s=arguments.length-2)>0)for(var t=new Array(s),i=0,s,r;i<s;++i)t[i]=arguments[i+2];if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(r=this._[n],i=0,s=r.length;i<s;++i)r[i].value.apply(e,t)},apply:function(n,e,t){if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(var i=this._[n],s=0,r=i.length;s<r;++s)i[s].value.apply(e,t)}};function kk(n,e){for(var t=0,i=n.length,s;t<i;++t)if((s=n[t]).name===e)return s.value}function Ld(n,e,t){for(var i=0,s=n.length;i<s;++i)if(n[i].name===e){n[i]=_k,n=n.slice(0,i).concat(n.slice(i+1));break}return t!=null&&n.push({name:e,value:t}),n}var Bu="http://www.w3.org/1999/xhtml";const zd={svg:"http://www.w3.org/2000/svg",xhtml:Bu,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function al(n){var e=n+="",t=e.indexOf(":");return t>=0&&(e=n.slice(0,t))!=="xmlns"&&(n=n.slice(t+1)),zd.hasOwnProperty(e)?{space:zd[e],local:n}:n}function Pk(n){return function(){var e=this.ownerDocument,t=this.namespaceURI;return t===Bu&&e.documentElement.namespaceURI===Bu?e.createElement(n):e.createElementNS(t,n)}}function Qk(n){return function(){return this.ownerDocument.createElementNS(n.space,n.local)}}function Eg(n){var e=al(n);return(e.local?Qk:Pk)(e)}function Tk(){}function ah(n){return n==null?Tk:function(){return this.querySelector(n)}}function Ak(n){typeof n!="function"&&(n=ah(n));for(var e=this._groups,t=e.length,i=new Array(t),s=0;s<t;++s)for(var r=e[s],o=r.length,a=i[s]=new Array(o),l,u,c=0;c<o;++c)(l=r[c])&&(u=n.call(l,l.__data__,c,r))&&("__data__"in l&&(u.__data__=l.__data__),a[c]=u);return new Nt(i,this._parents)}function Ck(n){return n==null?[]:Array.isArray(n)?n:Array.from(n)}function Ek(){return[]}function Mg(n){return n==null?Ek:function(){return this.querySelectorAll(n)}}function Mk(n){return function(){return Ck(n.apply(this,arguments))}}function Rk(n){typeof n=="function"?n=Mk(n):n=Mg(n);for(var e=this._groups,t=e.length,i=[],s=[],r=0;r<t;++r)for(var o=e[r],a=o.length,l,u=0;u<a;++u)(l=o[u])&&(i.push(n.call(l,l.__data__,u,o)),s.push(l));return new Nt(i,s)}function Rg(n){return function(){return this.matches(n)}}function Zg(n){return function(e){return e.matches(n)}}var Zk=Array.prototype.find;function Dk(n){return function(){return Zk.call(this.children,n)}}function Nk(){return this.firstElementChild}function Ik(n){return this.select(n==null?Nk:Dk(typeof n=="function"?n:Zg(n)))}var Lk=Array.prototype.filter;function zk(){return Array.from(this.children)}function Vk(n){return function(){return Lk.call(this.children,n)}}function Xk(n){return this.selectAll(n==null?zk:Vk(typeof n=="function"?n:Zg(n)))}function Bk(n){typeof n!="function"&&(n=Rg(n));for(var e=this._groups,t=e.length,i=new Array(t),s=0;s<t;++s)for(var r=e[s],o=r.length,a=i[s]=[],l,u=0;u<o;++u)(l=r[u])&&n.call(l,l.__data__,u,r)&&a.push(l);return new Nt(i,this._parents)}function Dg(n){return new Array(n.length)}function Uk(){return new Nt(this._enter||this._groups.map(Dg),this._parents)}function va(n,e){this.ownerDocument=n.ownerDocument,this.namespaceURI=n.namespaceURI,this._next=null,this._parent=n,this.__data__=e}va.prototype={constructor:va,appendChild:function(n){return this._parent.insertBefore(n,this._next)},insertBefore:function(n,e){return this._parent.insertBefore(n,e)},querySelector:function(n){return this._parent.querySelector(n)},querySelectorAll:function(n){return this._parent.querySelectorAll(n)}};function jk(n){return function(){return n}}function Wk(n,e,t,i,s,r){for(var o=0,a,l=e.length,u=r.length;o<u;++o)(a=e[o])?(a.__data__=r[o],i[o]=a):t[o]=new va(n,r[o]);for(;o<l;++o)(a=e[o])&&(s[o]=a)}function qk(n,e,t,i,s,r,o){var a,l,u=new Map,c=e.length,h=r.length,d=new Array(c),f;for(a=0;a<c;++a)(l=e[a])&&(d[a]=f=o.call(l,l.__data__,a,e)+"",u.has(f)?s[a]=l:u.set(f,l));for(a=0;a<h;++a)f=o.call(n,r[a],a,r)+"",(l=u.get(f))?(i[a]=l,l.__data__=r[a],u.delete(f)):t[a]=new va(n,r[a]);for(a=0;a<c;++a)(l=e[a])&&u.get(d[a])===l&&(s[a]=l)}function Yk(n){return n.__data__}function Gk(n,e){if(!arguments.length)return Array.from(this,Yk);var t=e?qk:Wk,i=this._parents,s=this._groups;typeof n!="function"&&(n=jk(n));for(var r=s.length,o=new Array(r),a=new Array(r),l=new Array(r),u=0;u<r;++u){var c=i[u],h=s[u],d=h.length,f=Hk(n.call(c,c&&c.__data__,u,i)),p=f.length,m=a[u]=new Array(p),O=o[u]=new Array(p),y=l[u]=new Array(d);t(c,h,m,O,y,f,e);for(var b=0,v=0,g,k;b<p;++b)if(g=m[b]){for(b>=v&&(v=b+1);!(k=O[v])&&++v<p;);g._next=k||null}}return o=new Nt(o,i),o._enter=a,o._exit=l,o}function Hk(n){return typeof n=="object"&&"length"in n?n:Array.from(n)}function Fk(){return new Nt(this._exit||this._groups.map(Dg),this._parents)}function Kk(n,e,t){var i=this.enter(),s=this,r=this.exit();return typeof n=="function"?(i=n(i),i&&(i=i.selection())):i=i.append(n+""),e!=null&&(s=e(s),s&&(s=s.selection())),t==null?r.remove():t(r),i&&s?i.merge(s).order():s}function Jk(n){for(var e=n.selection?n.selection():n,t=this._groups,i=e._groups,s=t.length,r=i.length,o=Math.min(s,r),a=new Array(s),l=0;l<o;++l)for(var u=t[l],c=i[l],h=u.length,d=a[l]=new Array(h),f,p=0;p<h;++p)(f=u[p]||c[p])&&(d[p]=f);for(;l<s;++l)a[l]=t[l];return new Nt(a,this._parents)}function eP(){for(var n=this._groups,e=-1,t=n.length;++e<t;)for(var i=n[e],s=i.length-1,r=i[s],o;--s>=0;)(o=i[s])&&(r&&o.compareDocumentPosition(r)^4&&r.parentNode.insertBefore(o,r),r=o);return this}function tP(n){n||(n=nP);function e(h,d){return h&&d?n(h.__data__,d.__data__):!h-!d}for(var t=this._groups,i=t.length,s=new Array(i),r=0;r<i;++r){for(var o=t[r],a=o.length,l=s[r]=new Array(a),u,c=0;c<a;++c)(u=o[c])&&(l[c]=u);l.sort(e)}return new Nt(s,this._parents).order()}function nP(n,e){return n<e?-1:n>e?1:n>=e?0:NaN}function iP(){var n=arguments[0];return arguments[0]=this,n.apply(null,arguments),this}function sP(){return Array.from(this)}function rP(){for(var n=this._groups,e=0,t=n.length;e<t;++e)for(var i=n[e],s=0,r=i.length;s<r;++s){var o=i[s];if(o)return o}return null}function oP(){let n=0;for(const e of this)++n;return n}function aP(){return!this.node()}function lP(n){for(var e=this._groups,t=0,i=e.length;t<i;++t)for(var s=e[t],r=0,o=s.length,a;r<o;++r)(a=s[r])&&n.call(a,a.__data__,r,s);return this}function uP(n){return function(){this.removeAttribute(n)}}function cP(n){return function(){this.removeAttributeNS(n.space,n.local)}}function hP(n,e){return function(){this.setAttribute(n,e)}}function dP(n,e){return function(){this.setAttributeNS(n.space,n.local,e)}}function fP(n,e){return function(){var t=e.apply(this,arguments);t==null?this.removeAttribute(n):this.setAttribute(n,t)}}function pP(n,e){return function(){var t=e.apply(this,arguments);t==null?this.removeAttributeNS(n.space,n.local):this.setAttributeNS(n.space,n.local,t)}}function mP(n,e){var t=al(n);if(arguments.length<2){var i=this.node();return t.local?i.getAttributeNS(t.space,t.local):i.getAttribute(t)}return this.each((e==null?t.local?cP:uP:typeof e=="function"?t.local?pP:fP:t.local?dP:hP)(t,e))}function Ng(n){return n.ownerDocument&&n.ownerDocument.defaultView||n.document&&n||n.defaultView}function gP(n){return function(){this.style.removeProperty(n)}}function OP(n,e,t){return function(){this.style.setProperty(n,e,t)}}function yP(n,e,t){return function(){var i=e.apply(this,arguments);i==null?this.style.removeProperty(n):this.style.setProperty(n,i,t)}}function vP(n,e,t){return arguments.length>1?this.each((e==null?gP:typeof e=="function"?yP:OP)(n,e,t??"")):ks(this.node(),n)}function ks(n,e){return n.style.getPropertyValue(e)||Ng(n).getComputedStyle(n,null).getPropertyValue(e)}function wP(n){return function(){delete this[n]}}function bP(n,e){return function(){this[n]=e}}function xP(n,e){return function(){var t=e.apply(this,arguments);t==null?delete this[n]:this[n]=t}}function SP(n,e){return arguments.length>1?this.each((e==null?wP:typeof e=="function"?xP:bP)(n,e)):this.node()[n]}function Ig(n){return n.trim().split(/^|\s+/)}function lh(n){return n.classList||new Lg(n)}function Lg(n){this._node=n,this._names=Ig(n.getAttribute("class")||"")}Lg.prototype={add:function(n){var e=this._names.indexOf(n);e<0&&(this._names.push(n),this._node.setAttribute("class",this._names.join(" ")))},remove:function(n){var e=this._names.indexOf(n);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(n){return this._names.indexOf(n)>=0}};function zg(n,e){for(var t=lh(n),i=-1,s=e.length;++i<s;)t.add(e[i])}function Vg(n,e){for(var t=lh(n),i=-1,s=e.length;++i<s;)t.remove(e[i])}function _P(n){return function(){zg(this,n)}}function $P(n){return function(){Vg(this,n)}}function kP(n,e){return function(){(e.apply(this,arguments)?zg:Vg)(this,n)}}function PP(n,e){var t=Ig(n+"");if(arguments.length<2){for(var i=lh(this.node()),s=-1,r=t.length;++s<r;)if(!i.contains(t[s]))return!1;return!0}return this.each((typeof e=="function"?kP:e?_P:$P)(t,e))}function QP(){this.textContent=""}function TP(n){return function(){this.textContent=n}}function AP(n){return function(){var e=n.apply(this,arguments);this.textContent=e??""}}function CP(n){return arguments.length?this.each(n==null?QP:(typeof n=="function"?AP:TP)(n)):this.node().textContent}function EP(){this.innerHTML=""}function MP(n){return function(){this.innerHTML=n}}function RP(n){return function(){var e=n.apply(this,arguments);this.innerHTML=e??""}}function ZP(n){return arguments.length?this.each(n==null?EP:(typeof n=="function"?RP:MP)(n)):this.node().innerHTML}function DP(){this.nextSibling&&this.parentNode.appendChild(this)}function NP(){return this.each(DP)}function IP(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function LP(){return this.each(IP)}function zP(n){var e=typeof n=="function"?n:Eg(n);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function VP(){return null}function XP(n,e){var t=typeof n=="function"?n:Eg(n),i=e==null?VP:typeof e=="function"?e:ah(e);return this.select(function(){return this.insertBefore(t.apply(this,arguments),i.apply(this,arguments)||null)})}function BP(){var n=this.parentNode;n&&n.removeChild(this)}function UP(){return this.each(BP)}function jP(){var n=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(n,this.nextSibling):n}function WP(){var n=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(n,this.nextSibling):n}function qP(n){return this.select(n?WP:jP)}function YP(n){return arguments.length?this.property("__data__",n):this.node().__data__}function GP(n){return function(e){n.call(this,e,this.__data__)}}function HP(n){return n.trim().split(/^|\s+/).map(function(e){var t="",i=e.indexOf(".");return i>=0&&(t=e.slice(i+1),e=e.slice(0,i)),{type:e,name:t}})}function FP(n){return function(){var e=this.__on;if(e){for(var t=0,i=-1,s=e.length,r;t<s;++t)r=e[t],(!n.type||r.type===n.type)&&r.name===n.name?this.removeEventListener(r.type,r.listener,r.options):e[++i]=r;++i?e.length=i:delete this.__on}}}function KP(n,e,t){return function(){var i=this.__on,s,r=GP(e);if(i){for(var o=0,a=i.length;o<a;++o)if((s=i[o]).type===n.type&&s.name===n.name){this.removeEventListener(s.type,s.listener,s.options),this.addEventListener(s.type,s.listener=r,s.options=t),s.value=e;return}}this.addEventListener(n.type,r,t),s={type:n.type,name:n.name,value:e,listener:r,options:t},i?i.push(s):this.__on=[s]}}function JP(n,e,t){var i=HP(n+""),s,r=i.length,o;if(arguments.length<2){var a=this.node().__on;if(a){for(var l=0,u=a.length,c;l<u;++l)for(s=0,c=a[l];s<r;++s)if((o=i[s]).type===c.type&&o.name===c.name)return c.value}return}for(a=e?KP:FP,s=0;s<r;++s)this.each(a(i[s],e,t));return this}function Xg(n,e,t){var i=Ng(n),s=i.CustomEvent;typeof s=="function"?s=new s(e,t):(s=i.document.createEvent("Event"),t?(s.initEvent(e,t.bubbles,t.cancelable),s.detail=t.detail):s.initEvent(e,!1,!1)),n.dispatchEvent(s)}function eQ(n,e){return function(){return Xg(this,n,e)}}function tQ(n,e){return function(){return Xg(this,n,e.apply(this,arguments))}}function nQ(n,e){return this.each((typeof e=="function"?tQ:eQ)(n,e))}function*iQ(){for(var n=this._groups,e=0,t=n.length;e<t;++e)for(var i=n[e],s=0,r=i.length,o;s<r;++s)(o=i[s])&&(yield o)}var Bg=[null];function Nt(n,e){this._groups=n,this._parents=e}function Wr(){return new Nt([[document.documentElement]],Bg)}function sQ(){return this}Nt.prototype=Wr.prototype={constructor:Nt,select:Ak,selectAll:Rk,selectChild:Ik,selectChildren:Xk,filter:Bk,data:Gk,enter:Uk,exit:Fk,join:Kk,merge:Jk,selection:sQ,order:eP,sort:tP,call:iP,nodes:sP,node:rP,size:oP,empty:aP,each:lP,attr:mP,style:vP,property:SP,classed:PP,text:CP,html:ZP,raise:NP,lower:LP,append:zP,insert:XP,remove:UP,clone:qP,datum:YP,on:JP,dispatch:nQ,[Symbol.iterator]:iQ};function ri(n){return typeof n=="string"?new Nt([[document.querySelector(n)]],[document.documentElement]):new Nt([[n]],Bg)}function rQ(n){let e;for(;e=n.sourceEvent;)n=e;return n}function Hn(n,e){if(n=rQ(n),e===void 0&&(e=n.currentTarget),e){var t=e.ownerSVGElement||e;if(t.createSVGPoint){var i=t.createSVGPoint();return i.x=n.clientX,i.y=n.clientY,i=i.matrixTransform(e.getScreenCTM().inverse()),[i.x,i.y]}if(e.getBoundingClientRect){var s=e.getBoundingClientRect();return[n.clientX-s.left-e.clientLeft,n.clientY-s.top-e.clientTop]}}return[n.pageX,n.pageY]}const Uu={capture:!0,passive:!1};function ju(n){n.preventDefault(),n.stopImmediatePropagation()}function oQ(n){var e=n.document.documentElement,t=ri(n).on("dragstart.drag",ju,Uu);"onselectstart"in e?t.on("selectstart.drag",ju,Uu):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function aQ(n,e){var t=n.document.documentElement,i=ri(n).on("dragstart.drag",null);e&&(i.on("click.drag",ju,Uu),setTimeout(function(){i.on("click.drag",null)},0)),"onselectstart"in t?i.on("selectstart.drag",null):(t.style.MozUserSelect=t.__noselect,delete t.__noselect)}function uh(n,e,t){n.prototype=e.prototype=t,t.constructor=n}function Ug(n,e){var t=Object.create(n.prototype);for(var i in e)t[i]=e[i];return t}function qr(){}var Qr=.7,wa=1/Qr,fs="\\s*([+-]?\\d+)\\s*",Tr="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",yn="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",lQ=/^#([0-9a-f]{3,8})$/,uQ=new RegExp(`^rgb\\(${fs},${fs},${fs}\\)$`),cQ=new RegExp(`^rgb\\(${yn},${yn},${yn}\\)$`),hQ=new RegExp(`^rgba\\(${fs},${fs},${fs},${Tr}\\)$`),dQ=new RegExp(`^rgba\\(${yn},${yn},${yn},${Tr}\\)$`),fQ=new RegExp(`^hsl\\(${Tr},${yn},${yn}\\)$`),pQ=new RegExp(`^hsla\\(${Tr},${yn},${yn},${Tr}\\)$`),Vd={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};uh(qr,Ar,{copy(n){return Object.assign(new this.constructor,this,n)},displayable(){return this.rgb().displayable()},hex:Xd,formatHex:Xd,formatHex8:mQ,formatHsl:gQ,formatRgb:Bd,toString:Bd});function Xd(){return this.rgb().formatHex()}function mQ(){return this.rgb().formatHex8()}function gQ(){return jg(this).formatHsl()}function Bd(){return this.rgb().formatRgb()}function Ar(n){var e,t;return n=(n+"").trim().toLowerCase(),(e=lQ.exec(n))?(t=e[1].length,e=parseInt(e[1],16),t===6?Ud(e):t===3?new Qt(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):t===8?ho(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):t===4?ho(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=uQ.exec(n))?new Qt(e[1],e[2],e[3],1):(e=cQ.exec(n))?new Qt(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=hQ.exec(n))?ho(e[1],e[2],e[3],e[4]):(e=dQ.exec(n))?ho(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=fQ.exec(n))?qd(e[1],e[2]/100,e[3]/100,1):(e=pQ.exec(n))?qd(e[1],e[2]/100,e[3]/100,e[4]):Vd.hasOwnProperty(n)?Ud(Vd[n]):n==="transparent"?new Qt(NaN,NaN,NaN,0):null}function Ud(n){return new Qt(n>>16&255,n>>8&255,n&255,1)}function ho(n,e,t,i){return i<=0&&(n=e=t=NaN),new Qt(n,e,t,i)}function OQ(n){return n instanceof qr||(n=Ar(n)),n?(n=n.rgb(),new Qt(n.r,n.g,n.b,n.opacity)):new Qt}function Wu(n,e,t,i){return arguments.length===1?OQ(n):new Qt(n,e,t,i??1)}function Qt(n,e,t,i){this.r=+n,this.g=+e,this.b=+t,this.opacity=+i}uh(Qt,Wu,Ug(qr,{brighter(n){return n=n==null?wa:Math.pow(wa,n),new Qt(this.r*n,this.g*n,this.b*n,this.opacity)},darker(n){return n=n==null?Qr:Math.pow(Qr,n),new Qt(this.r*n,this.g*n,this.b*n,this.opacity)},rgb(){return this},clamp(){return new Qt(zi(this.r),zi(this.g),zi(this.b),ba(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:jd,formatHex:jd,formatHex8:yQ,formatRgb:Wd,toString:Wd}));function jd(){return`#${Ri(this.r)}${Ri(this.g)}${Ri(this.b)}`}function yQ(){return`#${Ri(this.r)}${Ri(this.g)}${Ri(this.b)}${Ri((isNaN(this.opacity)?1:this.opacity)*255)}`}function Wd(){const n=ba(this.opacity);return`${n===1?"rgb(":"rgba("}${zi(this.r)}, ${zi(this.g)}, ${zi(this.b)}${n===1?")":`, ${n})`}`}function ba(n){return isNaN(n)?1:Math.max(0,Math.min(1,n))}function zi(n){return Math.max(0,Math.min(255,Math.round(n)||0))}function Ri(n){return n=zi(n),(n<16?"0":"")+n.toString(16)}function qd(n,e,t,i){return i<=0?n=e=t=NaN:t<=0||t>=1?n=e=NaN:e<=0&&(n=NaN),new Ft(n,e,t,i)}function jg(n){if(n instanceof Ft)return new Ft(n.h,n.s,n.l,n.opacity);if(n instanceof qr||(n=Ar(n)),!n)return new Ft;if(n instanceof Ft)return n;n=n.rgb();var e=n.r/255,t=n.g/255,i=n.b/255,s=Math.min(e,t,i),r=Math.max(e,t,i),o=NaN,a=r-s,l=(r+s)/2;return a?(e===r?o=(t-i)/a+(t<i)*6:t===r?o=(i-e)/a+2:o=(e-t)/a+4,a/=l<.5?r+s:2-r-s,o*=60):a=l>0&&l<1?0:o,new Ft(o,a,l,n.opacity)}function vQ(n,e,t,i){return arguments.length===1?jg(n):new Ft(n,e,t,i??1)}function Ft(n,e,t,i){this.h=+n,this.s=+e,this.l=+t,this.opacity=+i}uh(Ft,vQ,Ug(qr,{brighter(n){return n=n==null?wa:Math.pow(wa,n),new Ft(this.h,this.s,this.l*n,this.opacity)},darker(n){return n=n==null?Qr:Math.pow(Qr,n),new Ft(this.h,this.s,this.l*n,this.opacity)},rgb(){var n=this.h%360+(this.h<0)*360,e=isNaN(n)||isNaN(this.s)?0:this.s,t=this.l,i=t+(t<.5?t:1-t)*e,s=2*t-i;return new Qt(Ll(n>=240?n-240:n+120,s,i),Ll(n,s,i),Ll(n<120?n+240:n-120,s,i),this.opacity)},clamp(){return new Ft(Yd(this.h),fo(this.s),fo(this.l),ba(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const n=ba(this.opacity);return`${n===1?"hsl(":"hsla("}${Yd(this.h)}, ${fo(this.s)*100}%, ${fo(this.l)*100}%${n===1?")":`, ${n})`}`}}));function Yd(n){return n=(n||0)%360,n<0?n+360:n}function fo(n){return Math.max(0,Math.min(1,n||0))}function Ll(n,e,t){return(n<60?e+(t-e)*n/60:n<180?t:n<240?e+(t-e)*(240-n)/60:e)*255}const Wg=n=>()=>n;function wQ(n,e){return function(t){return n+t*e}}function bQ(n,e,t){return n=Math.pow(n,t),e=Math.pow(e,t)-n,t=1/t,function(i){return Math.pow(n+i*e,t)}}function xQ(n){return(n=+n)==1?qg:function(e,t){return t-e?bQ(e,t,n):Wg(isNaN(e)?t:e)}}function qg(n,e){var t=e-n;return t?wQ(n,t):Wg(isNaN(n)?e:n)}const Gd=function n(e){var t=xQ(e);function i(s,r){var o=t((s=Wu(s)).r,(r=Wu(r)).r),a=t(s.g,r.g),l=t(s.b,r.b),u=qg(s.opacity,r.opacity);return function(c){return s.r=o(c),s.g=a(c),s.b=l(c),s.opacity=u(c),s+""}}return i.gamma=n,i}(1);function Jn(n,e){return n=+n,e=+e,function(t){return n*(1-t)+e*t}}var qu=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,zl=new RegExp(qu.source,"g");function SQ(n){return function(){return n}}function _Q(n){return function(e){return n(e)+""}}function $Q(n,e){var t=qu.lastIndex=zl.lastIndex=0,i,s,r,o=-1,a=[],l=[];for(n=n+"",e=e+"";(i=qu.exec(n))&&(s=zl.exec(e));)(r=s.index)>t&&(r=e.slice(t,r),a[o]?a[o]+=r:a[++o]=r),(i=i[0])===(s=s[0])?a[o]?a[o]+=s:a[++o]=s:(a[++o]=null,l.push({i:o,x:Jn(i,s)})),t=zl.lastIndex;return t<e.length&&(r=e.slice(t),a[o]?a[o]+=r:a[++o]=r),a.length<2?l[0]?_Q(l[0].x):SQ(e):(e=l.length,function(u){for(var c=0,h;c<e;++c)a[(h=l[c]).i]=h.x(u);return a.join("")})}var Hd=180/Math.PI,Yu={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Yg(n,e,t,i,s,r){var o,a,l;return(o=Math.sqrt(n*n+e*e))&&(n/=o,e/=o),(l=n*t+e*i)&&(t-=n*l,i-=e*l),(a=Math.sqrt(t*t+i*i))&&(t/=a,i/=a,l/=a),n*i<e*t&&(n=-n,e=-e,l=-l,o=-o),{translateX:s,translateY:r,rotate:Math.atan2(e,n)*Hd,skewX:Math.atan(l)*Hd,scaleX:o,scaleY:a}}var po;function kQ(n){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(n+"");return e.isIdentity?Yu:Yg(e.a,e.b,e.c,e.d,e.e,e.f)}function PQ(n){return n==null||(po||(po=document.createElementNS("http://www.w3.org/2000/svg","g")),po.setAttribute("transform",n),!(n=po.transform.baseVal.consolidate()))?Yu:(n=n.matrix,Yg(n.a,n.b,n.c,n.d,n.e,n.f))}function Gg(n,e,t,i){function s(u){return u.length?u.pop()+" ":""}function r(u,c,h,d,f,p){if(u!==h||c!==d){var m=f.push("translate(",null,e,null,t);p.push({i:m-4,x:Jn(u,h)},{i:m-2,x:Jn(c,d)})}else(h||d)&&f.push("translate("+h+e+d+t)}function o(u,c,h,d){u!==c?(u-c>180?c+=360:c-u>180&&(u+=360),d.push({i:h.push(s(h)+"rotate(",null,i)-2,x:Jn(u,c)})):c&&h.push(s(h)+"rotate("+c+i)}function a(u,c,h,d){u!==c?d.push({i:h.push(s(h)+"skewX(",null,i)-2,x:Jn(u,c)}):c&&h.push(s(h)+"skewX("+c+i)}function l(u,c,h,d,f,p){if(u!==h||c!==d){var m=f.push(s(f)+"scale(",null,",",null,")");p.push({i:m-4,x:Jn(u,h)},{i:m-2,x:Jn(c,d)})}else(h!==1||d!==1)&&f.push(s(f)+"scale("+h+","+d+")")}return function(u,c){var h=[],d=[];return u=n(u),c=n(c),r(u.translateX,u.translateY,c.translateX,c.translateY,h,d),o(u.rotate,c.rotate,h,d),a(u.skewX,c.skewX,h,d),l(u.scaleX,u.scaleY,c.scaleX,c.scaleY,h,d),u=c=null,function(f){for(var p=-1,m=d.length,O;++p<m;)h[(O=d[p]).i]=O.x(f);return h.join("")}}}var QQ=Gg(kQ,"px, ","px)","deg)"),TQ=Gg(PQ,", ",")",")"),AQ=1e-12;function Fd(n){return((n=Math.exp(n))+1/n)/2}function CQ(n){return((n=Math.exp(n))-1/n)/2}function EQ(n){return((n=Math.exp(2*n))-1)/(n+1)}const MQ=function n(e,t,i){function s(r,o){var a=r[0],l=r[1],u=r[2],c=o[0],h=o[1],d=o[2],f=c-a,p=h-l,m=f*f+p*p,O,y;if(m<AQ)y=Math.log(d/u)/e,O=function(Q){return[a+Q*f,l+Q*p,u*Math.exp(e*Q*y)]};else{var b=Math.sqrt(m),v=(d*d-u*u+i*m)/(2*u*t*b),g=(d*d-u*u-i*m)/(2*d*t*b),k=Math.log(Math.sqrt(v*v+1)-v),S=Math.log(Math.sqrt(g*g+1)-g);y=(S-k)/e,O=function(Q){var T=Q*y,P=Fd(k),B=u/(t*b)*(P*EQ(e*T+k)-CQ(k));return[a+B*f,l+B*p,u*P/Fd(e*T+k)]}}return O.duration=y*1e3*e/Math.SQRT2,O}return s.rho=function(r){var o=Math.max(.001,+r),a=o*o,l=a*a;return n(o,a,l)},s}(Math.SQRT2,2,4);var Ps=0,ir=0,Vs=0,Hg=1e3,xa,sr,Sa=0,ji=0,ll=0,Cr=typeof performance=="object"&&performance.now?performance:Date,Fg=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(n){setTimeout(n,17)};function ch(){return ji||(Fg(RQ),ji=Cr.now()+ll)}function RQ(){ji=0}function _a(){this._call=this._time=this._next=null}_a.prototype=Kg.prototype={constructor:_a,restart:function(n,e,t){if(typeof n!="function")throw new TypeError("callback is not a function");t=(t==null?ch():+t)+(e==null?0:+e),!this._next&&sr!==this&&(sr?sr._next=this:xa=this,sr=this),this._call=n,this._time=t,Gu()},stop:function(){this._call&&(this._call=null,this._time=1/0,Gu())}};function Kg(n,e,t){var i=new _a;return i.restart(n,e,t),i}function ZQ(){ch(),++Ps;for(var n=xa,e;n;)(e=ji-n._time)>=0&&n._call.call(void 0,e),n=n._next;--Ps}function Kd(){ji=(Sa=Cr.now())+ll,Ps=ir=0;try{ZQ()}finally{Ps=0,NQ(),ji=0}}function DQ(){var n=Cr.now(),e=n-Sa;e>Hg&&(ll-=e,Sa=n)}function NQ(){for(var n,e=xa,t,i=1/0;e;)e._call?(i>e._time&&(i=e._time),n=e,e=e._next):(t=e._next,e._next=null,e=n?n._next=t:xa=t);sr=n,Gu(i)}function Gu(n){if(!Ps){ir&&(ir=clearTimeout(ir));var e=n-ji;e>24?(n<1/0&&(ir=setTimeout(Kd,n-Cr.now()-ll)),Vs&&(Vs=clearInterval(Vs))):(Vs||(Sa=Cr.now(),Vs=setInterval(DQ,Hg)),Ps=1,Fg(Kd))}}function Jd(n,e,t){var i=new _a;return e=e==null?0:+e,i.restart(s=>{i.stop(),n(s+e)},e,t),i}var IQ=oh("start","end","cancel","interrupt"),LQ=[],Jg=0,ef=1,Hu=2,Uo=3,tf=4,Fu=5,jo=6;function ul(n,e,t,i,s,r){var o=n.__transition;if(!o)n.__transition={};else if(t in o)return;zQ(n,t,{name:e,index:i,group:s,on:IQ,tween:LQ,time:r.time,delay:r.delay,duration:r.duration,ease:r.ease,timer:null,state:Jg})}function hh(n,e){var t=rn(n,e);if(t.state>Jg)throw new Error("too late; already scheduled");return t}function xn(n,e){var t=rn(n,e);if(t.state>Uo)throw new Error("too late; already running");return t}function rn(n,e){var t=n.__transition;if(!t||!(t=t[e]))throw new Error("transition not found");return t}function zQ(n,e,t){var i=n.__transition,s;i[e]=t,t.timer=Kg(r,0,t.time);function r(u){t.state=ef,t.timer.restart(o,t.delay,t.time),t.delay<=u&&o(u-t.delay)}function o(u){var c,h,d,f;if(t.state!==ef)return l();for(c in i)if(f=i[c],f.name===t.name){if(f.state===Uo)return Jd(o);f.state===tf?(f.state=jo,f.timer.stop(),f.on.call("interrupt",n,n.__data__,f.index,f.group),delete i[c]):+c<e&&(f.state=jo,f.timer.stop(),f.on.call("cancel",n,n.__data__,f.index,f.group),delete i[c])}if(Jd(function(){t.state===Uo&&(t.state=tf,t.timer.restart(a,t.delay,t.time),a(u))}),t.state=Hu,t.on.call("start",n,n.__data__,t.index,t.group),t.state===Hu){for(t.state=Uo,s=new Array(d=t.tween.length),c=0,h=-1;c<d;++c)(f=t.tween[c].value.call(n,n.__data__,t.index,t.group))&&(s[++h]=f);s.length=h+1}}function a(u){for(var c=u<t.duration?t.ease.call(null,u/t.duration):(t.timer.restart(l),t.state=Fu,1),h=-1,d=s.length;++h<d;)s[h].call(n,c);t.state===Fu&&(t.on.call("end",n,n.__data__,t.index,t.group),l())}function l(){t.state=jo,t.timer.stop(),delete i[e];for(var u in i)return;delete n.__transition}}function Wo(n,e){var t=n.__transition,i,s,r=!0,o;if(t){e=e==null?null:e+"";for(o in t){if((i=t[o]).name!==e){r=!1;continue}s=i.state>Hu&&i.state<Fu,i.state=jo,i.timer.stop(),i.on.call(s?"interrupt":"cancel",n,n.__data__,i.index,i.group),delete t[o]}r&&delete n.__transition}}function VQ(n){return this.each(function(){Wo(this,n)})}function XQ(n,e){var t,i;return function(){var s=xn(this,n),r=s.tween;if(r!==t){i=t=r;for(var o=0,a=i.length;o<a;++o)if(i[o].name===e){i=i.slice(),i.splice(o,1);break}}s.tween=i}}function BQ(n,e,t){var i,s;if(typeof t!="function")throw new Error;return function(){var r=xn(this,n),o=r.tween;if(o!==i){s=(i=o).slice();for(var a={name:e,value:t},l=0,u=s.length;l<u;++l)if(s[l].name===e){s[l]=a;break}l===u&&s.push(a)}r.tween=s}}function UQ(n,e){var t=this._id;if(n+="",arguments.length<2){for(var i=rn(this.node(),t).tween,s=0,r=i.length,o;s<r;++s)if((o=i[s]).name===n)return o.value;return null}return this.each((e==null?XQ:BQ)(t,n,e))}function dh(n,e,t){var i=n._id;return n.each(function(){var s=xn(this,i);(s.value||(s.value={}))[e]=t.apply(this,arguments)}),function(s){return rn(s,i).value[e]}}function eO(n,e){var t;return(typeof e=="number"?Jn:e instanceof Ar?Gd:(t=Ar(e))?(e=t,Gd):$Q)(n,e)}function jQ(n){return function(){this.removeAttribute(n)}}function WQ(n){return function(){this.removeAttributeNS(n.space,n.local)}}function qQ(n,e,t){var i,s=t+"",r;return function(){var o=this.getAttribute(n);return o===s?null:o===i?r:r=e(i=o,t)}}function YQ(n,e,t){var i,s=t+"",r;return function(){var o=this.getAttributeNS(n.space,n.local);return o===s?null:o===i?r:r=e(i=o,t)}}function GQ(n,e,t){var i,s,r;return function(){var o,a=t(this),l;return a==null?void this.removeAttribute(n):(o=this.getAttribute(n),l=a+"",o===l?null:o===i&&l===s?r:(s=l,r=e(i=o,a)))}}function HQ(n,e,t){var i,s,r;return function(){var o,a=t(this),l;return a==null?void this.removeAttributeNS(n.space,n.local):(o=this.getAttributeNS(n.space,n.local),l=a+"",o===l?null:o===i&&l===s?r:(s=l,r=e(i=o,a)))}}function FQ(n,e){var t=al(n),i=t==="transform"?TQ:eO;return this.attrTween(n,typeof e=="function"?(t.local?HQ:GQ)(t,i,dh(this,"attr."+n,e)):e==null?(t.local?WQ:jQ)(t):(t.local?YQ:qQ)(t,i,e))}function KQ(n,e){return function(t){this.setAttribute(n,e.call(this,t))}}function JQ(n,e){return function(t){this.setAttributeNS(n.space,n.local,e.call(this,t))}}function e2(n,e){var t,i;function s(){var r=e.apply(this,arguments);return r!==i&&(t=(i=r)&&JQ(n,r)),t}return s._value=e,s}function t2(n,e){var t,i;function s(){var r=e.apply(this,arguments);return r!==i&&(t=(i=r)&&KQ(n,r)),t}return s._value=e,s}function n2(n,e){var t="attr."+n;if(arguments.length<2)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;var i=al(n);return this.tween(t,(i.local?e2:t2)(i,e))}function i2(n,e){return function(){hh(this,n).delay=+e.apply(this,arguments)}}function s2(n,e){return e=+e,function(){hh(this,n).delay=e}}function r2(n){var e=this._id;return arguments.length?this.each((typeof n=="function"?i2:s2)(e,n)):rn(this.node(),e).delay}function o2(n,e){return function(){xn(this,n).duration=+e.apply(this,arguments)}}function a2(n,e){return e=+e,function(){xn(this,n).duration=e}}function l2(n){var e=this._id;return arguments.length?this.each((typeof n=="function"?o2:a2)(e,n)):rn(this.node(),e).duration}function u2(n,e){if(typeof e!="function")throw new Error;return function(){xn(this,n).ease=e}}function c2(n){var e=this._id;return arguments.length?this.each(u2(e,n)):rn(this.node(),e).ease}function h2(n,e){return function(){var t=e.apply(this,arguments);if(typeof t!="function")throw new Error;xn(this,n).ease=t}}function d2(n){if(typeof n!="function")throw new Error;return this.each(h2(this._id,n))}function f2(n){typeof n!="function"&&(n=Rg(n));for(var e=this._groups,t=e.length,i=new Array(t),s=0;s<t;++s)for(var r=e[s],o=r.length,a=i[s]=[],l,u=0;u<o;++u)(l=r[u])&&n.call(l,l.__data__,u,r)&&a.push(l);return new Un(i,this._parents,this._name,this._id)}function p2(n){if(n._id!==this._id)throw new Error;for(var e=this._groups,t=n._groups,i=e.length,s=t.length,r=Math.min(i,s),o=new Array(i),a=0;a<r;++a)for(var l=e[a],u=t[a],c=l.length,h=o[a]=new Array(c),d,f=0;f<c;++f)(d=l[f]||u[f])&&(h[f]=d);for(;a<i;++a)o[a]=e[a];return new Un(o,this._parents,this._name,this._id)}function m2(n){return(n+"").trim().split(/^|\s+/).every(function(e){var t=e.indexOf(".");return t>=0&&(e=e.slice(0,t)),!e||e==="start"})}function g2(n,e,t){var i,s,r=m2(e)?hh:xn;return function(){var o=r(this,n),a=o.on;a!==i&&(s=(i=a).copy()).on(e,t),o.on=s}}function O2(n,e){var t=this._id;return arguments.length<2?rn(this.node(),t).on.on(n):this.each(g2(t,n,e))}function y2(n){return function(){var e=this.parentNode;for(var t in this.__transition)if(+t!==n)return;e&&e.removeChild(this)}}function v2(){return this.on("end.remove",y2(this._id))}function w2(n){var e=this._name,t=this._id;typeof n!="function"&&(n=ah(n));for(var i=this._groups,s=i.length,r=new Array(s),o=0;o<s;++o)for(var a=i[o],l=a.length,u=r[o]=new Array(l),c,h,d=0;d<l;++d)(c=a[d])&&(h=n.call(c,c.__data__,d,a))&&("__data__"in c&&(h.__data__=c.__data__),u[d]=h,ul(u[d],e,t,d,u,rn(c,t)));return new Un(r,this._parents,e,t)}function b2(n){var e=this._name,t=this._id;typeof n!="function"&&(n=Mg(n));for(var i=this._groups,s=i.length,r=[],o=[],a=0;a<s;++a)for(var l=i[a],u=l.length,c,h=0;h<u;++h)if(c=l[h]){for(var d=n.call(c,c.__data__,h,l),f,p=rn(c,t),m=0,O=d.length;m<O;++m)(f=d[m])&&ul(f,e,t,m,d,p);r.push(d),o.push(c)}return new Un(r,o,e,t)}var x2=Wr.prototype.constructor;function S2(){return new x2(this._groups,this._parents)}function _2(n,e){var t,i,s;return function(){var r=ks(this,n),o=(this.style.removeProperty(n),ks(this,n));return r===o?null:r===t&&o===i?s:s=e(t=r,i=o)}}function tO(n){return function(){this.style.removeProperty(n)}}function $2(n,e,t){var i,s=t+"",r;return function(){var o=ks(this,n);return o===s?null:o===i?r:r=e(i=o,t)}}function k2(n,e,t){var i,s,r;return function(){var o=ks(this,n),a=t(this),l=a+"";return a==null&&(l=a=(this.style.removeProperty(n),ks(this,n))),o===l?null:o===i&&l===s?r:(s=l,r=e(i=o,a))}}function P2(n,e){var t,i,s,r="style."+e,o="end."+r,a;return function(){var l=xn(this,n),u=l.on,c=l.value[r]==null?a||(a=tO(e)):void 0;(u!==t||s!==c)&&(i=(t=u).copy()).on(o,s=c),l.on=i}}function Q2(n,e,t){var i=(n+="")=="transform"?QQ:eO;return e==null?this.styleTween(n,_2(n,i)).on("end.style."+n,tO(n)):typeof e=="function"?this.styleTween(n,k2(n,i,dh(this,"style."+n,e))).each(P2(this._id,n)):this.styleTween(n,$2(n,i,e),t).on("end.style."+n,null)}function T2(n,e,t){return function(i){this.style.setProperty(n,e.call(this,i),t)}}function A2(n,e,t){var i,s;function r(){var o=e.apply(this,arguments);return o!==s&&(i=(s=o)&&T2(n,o,t)),i}return r._value=e,r}function C2(n,e,t){var i="style."+(n+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(e==null)return this.tween(i,null);if(typeof e!="function")throw new Error;return this.tween(i,A2(n,e,t??""))}function E2(n){return function(){this.textContent=n}}function M2(n){return function(){var e=n(this);this.textContent=e??""}}function R2(n){return this.tween("text",typeof n=="function"?M2(dh(this,"text",n)):E2(n==null?"":n+""))}function Z2(n){return function(e){this.textContent=n.call(this,e)}}function D2(n){var e,t;function i(){var s=n.apply(this,arguments);return s!==t&&(e=(t=s)&&Z2(s)),e}return i._value=n,i}function N2(n){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(n==null)return this.tween(e,null);if(typeof n!="function")throw new Error;return this.tween(e,D2(n))}function I2(){for(var n=this._name,e=this._id,t=nO(),i=this._groups,s=i.length,r=0;r<s;++r)for(var o=i[r],a=o.length,l,u=0;u<a;++u)if(l=o[u]){var c=rn(l,e);ul(l,n,t,u,o,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new Un(i,this._parents,n,t)}function L2(){var n,e,t=this,i=t._id,s=t.size();return new Promise(function(r,o){var a={value:o},l={value:function(){--s===0&&r()}};t.each(function(){var u=xn(this,i),c=u.on;c!==n&&(e=(n=c).copy(),e._.cancel.push(a),e._.interrupt.push(a),e._.end.push(l)),u.on=e}),s===0&&r()})}var z2=0;function Un(n,e,t,i){this._groups=n,this._parents=e,this._name=t,this._id=i}function nO(){return++z2}var $n=Wr.prototype;Un.prototype={constructor:Un,select:w2,selectAll:b2,selectChild:$n.selectChild,selectChildren:$n.selectChildren,filter:f2,merge:p2,selection:S2,transition:I2,call:$n.call,nodes:$n.nodes,node:$n.node,size:$n.size,empty:$n.empty,each:$n.each,on:O2,attr:FQ,attrTween:n2,style:Q2,styleTween:C2,text:R2,textTween:N2,remove:v2,tween:UQ,delay:r2,duration:l2,ease:c2,easeVarying:d2,end:L2,[Symbol.iterator]:$n[Symbol.iterator]};function V2(n){return((n*=2)<=1?n*n*n:(n-=2)*n*n+2)/2}var X2={time:null,delay:0,duration:250,ease:V2};function B2(n,e){for(var t;!(t=n.__transition)||!(t=t[e]);)if(!(n=n.parentNode))throw new Error(`transition ${e} not found`);return t}function U2(n){var e,t;n instanceof Un?(e=n._id,n=n._name):(e=nO(),(t=X2).time=ch(),n=n==null?null:n+"");for(var i=this._groups,s=i.length,r=0;r<s;++r)for(var o=i[r],a=o.length,l,u=0;u<a;++u)(l=o[u])&&ul(l,n,e,u,o,t||B2(l,e));return new Un(i,this._parents,n,e)}Wr.prototype.interrupt=VQ;Wr.prototype.transition=U2;const mo=n=>()=>n;function j2(n,{sourceEvent:e,target:t,transform:i,dispatch:s}){Object.defineProperties(this,{type:{value:n,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:t,enumerable:!0,configurable:!0},transform:{value:i,enumerable:!0,configurable:!0},_:{value:s}})}function Rn(n,e,t){this.k=n,this.x=e,this.y=t}Rn.prototype={constructor:Rn,scale:function(n){return n===1?this:new Rn(this.k*n,this.x,this.y)},translate:function(n,e){return n===0&e===0?this:new Rn(this.k,this.x+this.k*n,this.y+this.k*e)},apply:function(n){return[n[0]*this.k+this.x,n[1]*this.k+this.y]},applyX:function(n){return n*this.k+this.x},applyY:function(n){return n*this.k+this.y},invert:function(n){return[(n[0]-this.x)/this.k,(n[1]-this.y)/this.k]},invertX:function(n){return(n-this.x)/this.k},invertY:function(n){return(n-this.y)/this.k},rescaleX:function(n){return n.copy().domain(n.range().map(this.invertX,this).map(n.invert,n))},rescaleY:function(n){return n.copy().domain(n.range().map(this.invertY,this).map(n.invert,n))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var fh=new Rn(1,0,0);Rn.prototype;function Vl(n){n.stopImmediatePropagation()}function Xs(n){n.preventDefault(),n.stopImmediatePropagation()}function W2(n){return(!n.ctrlKey||n.type==="wheel")&&!n.button}function q2(){var n=this;return n instanceof SVGElement?(n=n.ownerSVGElement||n,n.hasAttribute("viewBox")?(n=n.viewBox.baseVal,[[n.x,n.y],[n.x+n.width,n.y+n.height]]):[[0,0],[n.width.baseVal.value,n.height.baseVal.value]]):[[0,0],[n.clientWidth,n.clientHeight]]}function nf(){return this.__zoom||fh}function Y2(n){return-n.deltaY*(n.deltaMode===1?.05:n.deltaMode?1:.002)*(n.ctrlKey?10:1)}function G2(){return navigator.maxTouchPoints||"ontouchstart"in this}function H2(n,e,t){var i=n.invertX(e[0][0])-t[0][0],s=n.invertX(e[1][0])-t[1][0],r=n.invertY(e[0][1])-t[0][1],o=n.invertY(e[1][1])-t[1][1];return n.translate(s>i?(i+s)/2:Math.min(0,i)||Math.max(0,s),o>r?(r+o)/2:Math.min(0,r)||Math.max(0,o))}function F2(){var n=W2,e=q2,t=H2,i=Y2,s=G2,r=[0,1/0],o=[[-1/0,-1/0],[1/0,1/0]],a=250,l=MQ,u=oh("start","zoom","end"),c,h,d,f=500,p=150,m=0,O=10;function y(w){w.property("__zoom",nf).on("wheel.zoom",T,{passive:!1}).on("mousedown.zoom",P).on("dblclick.zoom",B).filter(s).on("touchstart.zoom",W).on("touchmove.zoom",C).on("touchend.zoom touchcancel.zoom",j).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}y.transform=function(w,R,_,D){var N=w.selection?w.selection():w;N.property("__zoom",nf),w!==N?k(w,R,_,D):N.interrupt().each(function(){S(this,arguments).event(D).start().zoom(null,typeof R=="function"?R.apply(this,arguments):R).end()})},y.scaleBy=function(w,R,_,D){y.scaleTo(w,function(){var N=this.__zoom.k,U=typeof R=="function"?R.apply(this,arguments):R;return N*U},_,D)},y.scaleTo=function(w,R,_,D){y.transform(w,function(){var N=e.apply(this,arguments),U=this.__zoom,V=_==null?g(N):typeof _=="function"?_.apply(this,arguments):_,Y=U.invert(V),E=typeof R=="function"?R.apply(this,arguments):R;return t(v(b(U,E),V,Y),N,o)},_,D)},y.translateBy=function(w,R,_,D){y.transform(w,function(){return t(this.__zoom.translate(typeof R=="function"?R.apply(this,arguments):R,typeof _=="function"?_.apply(this,arguments):_),e.apply(this,arguments),o)},null,D)},y.translateTo=function(w,R,_,D,N){y.transform(w,function(){var U=e.apply(this,arguments),V=this.__zoom,Y=D==null?g(U):typeof D=="function"?D.apply(this,arguments):D;return t(fh.translate(Y[0],Y[1]).scale(V.k).translate(typeof R=="function"?-R.apply(this,arguments):-R,typeof _=="function"?-_.apply(this,arguments):-_),U,o)},D,N)};function b(w,R){return R=Math.max(r[0],Math.min(r[1],R)),R===w.k?w:new Rn(R,w.x,w.y)}function v(w,R,_){var D=R[0]-_[0]*w.k,N=R[1]-_[1]*w.k;return D===w.x&&N===w.y?w:new Rn(w.k,D,N)}function g(w){return[(+w[0][0]+ +w[1][0])/2,(+w[0][1]+ +w[1][1])/2]}function k(w,R,_,D){w.on("start.zoom",function(){S(this,arguments).event(D).start()}).on("interrupt.zoom end.zoom",function(){S(this,arguments).event(D).end()}).tween("zoom",function(){var N=this,U=arguments,V=S(N,U).event(D),Y=e.apply(N,U),E=_==null?g(Y):typeof _=="function"?_.apply(N,U):_,X=Math.max(Y[1][0]-Y[0][0],Y[1][1]-Y[0][1]),H=N.__zoom,J=typeof R=="function"?R.apply(N,U):R,me=l(H.invert(E).concat(X/H.k),J.invert(E).concat(X/J.k));return function(oe){if(oe===1)oe=J;else{var xe=me(oe),ye=X/xe[2];oe=new Rn(ye,E[0]-xe[0]*ye,E[1]-xe[1]*ye)}V.zoom(null,oe)}})}function S(w,R,_){return!_&&w.__zooming||new Q(w,R)}function Q(w,R){this.that=w,this.args=R,this.active=0,this.sourceEvent=null,this.extent=e.apply(w,R),this.taps=0}Q.prototype={event:function(w){return w&&(this.sourceEvent=w),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(w,R){return this.mouse&&w!=="mouse"&&(this.mouse[1]=R.invert(this.mouse[0])),this.touch0&&w!=="touch"&&(this.touch0[1]=R.invert(this.touch0[0])),this.touch1&&w!=="touch"&&(this.touch1[1]=R.invert(this.touch1[0])),this.that.__zoom=R,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(w){var R=ri(this.that).datum();u.call(w,this.that,new j2(w,{sourceEvent:this.sourceEvent,target:y,transform:this.that.__zoom,dispatch:u}),R)}};function T(w,...R){if(!n.apply(this,arguments))return;var _=S(this,R).event(w),D=this.__zoom,N=Math.max(r[0],Math.min(r[1],D.k*Math.pow(2,i.apply(this,arguments)))),U=Hn(w);if(_.wheel)(_.mouse[0][0]!==U[0]||_.mouse[0][1]!==U[1])&&(_.mouse[1]=D.invert(_.mouse[0]=U)),clearTimeout(_.wheel);else{if(D.k===N)return;_.mouse=[U,D.invert(U)],Wo(this),_.start()}Xs(w),_.wheel=setTimeout(V,p),_.zoom("mouse",t(v(b(D,N),_.mouse[0],_.mouse[1]),_.extent,o));function V(){_.wheel=null,_.end()}}function P(w,...R){if(d||!n.apply(this,arguments))return;var _=w.currentTarget,D=S(this,R,!0).event(w),N=ri(w.view).on("mousemove.zoom",E,!0).on("mouseup.zoom",X,!0),U=Hn(w,_),V=w.clientX,Y=w.clientY;oQ(w.view),Vl(w),D.mouse=[U,this.__zoom.invert(U)],Wo(this),D.start();function E(H){if(Xs(H),!D.moved){var J=H.clientX-V,me=H.clientY-Y;D.moved=J*J+me*me>m}D.event(H).zoom("mouse",t(v(D.that.__zoom,D.mouse[0]=Hn(H,_),D.mouse[1]),D.extent,o))}function X(H){N.on("mousemove.zoom mouseup.zoom",null),aQ(H.view,D.moved),Xs(H),D.event(H).end()}}function B(w,...R){if(n.apply(this,arguments)){var _=this.__zoom,D=Hn(w.changedTouches?w.changedTouches[0]:w,this),N=_.invert(D),U=_.k*(w.shiftKey?.5:2),V=t(v(b(_,U),D,N),e.apply(this,R),o);Xs(w),a>0?ri(this).transition().duration(a).call(k,V,D,w):ri(this).call(y.transform,V,D,w)}}function W(w,...R){if(n.apply(this,arguments)){var _=w.touches,D=_.length,N=S(this,R,w.changedTouches.length===D).event(w),U,V,Y,E;for(Vl(w),V=0;V<D;++V)Y=_[V],E=Hn(Y,this),E=[E,this.__zoom.invert(E),Y.identifier],N.touch0?!N.touch1&&N.touch0[2]!==E[2]&&(N.touch1=E,N.taps=0):(N.touch0=E,U=!0,N.taps=1+!!c);c&&(c=clearTimeout(c)),U&&(N.taps<2&&(h=E[0],c=setTimeout(function(){c=null},f)),Wo(this),N.start())}}function C(w,...R){if(this.__zooming){var _=S(this,R).event(w),D=w.changedTouches,N=D.length,U,V,Y,E;for(Xs(w),U=0;U<N;++U)V=D[U],Y=Hn(V,this),_.touch0&&_.touch0[2]===V.identifier?_.touch0[0]=Y:_.touch1&&_.touch1[2]===V.identifier&&(_.touch1[0]=Y);if(V=_.that.__zoom,_.touch1){var X=_.touch0[0],H=_.touch0[1],J=_.touch1[0],me=_.touch1[1],oe=(oe=J[0]-X[0])*oe+(oe=J[1]-X[1])*oe,xe=(xe=me[0]-H[0])*xe+(xe=me[1]-H[1])*xe;V=b(V,Math.sqrt(oe/xe)),Y=[(X[0]+J[0])/2,(X[1]+J[1])/2],E=[(H[0]+me[0])/2,(H[1]+me[1])/2]}else if(_.touch0)Y=_.touch0[0],E=_.touch0[1];else return;_.zoom("touch",t(v(V,Y,E),_.extent,o))}}function j(w,...R){if(this.__zooming){var _=S(this,R).event(w),D=w.changedTouches,N=D.length,U,V;for(Vl(w),d&&clearTimeout(d),d=setTimeout(function(){d=null},f),U=0;U<N;++U)V=D[U],_.touch0&&_.touch0[2]===V.identifier?delete _.touch0:_.touch1&&_.touch1[2]===V.identifier&&delete _.touch1;if(_.touch1&&!_.touch0&&(_.touch0=_.touch1,delete _.touch1),_.touch0)_.touch0[1]=this.__zoom.invert(_.touch0[0]);else if(_.end(),_.taps===2&&(V=Hn(V,this),Math.hypot(h[0]-V[0],h[1]-V[1])<O)){var Y=ri(this).on("dblclick.zoom");Y&&Y.apply(this,arguments)}}}return y.wheelDelta=function(w){return arguments.length?(i=typeof w=="function"?w:mo(+w),y):i},y.filter=function(w){return arguments.length?(n=typeof w=="function"?w:mo(!!w),y):n},y.touchable=function(w){return arguments.length?(s=typeof w=="function"?w:mo(!!w),y):s},y.extent=function(w){return arguments.length?(e=typeof w=="function"?w:mo([[+w[0][0],+w[0][1]],[+w[1][0],+w[1][1]]]),y):e},y.scaleExtent=function(w){return arguments.length?(r[0]=+w[0],r[1]=+w[1],y):[r[0],r[1]]},y.translateExtent=function(w){return arguments.length?(o[0][0]=+w[0][0],o[1][0]=+w[1][0],o[0][1]=+w[0][1],o[1][1]=+w[1][1],y):[[o[0][0],o[0][1]],[o[1][0],o[1][1]]]},y.constrain=function(w){return arguments.length?(t=w,y):t},y.duration=function(w){return arguments.length?(a=+w,y):a},y.interpolate=function(w){return arguments.length?(l=w,y):l},y.on=function(){var w=u.on.apply(u,arguments);return w===u?y:w},y.clickDistance=function(w){return arguments.length?(m=(w=+w)*w,y):Math.sqrt(m)},y.tapDistance=function(w){return arguments.length?(O=+w,y):O},y}const iO=Symbol("MiniMapSlots"),K2=["id","x","y","rx","ry","width","height","fill","stroke","stroke-width","shape-rendering"],J2={name:"MiniMapNode",compatConfig:{MODE:3},inheritAttrs:!1},eT=Oe({...J2,props:{id:{},type:{},selected:{type:Boolean},dragging:{type:Boolean},position:{},dimensions:{},borderRadius:{},color:{},shapeRendering:{},strokeColor:{},strokeWidth:{},hidden:{type:Boolean}},emits:["click","dblclick","mouseenter","mousemove","mouseleave"],setup(n,{emit:e}){const t=n,i=Wn(iO),s=qc(),r=Me(()=>s.style??{});function o(h){e("click",h)}function a(h){e("dblclick",h)}function l(h){e("mouseenter",h)}function u(h){e("mousemove",h)}function c(h){e("mouseleave",h)}return(h,d)=>!h.hidden&&h.dimensions.width!==0&&h.dimensions.height!==0?(G(),K(ke,{key:0},[$(i)[`node-${t.type}`]?(G(),be(ni($(i)[`node-${t.type}`]),rm(Xt({key:0},{...t,...h.$attrs})),null,16)):(G(),K("rect",Xt({key:1,id:h.id},h.$attrs,{class:["vue-flow__minimap-node",{selected:h.selected,dragging:h.dragging}],x:h.position.x,y:h.position.y,rx:h.borderRadius,ry:h.borderRadius,width:h.dimensions.width,height:h.dimensions.height,fill:h.color||r.value.background||r.value.backgroundColor,stroke:h.strokeColor,"stroke-width":h.strokeWidth,"shape-rendering":h.shapeRendering,onClick:o,onDblclick:a,onMouseenter:l,onMousemove:u,onMouseleave:c}),null,16,K2))],64)):Ee("",!0)}}),tT=["width","height","viewBox","aria-labelledby"],nT=["id"],iT=["d","fill","stroke","stroke-width"],sT={name:"MiniMap",compatConfig:{MODE:3}},rT=Oe({...sT,props:{nodeColor:{type:[String,Function],default:"#e2e2e2"},nodeStrokeColor:{type:[String,Function],default:"transparent"},nodeClassName:{type:[String,Function]},nodeBorderRadius:{default:5},nodeStrokeWidth:{default:2},maskColor:{default:"rgb(240, 240, 240, 0.6)"},maskStrokeColor:{default:"none"},maskStrokeWidth:{default:1},position:{default:"bottom-right"},pannable:{type:Boolean,default:!1},zoomable:{type:Boolean,default:!1},width:{},height:{},ariaLabel:{default:"Vue Flow mini map"},inversePan:{type:Boolean,default:!1},zoomStep:{default:10},offsetScale:{default:5},maskBorderRadius:{default:0}},emits:["click","nodeClick","nodeDblclick","nodeMouseenter","nodeMousemove","nodeMouseleave"],setup(n,{emit:e}){const t=nm(),i=qc(),s=200,r=150,{id:o,edges:a,viewport:l,translateExtent:u,dimensions:c,emits:h,d3Selection:d,d3Zoom:f,getNodesInitialized:p}=Le(),m=ae();Bi(iO,t);const O=Me(()=>{var N;return n.width??((N=i.style)==null?void 0:N.width)??s}),y=Me(()=>{var N;return n.height??((N=i.style)==null?void 0:N.height)??r}),b=typeof window>"u"||window.chrome?"crispEdges":"geometricPrecision",v=pe(()=>typeof n.nodeColor=="string"?()=>n.nodeColor:n.nodeColor),g=pe(()=>typeof n.nodeStrokeColor=="string"?()=>n.nodeStrokeColor:n.nodeStrokeColor),k=pe(()=>typeof n.nodeClassName=="string"?()=>n.nodeClassName:typeof n.nodeClassName=="function"?n.nodeClassName:()=>""),S=pe(()=>Ka(p.value)),Q=pe(()=>({x:-l.value.x/l.value.zoom,y:-l.value.y/l.value.zoom,width:c.value.width/l.value.zoom,height:c.value.height/l.value.zoom})),T=pe(()=>p.value&&p.value.length?XS(S.value,Q.value):Q.value),P=pe(()=>{const N=T.value.width/O.value,U=T.value.height/y.value;return Math.max(N,U)}),B=pe(()=>{const N=P.value*O.value,U=P.value*y.value,V=n.offsetScale*P.value;return{offset:V,x:T.value.x-(N-T.value.width)/2-V,y:T.value.y-(U-T.value.height)/2-V,width:N+V*2,height:U+V*2}}),W=pe(()=>!B.value.x||!B.value.y?"":`
    M${B.value.x-B.value.offset},${B.value.y-B.value.offset}
    h${B.value.width+B.value.offset*2}
    v${B.value.height+B.value.offset*2}
    h${-B.value.width-B.value.offset*2}z
    M${Q.value.x+n.maskBorderRadius},${Q.value.y}
    h${Q.value.width-2*n.maskBorderRadius}
    a${n.maskBorderRadius},${n.maskBorderRadius} 0 0 1 ${n.maskBorderRadius},${n.maskBorderRadius}
    v${Q.value.height-2*n.maskBorderRadius}
    a${n.maskBorderRadius},${n.maskBorderRadius} 0 0 1 -${n.maskBorderRadius},${n.maskBorderRadius}
    h${-(Q.value.width-2*n.maskBorderRadius)}
    a${n.maskBorderRadius},${n.maskBorderRadius} 0 0 1 -${n.maskBorderRadius},-${n.maskBorderRadius}
    v${-(Q.value.height-2*n.maskBorderRadius)}
    a${n.maskBorderRadius},${n.maskBorderRadius} 0 0 1 ${n.maskBorderRadius},-${n.maskBorderRadius}z`);sm(N=>{if(m.value){const U=ri(m.value),V=X=>{if(X.sourceEvent.type!=="wheel"||!d.value||!f.value)return;const H=-X.sourceEvent.deltaY*(X.sourceEvent.deltaMode===1?.05:X.sourceEvent.deltaMode?1:.002)*n.zoomStep,J=l.value.zoom*2**H;f.value.scaleTo(d.value,J)},Y=X=>{if(X.sourceEvent.type!=="mousemove"||!d.value||!f.value)return;const H=P.value*Math.max(1,l.value.zoom)*(n.inversePan?-1:1),J={x:l.value.x-X.sourceEvent.movementX*H,y:l.value.y-X.sourceEvent.movementY*H},me=[[0,0],[c.value.width,c.value.height]],oe=fh.translate(J.x,J.y).scale(l.value.zoom),xe=f.value.constrain()(oe,me,u.value);f.value.transform(d.value,xe)},E=F2().on("zoom",n.pannable?Y:()=>{}).on("zoom.wheel",n.zoomable?V:()=>{});U.call(E),N(()=>{U.on("zoom",null)})}},{flush:"post"});function C(N){const[U,V]=Hn(N);e("click",{event:N,position:{x:U,y:V}})}function j(N,U){const V={event:N,node:U,connectedEdges:$i([U],a.value)};h.miniMapNodeClick(V),e("nodeClick",V)}function w(N,U){const V={event:N,node:U,connectedEdges:$i([U],a.value)};h.miniMapNodeDoubleClick(V),e("nodeDblclick",V)}function R(N,U){const V={event:N,node:U,connectedEdges:$i([U],a.value)};h.miniMapNodeMouseEnter(V),e("nodeMouseenter",V)}function _(N,U){const V={event:N,node:U,connectedEdges:$i([U],a.value)};h.miniMapNodeMouseMove(V),e("nodeMousemove",V)}function D(N,U){const V={event:N,node:U,connectedEdges:$i([U],a.value)};h.miniMapNodeMouseLeave(V),e("nodeMouseleave",V)}return(N,U)=>(G(),be($(Tg),{position:N.position,class:Ge(["vue-flow__minimap",{pannable:N.pannable,zoomable:N.zoomable}])},{default:A(()=>[(G(),K("svg",{ref_key:"el",ref:m,width:O.value,height:y.value,viewBox:[B.value.x,B.value.y,B.value.width,B.value.height].join(" "),role:"img","aria-labelledby":`vue-flow__minimap-${$(o)}`,onClick:C},[N.ariaLabel?(G(),K("title",{key:0,id:`vue-flow__minimap-${$(o)}`},ve(N.ariaLabel),9,nT)):Ee("",!0),(G(!0),K(ke,null,Xe($(p),V=>(G(),be(eT,{id:V.id,key:V.id,position:V.computedPosition,dimensions:V.dimensions,selected:V.selected,dragging:V.dragging,style:gt(V.style),class:Ge(k.value(V)),color:v.value(V),"border-radius":N.nodeBorderRadius,"stroke-color":g.value(V),"stroke-width":N.nodeStrokeWidth,"shape-rendering":$(b),type:V.type,hidden:V.hidden,onClick:Y=>j(Y,V),onDblclick:Y=>w(Y,V),onMouseenter:Y=>R(Y,V),onMousemove:Y=>_(Y,V),onMouseleave:Y=>D(Y,V)},null,8,["id","position","dimensions","selected","dragging","style","class","color","border-radius","stroke-color","stroke-width","shape-rendering","type","hidden","onClick","onDblclick","onMouseenter","onMousemove","onMouseleave"]))),128)),q("path",{class:"vue-flow__minimap-mask",d:W.value,fill:N.maskColor,stroke:N.maskStrokeColor,"stroke-width":N.maskStrokeWidth,"fill-rule":"evenodd"},null,8,iT)],8,tT))]),_:1},8,["position","class"]))}});var Ku="http://www.w3.org/1999/xhtml";const sf={svg:"http://www.w3.org/2000/svg",xhtml:Ku,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function sO(n){var e=n+="",t=e.indexOf(":");return t>=0&&(e=n.slice(0,t))!=="xmlns"&&(n=n.slice(t+1)),sf.hasOwnProperty(e)?{space:sf[e],local:n}:n}function oT(n){return function(){var e=this.ownerDocument,t=this.namespaceURI;return t===Ku&&e.documentElement.namespaceURI===Ku?e.createElement(n):e.createElementNS(t,n)}}function aT(n){return function(){return this.ownerDocument.createElementNS(n.space,n.local)}}function rO(n){var e=sO(n);return(e.local?aT:oT)(e)}function lT(){}function oO(n){return n==null?lT:function(){return this.querySelector(n)}}function uT(n){typeof n!="function"&&(n=oO(n));for(var e=this._groups,t=e.length,i=new Array(t),s=0;s<t;++s)for(var r=e[s],o=r.length,a=i[s]=new Array(o),l,u,c=0;c<o;++c)(l=r[c])&&(u=n.call(l,l.__data__,c,r))&&("__data__"in l&&(u.__data__=l.__data__),a[c]=u);return new Wt(i,this._parents)}function cT(n){return n==null?[]:Array.isArray(n)?n:Array.from(n)}function hT(){return[]}function dT(n){return n==null?hT:function(){return this.querySelectorAll(n)}}function fT(n){return function(){return cT(n.apply(this,arguments))}}function pT(n){typeof n=="function"?n=fT(n):n=dT(n);for(var e=this._groups,t=e.length,i=[],s=[],r=0;r<t;++r)for(var o=e[r],a=o.length,l,u=0;u<a;++u)(l=o[u])&&(i.push(n.call(l,l.__data__,u,o)),s.push(l));return new Wt(i,s)}function mT(n){return function(){return this.matches(n)}}function aO(n){return function(e){return e.matches(n)}}var gT=Array.prototype.find;function OT(n){return function(){return gT.call(this.children,n)}}function yT(){return this.firstElementChild}function vT(n){return this.select(n==null?yT:OT(typeof n=="function"?n:aO(n)))}var wT=Array.prototype.filter;function bT(){return Array.from(this.children)}function xT(n){return function(){return wT.call(this.children,n)}}function ST(n){return this.selectAll(n==null?bT:xT(typeof n=="function"?n:aO(n)))}function _T(n){typeof n!="function"&&(n=mT(n));for(var e=this._groups,t=e.length,i=new Array(t),s=0;s<t;++s)for(var r=e[s],o=r.length,a=i[s]=[],l,u=0;u<o;++u)(l=r[u])&&n.call(l,l.__data__,u,r)&&a.push(l);return new Wt(i,this._parents)}function lO(n){return new Array(n.length)}function $T(){return new Wt(this._enter||this._groups.map(lO),this._parents)}function $a(n,e){this.ownerDocument=n.ownerDocument,this.namespaceURI=n.namespaceURI,this._next=null,this._parent=n,this.__data__=e}$a.prototype={constructor:$a,appendChild:function(n){return this._parent.insertBefore(n,this._next)},insertBefore:function(n,e){return this._parent.insertBefore(n,e)},querySelector:function(n){return this._parent.querySelector(n)},querySelectorAll:function(n){return this._parent.querySelectorAll(n)}};function kT(n){return function(){return n}}function PT(n,e,t,i,s,r){for(var o=0,a,l=e.length,u=r.length;o<u;++o)(a=e[o])?(a.__data__=r[o],i[o]=a):t[o]=new $a(n,r[o]);for(;o<l;++o)(a=e[o])&&(s[o]=a)}function QT(n,e,t,i,s,r,o){var a,l,u=new Map,c=e.length,h=r.length,d=new Array(c),f;for(a=0;a<c;++a)(l=e[a])&&(d[a]=f=o.call(l,l.__data__,a,e)+"",u.has(f)?s[a]=l:u.set(f,l));for(a=0;a<h;++a)f=o.call(n,r[a],a,r)+"",(l=u.get(f))?(i[a]=l,l.__data__=r[a],u.delete(f)):t[a]=new $a(n,r[a]);for(a=0;a<c;++a)(l=e[a])&&u.get(d[a])===l&&(s[a]=l)}function TT(n){return n.__data__}function AT(n,e){if(!arguments.length)return Array.from(this,TT);var t=e?QT:PT,i=this._parents,s=this._groups;typeof n!="function"&&(n=kT(n));for(var r=s.length,o=new Array(r),a=new Array(r),l=new Array(r),u=0;u<r;++u){var c=i[u],h=s[u],d=h.length,f=CT(n.call(c,c&&c.__data__,u,i)),p=f.length,m=a[u]=new Array(p),O=o[u]=new Array(p),y=l[u]=new Array(d);t(c,h,m,O,y,f,e);for(var b=0,v=0,g,k;b<p;++b)if(g=m[b]){for(b>=v&&(v=b+1);!(k=O[v])&&++v<p;);g._next=k||null}}return o=new Wt(o,i),o._enter=a,o._exit=l,o}function CT(n){return typeof n=="object"&&"length"in n?n:Array.from(n)}function ET(){return new Wt(this._exit||this._groups.map(lO),this._parents)}function MT(n,e,t){var i=this.enter(),s=this,r=this.exit();return typeof n=="function"?(i=n(i),i&&(i=i.selection())):i=i.append(n+""),e!=null&&(s=e(s),s&&(s=s.selection())),t==null?r.remove():t(r),i&&s?i.merge(s).order():s}function RT(n){for(var e=n.selection?n.selection():n,t=this._groups,i=e._groups,s=t.length,r=i.length,o=Math.min(s,r),a=new Array(s),l=0;l<o;++l)for(var u=t[l],c=i[l],h=u.length,d=a[l]=new Array(h),f,p=0;p<h;++p)(f=u[p]||c[p])&&(d[p]=f);for(;l<s;++l)a[l]=t[l];return new Wt(a,this._parents)}function ZT(){for(var n=this._groups,e=-1,t=n.length;++e<t;)for(var i=n[e],s=i.length-1,r=i[s],o;--s>=0;)(o=i[s])&&(r&&o.compareDocumentPosition(r)^4&&r.parentNode.insertBefore(o,r),r=o);return this}function DT(n){n||(n=NT);function e(h,d){return h&&d?n(h.__data__,d.__data__):!h-!d}for(var t=this._groups,i=t.length,s=new Array(i),r=0;r<i;++r){for(var o=t[r],a=o.length,l=s[r]=new Array(a),u,c=0;c<a;++c)(u=o[c])&&(l[c]=u);l.sort(e)}return new Wt(s,this._parents).order()}function NT(n,e){return n<e?-1:n>e?1:n>=e?0:NaN}function IT(){var n=arguments[0];return arguments[0]=this,n.apply(null,arguments),this}function LT(){return Array.from(this)}function zT(){for(var n=this._groups,e=0,t=n.length;e<t;++e)for(var i=n[e],s=0,r=i.length;s<r;++s){var o=i[s];if(o)return o}return null}function VT(){let n=0;for(const e of this)++n;return n}function XT(){return!this.node()}function BT(n){for(var e=this._groups,t=0,i=e.length;t<i;++t)for(var s=e[t],r=0,o=s.length,a;r<o;++r)(a=s[r])&&n.call(a,a.__data__,r,s);return this}function UT(n){return function(){this.removeAttribute(n)}}function jT(n){return function(){this.removeAttributeNS(n.space,n.local)}}function WT(n,e){return function(){this.setAttribute(n,e)}}function qT(n,e){return function(){this.setAttributeNS(n.space,n.local,e)}}function YT(n,e){return function(){var t=e.apply(this,arguments);t==null?this.removeAttribute(n):this.setAttribute(n,t)}}function GT(n,e){return function(){var t=e.apply(this,arguments);t==null?this.removeAttributeNS(n.space,n.local):this.setAttributeNS(n.space,n.local,t)}}function HT(n,e){var t=sO(n);if(arguments.length<2){var i=this.node();return t.local?i.getAttributeNS(t.space,t.local):i.getAttribute(t)}return this.each((e==null?t.local?jT:UT:typeof e=="function"?t.local?GT:YT:t.local?qT:WT)(t,e))}function uO(n){return n.ownerDocument&&n.ownerDocument.defaultView||n.document&&n||n.defaultView}function FT(n){return function(){this.style.removeProperty(n)}}function KT(n,e,t){return function(){this.style.setProperty(n,e,t)}}function JT(n,e,t){return function(){var i=e.apply(this,arguments);i==null?this.style.removeProperty(n):this.style.setProperty(n,i,t)}}function eA(n,e,t){return arguments.length>1?this.each((e==null?FT:typeof e=="function"?JT:KT)(n,e,t??"")):tA(this.node(),n)}function tA(n,e){return n.style.getPropertyValue(e)||uO(n).getComputedStyle(n,null).getPropertyValue(e)}function nA(n){return function(){delete this[n]}}function iA(n,e){return function(){this[n]=e}}function sA(n,e){return function(){var t=e.apply(this,arguments);t==null?delete this[n]:this[n]=t}}function rA(n,e){return arguments.length>1?this.each((e==null?nA:typeof e=="function"?sA:iA)(n,e)):this.node()[n]}function cO(n){return n.trim().split(/^|\s+/)}function ph(n){return n.classList||new hO(n)}function hO(n){this._node=n,this._names=cO(n.getAttribute("class")||"")}hO.prototype={add:function(n){var e=this._names.indexOf(n);e<0&&(this._names.push(n),this._node.setAttribute("class",this._names.join(" ")))},remove:function(n){var e=this._names.indexOf(n);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(n){return this._names.indexOf(n)>=0}};function dO(n,e){for(var t=ph(n),i=-1,s=e.length;++i<s;)t.add(e[i])}function fO(n,e){for(var t=ph(n),i=-1,s=e.length;++i<s;)t.remove(e[i])}function oA(n){return function(){dO(this,n)}}function aA(n){return function(){fO(this,n)}}function lA(n,e){return function(){(e.apply(this,arguments)?dO:fO)(this,n)}}function uA(n,e){var t=cO(n+"");if(arguments.length<2){for(var i=ph(this.node()),s=-1,r=t.length;++s<r;)if(!i.contains(t[s]))return!1;return!0}return this.each((typeof e=="function"?lA:e?oA:aA)(t,e))}function cA(){this.textContent=""}function hA(n){return function(){this.textContent=n}}function dA(n){return function(){var e=n.apply(this,arguments);this.textContent=e??""}}function fA(n){return arguments.length?this.each(n==null?cA:(typeof n=="function"?dA:hA)(n)):this.node().textContent}function pA(){this.innerHTML=""}function mA(n){return function(){this.innerHTML=n}}function gA(n){return function(){var e=n.apply(this,arguments);this.innerHTML=e??""}}function OA(n){return arguments.length?this.each(n==null?pA:(typeof n=="function"?gA:mA)(n)):this.node().innerHTML}function yA(){this.nextSibling&&this.parentNode.appendChild(this)}function vA(){return this.each(yA)}function wA(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function bA(){return this.each(wA)}function xA(n){var e=typeof n=="function"?n:rO(n);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function SA(){return null}function _A(n,e){var t=typeof n=="function"?n:rO(n),i=e==null?SA:typeof e=="function"?e:oO(e);return this.select(function(){return this.insertBefore(t.apply(this,arguments),i.apply(this,arguments)||null)})}function $A(){var n=this.parentNode;n&&n.removeChild(this)}function kA(){return this.each($A)}function PA(){var n=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(n,this.nextSibling):n}function QA(){var n=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(n,this.nextSibling):n}function TA(n){return this.select(n?QA:PA)}function AA(n){return arguments.length?this.property("__data__",n):this.node().__data__}function CA(n){return function(e){n.call(this,e,this.__data__)}}function EA(n){return n.trim().split(/^|\s+/).map(function(e){var t="",i=e.indexOf(".");return i>=0&&(t=e.slice(i+1),e=e.slice(0,i)),{type:e,name:t}})}function MA(n){return function(){var e=this.__on;if(e){for(var t=0,i=-1,s=e.length,r;t<s;++t)r=e[t],(!n.type||r.type===n.type)&&r.name===n.name?this.removeEventListener(r.type,r.listener,r.options):e[++i]=r;++i?e.length=i:delete this.__on}}}function RA(n,e,t){return function(){var i=this.__on,s,r=CA(e);if(i){for(var o=0,a=i.length;o<a;++o)if((s=i[o]).type===n.type&&s.name===n.name){this.removeEventListener(s.type,s.listener,s.options),this.addEventListener(s.type,s.listener=r,s.options=t),s.value=e;return}}this.addEventListener(n.type,r,t),s={type:n.type,name:n.name,value:e,listener:r,options:t},i?i.push(s):this.__on=[s]}}function ZA(n,e,t){var i=EA(n+""),s,r=i.length,o;if(arguments.length<2){var a=this.node().__on;if(a){for(var l=0,u=a.length,c;l<u;++l)for(s=0,c=a[l];s<r;++s)if((o=i[s]).type===c.type&&o.name===c.name)return c.value}return}for(a=e?RA:MA,s=0;s<r;++s)this.each(a(i[s],e,t));return this}function pO(n,e,t){var i=uO(n),s=i.CustomEvent;typeof s=="function"?s=new s(e,t):(s=i.document.createEvent("Event"),t?(s.initEvent(e,t.bubbles,t.cancelable),s.detail=t.detail):s.initEvent(e,!1,!1)),n.dispatchEvent(s)}function DA(n,e){return function(){return pO(this,n,e)}}function NA(n,e){return function(){return pO(this,n,e.apply(this,arguments))}}function IA(n,e){return this.each((typeof e=="function"?NA:DA)(n,e))}function*LA(){for(var n=this._groups,e=0,t=n.length;e<t;++e)for(var i=n[e],s=0,r=i.length,o;s<r;++s)(o=i[s])&&(yield o)}var zA=[null];function Wt(n,e){this._groups=n,this._parents=e}function VA(){return this}Wt.prototype={constructor:Wt,select:uT,selectAll:pT,selectChild:vT,selectChildren:ST,filter:_T,data:AT,enter:$T,exit:ET,join:MT,merge:RT,selection:VA,order:ZT,sort:DT,call:IT,nodes:LT,node:zT,size:VT,empty:XT,each:BT,attr:HT,style:eA,property:rA,classed:uA,text:fA,html:OA,raise:vA,lower:bA,append:xA,insert:_A,remove:kA,clone:TA,datum:AA,on:ZA,dispatch:IA,[Symbol.iterator]:LA};function Er(n){return typeof n=="string"?new Wt([[document.querySelector(n)]],[document.documentElement]):new Wt([[n]],zA)}function XA(n){let e;for(;e=n.sourceEvent;)n=e;return n}function rf(n,e){if(n=XA(n),e===void 0&&(e=n.currentTarget),e){var t=e.ownerSVGElement||e;if(t.createSVGPoint){var i=t.createSVGPoint();return i.x=n.clientX,i.y=n.clientY,i=i.matrixTransform(e.getScreenCTM().inverse()),[i.x,i.y]}if(e.getBoundingClientRect){var s=e.getBoundingClientRect();return[n.clientX-s.left-e.clientLeft,n.clientY-s.top-e.clientTop]}}return[n.pageX,n.pageY]}var BA={value:()=>{}};function mO(){for(var n=0,e=arguments.length,t={},i;n<e;++n){if(!(i=arguments[n]+"")||i in t||/[\s.]/.test(i))throw new Error("illegal type: "+i);t[i]=[]}return new qo(t)}function qo(n){this._=n}function UA(n,e){return n.trim().split(/^|\s+/).map(function(t){var i="",s=t.indexOf(".");if(s>=0&&(i=t.slice(s+1),t=t.slice(0,s)),t&&!e.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:i}})}qo.prototype=mO.prototype={constructor:qo,on:function(n,e){var t=this._,i=UA(n+"",t),s,r=-1,o=i.length;if(arguments.length<2){for(;++r<o;)if((s=(n=i[r]).type)&&(s=jA(t[s],n.name)))return s;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++r<o;)if(s=(n=i[r]).type)t[s]=of(t[s],n.name,e);else if(e==null)for(s in t)t[s]=of(t[s],n.name,null);return this},copy:function(){var n={},e=this._;for(var t in e)n[t]=e[t].slice();return new qo(n)},call:function(n,e){if((s=arguments.length-2)>0)for(var t=new Array(s),i=0,s,r;i<s;++i)t[i]=arguments[i+2];if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(r=this._[n],i=0,s=r.length;i<s;++i)r[i].value.apply(e,t)},apply:function(n,e,t){if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(var i=this._[n],s=0,r=i.length;s<r;++s)i[s].value.apply(e,t)}};function jA(n,e){for(var t=0,i=n.length,s;t<i;++t)if((s=n[t]).name===e)return s.value}function of(n,e,t){for(var i=0,s=n.length;i<s;++i)if(n[i].name===e){n[i]=BA,n=n.slice(0,i).concat(n.slice(i+1));break}return t!=null&&n.push({name:e,value:t}),n}const WA={passive:!1},Mr={capture:!0,passive:!1};function Xl(n){n.stopImmediatePropagation()}function ps(n){n.preventDefault(),n.stopImmediatePropagation()}function qA(n){var e=n.document.documentElement,t=Er(n).on("dragstart.drag",ps,Mr);"onselectstart"in e?t.on("selectstart.drag",ps,Mr):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function YA(n,e){var t=n.document.documentElement,i=Er(n).on("dragstart.drag",null);e&&(i.on("click.drag",ps,Mr),setTimeout(function(){i.on("click.drag",null)},0)),"onselectstart"in t?i.on("selectstart.drag",null):(t.style.MozUserSelect=t.__noselect,delete t.__noselect)}const go=n=>()=>n;function Ju(n,{sourceEvent:e,subject:t,target:i,identifier:s,active:r,x:o,y:a,dx:l,dy:u,dispatch:c}){Object.defineProperties(this,{type:{value:n,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},subject:{value:t,enumerable:!0,configurable:!0},target:{value:i,enumerable:!0,configurable:!0},identifier:{value:s,enumerable:!0,configurable:!0},active:{value:r,enumerable:!0,configurable:!0},x:{value:o,enumerable:!0,configurable:!0},y:{value:a,enumerable:!0,configurable:!0},dx:{value:l,enumerable:!0,configurable:!0},dy:{value:u,enumerable:!0,configurable:!0},_:{value:c}})}Ju.prototype.on=function(){var n=this._.on.apply(this._,arguments);return n===this._?this:n};function GA(n){return!n.ctrlKey&&!n.button}function HA(){return this.parentNode}function FA(n,e){return e??{x:n.x,y:n.y}}function KA(){return navigator.maxTouchPoints||"ontouchstart"in this}function JA(){var n=GA,e=HA,t=FA,i=KA,s={},r=mO("start","drag","end"),o=0,a,l,u,c,h=0;function d(g){g.on("mousedown.drag",f).filter(i).on("touchstart.drag",O).on("touchmove.drag",y,WA).on("touchend.drag touchcancel.drag",b).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function f(g,k){if(!(c||!n.call(this,g,k))){var S=v(this,e.call(this,g,k),g,k,"mouse");S&&(Er(g.view).on("mousemove.drag",p,Mr).on("mouseup.drag",m,Mr),qA(g.view),Xl(g),u=!1,a=g.clientX,l=g.clientY,S("start",g))}}function p(g){if(ps(g),!u){var k=g.clientX-a,S=g.clientY-l;u=k*k+S*S>h}s.mouse("drag",g)}function m(g){Er(g.view).on("mousemove.drag mouseup.drag",null),YA(g.view,u),ps(g),s.mouse("end",g)}function O(g,k){if(n.call(this,g,k)){var S=g.changedTouches,Q=e.call(this,g,k),T=S.length,P,B;for(P=0;P<T;++P)(B=v(this,Q,g,k,S[P].identifier,S[P]))&&(Xl(g),B("start",g,S[P]))}}function y(g){var k=g.changedTouches,S=k.length,Q,T;for(Q=0;Q<S;++Q)(T=s[k[Q].identifier])&&(ps(g),T("drag",g,k[Q]))}function b(g){var k=g.changedTouches,S=k.length,Q,T;for(c&&clearTimeout(c),c=setTimeout(function(){c=null},500),Q=0;Q<S;++Q)(T=s[k[Q].identifier])&&(Xl(g),T("end",g,k[Q]))}function v(g,k,S,Q,T,P){var B=r.copy(),W=rf(P||S,k),C,j,w;if((w=t.call(g,new Ju("beforestart",{sourceEvent:S,target:d,identifier:T,active:o,x:W[0],y:W[1],dx:0,dy:0,dispatch:B}),Q))!=null)return C=w.x-W[0]||0,j=w.y-W[1]||0,function R(_,D,N){var U=W,V;switch(_){case"start":s[T]=R,V=o++;break;case"end":delete s[T],--o;case"drag":W=rf(N||D,k),V=o;break}B.call(_,g,new Ju(_,{sourceEvent:D,subject:w,target:d,identifier:T,active:V,x:W[0]+C,y:W[1]+j,dx:W[0]-U[0],dy:W[1]-U[1],dispatch:B}),Q)}}return d.filter=function(g){return arguments.length?(n=typeof g=="function"?g:go(!!g),d):n},d.container=function(g){return arguments.length?(e=typeof g=="function"?g:go(g),d):e},d.subject=function(g){return arguments.length?(t=typeof g=="function"?g:go(g),d):t},d.touchable=function(g){return arguments.length?(i=typeof g=="function"?g:go(!!g),d):i},d.on=function(){var g=r.on.apply(r,arguments);return g===r?d:g},d.clickDistance=function(g){return arguments.length?(h=(g=+g)*g,d):Math.sqrt(h)},d}var Qs=(n=>(n.Line="line",n.Handle="handle",n))(Qs||{});function eC({width:n,prevWidth:e,height:t,prevHeight:i,invertX:s,invertY:r}){const o=n-e,a=t-i,l=[o>0?1:o<0?-1:0,a>0?1:a<0?-1:0];return o&&s&&(l[0]=l[0]*-1),a&&r&&(l[1]=l[1]*-1),l}const tC={[Qs.Line]:"right",[Qs.Handle]:"bottom-right"},nC={[Qs.Line]:"borderColor",[Qs.Handle]:"backgroundColor"},iC={name:"ResizeControl",compatConfig:{MODE:3}},af=Oe({...iC,props:{nodeId:{},color:{},minWidth:{default:10},minHeight:{default:10},maxWidth:{default:Number.MAX_VALUE},maxHeight:{default:Number.MAX_VALUE},position:{},variant:{default:"handle"},shouldResize:{},keepAspectRatio:{type:[Boolean,Number],default:!1}},emits:["resizeStart","resize","resizeEnd"],setup(n,{emit:e}){const t=n,i={width:0,height:0,x:0,y:0},s={...i,pointerX:0,pointerY:0,aspectRatio:1},{findNode:r,emits:o}=Le(),a=vg(),l=ae();let u=s,c=i;const h=Me(()=>t.position??tC[t.variant]),d=Me(()=>h.value.split("-")),f=Me(()=>t.color?{[nC[t.variant]]:t.color}:{});return sm(p=>{if(!l.value||!t.nodeId)return;const m=Er(l.value),O=h.value.includes("right")||h.value.includes("left"),y=h.value.includes("bottom")||h.value.includes("top"),b=h.value.includes("left"),v=h.value.includes("top"),g=JA().on("start",k=>{const S=r(t.nodeId),{xSnapped:Q,ySnapped:T}=a(k);c={width:(S==null?void 0:S.dimensions.width)??0,height:(S==null?void 0:S.dimensions.height)??0,x:(S==null?void 0:S.position.x)??0,y:(S==null?void 0:S.position.y)??0},u={...c,pointerX:Q,pointerY:T,aspectRatio:c.width/c.height},e("resizeStart",{event:k,params:c})}).on("drag",k=>{var S;const{xSnapped:Q,ySnapped:T}=a(k),P=r(t.nodeId);if(P){const B=[],{pointerX:W,pointerY:C,width:j,height:w,x:R,y:_,aspectRatio:D}=u,{x:N,y:U,width:V,height:Y}=c,E=Math.floor(O?Q-W:0),X=Math.floor(y?T-C:0);let H=Bn(j+(b?-E:E),t.minWidth,t.maxWidth),J=Bn(w+(v?-X:X),t.minHeight,t.maxHeight);if(t.keepAspectRatio){const he=H/J;let le=D;typeof t.keepAspectRatio=="number"&&he!==t.keepAspectRatio&&(le=t.keepAspectRatio);const we=O&&y,Z=O&&!y,M=y&&!O;H=he<=le&&we||M?J*le:H,J=he>le&&we||Z?H/le:J,H>=t.maxWidth?(H=t.maxWidth,J=t.maxWidth/le):H<=t.minWidth&&(H=t.minWidth,J=t.minWidth/le),J>=t.maxHeight?(J=t.maxHeight,H=t.maxHeight*le):J<=t.minHeight&&(J=t.minHeight,H=t.minHeight*le)}const me=H!==V,oe=J!==Y;if(b||v){const he=b?R-(H-j):R,le=v?_-(J-w):_,we=he!==N&&me,Z=le!==U&&oe;if(we||Z){const M={id:P.id,type:"position",from:P.position,position:{x:we?he:N,y:Z?le:U}};B.push(M),c.x=M.position.x,c.y=M.position.y}}if(t.nodeId&&(me||oe)){const he={id:t.nodeId,type:"dimensions",updateStyle:!0,resizing:!0,dimensions:{width:H,height:J}};B.push(he),c.width=H,c.height=J}if(B.length===0)return;const xe=eC({width:c.width,prevWidth:V,height:c.height,prevHeight:Y,invertX:b,invertY:v}),ye={...c,direction:xe};if(((S=t.shouldResize)==null?void 0:S.call(t,k,ye))===!1)return;e("resize",{event:k,params:ye}),o.nodesChange(B)}}).on("end",k=>{if(t.nodeId){const S={id:t.nodeId,type:"dimensions",resizing:!1};e("resizeEnd",{event:k,params:c}),o.nodesChange([S])}});m.call(g),p(()=>{m.on(".drag",null)})}),(p,m)=>(G(),K("div",{ref_key:"resizeControlRef",ref:l,class:Ge(["vue-flow__resize-control nodrag",[...d.value,p.variant]]),style:gt(f.value)},[Be(p.$slots,"default")],6))}}),sC={name:"NodeResizer",compatConfig:{MODE:3},inheritAttrs:!1},Jt=Oe({...sC,props:{nodeId:{},color:{},handleClassName:{},handleStyle:{},lineClassName:{},lineStyle:{},isVisible:{type:Boolean,default:!0},minWidth:{},minHeight:{},maxWidth:{},maxHeight:{},shouldResize:{},keepAspectRatio:{type:[Boolean,Number]}},emits:["resizeStart","resize","resizeEnd"],setup(n,{emit:e}){const t=n,{findNode:i,emits:s}=Le(),r=["top-left","top-right","bottom-left","bottom-right"],o=["top","right","bottom","left"],a=Wn(tl,null),l=Me(()=>typeof t.nodeId=="string"?t.nodeId:a),u=pe(()=>i(l.value));return Qe([()=>t.minWidth,()=>t.minHeight,()=>t.maxWidth,()=>t.maxHeight,()=>{var c;return!!((c=u.value)!=null&&c.dimensions.width)&&!!u.value.dimensions.height}],([c,h,d,f,p])=>{const m=u.value;if(m&&p){const O={id:m.id,type:"dimensions",updateStyle:!0,dimensions:{width:m.dimensions.width,height:m.dimensions.height}};c&&m.dimensions.width<c&&(O.dimensions.width=c),h&&m.dimensions.height<h&&(O.dimensions.height=h),d&&m.dimensions.width>d&&(O.dimensions.width=d),f&&m.dimensions.height>f&&(O.dimensions.height=f),(O.dimensions.width!==m.dimensions.width||O.dimensions.height!==m.dimensions.height)&&s.nodesChange([O])}},{flush:"post",immediate:!0}),(c,h)=>c.isVisible?(G(),K(ke,{key:0},[(G(),K(ke,null,Xe(o,d=>x(af,{key:d,class:Ge(c.lineClassName),style:gt(c.lineStyle),"node-id":l.value,position:d,variant:$(Qs).Line,"keep-aspect-ratio":c.keepAspectRatio,color:c.color,"min-width":c.minWidth,"min-height":c.minHeight,"max-width":c.maxWidth,"max-height":c.maxHeight,"should-resize":c.shouldResize,onResizeStart:h[0]||(h[0]=f=>e("resizeStart",f)),onResize:h[1]||(h[1]=f=>e("resize",f)),onResizeEnd:h[2]||(h[2]=f=>e("resizeEnd",f))},null,8,["class","style","node-id","position","variant","keep-aspect-ratio","color","min-width","min-height","max-width","max-height","should-resize"])),64)),(G(),K(ke,null,Xe(r,d=>x(af,{key:d,class:Ge(c.handleClassName),style:gt(c.handleStyle),"node-id":l.value,position:d,color:c.color,"min-width":c.minWidth,"min-height":c.minHeight,"max-width":c.maxWidth,"max-height":c.maxHeight,"should-resize":c.shouldResize,"keep-aspect-ratio":c.keepAspectRatio,onResizeStart:h[3]||(h[3]=f=>e("resizeStart",f)),onResize:h[4]||(h[4]=f=>e("resize",f)),onResizeEnd:h[5]||(h[5]=f=>e("resizeEnd",f))},null,8,["class","style","node-id","position","color","min-width","min-height","max-width","max-height","should-resize","keep-aspect-ratio"])),64))],64)):Ee("",!0)}}),rC={class:"card-header"},oC={class:"card-header"},aC={class:"card-header"},lC=Oe({__name:"NodeConfigDialog",props:{modelValue:{type:Boolean},editData:{}},emits:["update:modelValue","confirm"],setup(n,{emit:e}){const t=n,i=e,s=ae(t.modelValue),r=ae(t.editData?"编辑组件":"添加组件"),o=ra({label:"",template:"",fields:[],handles:[],actions:[]});Qe(()=>t.modelValue,p=>{s.value=p}),Qe(()=>s.value,p=>{i("update:modelValue",p)});function a(){o.fields.push({name:"",type:"number",unit:""})}function l(p){o.fields.splice(p,1)}function u(){o.handles.push({id:"",type:"target",position:"top"})}function c(p){o.handles.splice(p,1)}function h(){o.actions.push({label:"",value:""})}function d(p){o.actions.splice(p,1)}function f(){i("confirm",{...o}),s.value=!1}return(p,m)=>(G(),be($(om),{modelValue:s.value,"onUpdate:modelValue":m[3]||(m[3]=O=>s.value=O),title:r.value,width:"600px"},{footer:A(()=>[x($($e),{onClick:m[2]||(m[2]=O=>s.value=!1)},{default:A(()=>m[16]||(m[16]=[te("取消")])),_:1}),x($($e),{type:"primary",onClick:f},{default:A(()=>m[17]||(m[17]=[te("确定")])),_:1})]),default:A(()=>[x($(am),{model:o,"label-width":"100px"},{default:A(()=>[x($(ii),{label:"组件名称"},{default:A(()=>[x($(Ji),{modelValue:o.label,"onUpdate:modelValue":m[0]||(m[0]=O=>o.label=O),placeholder:"请输入组件名称"},null,8,["modelValue"])]),_:1}),x($(ii),{label:"组件类型"},{default:A(()=>[x($(Fs),{modelValue:o.template,"onUpdate:modelValue":m[1]||(m[1]=O=>o.template=O),placeholder:"选择组件模板"},{default:A(()=>[x($(Et),{label:"容器类",value:"tank"},{default:A(()=>m[4]||(m[4]=[q("div",{class:"template-option"},[q("div",null,"容器类"),q("div",{class:"template-desc"},"适用于储罐、气瓶等存储容器")],-1)])),_:1}),x($(Et),{label:"阀门类",value:"valve"},{default:A(()=>m[5]||(m[5]=[q("div",{class:"template-option"},[q("div",null,"阀门类"),q("div",{class:"template-desc"},"适用于各类阀门控制元件")],-1)])),_:1}),x($(Et),{label:"传感器类",value:"sensor"},{default:A(()=>m[6]||(m[6]=[q("div",{class:"template-option"},[q("div",null,"传感器类"),q("div",{class:"template-desc"},"适用于压力、温度等传感器")],-1)])),_:1})]),_:1},8,["modelValue"])]),_:1}),x($(ii),{label:"数据字段"},{default:A(()=>[x($(_l),{class:"data-fields"},{header:A(()=>[q("div",rC,[m[8]||(m[8]=q("span",null,"字段列表",-1)),x($($e),{type:"primary",link:"",onClick:a},{default:A(()=>m[7]||(m[7]=[te("添加字段")])),_:1})])]),default:A(()=>[(G(!0),K(ke,null,Xe(o.fields,(O,y)=>(G(),K("div",{key:y,class:"field-item"},[x($(Ji),{modelValue:O.name,"onUpdate:modelValue":b=>O.name=b,placeholder:"字段名称",style:{width:"120px"}},null,8,["modelValue","onUpdate:modelValue"]),x($(Fs),{modelValue:O.type,"onUpdate:modelValue":b=>O.type=b,placeholder:"类型",style:{width:"100px"}},{default:A(()=>[x($(Et),{label:"数值",value:"number"}),x($(Et),{label:"文本",value:"text"}),x($(Et),{label:"布尔",value:"boolean"})]),_:2},1032,["modelValue","onUpdate:modelValue"]),x($(Ji),{modelValue:O.unit,"onUpdate:modelValue":b=>O.unit=b,placeholder:"单位",style:{width:"80px"}},null,8,["modelValue","onUpdate:modelValue"]),x($($e),{type:"danger",link:"",onClick:b=>l(y)},{default:A(()=>m[9]||(m[9]=[te("删除")])),_:2},1032,["onClick"])]))),128))]),_:1})]),_:1}),x($(ii),{label:"连接桩"},{default:A(()=>[x($(_l),{class:"handles"},{header:A(()=>[q("div",oC,[m[11]||(m[11]=q("span",null,"连接桩列表",-1)),x($($e),{type:"primary",link:"",onClick:u},{default:A(()=>m[10]||(m[10]=[te("添加连接桩")])),_:1})])]),default:A(()=>[(G(!0),K(ke,null,Xe(o.handles,(O,y)=>(G(),K("div",{key:y,class:"handle-item"},[x($(Ji),{modelValue:O.id,"onUpdate:modelValue":b=>O.id=b,placeholder:"标识符",style:{width:"120px"}},null,8,["modelValue","onUpdate:modelValue"]),x($(Fs),{modelValue:O.type,"onUpdate:modelValue":b=>O.type=b,placeholder:"类型",style:{width:"100px"}},{default:A(()=>[x($(Et),{label:"输入",value:"target"}),x($(Et),{label:"输出",value:"source"})]),_:2},1032,["modelValue","onUpdate:modelValue"]),x($(Fs),{modelValue:O.position,"onUpdate:modelValue":b=>O.position=b,placeholder:"位置",style:{width:"100px"}},{default:A(()=>[x($(Et),{label:"顶部",value:"top"}),x($(Et),{label:"底部",value:"bottom"}),x($(Et),{label:"左侧",value:"left"}),x($(Et),{label:"右侧",value:"right"})]),_:2},1032,["modelValue","onUpdate:modelValue"]),x($($e),{type:"danger",link:"",onClick:b=>c(y)},{default:A(()=>m[12]||(m[12]=[te("删除")])),_:2},1032,["onClick"])]))),128))]),_:1})]),_:1}),x($(ii),{label:"操作按钮"},{default:A(()=>[x($(_l),{class:"actions"},{header:A(()=>[q("div",aC,[m[14]||(m[14]=q("span",null,"按钮列表",-1)),x($($e),{type:"primary",link:"",onClick:h},{default:A(()=>m[13]||(m[13]=[te("添加按钮")])),_:1})])]),default:A(()=>[(G(!0),K(ke,null,Xe(o.actions,(O,y)=>(G(),K("div",{key:y,class:"action-item"},[x($(Ji),{modelValue:O.label,"onUpdate:modelValue":b=>O.label=b,placeholder:"按钮文本",style:{width:"120px"}},null,8,["modelValue","onUpdate:modelValue"]),x($(Ji),{modelValue:O.value,"onUpdate:modelValue":b=>O.value=b,placeholder:"动作值",style:{width:"120px"}},null,8,["modelValue","onUpdate:modelValue"]),x($($e),{type:"danger",link:"",onClick:b=>d(y)},{default:A(()=>m[15]||(m[15]=[te("删除")])),_:2},1032,["onClick"])]))),128))]),_:1})]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"]))}}),uC=yt(lC,[["__scopeId","data-v-f63c7f83"]]),cC={name:"NodeToolbar",compatConfig:{MODE:3},inheritAttrs:!1},Fi=Oe({...cC,props:{nodeId:null,isVisible:{type:Boolean},position:{default:ce.Top},offset:{default:10},align:{default:"center"}},setup(n){const e=n,t=Wn(tl,null),{viewportRef:i,viewport:s,getSelectedNodes:r,findNode:o}=Le();function a(f,p,m,O,y){let b=.5;y==="start"?b=0:y==="end"&&(b=1);let v=[(f.x+f.width*b)*p.zoom+p.x,f.y*p.zoom+p.y-O],g=[-100*b,-100];switch(m){case ce.Right:v=[(f.x+f.width)*p.zoom+p.x+O,(f.y+f.height*b)*p.zoom+p.y],g=[0,-100*b];break;case ce.Bottom:v[1]=(f.y+f.height)*p.zoom+p.y+O,g[1]=0;break;case ce.Left:v=[f.x*p.zoom+p.x-O,(f.y+f.height*b)*p.zoom+p.y],g=[-100,-100*b];break}return`translate(${v[0]}px, ${v[1]}px) translate(${g[0]}%, ${g[1]}%)`}const l=pe(()=>(Array.isArray(e.nodeId)?e.nodeId:[e.nodeId||t||""]).reduce((f,p)=>{const m=o(p);return m&&f.push(m),f},[])),u=pe(()=>typeof e.isVisible=="boolean"?e.isVisible:l.value.length===1&&l.value[0].selected&&r.value.length===1),c=pe(()=>Ka(l.value)),h=pe(()=>Math.max(...l.value.map(f=>(f.computedPosition.z||1)+1))),d=pe(()=>({position:"absolute",transform:a(c.value,s.value,e.position,e.offset,e.align),zIndex:h.value}));return(f,p)=>(G(),be(Yy,{to:$(i),disabled:!$(i)},[$(u)&&$(l).length?(G(),K("div",Xt({key:0},f.$attrs,{style:$(d),class:"vue-flow__node-toolbar"}),[Be(f.$slots,"default")],16)):Ee("",!0)],8,["to","disabled"]))}}),hC={class:"label"},dC={class:"status"},fC=Oe({__name:"CustomNode",props:{id:{},selected:{type:Boolean},data:{}},emits:["update"],setup(n,{emit:e}){const t=n,i=e;function s(r){i("update",t.id,r)}return(r,o)=>{var a,l,u,c,h;return G(),K("div",{class:Ge(["custom-node",{selected:t.selected}])},[x($(Jt),{"min-width":80,"min-height":100}),(G(!0),K(ke,null,Xe((a=t.data)==null?void 0:a.handles,d=>(G(),be($(Ot),{key:d.id,id:d.id,type:d.type,position:d.position,class:"handle"},null,8,["id","type","position"]))),128)),(u=(l=t.data)==null?void 0:l.actions)!=null&&u.length?(G(),be($(Fi),{key:0},{default:A(()=>[(G(!0),K(ke,null,Xe(t.data.actions,d=>(G(),be($($e),{key:d.value,size:"small",onClick:f=>s(d.value)},{default:A(()=>[te(ve(d.label),1)]),_:2},1032,["onClick"]))),128))]),_:1})):Ee("",!0),q("div",hC,ve(((c=t.data)==null?void 0:c.label)||"自定义组件"),1),q("div",dC,[(G(!0),K(ke,null,Xe((h=t.data)==null?void 0:h.fields,d=>(G(),K("div",{key:d.id},ve(d.label)+": "+ve(d.value||"N/A")+" "+ve(d.unit),1))),128))])],2)}}}),pC=yt(fC,[["__scopeId","data-v-9e4cfdeb"]]),mC={class:"label"},gC={class:"status"},OC=Oe({__name:"FuelTank",props:{id:{},selected:{type:Boolean},data:{}},emits:["update"],setup(n,{emit:e}){const t=n,i=e;function s(r){i("update",t.id,r)}return(r,o)=>{var a,l,u,c;return G(),K("div",{class:Ge(["custom-node tank",{selected:t.selected}])},[x($(Jt),{"min-width":80,"min-height":100}),x($(Ot),{id:"pressurant",type:"target",position:"top",class:"handle"}),x($(Ot),{id:"output",type:"source",position:"bottom",class:"handle"}),x($(Fi),null,{default:A(()=>[x($($e),{size:"small",onClick:o[0]||(o[0]=h=>s("FILL"))},{default:A(()=>o[3]||(o[3]=[te("加注")])),_:1}),x($($e),{size:"small",onClick:o[1]||(o[1]=h=>s("DRAIN"))},{default:A(()=>o[4]||(o[4]=[te("排空")])),_:1}),x($($e),{size:"small",onClick:o[2]||(o[2]=h=>s("VENT"))},{default:A(()=>o[5]||(o[5]=[te("排气")])),_:1})]),_:1}),q("div",mC,ve(((a=t.data)==null?void 0:a.label)||"燃料罐"),1),q("div",gC,[q("div",null,"压力: "+ve(((l=t.data)==null?void 0:l.pressure)||"N/A")+" MPa",1),q("div",null,"温度: "+ve(((u=t.data)==null?void 0:u.temperature)||"N/A")+" ℃",1),q("div",null,"液位: "+ve(((c=t.data)==null?void 0:c.level)||"N/A")+" %",1)])],2)}}}),yC={class:"label"},vC={class:"status"},wC=Oe({__name:"OxidizerTank",props:{id:{},selected:{type:Boolean},data:{}},emits:["update"],setup(n,{emit:e}){const t=n,i=e;function s(r){i("update",t.id,r)}return(r,o)=>{var a,l,u,c;return G(),K("div",{class:Ge(["custom-node tank oxidizer",{selected:t.selected}])},[x($(Jt),{"min-width":80,"min-height":100}),x($(Ot),{id:"pressurant",type:"target",position:"top",class:"handle"}),x($(Ot),{id:"output",type:"source",position:"bottom",class:"handle"}),x($(Fi),null,{default:A(()=>[x($($e),{size:"small",onClick:o[0]||(o[0]=h=>s("FILL"))},{default:A(()=>o[3]||(o[3]=[te("加注")])),_:1}),x($($e),{size:"small",onClick:o[1]||(o[1]=h=>s("DRAIN"))},{default:A(()=>o[4]||(o[4]=[te("排空")])),_:1}),x($($e),{size:"small",onClick:o[2]||(o[2]=h=>s("VENT"))},{default:A(()=>o[5]||(o[5]=[te("排气")])),_:1})]),_:1}),q("div",yC,ve(((a=t.data)==null?void 0:a.label)||"氧化剂罐"),1),q("div",vC,[q("div",null,"压力: "+ve(((l=t.data)==null?void 0:l.pressure)||"N/A")+" MPa",1),q("div",null,"温度: "+ve(((u=t.data)==null?void 0:u.temperature)||"N/A")+" ℃",1),q("div",null,"液位: "+ve(((c=t.data)==null?void 0:c.level)||"N/A")+" %",1)])],2)}}}),bC={class:"label"},xC={class:"status"},SC=Oe({__name:"PressurantTank",props:{id:{},selected:{type:Boolean},data:{}},emits:["update"],setup(n,{emit:e}){const t=n,i=e;function s(r){i("update",t.id,r)}return(r,o)=>{var a,l,u;return G(),K("div",{class:Ge(["custom-node tank pressurant",{selected:t.selected}])},[x($(Jt),{"min-width":70,"min-height":90}),x($(Ot),{id:"output",type:"source",position:"bottom",class:"handle"}),x($(Fi),null,{default:A(()=>[x($($e),{size:"small",onClick:o[0]||(o[0]=c=>s("FILL"))},{default:A(()=>o[2]||(o[2]=[te("充气")])),_:1}),x($($e),{size:"small",onClick:o[1]||(o[1]=c=>s("VENT"))},{default:A(()=>o[3]||(o[3]=[te("排气")])),_:1})]),_:1}),q("div",bC,ve(((a=t.data)==null?void 0:a.label)||"增压气罐"),1),q("div",xC,[q("div",null,"压力: "+ve(((l=t.data)==null?void 0:l.pressure)||"N/A")+" MPa",1),q("div",null,"温度: "+ve(((u=t.data)==null?void 0:u.temperature)||"N/A")+" ℃",1)])],2)}}}),_C={class:"label"},$C={class:"status"},kC=Oe({__name:"Engine",props:{id:{},selected:{type:Boolean},data:{}},emits:["update"],setup(n,{emit:e}){const t=n,i=e;function s(r){i("update",t.id,r)}return(r,o)=>{var a,l,u,c;return G(),K("div",{class:Ge(["custom-node engine",{selected:t.selected}])},[x($(Jt),{"min-width":100,"min-height":120}),x($(Ot),{id:"fuel",type:"target",position:"left",class:"handle"}),x($(Ot),{id:"oxidizer",type:"source",position:"right",class:"handle"}),x($(Fi),null,{default:A(()=>[x($($e),{size:"small",onClick:o[0]||(o[0]=h=>s("START"))},{default:A(()=>o[3]||(o[3]=[te("点火")])),_:1}),x($($e),{size:"small",onClick:o[1]||(o[1]=h=>s("SHUTDOWN"))},{default:A(()=>o[4]||(o[4]=[te("关机")])),_:1}),x($($e),{size:"small",onClick:o[2]||(o[2]=h=>s("PURGE"))},{default:A(()=>o[5]||(o[5]=[te("吹洗")])),_:1})]),_:1}),q("div",_C,ve(((a=t.data)==null?void 0:a.label)||"推进器"),1),q("div",$C,[q("div",null,"推力: "+ve(((l=t.data)==null?void 0:l.thrust)||"N/A")+" kN",1),q("div",null,"室压: "+ve(((u=t.data)==null?void 0:u.chamber_pressure)||"N/A")+" MPa",1),q("div",null,"混比: "+ve(((c=t.data)==null?void 0:c.mixture_ratio)||"N/A"),1)])],2)}}}),PC={class:"label"},QC={class:"status"},TC=Oe({__name:"Valve",props:{id:{},selected:{type:Boolean},data:{}},emits:["update"],setup(n,{emit:e}){const t=n,i=e;function s(r){i("update",t.id,r)}return(r,o)=>{var a,l,u;return G(),K("div",{class:Ge(["custom-node valve",{selected:t.selected,open:((a=t.data)==null?void 0:a.value)==="OPEN"}])},[x($(Jt),{"min-width":30,"min-height":20}),x($(Ot),{id:"input",type:"target",position:"left",class:"handle"}),x($(Ot),{id:"output",type:"source",position:"right",class:"handle"}),x($(Fi),null,{default:A(()=>[x($($e),{size:"small",onClick:o[0]||(o[0]=c=>s("OPEN"))},{default:A(()=>o[2]||(o[2]=[te("开启")])),_:1}),x($($e),{size:"small",onClick:o[1]||(o[1]=c=>s("CLOSE"))},{default:A(()=>o[3]||(o[3]=[te("关闭")])),_:1})]),_:1}),q("div",PC,ve(((l=t.data)==null?void 0:l.label)||"阀门"),1),q("div",QC,ve(((u=t.data)==null?void 0:u.value)||"关闭"),1)],2)}}}),AC={class:"label"},CC=Oe({__name:"CheckValve",props:{id:{},selected:{type:Boolean},data:{}},setup(n){const e=n;return(t,i)=>{var s;return G(),K("div",{class:Ge(["custom-node check-valve",{selected:e.selected}])},[x($(Jt),{"min-width":30,"min-height":20}),x($(Ot),{id:"target",type:"target",position:"left",class:"handle"}),x($(Ot),{id:"source",type:"source",position:"right",class:"handle"}),q("div",AC,ve(((s=e.data)==null?void 0:s.label)||"单向阀"),1)],2)}}}),EC=yt(CC,[["__scopeId","data-v-199a83a6"]]),MC={class:"label"},RC={class:"status"},ZC=Oe({__name:"Regulator",props:{id:{},selected:{type:Boolean},data:{}},emits:["update"],setup(n,{emit:e}){const t=n,i=e;function s(r){i("update",t.id,r)}return(r,o)=>{var a,l;return G(),K("div",{class:Ge(["custom-node regulator",{selected:t.selected}])},[x($(Jt),{"min-width":70,"min-height":50}),x($(Fi),null,{default:A(()=>[x($($e),{size:"small",onClick:o[0]||(o[0]=u=>s("SET"))},{default:A(()=>o[1]||(o[1]=[te("设定")])),_:1})]),_:1}),q("div",MC,ve(((a=t.data)==null?void 0:a.label)||"调压阀"),1),q("div",RC,"设定: "+ve(((l=t.data)==null?void 0:l.setpoint)||"N/A")+" MPa",1)],2)}}}),DC=yt(ZC,[["__scopeId","data-v-3915b64a"]]),NC={class:"pipeline-panel"},IC={class:"toolbar"},LC={class:"label"},zC={class:"value"},VC={class:"label"},XC={class:"value"},BC={class:"label"},UC={class:"value"},jC=Oe({__name:"PipelinePanel",setup(n){const{nodes:e,edges:t,addNodes:i,getNode:s,setNodes:r,addEdges:o,setEdges:a,project:l,elements:u}=Le(),c=ae(!1),h=ae(null),d=ae(!1),f=ra({style:"default",color:"#333",width:10}),p=[{label:"实线",value:"default"},{label:"虚线",value:"dashed"},{label:"点线",value:"dotted"}];function m(){var E,X,H;if(!h.value)return;const Y=h.value;f.style=((E=Y.style)==null?void 0:E.type)||"default",f.color=((X=Y.style)==null?void 0:X.stroke)||"#333",f.width=((H=Y.style)==null?void 0:H.strokeWidth)||2,d.value=!0}function O(){if(!h.value)return;const Y=h.value,E={stroke:f.color,strokeWidth:f.width,strokeDasharray:f.style==="dashed"?"5 5":f.style==="dotted"?"2 2":void 0};Object.assign(Y.style,E),d.value=!1,D()}function y({edge:Y}){h.value=Y}const b=ae(null),v=ae(null),g=ae(!1),k=ae(!1),S=ra({past:[],future:[]}),Q=[{id:"pressurant-1",type:"pressurant",position:{x:100,y:40},data:{label:"氦气瓶",pressure:"30.0",temperature:"25.0"}},{id:"pressure-1",type:"pressure",position:{x:100,y:150},data:{label:"P1",value:"30.0"}},{id:"regulator-1",type:"regulator",position:{x:100,y:260},data:{label:"主调压阀",setpoint:"2.0"}},{id:"pressure-2",type:"pressure",position:{x:100,y:250},data:{label:"P2",value:"2.0"}},{id:"oxidizer-1",type:"oxidizer",position:{x:300,y:100},data:{label:"液氧罐",pressure:"1.8",temperature:"-183.0",level:"95"}},{id:"temperature-1",type:"temperature",position:{x:300,y:230},data:{label:"T1",value:"-183.0"}},{id:"check_valve-1",type:"check_valve",position:{x:300,y:360},data:{label:"单向阀1"}},{id:"valve-1",type:"valve",position:{x:300,y:420},data:{label:"氧化剂阀"}},{id:"flow-1",type:"flow",position:{x:300,y:520},data:{label:"F1",value:"0.0"}},{id:"fuel-1",type:"fuel",position:{x:500,y:100},data:{label:"煤油罐",pressure:"1.8",temperature:"15.0",level:"95"}},{id:"temperature-2",type:"temperature",position:{x:500,y:230},data:{label:"T2",value:"15.0"}},{id:"check_valve-2",type:"check_valve",position:{x:500,y:360},data:{label:"单向阀2"}},{id:"valve-2",type:"valve",position:{x:500,y:420},data:{label:"燃料阀"}},{id:"flow-2",type:"flow",position:{x:500,y:520},data:{label:"F2",value:"0.0"}},{id:"engine-1",type:"engine",position:{x:325,y:660},data:{label:"主发动机",thrust:"0.0",chamber_pressure:"0.0",mixture_ratio:"2.5"}}],T=[{id:"e1-2",source:"pressurant-1",target:"pressure-1",style:{strokeWidth:5}},{id:"e2-3",source:"pressure-1",target:"regulator-1",style:{strokeWidth:5}},{id:"e3-4",source:"regulator-1",target:"pressure-2",style:{strokeWidth:5}},{id:"e4-5",source:"pressure-2",target:"oxidizer-1",style:{strokeWidth:5}},{id:"e4-6",source:"pressure-2",target:"fuel-1",style:{strokeWidth:5}},{id:"e5-7",source:"oxidizer-1",target:"temperature-1",style:{strokeWidth:5}},{id:"e7-8",source:"temperature-1",target:"check_valve-1",style:{strokeWidth:5}},{id:"e8-9",source:"check_valve-1",target:"valve-1",style:{strokeWidth:5}},{id:"e9-10",source:"valve-1",target:"flow-1",style:{strokeWidth:5}},{id:"e10-15",source:"flow-1",target:"engine-1",style:{strokeWidth:5}},{id:"e6-11",source:"fuel-1",target:"temperature-2",style:{strokeWidth:5}},{id:"e11-12",source:"temperature-2",target:"check_valve-2",style:{strokeWidth:5}},{id:"e12-13",source:"check_valve-2",target:"valve-2",style:{strokeWidth:5}},{id:"e13-14",source:"valve-2",target:"flow-2",style:{strokeWidth:5}},{id:"e14-15",source:"flow-2",target:"engine-1",style:{strokeWidth:5}}];function P(Y,E){const X=s(Y);X&&(X.data={...X.data,value:E},D())}function B(Y){const E=l({x:100,y:100}),X={id:`${Y}-${Date.now()}`,type:Y,position:E,data:{label:"",value:""}};i([X]),D()}function W(){c.value=!0}function C(Y){const E=l({x:100,y:100}),X={id:`custom-${Date.now()}`,type:"custom",position:E,data:{...Y,label:Y.label||"自定义组件"}};i([X]),D()}function j({node:Y}){b.value=Y}function w(){b.value=null,h.value=null}function R(){b.value&&(v.value=JSON.parse(JSON.stringify(b.value)))}function _(){if(v.value){const Y={...v.value,id:`${v.value.type}-${Date.now()}`,position:{x:v.value.position.x+50,y:v.value.position.y+50}};i([Y]),D()}}function D(){S.past.push({nodes:JSON.parse(JSON.stringify(e)),edges:JSON.parse(JSON.stringify(t))}),S.future=[],V()}function N(){if(S.past.length>0){const Y={nodes:e,edges:t};S.future.unshift(Y);const E=S.past.pop();E&&(r(E.nodes),a(E.edges),V())}}function U(){if(S.future.length>0){const Y={nodes:e,edges:t};S.past.push(Y);const E=S.future.shift();E&&(r(E.nodes),a(E.edges),V())}}function V(){g.value=S.past.length>0,k.value=S.future.length>0}return St(()=>{i(Q),o(T),window.addEventListener("keydown",Y=>{if(Y.metaKey||Y.ctrlKey)switch(Y.key){case"c":b.value&&R();break;case"v":v.value&&_();break;case"z":!Y.shiftKey&&g.value?N():Y.shiftKey&&k.value&&U();break}})}),(Y,E)=>(G(),K("div",NC,[q("div",IC,[x($(es),null,{default:A(()=>[x($($e),{onClick:E[0]||(E[0]=X=>B("fuel"))},{default:A(()=>E[17]||(E[17]=[te("燃料罐")])),_:1}),x($($e),{onClick:E[1]||(E[1]=X=>B("oxidizer"))},{default:A(()=>E[18]||(E[18]=[te("氧化剂罐")])),_:1}),x($($e),{onClick:E[2]||(E[2]=X=>B("pressurant"))},{default:A(()=>E[19]||(E[19]=[te("增压气罐")])),_:1}),x($($e),{onClick:E[3]||(E[3]=X=>B("engine"))},{default:A(()=>E[20]||(E[20]=[te("推进器")])),_:1})]),_:1}),x($(es),{style:{"margin-left":"12px"}},{default:A(()=>[x($($e),{onClick:E[4]||(E[4]=X=>B("valve"))},{default:A(()=>E[21]||(E[21]=[te("阀门")])),_:1}),x($($e),{onClick:E[5]||(E[5]=X=>B("check_valve"))},{default:A(()=>E[22]||(E[22]=[te("单向阀")])),_:1}),x($($e),{onClick:E[6]||(E[6]=X=>B("regulator"))},{default:A(()=>E[23]||(E[23]=[te("调压阀")])),_:1})]),_:1}),x($(es),{style:{"margin-left":"12px"}},{default:A(()=>[x($($e),{onClick:E[7]||(E[7]=X=>B("pressure"))},{default:A(()=>E[24]||(E[24]=[te("压力传感器")])),_:1}),x($($e),{onClick:E[8]||(E[8]=X=>B("temperature"))},{default:A(()=>E[25]||(E[25]=[te("温度传感器")])),_:1}),x($($e),{onClick:E[9]||(E[9]=X=>B("flow"))},{default:A(()=>E[26]||(E[26]=[te("流量传感器")])),_:1})]),_:1}),x($(es),{style:{"margin-left":"12px"}},{default:A(()=>[x($($e),{type:"primary",onClick:W},{default:A(()=>E[27]||(E[27]=[te("添加自定义组件")])),_:1})]),_:1}),x($(es),{style:{"margin-left":"12px"}},{default:A(()=>[x($($e),{onClick:R,disabled:!b.value},{default:A(()=>E[28]||(E[28]=[te("复制")])),_:1},8,["disabled"]),x($($e),{onClick:_,disabled:!v.value},{default:A(()=>E[29]||(E[29]=[te("粘贴")])),_:1},8,["disabled"]),x($($e),{onClick:N,disabled:!g.value},{default:A(()=>E[30]||(E[30]=[te("撤销")])),_:1},8,["disabled"]),x($($e),{onClick:U,disabled:!k.value},{default:A(()=>E[31]||(E[31]=[te("重做")])),_:1},8,["disabled"])]),_:1}),x($(es),{style:{"margin-left":"12px"}},{default:A(()=>[x($($e),{onClick:m,disabled:!h.value},{default:A(()=>E[32]||(E[32]=[te("编辑连接线")])),_:1},8,["disabled"])]),_:1})]),x(uC,{modelValue:c.value,"onUpdate:modelValue":E[10]||(E[10]=X=>c.value=X),onConfirm:C},null,8,["modelValue"]),x($(om),{modelValue:d.value,"onUpdate:modelValue":E[15]||(E[15]=X=>d.value=X),title:"编辑连接线样式",width:"400px"},{footer:A(()=>[x($($e),{onClick:E[14]||(E[14]=X=>d.value=!1)},{default:A(()=>E[33]||(E[33]=[te("取消")])),_:1}),x($($e),{type:"primary",onClick:O},{default:A(()=>E[34]||(E[34]=[te("确定")])),_:1})]),default:A(()=>[x($(am),{model:f},{default:A(()=>[x($(ii),{label:"线型"},{default:A(()=>[x($(Fs),{modelValue:f.style,"onUpdate:modelValue":E[11]||(E[11]=X=>f.style=X)},{default:A(()=>[(G(),K(ke,null,Xe(p,X=>x($(Et),{key:X.value,label:X.label,value:X.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1}),x($(ii),{label:"颜色"},{default:A(()=>[x($(Jy),{modelValue:f.color,"onUpdate:modelValue":E[12]||(E[12]=X=>f.color=X)},null,8,["modelValue"])]),_:1}),x($(ii),{label:"粗细"},{default:A(()=>[x($(e1),{modelValue:f.width,"onUpdate:modelValue":E[13]||(E[13]=X=>f.width=X),min:1,max:10},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"]),x($(I$),{modelValue:$(u),"onUpdate:modelValue":E[16]||(E[16]=X=>ja(u)?u.value=X:null),"default-viewport":{zoom:1},"min-zoom":.2,"max-zoom":4,class:"pipeline-canvas",onNodeClick:j,onPaneClick:w,onEdgeClick:y},{"node-fuel":A(X=>[x(OC,Xt(X,{onUpdate:P}),null,16)]),"node-oxidizer":A(X=>[x(wC,Xt(X,{onUpdate:P}),null,16)]),"node-pressurant":A(X=>[x(SC,Xt(X,{onUpdate:P}),null,16)]),"node-engine":A(X=>[x(kC,Xt(X,{onUpdate:P}),null,16)]),"node-valve":A(X=>[x(TC,Xt(X,{onUpdate:P}),null,16)]),"node-check_valve":A(X=>[x(EC,rm(Gy(X)),null,16)]),"node-regulator":A(X=>[x(DC,Xt(X,{onUpdate:P}),null,16)]),"node-pressure":A(X=>[q("div",{class:Ge(["custom-node sensor pressure",{selected:X.selected}])},[x($(Jt),{"min-width":60,"min-height":60}),q("div",LC,ve(X.data.label||"压力传感器"),1),q("div",zC,ve(X.data.value||"N/A")+" MPa",1)],2)]),"node-temperature":A(X=>[q("div",{class:Ge(["custom-node sensor temperature",{selected:X.selected}])},[x($(Jt),{"min-width":60,"min-height":60}),q("div",VC,ve(X.data.label||"温度传感器"),1),q("div",XC,ve(X.data.value||"N/A")+" ℃",1)],2)]),"node-flow":A(X=>[q("div",{class:Ge(["custom-node sensor flow",{selected:X.selected}])},[x($(Jt),{"min-width":60,"min-height":60}),q("div",BC,ve(X.data.label||"流量传感器"),1),q("div",UC,ve(X.data.value||"N/A")+" kg/s",1)],2)]),"node-custom":A(X=>[x(pC,Xt(X,{onUpdate:P}),null,16)]),default:A(()=>[x($(W$),{"pattern-color":"#aaa",gap:20}),x($(Sk)),x($(rT))]),_:1},8,["modelValue"])]))}}),WC=yt(jC,[["__scopeId","data-v-b5b33707"]]),lf={type:"change"},mh={type:"start"},gO={type:"end"},Oo=new l1,uf=new u1,qC=Math.cos(70*hr.DEG2RAD),ot=new Je,_t=2*Math.PI,Ve={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6},Bl=1e-6;class YC extends a1{constructor(e,t=null){super(e,t),this.state=Ve.NONE,this.enabled=!0,this.target=new Je,this.cursor=new Je,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minTargetRadius=0,this.maxTargetRadius=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.keyRotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.zoomToCursor=!1,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:us.ROTATE,MIDDLE:us.DOLLY,RIGHT:us.PAN},this.touches={ONE:rs.ROTATE,TWO:rs.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this._lastPosition=new Je,this._lastQuaternion=new oa,this._lastTargetPosition=new Je,this._quat=new oa().setFromUnitVectors(e.up,new Je(0,1,0)),this._quatInverse=this._quat.clone().invert(),this._spherical=new Xh,this._sphericalDelta=new Xh,this._scale=1,this._panOffset=new Je,this._rotateStart=new Mt,this._rotateEnd=new Mt,this._rotateDelta=new Mt,this._panStart=new Mt,this._panEnd=new Mt,this._panDelta=new Mt,this._dollyStart=new Mt,this._dollyEnd=new Mt,this._dollyDelta=new Mt,this._dollyDirection=new Je,this._mouse=new Mt,this._performCursorZoom=!1,this._pointers=[],this._pointerPositions={},this._controlActive=!1,this._onPointerMove=HC.bind(this),this._onPointerDown=GC.bind(this),this._onPointerUp=FC.bind(this),this._onContextMenu=sE.bind(this),this._onMouseWheel=eE.bind(this),this._onKeyDown=tE.bind(this),this._onTouchStart=nE.bind(this),this._onTouchMove=iE.bind(this),this._onMouseDown=KC.bind(this),this._onMouseMove=JC.bind(this),this._interceptControlDown=rE.bind(this),this._interceptControlUp=oE.bind(this),this.domElement!==null&&this.connect(),this.update()}connect(){this.domElement.addEventListener("pointerdown",this._onPointerDown),this.domElement.addEventListener("pointercancel",this._onPointerUp),this.domElement.addEventListener("contextmenu",this._onContextMenu),this.domElement.addEventListener("wheel",this._onMouseWheel,{passive:!1}),this.domElement.getRootNode().addEventListener("keydown",this._interceptControlDown,{passive:!0,capture:!0}),this.domElement.style.touchAction="none"}disconnect(){this.domElement.removeEventListener("pointerdown",this._onPointerDown),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.domElement.removeEventListener("pointerup",this._onPointerUp),this.domElement.removeEventListener("pointercancel",this._onPointerUp),this.domElement.removeEventListener("wheel",this._onMouseWheel),this.domElement.removeEventListener("contextmenu",this._onContextMenu),this.stopListenToKeyEvents(),this.domElement.getRootNode().removeEventListener("keydown",this._interceptControlDown,{capture:!0}),this.domElement.style.touchAction="auto"}dispose(){this.disconnect()}getPolarAngle(){return this._spherical.phi}getAzimuthalAngle(){return this._spherical.theta}getDistance(){return this.object.position.distanceTo(this.target)}listenToKeyEvents(e){e.addEventListener("keydown",this._onKeyDown),this._domElementKeyEvents=e}stopListenToKeyEvents(){this._domElementKeyEvents!==null&&(this._domElementKeyEvents.removeEventListener("keydown",this._onKeyDown),this._domElementKeyEvents=null)}saveState(){this.target0.copy(this.target),this.position0.copy(this.object.position),this.zoom0=this.object.zoom}reset(){this.target.copy(this.target0),this.object.position.copy(this.position0),this.object.zoom=this.zoom0,this.object.updateProjectionMatrix(),this.dispatchEvent(lf),this.update(),this.state=Ve.NONE}update(e=null){const t=this.object.position;ot.copy(t).sub(this.target),ot.applyQuaternion(this._quat),this._spherical.setFromVector3(ot),this.autoRotate&&this.state===Ve.NONE&&this._rotateLeft(this._getAutoRotationAngle(e)),this.enableDamping?(this._spherical.theta+=this._sphericalDelta.theta*this.dampingFactor,this._spherical.phi+=this._sphericalDelta.phi*this.dampingFactor):(this._spherical.theta+=this._sphericalDelta.theta,this._spherical.phi+=this._sphericalDelta.phi);let i=this.minAzimuthAngle,s=this.maxAzimuthAngle;isFinite(i)&&isFinite(s)&&(i<-Math.PI?i+=_t:i>Math.PI&&(i-=_t),s<-Math.PI?s+=_t:s>Math.PI&&(s-=_t),i<=s?this._spherical.theta=Math.max(i,Math.min(s,this._spherical.theta)):this._spherical.theta=this._spherical.theta>(i+s)/2?Math.max(i,this._spherical.theta):Math.min(s,this._spherical.theta)),this._spherical.phi=Math.max(this.minPolarAngle,Math.min(this.maxPolarAngle,this._spherical.phi)),this._spherical.makeSafe(),this.enableDamping===!0?this.target.addScaledVector(this._panOffset,this.dampingFactor):this.target.add(this._panOffset),this.target.sub(this.cursor),this.target.clampLength(this.minTargetRadius,this.maxTargetRadius),this.target.add(this.cursor);let r=!1;if(this.zoomToCursor&&this._performCursorZoom||this.object.isOrthographicCamera)this._spherical.radius=this._clampDistance(this._spherical.radius);else{const o=this._spherical.radius;this._spherical.radius=this._clampDistance(this._spherical.radius*this._scale),r=o!=this._spherical.radius}if(ot.setFromSpherical(this._spherical),ot.applyQuaternion(this._quatInverse),t.copy(this.target).add(ot),this.object.lookAt(this.target),this.enableDamping===!0?(this._sphericalDelta.theta*=1-this.dampingFactor,this._sphericalDelta.phi*=1-this.dampingFactor,this._panOffset.multiplyScalar(1-this.dampingFactor)):(this._sphericalDelta.set(0,0,0),this._panOffset.set(0,0,0)),this.zoomToCursor&&this._performCursorZoom){let o=null;if(this.object.isPerspectiveCamera){const a=ot.length();o=this._clampDistance(a*this._scale);const l=a-o;this.object.position.addScaledVector(this._dollyDirection,l),this.object.updateMatrixWorld(),r=!!l}else if(this.object.isOrthographicCamera){const a=new Je(this._mouse.x,this._mouse.y,0);a.unproject(this.object);const l=this.object.zoom;this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom/this._scale)),this.object.updateProjectionMatrix(),r=l!==this.object.zoom;const u=new Je(this._mouse.x,this._mouse.y,0);u.unproject(this.object),this.object.position.sub(u).add(a),this.object.updateMatrixWorld(),o=ot.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),this.zoomToCursor=!1;o!==null&&(this.screenSpacePanning?this.target.set(0,0,-1).transformDirection(this.object.matrix).multiplyScalar(o).add(this.object.position):(Oo.origin.copy(this.object.position),Oo.direction.set(0,0,-1).transformDirection(this.object.matrix),Math.abs(this.object.up.dot(Oo.direction))<qC?this.object.lookAt(this.target):(uf.setFromNormalAndCoplanarPoint(this.object.up,this.target),Oo.intersectPlane(uf,this.target))))}else if(this.object.isOrthographicCamera){const o=this.object.zoom;this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom/this._scale)),o!==this.object.zoom&&(this.object.updateProjectionMatrix(),r=!0)}return this._scale=1,this._performCursorZoom=!1,r||this._lastPosition.distanceToSquared(this.object.position)>Bl||8*(1-this._lastQuaternion.dot(this.object.quaternion))>Bl||this._lastTargetPosition.distanceToSquared(this.target)>Bl?(this.dispatchEvent(lf),this._lastPosition.copy(this.object.position),this._lastQuaternion.copy(this.object.quaternion),this._lastTargetPosition.copy(this.target),!0):!1}_getAutoRotationAngle(e){return e!==null?_t/60*this.autoRotateSpeed*e:_t/60/60*this.autoRotateSpeed}_getZoomScale(e){const t=Math.abs(e*.01);return Math.pow(.95,this.zoomSpeed*t)}_rotateLeft(e){this._sphericalDelta.theta-=e}_rotateUp(e){this._sphericalDelta.phi-=e}_panLeft(e,t){ot.setFromMatrixColumn(t,0),ot.multiplyScalar(-e),this._panOffset.add(ot)}_panUp(e,t){this.screenSpacePanning===!0?ot.setFromMatrixColumn(t,1):(ot.setFromMatrixColumn(t,0),ot.crossVectors(this.object.up,ot)),ot.multiplyScalar(e),this._panOffset.add(ot)}_pan(e,t){const i=this.domElement;if(this.object.isPerspectiveCamera){const s=this.object.position;ot.copy(s).sub(this.target);let r=ot.length();r*=Math.tan(this.object.fov/2*Math.PI/180),this._panLeft(2*e*r/i.clientHeight,this.object.matrix),this._panUp(2*t*r/i.clientHeight,this.object.matrix)}else this.object.isOrthographicCamera?(this._panLeft(e*(this.object.right-this.object.left)/this.object.zoom/i.clientWidth,this.object.matrix),this._panUp(t*(this.object.top-this.object.bottom)/this.object.zoom/i.clientHeight,this.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),this.enablePan=!1)}_dollyOut(e){this.object.isPerspectiveCamera||this.object.isOrthographicCamera?this._scale/=e:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),this.enableZoom=!1)}_dollyIn(e){this.object.isPerspectiveCamera||this.object.isOrthographicCamera?this._scale*=e:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),this.enableZoom=!1)}_updateZoomParameters(e,t){if(!this.zoomToCursor)return;this._performCursorZoom=!0;const i=this.domElement.getBoundingClientRect(),s=e-i.left,r=t-i.top,o=i.width,a=i.height;this._mouse.x=s/o*2-1,this._mouse.y=-(r/a)*2+1,this._dollyDirection.set(this._mouse.x,this._mouse.y,1).unproject(this.object).sub(this.object.position).normalize()}_clampDistance(e){return Math.max(this.minDistance,Math.min(this.maxDistance,e))}_handleMouseDownRotate(e){this._rotateStart.set(e.clientX,e.clientY)}_handleMouseDownDolly(e){this._updateZoomParameters(e.clientX,e.clientX),this._dollyStart.set(e.clientX,e.clientY)}_handleMouseDownPan(e){this._panStart.set(e.clientX,e.clientY)}_handleMouseMoveRotate(e){this._rotateEnd.set(e.clientX,e.clientY),this._rotateDelta.subVectors(this._rotateEnd,this._rotateStart).multiplyScalar(this.rotateSpeed);const t=this.domElement;this._rotateLeft(_t*this._rotateDelta.x/t.clientHeight),this._rotateUp(_t*this._rotateDelta.y/t.clientHeight),this._rotateStart.copy(this._rotateEnd),this.update()}_handleMouseMoveDolly(e){this._dollyEnd.set(e.clientX,e.clientY),this._dollyDelta.subVectors(this._dollyEnd,this._dollyStart),this._dollyDelta.y>0?this._dollyOut(this._getZoomScale(this._dollyDelta.y)):this._dollyDelta.y<0&&this._dollyIn(this._getZoomScale(this._dollyDelta.y)),this._dollyStart.copy(this._dollyEnd),this.update()}_handleMouseMovePan(e){this._panEnd.set(e.clientX,e.clientY),this._panDelta.subVectors(this._panEnd,this._panStart).multiplyScalar(this.panSpeed),this._pan(this._panDelta.x,this._panDelta.y),this._panStart.copy(this._panEnd),this.update()}_handleMouseWheel(e){this._updateZoomParameters(e.clientX,e.clientY),e.deltaY<0?this._dollyIn(this._getZoomScale(e.deltaY)):e.deltaY>0&&this._dollyOut(this._getZoomScale(e.deltaY)),this.update()}_handleKeyDown(e){let t=!1;switch(e.code){case this.keys.UP:e.ctrlKey||e.metaKey||e.shiftKey?this.enableRotate&&this._rotateUp(_t*this.keyRotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(0,this.keyPanSpeed),t=!0;break;case this.keys.BOTTOM:e.ctrlKey||e.metaKey||e.shiftKey?this.enableRotate&&this._rotateUp(-_t*this.keyRotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(0,-this.keyPanSpeed),t=!0;break;case this.keys.LEFT:e.ctrlKey||e.metaKey||e.shiftKey?this.enableRotate&&this._rotateLeft(_t*this.keyRotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(this.keyPanSpeed,0),t=!0;break;case this.keys.RIGHT:e.ctrlKey||e.metaKey||e.shiftKey?this.enableRotate&&this._rotateLeft(-_t*this.keyRotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(-this.keyPanSpeed,0),t=!0;break}t&&(e.preventDefault(),this.update())}_handleTouchStartRotate(e){if(this._pointers.length===1)this._rotateStart.set(e.pageX,e.pageY);else{const t=this._getSecondPointerPosition(e),i=.5*(e.pageX+t.x),s=.5*(e.pageY+t.y);this._rotateStart.set(i,s)}}_handleTouchStartPan(e){if(this._pointers.length===1)this._panStart.set(e.pageX,e.pageY);else{const t=this._getSecondPointerPosition(e),i=.5*(e.pageX+t.x),s=.5*(e.pageY+t.y);this._panStart.set(i,s)}}_handleTouchStartDolly(e){const t=this._getSecondPointerPosition(e),i=e.pageX-t.x,s=e.pageY-t.y,r=Math.sqrt(i*i+s*s);this._dollyStart.set(0,r)}_handleTouchStartDollyPan(e){this.enableZoom&&this._handleTouchStartDolly(e),this.enablePan&&this._handleTouchStartPan(e)}_handleTouchStartDollyRotate(e){this.enableZoom&&this._handleTouchStartDolly(e),this.enableRotate&&this._handleTouchStartRotate(e)}_handleTouchMoveRotate(e){if(this._pointers.length==1)this._rotateEnd.set(e.pageX,e.pageY);else{const i=this._getSecondPointerPosition(e),s=.5*(e.pageX+i.x),r=.5*(e.pageY+i.y);this._rotateEnd.set(s,r)}this._rotateDelta.subVectors(this._rotateEnd,this._rotateStart).multiplyScalar(this.rotateSpeed);const t=this.domElement;this._rotateLeft(_t*this._rotateDelta.x/t.clientHeight),this._rotateUp(_t*this._rotateDelta.y/t.clientHeight),this._rotateStart.copy(this._rotateEnd)}_handleTouchMovePan(e){if(this._pointers.length===1)this._panEnd.set(e.pageX,e.pageY);else{const t=this._getSecondPointerPosition(e),i=.5*(e.pageX+t.x),s=.5*(e.pageY+t.y);this._panEnd.set(i,s)}this._panDelta.subVectors(this._panEnd,this._panStart).multiplyScalar(this.panSpeed),this._pan(this._panDelta.x,this._panDelta.y),this._panStart.copy(this._panEnd)}_handleTouchMoveDolly(e){const t=this._getSecondPointerPosition(e),i=e.pageX-t.x,s=e.pageY-t.y,r=Math.sqrt(i*i+s*s);this._dollyEnd.set(0,r),this._dollyDelta.set(0,Math.pow(this._dollyEnd.y/this._dollyStart.y,this.zoomSpeed)),this._dollyOut(this._dollyDelta.y),this._dollyStart.copy(this._dollyEnd);const o=(e.pageX+t.x)*.5,a=(e.pageY+t.y)*.5;this._updateZoomParameters(o,a)}_handleTouchMoveDollyPan(e){this.enableZoom&&this._handleTouchMoveDolly(e),this.enablePan&&this._handleTouchMovePan(e)}_handleTouchMoveDollyRotate(e){this.enableZoom&&this._handleTouchMoveDolly(e),this.enableRotate&&this._handleTouchMoveRotate(e)}_addPointer(e){this._pointers.push(e.pointerId)}_removePointer(e){delete this._pointerPositions[e.pointerId];for(let t=0;t<this._pointers.length;t++)if(this._pointers[t]==e.pointerId){this._pointers.splice(t,1);return}}_isTrackingPointer(e){for(let t=0;t<this._pointers.length;t++)if(this._pointers[t]==e.pointerId)return!0;return!1}_trackPointer(e){let t=this._pointerPositions[e.pointerId];t===void 0&&(t=new Mt,this._pointerPositions[e.pointerId]=t),t.set(e.pageX,e.pageY)}_getSecondPointerPosition(e){const t=e.pointerId===this._pointers[0]?this._pointers[1]:this._pointers[0];return this._pointerPositions[t]}_customWheelEvent(e){const t=e.deltaMode,i={clientX:e.clientX,clientY:e.clientY,deltaY:e.deltaY};switch(t){case 1:i.deltaY*=16;break;case 2:i.deltaY*=100;break}return e.ctrlKey&&!this._controlActive&&(i.deltaY*=10),i}}function GC(n){this.enabled!==!1&&(this._pointers.length===0&&(this.domElement.setPointerCapture(n.pointerId),this.domElement.addEventListener("pointermove",this._onPointerMove),this.domElement.addEventListener("pointerup",this._onPointerUp)),!this._isTrackingPointer(n)&&(this._addPointer(n),n.pointerType==="touch"?this._onTouchStart(n):this._onMouseDown(n)))}function HC(n){this.enabled!==!1&&(n.pointerType==="touch"?this._onTouchMove(n):this._onMouseMove(n))}function FC(n){switch(this._removePointer(n),this._pointers.length){case 0:this.domElement.releasePointerCapture(n.pointerId),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.domElement.removeEventListener("pointerup",this._onPointerUp),this.dispatchEvent(gO),this.state=Ve.NONE;break;case 1:const e=this._pointers[0],t=this._pointerPositions[e];this._onTouchStart({pointerId:e,pageX:t.x,pageY:t.y});break}}function KC(n){let e;switch(n.button){case 0:e=this.mouseButtons.LEFT;break;case 1:e=this.mouseButtons.MIDDLE;break;case 2:e=this.mouseButtons.RIGHT;break;default:e=-1}switch(e){case us.DOLLY:if(this.enableZoom===!1)return;this._handleMouseDownDolly(n),this.state=Ve.DOLLY;break;case us.ROTATE:if(n.ctrlKey||n.metaKey||n.shiftKey){if(this.enablePan===!1)return;this._handleMouseDownPan(n),this.state=Ve.PAN}else{if(this.enableRotate===!1)return;this._handleMouseDownRotate(n),this.state=Ve.ROTATE}break;case us.PAN:if(n.ctrlKey||n.metaKey||n.shiftKey){if(this.enableRotate===!1)return;this._handleMouseDownRotate(n),this.state=Ve.ROTATE}else{if(this.enablePan===!1)return;this._handleMouseDownPan(n),this.state=Ve.PAN}break;default:this.state=Ve.NONE}this.state!==Ve.NONE&&this.dispatchEvent(mh)}function JC(n){switch(this.state){case Ve.ROTATE:if(this.enableRotate===!1)return;this._handleMouseMoveRotate(n);break;case Ve.DOLLY:if(this.enableZoom===!1)return;this._handleMouseMoveDolly(n);break;case Ve.PAN:if(this.enablePan===!1)return;this._handleMouseMovePan(n);break}}function eE(n){this.enabled===!1||this.enableZoom===!1||this.state!==Ve.NONE||(n.preventDefault(),this.dispatchEvent(mh),this._handleMouseWheel(this._customWheelEvent(n)),this.dispatchEvent(gO))}function tE(n){this.enabled!==!1&&this._handleKeyDown(n)}function nE(n){switch(this._trackPointer(n),this._pointers.length){case 1:switch(this.touches.ONE){case rs.ROTATE:if(this.enableRotate===!1)return;this._handleTouchStartRotate(n),this.state=Ve.TOUCH_ROTATE;break;case rs.PAN:if(this.enablePan===!1)return;this._handleTouchStartPan(n),this.state=Ve.TOUCH_PAN;break;default:this.state=Ve.NONE}break;case 2:switch(this.touches.TWO){case rs.DOLLY_PAN:if(this.enableZoom===!1&&this.enablePan===!1)return;this._handleTouchStartDollyPan(n),this.state=Ve.TOUCH_DOLLY_PAN;break;case rs.DOLLY_ROTATE:if(this.enableZoom===!1&&this.enableRotate===!1)return;this._handleTouchStartDollyRotate(n),this.state=Ve.TOUCH_DOLLY_ROTATE;break;default:this.state=Ve.NONE}break;default:this.state=Ve.NONE}this.state!==Ve.NONE&&this.dispatchEvent(mh)}function iE(n){switch(this._trackPointer(n),this.state){case Ve.TOUCH_ROTATE:if(this.enableRotate===!1)return;this._handleTouchMoveRotate(n),this.update();break;case Ve.TOUCH_PAN:if(this.enablePan===!1)return;this._handleTouchMovePan(n),this.update();break;case Ve.TOUCH_DOLLY_PAN:if(this.enableZoom===!1&&this.enablePan===!1)return;this._handleTouchMoveDollyPan(n),this.update();break;case Ve.TOUCH_DOLLY_ROTATE:if(this.enableZoom===!1&&this.enableRotate===!1)return;this._handleTouchMoveDollyRotate(n),this.update();break;default:this.state=Ve.NONE}}function sE(n){this.enabled!==!1&&n.preventDefault()}function rE(n){n.key==="Control"&&(this._controlActive=!0,this.domElement.getRootNode().addEventListener("keyup",this._interceptControlUp,{passive:!0,capture:!0}))}function oE(n){n.key==="Control"&&(this._controlActive=!1,this.domElement.getRootNode().removeEventListener("keyup",this._interceptControlUp,{passive:!0,capture:!0}))}function cf(n,e){if(e===c1)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),n;if(e===vu||e===lm){let t=n.getIndex();if(t===null){const o=[],a=n.getAttribute("position");if(a!==void 0){for(let l=0;l<a.count;l++)o.push(l);n.setIndex(o),t=n.getIndex()}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),n}const i=t.count-2,s=[];if(e===vu)for(let o=1;o<=i;o++)s.push(t.getX(0)),s.push(t.getX(o)),s.push(t.getX(o+1));else for(let o=0;o<i;o++)o%2===0?(s.push(t.getX(o)),s.push(t.getX(o+1)),s.push(t.getX(o+2))):(s.push(t.getX(o+2)),s.push(t.getX(o+1)),s.push(t.getX(o)));s.length/3!==i&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const r=n.clone();return r.setIndex(s),r.clearGroups(),r}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",e),n}class aE extends um{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(t){return new dE(t)}),this.register(function(t){return new fE(t)}),this.register(function(t){return new xE(t)}),this.register(function(t){return new SE(t)}),this.register(function(t){return new _E(t)}),this.register(function(t){return new mE(t)}),this.register(function(t){return new gE(t)}),this.register(function(t){return new OE(t)}),this.register(function(t){return new yE(t)}),this.register(function(t){return new hE(t)}),this.register(function(t){return new vE(t)}),this.register(function(t){return new pE(t)}),this.register(function(t){return new bE(t)}),this.register(function(t){return new wE(t)}),this.register(function(t){return new uE(t)}),this.register(function(t){return new $E(t)}),this.register(function(t){return new kE(t)})}load(e,t,i,s){const r=this;let o;if(this.resourcePath!=="")o=this.resourcePath;else if(this.path!==""){const u=dr.extractUrlBase(e);o=dr.resolveURL(u,this.path)}else o=dr.extractUrlBase(e);this.manager.itemStart(e);const a=function(u){s?s(u):console.error(u),r.manager.itemError(e),r.manager.itemEnd(e)},l=new Yc(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(e,function(u){try{r.parse(u,o,function(c){t(c),r.manager.itemEnd(e)},a)}catch(c){a(c)}},i,a)}setDRACOLoader(e){return this.dracoLoader=e,this}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return this.pluginCallbacks.indexOf(e)===-1&&this.pluginCallbacks.push(e),this}unregister(e){return this.pluginCallbacks.indexOf(e)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,i,s){let r;const o={},a={},l=new TextDecoder;if(typeof e=="string")r=JSON.parse(e);else if(e instanceof ArrayBuffer)if(l.decode(new Uint8Array(e,0,4))===OO){try{o[Te.KHR_BINARY_GLTF]=new PE(e)}catch(h){s&&s(h);return}r=JSON.parse(o[Te.KHR_BINARY_GLTF].content)}else r=JSON.parse(l.decode(e));else r=e;if(r.asset===void 0||r.asset.version[0]<2){s&&s(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}const u=new zE(r,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});u.fileLoader.setRequestHeader(this.requestHeader);for(let c=0;c<this.pluginCallbacks.length;c++){const h=this.pluginCallbacks[c](u);h.name||console.error("THREE.GLTFLoader: Invalid plugin found: missing name"),a[h.name]=h,o[h.name]=!0}if(r.extensionsUsed)for(let c=0;c<r.extensionsUsed.length;++c){const h=r.extensionsUsed[c],d=r.extensionsRequired||[];switch(h){case Te.KHR_MATERIALS_UNLIT:o[h]=new cE;break;case Te.KHR_DRACO_MESH_COMPRESSION:o[h]=new QE(r,this.dracoLoader);break;case Te.KHR_TEXTURE_TRANSFORM:o[h]=new TE;break;case Te.KHR_MESH_QUANTIZATION:o[h]=new AE;break;default:d.indexOf(h)>=0&&a[h]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+h+'".')}}u.setExtensions(o),u.setPlugins(a),u.parse(i,s)}parseAsync(e,t){const i=this;return new Promise(function(s,r){i.parse(e,t,s,r)})}}function lE(){let n={};return{get:function(e){return n[e]},add:function(e,t){n[e]=t},remove:function(e){delete n[e]},removeAll:function(){n={}}}}const Te={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_DISPERSION:"KHR_materials_dispersion",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_MATERIALS_BUMP:"EXT_materials_bump",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class uE{constructor(e){this.parser=e,this.name=Te.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,t=this.parser.json.nodes||[];for(let i=0,s=t.length;i<s;i++){const r=t[i];r.extensions&&r.extensions[this.name]&&r.extensions[this.name].light!==void 0&&e._addNodeRef(this.cache,r.extensions[this.name].light)}}_loadLight(e){const t=this.parser,i="light:"+e;let s=t.cache.get(i);if(s)return s;const r=t.json,l=((r.extensions&&r.extensions[this.name]||{}).lights||[])[e];let u;const c=new Ln(16777215);l.color!==void 0&&c.setRGB(l.color[0],l.color[1],l.color[2],zn);const h=l.range!==void 0?l.range:0;switch(l.type){case"directional":u=new wu(c),u.target.position.set(0,0,-1),u.add(u.target);break;case"point":u=new cm(c),u.distance=h;break;case"spot":u=new h1(c),u.distance=h,l.spot=l.spot||{},l.spot.innerConeAngle=l.spot.innerConeAngle!==void 0?l.spot.innerConeAngle:0,l.spot.outerConeAngle=l.spot.outerConeAngle!==void 0?l.spot.outerConeAngle:Math.PI/4,u.angle=l.spot.outerConeAngle,u.penumbra=1-l.spot.innerConeAngle/l.spot.outerConeAngle,u.target.position.set(0,0,-1),u.add(u.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+l.type)}return u.position.set(0,0,0),Qn(u,l),l.intensity!==void 0&&(u.intensity=l.intensity),u.name=t.createUniqueName(l.name||"light_"+e),s=Promise.resolve(u),t.cache.add(i,s),s}getDependency(e,t){if(e==="light")return this._loadLight(t)}createNodeAttachment(e){const t=this,i=this.parser,r=i.json.nodes[e],a=(r.extensions&&r.extensions[this.name]||{}).light;return a===void 0?null:this._loadLight(a).then(function(l){return i._getNodeRef(t.cache,a,l)})}}class cE{constructor(){this.name=Te.KHR_MATERIALS_UNLIT}getMaterialType(){return Js}extendParams(e,t,i){const s=[];e.color=new Ln(1,1,1),e.opacity=1;const r=t.pbrMetallicRoughness;if(r){if(Array.isArray(r.baseColorFactor)){const o=r.baseColorFactor;e.color.setRGB(o[0],o[1],o[2],zn),e.opacity=o[3]}r.baseColorTexture!==void 0&&s.push(i.assignTexture(e,"map",r.baseColorTexture,ws))}return Promise.all(s)}}class hE{constructor(e){this.parser=e,this.name=Te.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,t){const s=this.parser.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=s.extensions[this.name].emissiveStrength;return r!==void 0&&(t.emissiveIntensity=r),Promise.resolve()}}class dE{constructor(e){this.parser=e,this.name=Te.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:wn}extendMaterialParams(e,t){const i=this.parser,s=i.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=[],o=s.extensions[this.name];if(o.clearcoatFactor!==void 0&&(t.clearcoat=o.clearcoatFactor),o.clearcoatTexture!==void 0&&r.push(i.assignTexture(t,"clearcoatMap",o.clearcoatTexture)),o.clearcoatRoughnessFactor!==void 0&&(t.clearcoatRoughness=o.clearcoatRoughnessFactor),o.clearcoatRoughnessTexture!==void 0&&r.push(i.assignTexture(t,"clearcoatRoughnessMap",o.clearcoatRoughnessTexture)),o.clearcoatNormalTexture!==void 0&&(r.push(i.assignTexture(t,"clearcoatNormalMap",o.clearcoatNormalTexture)),o.clearcoatNormalTexture.scale!==void 0)){const a=o.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new Mt(a,a)}return Promise.all(r)}}class fE{constructor(e){this.parser=e,this.name=Te.KHR_MATERIALS_DISPERSION}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:wn}extendMaterialParams(e,t){const s=this.parser.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=s.extensions[this.name];return t.dispersion=r.dispersion!==void 0?r.dispersion:0,Promise.resolve()}}class pE{constructor(e){this.parser=e,this.name=Te.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:wn}extendMaterialParams(e,t){const i=this.parser,s=i.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=[],o=s.extensions[this.name];return o.iridescenceFactor!==void 0&&(t.iridescence=o.iridescenceFactor),o.iridescenceTexture!==void 0&&r.push(i.assignTexture(t,"iridescenceMap",o.iridescenceTexture)),o.iridescenceIor!==void 0&&(t.iridescenceIOR=o.iridescenceIor),t.iridescenceThicknessRange===void 0&&(t.iridescenceThicknessRange=[100,400]),o.iridescenceThicknessMinimum!==void 0&&(t.iridescenceThicknessRange[0]=o.iridescenceThicknessMinimum),o.iridescenceThicknessMaximum!==void 0&&(t.iridescenceThicknessRange[1]=o.iridescenceThicknessMaximum),o.iridescenceThicknessTexture!==void 0&&r.push(i.assignTexture(t,"iridescenceThicknessMap",o.iridescenceThicknessTexture)),Promise.all(r)}}class mE{constructor(e){this.parser=e,this.name=Te.KHR_MATERIALS_SHEEN}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:wn}extendMaterialParams(e,t){const i=this.parser,s=i.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=[];t.sheenColor=new Ln(0,0,0),t.sheenRoughness=0,t.sheen=1;const o=s.extensions[this.name];if(o.sheenColorFactor!==void 0){const a=o.sheenColorFactor;t.sheenColor.setRGB(a[0],a[1],a[2],zn)}return o.sheenRoughnessFactor!==void 0&&(t.sheenRoughness=o.sheenRoughnessFactor),o.sheenColorTexture!==void 0&&r.push(i.assignTexture(t,"sheenColorMap",o.sheenColorTexture,ws)),o.sheenRoughnessTexture!==void 0&&r.push(i.assignTexture(t,"sheenRoughnessMap",o.sheenRoughnessTexture)),Promise.all(r)}}class gE{constructor(e){this.parser=e,this.name=Te.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:wn}extendMaterialParams(e,t){const i=this.parser,s=i.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=[],o=s.extensions[this.name];return o.transmissionFactor!==void 0&&(t.transmission=o.transmissionFactor),o.transmissionTexture!==void 0&&r.push(i.assignTexture(t,"transmissionMap",o.transmissionTexture)),Promise.all(r)}}class OE{constructor(e){this.parser=e,this.name=Te.KHR_MATERIALS_VOLUME}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:wn}extendMaterialParams(e,t){const i=this.parser,s=i.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=[],o=s.extensions[this.name];t.thickness=o.thicknessFactor!==void 0?o.thicknessFactor:0,o.thicknessTexture!==void 0&&r.push(i.assignTexture(t,"thicknessMap",o.thicknessTexture)),t.attenuationDistance=o.attenuationDistance||1/0;const a=o.attenuationColor||[1,1,1];return t.attenuationColor=new Ln().setRGB(a[0],a[1],a[2],zn),Promise.all(r)}}class yE{constructor(e){this.parser=e,this.name=Te.KHR_MATERIALS_IOR}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:wn}extendMaterialParams(e,t){const s=this.parser.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=s.extensions[this.name];return t.ior=r.ior!==void 0?r.ior:1.5,Promise.resolve()}}class vE{constructor(e){this.parser=e,this.name=Te.KHR_MATERIALS_SPECULAR}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:wn}extendMaterialParams(e,t){const i=this.parser,s=i.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=[],o=s.extensions[this.name];t.specularIntensity=o.specularFactor!==void 0?o.specularFactor:1,o.specularTexture!==void 0&&r.push(i.assignTexture(t,"specularIntensityMap",o.specularTexture));const a=o.specularColorFactor||[1,1,1];return t.specularColor=new Ln().setRGB(a[0],a[1],a[2],zn),o.specularColorTexture!==void 0&&r.push(i.assignTexture(t,"specularColorMap",o.specularColorTexture,ws)),Promise.all(r)}}class wE{constructor(e){this.parser=e,this.name=Te.EXT_MATERIALS_BUMP}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:wn}extendMaterialParams(e,t){const i=this.parser,s=i.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=[],o=s.extensions[this.name];return t.bumpScale=o.bumpFactor!==void 0?o.bumpFactor:1,o.bumpTexture!==void 0&&r.push(i.assignTexture(t,"bumpMap",o.bumpTexture)),Promise.all(r)}}class bE{constructor(e){this.parser=e,this.name=Te.KHR_MATERIALS_ANISOTROPY}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:wn}extendMaterialParams(e,t){const i=this.parser,s=i.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=[],o=s.extensions[this.name];return o.anisotropyStrength!==void 0&&(t.anisotropy=o.anisotropyStrength),o.anisotropyRotation!==void 0&&(t.anisotropyRotation=o.anisotropyRotation),o.anisotropyTexture!==void 0&&r.push(i.assignTexture(t,"anisotropyMap",o.anisotropyTexture)),Promise.all(r)}}class xE{constructor(e){this.parser=e,this.name=Te.KHR_TEXTURE_BASISU}loadTexture(e){const t=this.parser,i=t.json,s=i.textures[e];if(!s.extensions||!s.extensions[this.name])return null;const r=s.extensions[this.name],o=t.options.ktx2Loader;if(!o){if(i.extensionsRequired&&i.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,r.source,o)}}class SE{constructor(e){this.parser=e,this.name=Te.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){const t=this.name,i=this.parser,s=i.json,r=s.textures[e];if(!r.extensions||!r.extensions[t])return null;const o=r.extensions[t],a=s.images[o.source];let l=i.textureLoader;if(a.uri){const u=i.options.manager.getHandler(a.uri);u!==null&&(l=u)}return this.detectSupport().then(function(u){if(u)return i.loadTextureImage(e,o.source,l);if(s.extensionsRequired&&s.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return i.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}}class _E{constructor(e){this.parser=e,this.name=Te.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(e){const t=this.name,i=this.parser,s=i.json,r=s.textures[e];if(!r.extensions||!r.extensions[t])return null;const o=r.extensions[t],a=s.images[o.source];let l=i.textureLoader;if(a.uri){const u=i.options.manager.getHandler(a.uri);u!==null&&(l=u)}return this.detectSupport().then(function(u){if(u)return i.loadTextureImage(e,o.source,l);if(s.extensionsRequired&&s.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return i.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}}class $E{constructor(e){this.name=Te.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const t=this.parser.json,i=t.bufferViews[e];if(i.extensions&&i.extensions[this.name]){const s=i.extensions[this.name],r=this.parser.getDependency("buffer",s.buffer),o=this.parser.options.meshoptDecoder;if(!o||!o.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return r.then(function(a){const l=s.byteOffset||0,u=s.byteLength||0,c=s.count,h=s.byteStride,d=new Uint8Array(a,l,u);return o.decodeGltfBufferAsync?o.decodeGltfBufferAsync(c,h,d,s.mode,s.filter).then(function(f){return f.buffer}):o.ready.then(function(){const f=new ArrayBuffer(c*h);return o.decodeGltfBuffer(new Uint8Array(f),c,h,d,s.mode,s.filter),f})})}else return null}}class kE{constructor(e){this.name=Te.EXT_MESH_GPU_INSTANCING,this.parser=e}createNodeMesh(e){const t=this.parser.json,i=t.nodes[e];if(!i.extensions||!i.extensions[this.name]||i.mesh===void 0)return null;const s=t.meshes[i.mesh];for(const u of s.primitives)if(u.mode!==Vt.TRIANGLES&&u.mode!==Vt.TRIANGLE_STRIP&&u.mode!==Vt.TRIANGLE_FAN&&u.mode!==void 0)return null;const o=i.extensions[this.name].attributes,a=[],l={};for(const u in o)a.push(this.parser.getDependency("accessor",o[u]).then(c=>(l[u]=c,l[u])));return a.length<1?null:(a.push(this.parser.createNodeMesh(e)),Promise.all(a).then(u=>{const c=u.pop(),h=c.isGroup?c.children:[c],d=u[0].count,f=[];for(const p of h){const m=new aa,O=new Je,y=new oa,b=new Je(1,1,1),v=new d1(p.geometry,p.material,d);for(let g=0;g<d;g++)l.TRANSLATION&&O.fromBufferAttribute(l.TRANSLATION,g),l.ROTATION&&y.fromBufferAttribute(l.ROTATION,g),l.SCALE&&b.fromBufferAttribute(l.SCALE,g),v.setMatrixAt(g,m.compose(O,y,b));for(const g in l)if(g==="_COLOR_0"){const k=l[g];v.instanceColor=new f1(k.array,k.itemSize,k.normalized)}else g!=="TRANSLATION"&&g!=="ROTATION"&&g!=="SCALE"&&p.geometry.setAttribute(g,l[g]);hm.prototype.copy.call(v,p),this.parser.assignFinalMaterial(v),f.push(v)}return c.isGroup?(c.clear(),c.add(...f),c):f[0]}))}}const OO="glTF",Bs=12,hf={JSON:1313821514,BIN:5130562};class PE{constructor(e){this.name=Te.KHR_BINARY_GLTF,this.content=null,this.body=null;const t=new DataView(e,0,Bs),i=new TextDecoder;if(this.header={magic:i.decode(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==OO)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const s=this.header.length-Bs,r=new DataView(e,Bs);let o=0;for(;o<s;){const a=r.getUint32(o,!0);o+=4;const l=r.getUint32(o,!0);if(o+=4,l===hf.JSON){const u=new Uint8Array(e,Bs+o,a);this.content=i.decode(u)}else if(l===hf.BIN){const u=Bs+o;this.body=e.slice(u,u+a)}o+=a}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class QE{constructor(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=Te.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}decodePrimitive(e,t){const i=this.json,s=this.dracoLoader,r=e.extensions[this.name].bufferView,o=e.extensions[this.name].attributes,a={},l={},u={};for(const c in o){const h=ec[c]||c.toLowerCase();a[h]=o[c]}for(const c in e.attributes){const h=ec[c]||c.toLowerCase();if(o[c]!==void 0){const d=i.accessors[e.attributes[c]],f=ms[d.componentType];u[h]=f.name,l[h]=d.normalized===!0}}return t.getDependency("bufferView",r).then(function(c){return new Promise(function(h,d){s.decodeDracoFile(c,function(f){for(const p in f.attributes){const m=f.attributes[p],O=l[p];O!==void 0&&(m.normalized=O)}h(f)},a,u,zn,d)})})}}class TE{constructor(){this.name=Te.KHR_TEXTURE_TRANSFORM}extendTexture(e,t){return(t.texCoord===void 0||t.texCoord===e.channel)&&t.offset===void 0&&t.rotation===void 0&&t.scale===void 0||(e=e.clone(),t.texCoord!==void 0&&(e.channel=t.texCoord),t.offset!==void 0&&e.offset.fromArray(t.offset),t.rotation!==void 0&&(e.rotation=t.rotation),t.scale!==void 0&&e.repeat.fromArray(t.scale),e.needsUpdate=!0),e}}class AE{constructor(){this.name=Te.KHR_MESH_QUANTIZATION}}class yO extends R1{constructor(e,t,i,s){super(e,t,i,s)}copySampleValue_(e){const t=this.resultBuffer,i=this.sampleValues,s=this.valueSize,r=e*s*3+s;for(let o=0;o!==s;o++)t[o]=i[r+o];return t}interpolate_(e,t,i,s){const r=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=a*2,u=a*3,c=s-t,h=(i-t)/c,d=h*h,f=d*h,p=e*u,m=p-u,O=-2*f+3*d,y=f-d,b=1-O,v=y-d+h;for(let g=0;g!==a;g++){const k=o[m+g+a],S=o[m+g+l]*c,Q=o[p+g+a],T=o[p+g]*c;r[g]=b*k+v*S+O*Q+y*T}return r}}const CE=new oa;class EE extends yO{interpolate_(e,t,i,s){const r=super.interpolate_(e,t,i,s);return CE.fromArray(r).normalize().toArray(r),r}}const Vt={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6},ms={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},df={9728:fm,9729:bu,9984:v1,9985:y1,9986:O1,9987:dm},ff={33071:b1,33648:w1,10497:xu},Ul={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},ec={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},Yn={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},ME={CUBICSPLINE:void 0,LINEAR:mm,STEP:C1},jl={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function RE(n){return n.DefaultMaterial===void 0&&(n.DefaultMaterial=new Si({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:M1})),n.DefaultMaterial}function wi(n,e,t){for(const i in t.extensions)n[i]===void 0&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[i]=t.extensions[i])}function Qn(n,e){e.extras!==void 0&&(typeof e.extras=="object"?Object.assign(n.userData,e.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+e.extras))}function ZE(n,e,t){let i=!1,s=!1,r=!1;for(let u=0,c=e.length;u<c;u++){const h=e[u];if(h.POSITION!==void 0&&(i=!0),h.NORMAL!==void 0&&(s=!0),h.COLOR_0!==void 0&&(r=!0),i&&s&&r)break}if(!i&&!s&&!r)return Promise.resolve(n);const o=[],a=[],l=[];for(let u=0,c=e.length;u<c;u++){const h=e[u];if(i){const d=h.POSITION!==void 0?t.getDependency("accessor",h.POSITION):n.attributes.position;o.push(d)}if(s){const d=h.NORMAL!==void 0?t.getDependency("accessor",h.NORMAL):n.attributes.normal;a.push(d)}if(r){const d=h.COLOR_0!==void 0?t.getDependency("accessor",h.COLOR_0):n.attributes.color;l.push(d)}}return Promise.all([Promise.all(o),Promise.all(a),Promise.all(l)]).then(function(u){const c=u[0],h=u[1],d=u[2];return i&&(n.morphAttributes.position=c),s&&(n.morphAttributes.normal=h),r&&(n.morphAttributes.color=d),n.morphTargetsRelative=!0,n})}function DE(n,e){if(n.updateMorphTargets(),e.weights!==void 0)for(let t=0,i=e.weights.length;t<i;t++)n.morphTargetInfluences[t]=e.weights[t];if(e.extras&&Array.isArray(e.extras.targetNames)){const t=e.extras.targetNames;if(n.morphTargetInfluences.length===t.length){n.morphTargetDictionary={};for(let i=0,s=t.length;i<s;i++)n.morphTargetDictionary[t[i]]=i}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function NE(n){let e;const t=n.extensions&&n.extensions[Te.KHR_DRACO_MESH_COMPRESSION];if(t?e="draco:"+t.bufferView+":"+t.indices+":"+Wl(t.attributes):e=n.indices+":"+Wl(n.attributes)+":"+n.mode,n.targets!==void 0)for(let i=0,s=n.targets.length;i<s;i++)e+=":"+Wl(n.targets[i]);return e}function Wl(n){let e="";const t=Object.keys(n).sort();for(let i=0,s=t.length;i<s;i++)e+=t[i]+":"+n[t[i]]+";";return e}function tc(n){switch(n){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function IE(n){return n.search(/\.jpe?g($|\?)/i)>0||n.search(/^data\:image\/jpeg/)===0?"image/jpeg":n.search(/\.webp($|\?)/i)>0||n.search(/^data\:image\/webp/)===0?"image/webp":n.search(/\.ktx2($|\?)/i)>0||n.search(/^data\:image\/ktx2/)===0?"image/ktx2":"image/png"}const LE=new aa;class zE{constructor(e={},t={}){this.json=e,this.extensions={},this.plugins={},this.options=t,this.cache=new lE,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let i=!1,s=-1,r=!1,o=-1;if(typeof navigator<"u"){const a=navigator.userAgent;i=/^((?!chrome|android).)*safari/i.test(a)===!0;const l=a.match(/Version\/(\d+)/);s=i&&l?parseInt(l[1],10):-1,r=a.indexOf("Firefox")>-1,o=r?a.match(/Firefox\/([0-9]+)\./)[1]:-1}typeof createImageBitmap>"u"||i&&s<17||r&&o<98?this.textureLoader=new p1(this.options.manager):this.textureLoader=new m1(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new Yc(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,t){const i=this,s=this.json,r=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(o){return o._markDefs&&o._markDefs()}),Promise.all(this._invokeAll(function(o){return o.beforeRoot&&o.beforeRoot()})).then(function(){return Promise.all([i.getDependencies("scene"),i.getDependencies("animation"),i.getDependencies("camera")])}).then(function(o){const a={scene:o[0][s.scene||0],scenes:o[0],animations:o[1],cameras:o[2],asset:s.asset,parser:i,userData:{}};return wi(r,a,s),Qn(a,s),Promise.all(i._invokeAll(function(l){return l.afterRoot&&l.afterRoot(a)})).then(function(){for(const l of a.scenes)l.updateMatrixWorld();e(a)})}).catch(t)}_markDefs(){const e=this.json.nodes||[],t=this.json.skins||[],i=this.json.meshes||[];for(let s=0,r=t.length;s<r;s++){const o=t[s].joints;for(let a=0,l=o.length;a<l;a++)e[o[a]].isBone=!0}for(let s=0,r=e.length;s<r;s++){const o=e[s];o.mesh!==void 0&&(this._addNodeRef(this.meshCache,o.mesh),o.skin!==void 0&&(i[o.mesh].isSkinnedMesh=!0)),o.camera!==void 0&&this._addNodeRef(this.cameraCache,o.camera)}}_addNodeRef(e,t){t!==void 0&&(e.refs[t]===void 0&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}_getNodeRef(e,t,i){if(e.refs[t]<=1)return i;const s=i.clone(),r=(o,a)=>{const l=this.associations.get(o);l!=null&&this.associations.set(a,l);for(const[u,c]of o.children.entries())r(c,a.children[u])};return r(i,s),s.name+="_instance_"+e.uses[t]++,s}_invokeOne(e){const t=Object.values(this.plugins);t.push(this);for(let i=0;i<t.length;i++){const s=e(t[i]);if(s)return s}return null}_invokeAll(e){const t=Object.values(this.plugins);t.unshift(this);const i=[];for(let s=0;s<t.length;s++){const r=e(t[s]);r&&i.push(r)}return i}getDependency(e,t){const i=e+":"+t;let s=this.cache.get(i);if(!s){switch(e){case"scene":s=this.loadScene(t);break;case"node":s=this._invokeOne(function(r){return r.loadNode&&r.loadNode(t)});break;case"mesh":s=this._invokeOne(function(r){return r.loadMesh&&r.loadMesh(t)});break;case"accessor":s=this.loadAccessor(t);break;case"bufferView":s=this._invokeOne(function(r){return r.loadBufferView&&r.loadBufferView(t)});break;case"buffer":s=this.loadBuffer(t);break;case"material":s=this._invokeOne(function(r){return r.loadMaterial&&r.loadMaterial(t)});break;case"texture":s=this._invokeOne(function(r){return r.loadTexture&&r.loadTexture(t)});break;case"skin":s=this.loadSkin(t);break;case"animation":s=this._invokeOne(function(r){return r.loadAnimation&&r.loadAnimation(t)});break;case"camera":s=this.loadCamera(t);break;default:if(s=this._invokeOne(function(r){return r!=this&&r.getDependency&&r.getDependency(e,t)}),!s)throw new Error("Unknown type: "+e);break}this.cache.add(i,s)}return s}getDependencies(e){let t=this.cache.get(e);if(!t){const i=this,s=this.json[e+(e==="mesh"?"es":"s")]||[];t=Promise.all(s.map(function(r,o){return i.getDependency(e,o)})),this.cache.add(e,t)}return t}loadBuffer(e){const t=this.json.buffers[e],i=this.fileLoader;if(t.type&&t.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(t.uri===void 0&&e===0)return Promise.resolve(this.extensions[Te.KHR_BINARY_GLTF].body);const s=this.options;return new Promise(function(r,o){i.load(dr.resolveURL(t.uri,s.path),r,void 0,function(){o(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))})})}loadBufferView(e){const t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then(function(i){const s=t.byteLength||0,r=t.byteOffset||0;return i.slice(r,r+s)})}loadAccessor(e){const t=this,i=this.json,s=this.json.accessors[e];if(s.bufferView===void 0&&s.sparse===void 0){const o=Ul[s.type],a=ms[s.componentType],l=s.normalized===!0,u=new a(s.count*o);return Promise.resolve(new $l(u,o,l))}const r=[];return s.bufferView!==void 0?r.push(this.getDependency("bufferView",s.bufferView)):r.push(null),s.sparse!==void 0&&(r.push(this.getDependency("bufferView",s.sparse.indices.bufferView)),r.push(this.getDependency("bufferView",s.sparse.values.bufferView))),Promise.all(r).then(function(o){const a=o[0],l=Ul[s.type],u=ms[s.componentType],c=u.BYTES_PER_ELEMENT,h=c*l,d=s.byteOffset||0,f=s.bufferView!==void 0?i.bufferViews[s.bufferView].byteStride:void 0,p=s.normalized===!0;let m,O;if(f&&f!==h){const y=Math.floor(d/f),b="InterleavedBuffer:"+s.bufferView+":"+s.componentType+":"+y+":"+s.count;let v=t.cache.get(b);v||(m=new u(a,y*f,s.count*f/c),v=new g1(m,f/c),t.cache.add(b,v)),O=new E1(v,l,d%f/c,p)}else a===null?m=new u(s.count*l):m=new u(a,d,s.count*l),O=new $l(m,l,p);if(s.sparse!==void 0){const y=Ul.SCALAR,b=ms[s.sparse.indices.componentType],v=s.sparse.indices.byteOffset||0,g=s.sparse.values.byteOffset||0,k=new b(o[1],v,s.sparse.count*y),S=new u(o[2],g,s.sparse.count*l);a!==null&&(O=new $l(O.array.slice(),O.itemSize,O.normalized)),O.normalized=!1;for(let Q=0,T=k.length;Q<T;Q++){const P=k[Q];if(O.setX(P,S[Q*l]),l>=2&&O.setY(P,S[Q*l+1]),l>=3&&O.setZ(P,S[Q*l+2]),l>=4&&O.setW(P,S[Q*l+3]),l>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}O.normalized=p}return O})}loadTexture(e){const t=this.json,i=this.options,r=t.textures[e].source,o=t.images[r];let a=this.textureLoader;if(o.uri){const l=i.manager.getHandler(o.uri);l!==null&&(a=l)}return this.loadTextureImage(e,r,a)}loadTextureImage(e,t,i){const s=this,r=this.json,o=r.textures[e],a=r.images[t],l=(a.uri||a.bufferView)+":"+o.sampler;if(this.textureCache[l])return this.textureCache[l];const u=this.loadImageSource(t,i).then(function(c){c.flipY=!1,c.name=o.name||a.name||"",c.name===""&&typeof a.uri=="string"&&a.uri.startsWith("data:image/")===!1&&(c.name=a.uri);const d=(r.samplers||{})[o.sampler]||{};return c.magFilter=df[d.magFilter]||bu,c.minFilter=df[d.minFilter]||dm,c.wrapS=ff[d.wrapS]||xu,c.wrapT=ff[d.wrapT]||xu,c.generateMipmaps=!c.isCompressedTexture&&c.minFilter!==fm&&c.minFilter!==bu,s.associations.set(c,{textures:e}),c}).catch(function(){return null});return this.textureCache[l]=u,u}loadImageSource(e,t){const i=this,s=this.json,r=this.options;if(this.sourceCache[e]!==void 0)return this.sourceCache[e].then(h=>h.clone());const o=s.images[e],a=self.URL||self.webkitURL;let l=o.uri||"",u=!1;if(o.bufferView!==void 0)l=i.getDependency("bufferView",o.bufferView).then(function(h){u=!0;const d=new Blob([h],{type:o.mimeType});return l=a.createObjectURL(d),l});else if(o.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const c=Promise.resolve(l).then(function(h){return new Promise(function(d,f){let p=d;t.isImageBitmapLoader===!0&&(p=function(m){const O=new Bh(m);O.needsUpdate=!0,d(O)}),t.load(dr.resolveURL(h,r.path),p,void 0,f)})}).then(function(h){return u===!0&&a.revokeObjectURL(l),Qn(h,o),h.userData.mimeType=o.mimeType||IE(o.uri),h}).catch(function(h){throw console.error("THREE.GLTFLoader: Couldn't load texture",l),h});return this.sourceCache[e]=c,c}assignTexture(e,t,i,s){const r=this;return this.getDependency("texture",i.index).then(function(o){if(!o)return null;if(i.texCoord!==void 0&&i.texCoord>0&&(o=o.clone(),o.channel=i.texCoord),r.extensions[Te.KHR_TEXTURE_TRANSFORM]){const a=i.extensions!==void 0?i.extensions[Te.KHR_TEXTURE_TRANSFORM]:void 0;if(a){const l=r.associations.get(o);o=r.extensions[Te.KHR_TEXTURE_TRANSFORM].extendTexture(o,a),r.associations.set(o,l)}}return s!==void 0&&(o.colorSpace=s),e[t]=o,o})}assignFinalMaterial(e){const t=e.geometry;let i=e.material;const s=t.attributes.tangent===void 0,r=t.attributes.color!==void 0,o=t.attributes.normal===void 0;if(e.isPoints){const a="PointsMaterial:"+i.uuid;let l=this.cache.get(a);l||(l=new Ks,fr.prototype.copy.call(l,i),l.color.copy(i.color),l.map=i.map,l.sizeAttenuation=!1,this.cache.add(a,l)),i=l}else if(e.isLine){const a="LineBasicMaterial:"+i.uuid;let l=this.cache.get(a);l||(l=new No,fr.prototype.copy.call(l,i),l.color.copy(i.color),l.map=i.map,this.cache.add(a,l)),i=l}if(s||r||o){let a="ClonedMaterial:"+i.uuid+":";s&&(a+="derivative-tangents:"),r&&(a+="vertex-colors:"),o&&(a+="flat-shading:");let l=this.cache.get(a);l||(l=i.clone(),r&&(l.vertexColors=!0),o&&(l.flatShading=!0),s&&(l.normalScale&&(l.normalScale.y*=-1),l.clearcoatNormalScale&&(l.clearcoatNormalScale.y*=-1)),this.cache.add(a,l),this.associations.set(l,this.associations.get(i))),i=l}e.material=i}getMaterialType(){return Si}loadMaterial(e){const t=this,i=this.json,s=this.extensions,r=i.materials[e];let o;const a={},l=r.extensions||{},u=[];if(l[Te.KHR_MATERIALS_UNLIT]){const h=s[Te.KHR_MATERIALS_UNLIT];o=h.getMaterialType(),u.push(h.extendParams(a,r,t))}else{const h=r.pbrMetallicRoughness||{};if(a.color=new Ln(1,1,1),a.opacity=1,Array.isArray(h.baseColorFactor)){const d=h.baseColorFactor;a.color.setRGB(d[0],d[1],d[2],zn),a.opacity=d[3]}h.baseColorTexture!==void 0&&u.push(t.assignTexture(a,"map",h.baseColorTexture,ws)),a.metalness=h.metallicFactor!==void 0?h.metallicFactor:1,a.roughness=h.roughnessFactor!==void 0?h.roughnessFactor:1,h.metallicRoughnessTexture!==void 0&&(u.push(t.assignTexture(a,"metalnessMap",h.metallicRoughnessTexture)),u.push(t.assignTexture(a,"roughnessMap",h.metallicRoughnessTexture))),o=this._invokeOne(function(d){return d.getMaterialType&&d.getMaterialType(e)}),u.push(Promise.all(this._invokeAll(function(d){return d.extendMaterialParams&&d.extendMaterialParams(e,a)})))}r.doubleSided===!0&&(a.side=x1);const c=r.alphaMode||jl.OPAQUE;if(c===jl.BLEND?(a.transparent=!0,a.depthWrite=!1):(a.transparent=!1,c===jl.MASK&&(a.alphaTest=r.alphaCutoff!==void 0?r.alphaCutoff:.5)),r.normalTexture!==void 0&&o!==Js&&(u.push(t.assignTexture(a,"normalMap",r.normalTexture)),a.normalScale=new Mt(1,1),r.normalTexture.scale!==void 0)){const h=r.normalTexture.scale;a.normalScale.set(h,h)}if(r.occlusionTexture!==void 0&&o!==Js&&(u.push(t.assignTexture(a,"aoMap",r.occlusionTexture)),r.occlusionTexture.strength!==void 0&&(a.aoMapIntensity=r.occlusionTexture.strength)),r.emissiveFactor!==void 0&&o!==Js){const h=r.emissiveFactor;a.emissive=new Ln().setRGB(h[0],h[1],h[2],zn)}return r.emissiveTexture!==void 0&&o!==Js&&u.push(t.assignTexture(a,"emissiveMap",r.emissiveTexture,ws)),Promise.all(u).then(function(){const h=new o(a);return r.name&&(h.name=r.name),Qn(h,r),t.associations.set(h,{materials:e}),r.extensions&&wi(s,h,r),h})}createUniqueName(e){const t=S1.sanitizeNodeName(e||"");return t in this.nodeNamesUsed?t+"_"+ ++this.nodeNamesUsed[t]:(this.nodeNamesUsed[t]=0,t)}loadGeometries(e){const t=this,i=this.extensions,s=this.primitiveCache;function r(a){return i[Te.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(a,t).then(function(l){return pf(l,a,t)})}const o=[];for(let a=0,l=e.length;a<l;a++){const u=e[a],c=NE(u),h=s[c];if(h)o.push(h.promise);else{let d;u.extensions&&u.extensions[Te.KHR_DRACO_MESH_COMPRESSION]?d=r(u):d=pf(new Su,u,t),s[c]={primitive:u,promise:d},o.push(d)}}return Promise.all(o)}loadMesh(e){const t=this,i=this.json,s=this.extensions,r=i.meshes[e],o=r.primitives,a=[];for(let l=0,u=o.length;l<u;l++){const c=o[l].material===void 0?RE(this.cache):this.getDependency("material",o[l].material);a.push(c)}return a.push(t.loadGeometries(o)),Promise.all(a).then(function(l){const u=l.slice(0,l.length-1),c=l[l.length-1],h=[];for(let f=0,p=c.length;f<p;f++){const m=c[f],O=o[f];let y;const b=u[f];if(O.mode===Vt.TRIANGLES||O.mode===Vt.TRIANGLE_STRIP||O.mode===Vt.TRIANGLE_FAN||O.mode===void 0)y=r.isSkinnedMesh===!0?new _1(m,b):new si(m,b),y.isSkinnedMesh===!0&&y.normalizeSkinWeights(),O.mode===Vt.TRIANGLE_STRIP?y.geometry=cf(y.geometry,lm):O.mode===Vt.TRIANGLE_FAN&&(y.geometry=cf(y.geometry,vu));else if(O.mode===Vt.LINES)y=new _u(m,b);else if(O.mode===Vt.LINE_STRIP)y=new $1(m,b);else if(O.mode===Vt.LINE_LOOP)y=new k1(m,b);else if(O.mode===Vt.POINTS)y=new pr(m,b);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+O.mode);Object.keys(y.geometry.morphAttributes).length>0&&DE(y,r),y.name=t.createUniqueName(r.name||"mesh_"+e),Qn(y,r),O.extensions&&wi(s,y,O),t.assignFinalMaterial(y),h.push(y)}for(let f=0,p=h.length;f<p;f++)t.associations.set(h[f],{meshes:e,primitives:f});if(h.length===1)return r.extensions&&wi(s,h[0],r),h[0];const d=new Ni;r.extensions&&wi(s,d,r),t.associations.set(d,{meshes:e});for(let f=0,p=h.length;f<p;f++)d.add(h[f]);return d})}loadCamera(e){let t;const i=this.json.cameras[e],s=i[i.type];if(!s){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return i.type==="perspective"?t=new pm(hr.radToDeg(s.yfov),s.aspectRatio||1,s.znear||1,s.zfar||2e6):i.type==="orthographic"&&(t=new P1(-s.xmag,s.xmag,s.ymag,-s.ymag,s.znear,s.zfar)),i.name&&(t.name=this.createUniqueName(i.name)),Qn(t,i),Promise.resolve(t)}loadSkin(e){const t=this.json.skins[e],i=[];for(let s=0,r=t.joints.length;s<r;s++)i.push(this._loadNodeShallow(t.joints[s]));return t.inverseBindMatrices!==void 0?i.push(this.getDependency("accessor",t.inverseBindMatrices)):i.push(null),Promise.all(i).then(function(s){const r=s.pop(),o=s,a=[],l=[];for(let u=0,c=o.length;u<c;u++){const h=o[u];if(h){a.push(h);const d=new aa;r!==null&&d.fromArray(r.array,u*16),l.push(d)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',t.joints[u])}return new Q1(a,l)})}loadAnimation(e){const t=this.json,i=this,s=t.animations[e],r=s.name?s.name:"animation_"+e,o=[],a=[],l=[],u=[],c=[];for(let h=0,d=s.channels.length;h<d;h++){const f=s.channels[h],p=s.samplers[f.sampler],m=f.target,O=m.node,y=s.parameters!==void 0?s.parameters[p.input]:p.input,b=s.parameters!==void 0?s.parameters[p.output]:p.output;m.node!==void 0&&(o.push(this.getDependency("node",O)),a.push(this.getDependency("accessor",y)),l.push(this.getDependency("accessor",b)),u.push(p),c.push(m))}return Promise.all([Promise.all(o),Promise.all(a),Promise.all(l),Promise.all(u),Promise.all(c)]).then(function(h){const d=h[0],f=h[1],p=h[2],m=h[3],O=h[4],y=[];for(let b=0,v=d.length;b<v;b++){const g=d[b],k=f[b],S=p[b],Q=m[b],T=O[b];if(g===void 0)continue;g.updateMatrix&&g.updateMatrix();const P=i._createAnimationTracks(g,k,S,Q,T);if(P)for(let B=0;B<P.length;B++)y.push(P[B])}return new T1(r,void 0,y)})}createNodeMesh(e){const t=this.json,i=this,s=t.nodes[e];return s.mesh===void 0?null:i.getDependency("mesh",s.mesh).then(function(r){const o=i._getNodeRef(i.meshCache,s.mesh,r);return s.weights!==void 0&&o.traverse(function(a){if(a.isMesh)for(let l=0,u=s.weights.length;l<u;l++)a.morphTargetInfluences[l]=s.weights[l]}),o})}loadNode(e){const t=this.json,i=this,s=t.nodes[e],r=i._loadNodeShallow(e),o=[],a=s.children||[];for(let u=0,c=a.length;u<c;u++)o.push(i.getDependency("node",a[u]));const l=s.skin===void 0?Promise.resolve(null):i.getDependency("skin",s.skin);return Promise.all([r,Promise.all(o),l]).then(function(u){const c=u[0],h=u[1],d=u[2];d!==null&&c.traverse(function(f){f.isSkinnedMesh&&f.bind(d,LE)});for(let f=0,p=h.length;f<p;f++)c.add(h[f]);return c})}_loadNodeShallow(e){const t=this.json,i=this.extensions,s=this;if(this.nodeCache[e]!==void 0)return this.nodeCache[e];const r=t.nodes[e],o=r.name?s.createUniqueName(r.name):"",a=[],l=s._invokeOne(function(u){return u.createNodeMesh&&u.createNodeMesh(e)});return l&&a.push(l),r.camera!==void 0&&a.push(s.getDependency("camera",r.camera).then(function(u){return s._getNodeRef(s.cameraCache,r.camera,u)})),s._invokeAll(function(u){return u.createNodeAttachment&&u.createNodeAttachment(e)}).forEach(function(u){a.push(u)}),this.nodeCache[e]=Promise.all(a).then(function(u){let c;if(r.isBone===!0?c=new A1:u.length>1?c=new Ni:u.length===1?c=u[0]:c=new hm,c!==u[0])for(let h=0,d=u.length;h<d;h++)c.add(u[h]);if(r.name&&(c.userData.name=r.name,c.name=o),Qn(c,r),r.extensions&&wi(i,c,r),r.matrix!==void 0){const h=new aa;h.fromArray(r.matrix),c.applyMatrix4(h)}else r.translation!==void 0&&c.position.fromArray(r.translation),r.rotation!==void 0&&c.quaternion.fromArray(r.rotation),r.scale!==void 0&&c.scale.fromArray(r.scale);return s.associations.has(c)||s.associations.set(c,{}),s.associations.get(c).nodes=e,c}),this.nodeCache[e]}loadScene(e){const t=this.extensions,i=this.json.scenes[e],s=this,r=new Ni;i.name&&(r.name=s.createUniqueName(i.name)),Qn(r,i),i.extensions&&wi(t,r,i);const o=i.nodes||[],a=[];for(let l=0,u=o.length;l<u;l++)a.push(s.getDependency("node",o[l]));return Promise.all(a).then(function(l){for(let c=0,h=l.length;c<h;c++)r.add(l[c]);const u=c=>{const h=new Map;for(const[d,f]of s.associations)(d instanceof fr||d instanceof Bh)&&h.set(d,f);return c.traverse(d=>{const f=s.associations.get(d);f!=null&&h.set(d,f)}),h};return s.associations=u(r),r})}_createAnimationTracks(e,t,i,s,r){const o=[],a=e.name?e.name:e.uuid,l=[];Yn[r.path]===Yn.weights?e.traverse(function(d){d.morphTargetInfluences&&l.push(d.name?d.name:d.uuid)}):l.push(a);let u;switch(Yn[r.path]){case Yn.weights:u=jh;break;case Yn.rotation:u=Wh;break;case Yn.position:case Yn.scale:u=Uh;break;default:switch(i.itemSize){case 1:u=jh;break;case 2:case 3:default:u=Uh;break}break}const c=s.interpolation!==void 0?ME[s.interpolation]:mm,h=this._getArrayFromAccessor(i);for(let d=0,f=l.length;d<f;d++){const p=new u(l[d]+"."+Yn[r.path],t.array,h,c);s.interpolation==="CUBICSPLINE"&&this._createCubicSplineTrackInterpolant(p),o.push(p)}return o}_getArrayFromAccessor(e){let t=e.array;if(e.normalized){const i=tc(t.constructor),s=new Float32Array(t.length);for(let r=0,o=t.length;r<o;r++)s[r]=t[r]*i;t=s}return t}_createCubicSplineTrackInterpolant(e){e.createInterpolant=function(i){const s=this instanceof Wh?EE:yO;return new s(this.times,this.values,this.getValueSize()/3,i)},e.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0}}function VE(n,e,t){const i=e.attributes,s=new Z1;if(i.POSITION!==void 0){const a=t.json.accessors[i.POSITION],l=a.min,u=a.max;if(l!==void 0&&u!==void 0){if(s.set(new Je(l[0],l[1],l[2]),new Je(u[0],u[1],u[2])),a.normalized){const c=tc(ms[a.componentType]);s.min.multiplyScalar(c),s.max.multiplyScalar(c)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;const r=e.targets;if(r!==void 0){const a=new Je,l=new Je;for(let u=0,c=r.length;u<c;u++){const h=r[u];if(h.POSITION!==void 0){const d=t.json.accessors[h.POSITION],f=d.min,p=d.max;if(f!==void 0&&p!==void 0){if(l.setX(Math.max(Math.abs(f[0]),Math.abs(p[0]))),l.setY(Math.max(Math.abs(f[1]),Math.abs(p[1]))),l.setZ(Math.max(Math.abs(f[2]),Math.abs(p[2]))),d.normalized){const m=tc(ms[d.componentType]);l.multiplyScalar(m)}a.max(l)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}s.expandByVector(a)}n.boundingBox=s;const o=new D1;s.getCenter(o.center),o.radius=s.min.distanceTo(s.max)/2,n.boundingSphere=o}function pf(n,e,t){const i=e.attributes,s=[];function r(o,a){return t.getDependency("accessor",o).then(function(l){n.setAttribute(a,l)})}for(const o in i){const a=ec[o]||o.toLowerCase();a in n.attributes||s.push(r(i[o],a))}if(e.indices!==void 0&&!n.index){const o=t.getDependency("accessor",e.indices).then(function(a){n.setIndex(a)});s.push(o)}return qh.workingColorSpace!==zn&&"COLOR_0"in i&&console.warn(`THREE.GLTFLoader: Converting vertex colors from "srgb-linear" to "${qh.workingColorSpace}" not supported.`),Qn(n,e),VE(n,e,t),Promise.all(s).then(function(){return e.targets!==void 0?ZE(n,e.targets,t):n})}const XE=/^[og]\s*(.+)?/,BE=/^mtllib /,UE=/^usemtl /,jE=/^usemap /,mf=/\s+/,gf=new Je,ql=new Je,Of=new Je,yf=new Je,Lt=new Je,yo=new Ln;function WE(){const n={objects:[],object:{},vertices:[],normals:[],colors:[],uvs:[],materials:{},materialLibraries:[],startObject:function(e,t){if(this.object&&this.object.fromDeclaration===!1){this.object.name=e,this.object.fromDeclaration=t!==!1;return}const i=this.object&&typeof this.object.currentMaterial=="function"?this.object.currentMaterial():void 0;if(this.object&&typeof this.object._finalize=="function"&&this.object._finalize(!0),this.object={name:e||"",fromDeclaration:t!==!1,geometry:{vertices:[],normals:[],colors:[],uvs:[],hasUVIndices:!1},materials:[],smooth:!0,startMaterial:function(s,r){const o=this._finalize(!1);o&&(o.inherited||o.groupCount<=0)&&this.materials.splice(o.index,1);const a={index:this.materials.length,name:s||"",mtllib:Array.isArray(r)&&r.length>0?r[r.length-1]:"",smooth:o!==void 0?o.smooth:this.smooth,groupStart:o!==void 0?o.groupEnd:0,groupEnd:-1,groupCount:-1,inherited:!1,clone:function(l){const u={index:typeof l=="number"?l:this.index,name:this.name,mtllib:this.mtllib,smooth:this.smooth,groupStart:0,groupEnd:-1,groupCount:-1,inherited:!1};return u.clone=this.clone.bind(u),u}};return this.materials.push(a),a},currentMaterial:function(){if(this.materials.length>0)return this.materials[this.materials.length-1]},_finalize:function(s){const r=this.currentMaterial();if(r&&r.groupEnd===-1&&(r.groupEnd=this.geometry.vertices.length/3,r.groupCount=r.groupEnd-r.groupStart,r.inherited=!1),s&&this.materials.length>1)for(let o=this.materials.length-1;o>=0;o--)this.materials[o].groupCount<=0&&this.materials.splice(o,1);return s&&this.materials.length===0&&this.materials.push({name:"",smooth:this.smooth}),r}},i&&i.name&&typeof i.clone=="function"){const s=i.clone(0);s.inherited=!0,this.object.materials.push(s)}this.objects.push(this.object)},finalize:function(){this.object&&typeof this.object._finalize=="function"&&this.object._finalize(!0)},parseVertexIndex:function(e,t){const i=parseInt(e,10);return(i>=0?i-1:i+t/3)*3},parseNormalIndex:function(e,t){const i=parseInt(e,10);return(i>=0?i-1:i+t/3)*3},parseUVIndex:function(e,t){const i=parseInt(e,10);return(i>=0?i-1:i+t/2)*2},addVertex:function(e,t,i){const s=this.vertices,r=this.object.geometry.vertices;r.push(s[e+0],s[e+1],s[e+2]),r.push(s[t+0],s[t+1],s[t+2]),r.push(s[i+0],s[i+1],s[i+2])},addVertexPoint:function(e){const t=this.vertices;this.object.geometry.vertices.push(t[e+0],t[e+1],t[e+2])},addVertexLine:function(e){const t=this.vertices;this.object.geometry.vertices.push(t[e+0],t[e+1],t[e+2])},addNormal:function(e,t,i){const s=this.normals,r=this.object.geometry.normals;r.push(s[e+0],s[e+1],s[e+2]),r.push(s[t+0],s[t+1],s[t+2]),r.push(s[i+0],s[i+1],s[i+2])},addFaceNormal:function(e,t,i){const s=this.vertices,r=this.object.geometry.normals;gf.fromArray(s,e),ql.fromArray(s,t),Of.fromArray(s,i),Lt.subVectors(Of,ql),yf.subVectors(gf,ql),Lt.cross(yf),Lt.normalize(),r.push(Lt.x,Lt.y,Lt.z),r.push(Lt.x,Lt.y,Lt.z),r.push(Lt.x,Lt.y,Lt.z)},addColor:function(e,t,i){const s=this.colors,r=this.object.geometry.colors;s[e]!==void 0&&r.push(s[e+0],s[e+1],s[e+2]),s[t]!==void 0&&r.push(s[t+0],s[t+1],s[t+2]),s[i]!==void 0&&r.push(s[i+0],s[i+1],s[i+2])},addUV:function(e,t,i){const s=this.uvs,r=this.object.geometry.uvs;r.push(s[e+0],s[e+1]),r.push(s[t+0],s[t+1]),r.push(s[i+0],s[i+1])},addDefaultUV:function(){const e=this.object.geometry.uvs;e.push(0,0),e.push(0,0),e.push(0,0)},addUVLine:function(e){const t=this.uvs;this.object.geometry.uvs.push(t[e+0],t[e+1])},addFace:function(e,t,i,s,r,o,a,l,u){const c=this.vertices.length;let h=this.parseVertexIndex(e,c),d=this.parseVertexIndex(t,c),f=this.parseVertexIndex(i,c);if(this.addVertex(h,d,f),this.addColor(h,d,f),a!==void 0&&a!==""){const p=this.normals.length;h=this.parseNormalIndex(a,p),d=this.parseNormalIndex(l,p),f=this.parseNormalIndex(u,p),this.addNormal(h,d,f)}else this.addFaceNormal(h,d,f);if(s!==void 0&&s!==""){const p=this.uvs.length;h=this.parseUVIndex(s,p),d=this.parseUVIndex(r,p),f=this.parseUVIndex(o,p),this.addUV(h,d,f),this.object.geometry.hasUVIndices=!0}else this.addDefaultUV()},addPointGeometry:function(e){this.object.geometry.type="Points";const t=this.vertices.length;for(let i=0,s=e.length;i<s;i++){const r=this.parseVertexIndex(e[i],t);this.addVertexPoint(r),this.addColor(r)}},addLineGeometry:function(e,t){this.object.geometry.type="Line";const i=this.vertices.length,s=this.uvs.length;for(let r=0,o=e.length;r<o;r++)this.addVertexLine(this.parseVertexIndex(e[r],i));for(let r=0,o=t.length;r<o;r++)this.addUVLine(this.parseUVIndex(t[r],s))}};return n.startObject("",!1),n}class qE extends um{constructor(e){super(e),this.materials=null}load(e,t,i,s){const r=this,o=new Yc(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(a){try{t(r.parse(a))}catch(l){s?s(l):console.error(l),r.manager.itemError(e)}},i,s)}setMaterials(e){return this.materials=e,this}parse(e){const t=new WE;e.indexOf(`\r
`)!==-1&&(e=e.replace(/\r\n/g,`
`)),e.indexOf(`\\
`)!==-1&&(e=e.replace(/\\\n/g,""));const i=e.split(`
`);let s=[];for(let a=0,l=i.length;a<l;a++){const u=i[a].trimStart();if(u.length===0)continue;const c=u.charAt(0);if(c!=="#")if(c==="v"){const h=u.split(mf);switch(h[0]){case"v":t.vertices.push(parseFloat(h[1]),parseFloat(h[2]),parseFloat(h[3])),h.length>=7?(yo.setRGB(parseFloat(h[4]),parseFloat(h[5]),parseFloat(h[6]),ws),t.colors.push(yo.r,yo.g,yo.b)):t.colors.push(void 0,void 0,void 0);break;case"vn":t.normals.push(parseFloat(h[1]),parseFloat(h[2]),parseFloat(h[3]));break;case"vt":t.uvs.push(parseFloat(h[1]),parseFloat(h[2]));break}}else if(c==="f"){const d=u.slice(1).trim().split(mf),f=[];for(let m=0,O=d.length;m<O;m++){const y=d[m];if(y.length>0){const b=y.split("/");f.push(b)}}const p=f[0];for(let m=1,O=f.length-1;m<O;m++){const y=f[m],b=f[m+1];t.addFace(p[0],y[0],b[0],p[1],y[1],b[1],p[2],y[2],b[2])}}else if(c==="l"){const h=u.substring(1).trim().split(" ");let d=[];const f=[];if(u.indexOf("/")===-1)d=h;else for(let p=0,m=h.length;p<m;p++){const O=h[p].split("/");O[0]!==""&&d.push(O[0]),O[1]!==""&&f.push(O[1])}t.addLineGeometry(d,f)}else if(c==="p"){const d=u.slice(1).trim().split(" ");t.addPointGeometry(d)}else if((s=XE.exec(u))!==null){const h=(" "+s[0].slice(1).trim()).slice(1);t.startObject(h)}else if(UE.test(u))t.object.startMaterial(u.substring(7).trim(),t.materialLibraries);else if(BE.test(u))t.materialLibraries.push(u.substring(7).trim());else if(jE.test(u))console.warn('THREE.OBJLoader: Rendering identifier "usemap" not supported. Textures must be defined in MTL files.');else if(c==="s"){if(s=u.split(" "),s.length>1){const d=s[1].trim().toLowerCase();t.object.smooth=d!=="0"&&d!=="off"}else t.object.smooth=!0;const h=t.object.currentMaterial();h&&(h.smooth=t.object.smooth)}else{if(u==="\0")continue;console.warn('THREE.OBJLoader: Unexpected line: "'+u+'"')}}t.finalize();const r=new Ni;if(r.materialLibraries=[].concat(t.materialLibraries),!(t.objects.length===1&&t.objects[0].geometry.vertices.length===0)===!0)for(let a=0,l=t.objects.length;a<l;a++){const u=t.objects[a],c=u.geometry,h=u.materials,d=c.type==="Line",f=c.type==="Points";let p=!1;if(c.vertices.length===0)continue;const m=new Su;m.setAttribute("position",new ts(c.vertices,3)),c.normals.length>0&&m.setAttribute("normal",new ts(c.normals,3)),c.colors.length>0&&(p=!0,m.setAttribute("color",new ts(c.colors,3))),c.hasUVIndices===!0&&m.setAttribute("uv",new ts(c.uvs,2));const O=[];for(let b=0,v=h.length;b<v;b++){const g=h[b],k=g.name+"_"+g.smooth+"_"+p;let S=t.materials[k];if(this.materials!==null){if(S=this.materials.create(g.name),d&&S&&!(S instanceof No)){const Q=new No;fr.prototype.copy.call(Q,S),Q.color.copy(S.color),S=Q}else if(f&&S&&!(S instanceof Ks)){const Q=new Ks({size:10,sizeAttenuation:!1});fr.prototype.copy.call(Q,S),Q.color.copy(S.color),Q.map=S.map,S=Q}}S===void 0&&(d?S=new No:f?S=new Ks({size:1,sizeAttenuation:!1}):S=new N1,S.name=g.name,S.flatShading=!g.smooth,S.vertexColors=p,t.materials[k]=S),O.push(S)}let y;if(O.length>1){for(let b=0,v=h.length;b<v;b++){const g=h[b];m.addGroup(g.groupStart,g.groupCount,b)}d?y=new _u(m,O):f?y=new pr(m,O):y=new si(m,O)}else d?y=new _u(m,O[0]):f?y=new pr(m,O[0]):y=new si(m,O[0]);y.name=u.name,r.add(y)}else if(t.vertices.length>0){const a=new Ks({size:1,sizeAttenuation:!1}),l=new Su;l.setAttribute("position",new ts(t.vertices,3)),t.colors.length>0&&t.colors[0]!==void 0&&(l.setAttribute("color",new ts(t.colors,3)),a.vertexColors=!0);const u=new pr(l,a);r.add(u)}return r}}var YE=I1();const GE=L1(YE),HE={class:"chart-3d-container"},FE={class:"data-panel"},KE={class:"model-controls"},JE=Oe({__name:"ChartIMU",setup(n){try{kl.install({THREE:z1})}catch{}const e=en.getInstance(),t=ae(null),i=ae(0),s=ae(0),r=ae(0),o=ae("rocket"),a=ae(null),l=ae(null),u=Zs(),c=pe(()=>u.value?1710618:15790320),h=pe(()=>u.value?4210752:3368703);let d,f,p,m,O,y,b,v,g;const k=()=>{d=new V1,d.background=new Ln(c.value);const D=new X1(1.6);d.add(D),f=new j1,v=new GE,v.showPanel(0),v.dom.style.position="absolute",v.dom.style.left="0px",v.dom.style.top="0px",t.value.appendChild(v.dom),p=new pm(75,t.value.clientWidth/t.value.clientHeight,.1,1e3),p.position.set(2,2,2),p.lookAt(0,0,0),m=new B1({antialias:!0}),m.setSize(t.value.clientWidth,t.value.clientHeight),t.value.appendChild(m.domElement),y=new YC(p,m.domElement),y.enableDamping=!0,P(o.value),W()},S=()=>{const D=new Ni,N=new Yh(.5,1.4,12),U=new Si({color:h.value,metalness:.6,roughness:.3,envMapIntensity:1.2}),V=new si(N,U);V.position.set(0,0,-.6),V.rotation.x=-Math.PI/2,D.add(V);const Y=new Gh(.4,.4,1),E=new Si({color:h.value,metalness:.6,roughness:.3,envMapIntensity:1.2}),X=new si(Y,E);return X.position.set(0,0,.3),D.add(X),D},Q=()=>{const D=new Ni,N=new Yh(.2,.5,12),U=new Si({color:h.value,metalness:.6,roughness:.3,envMapIntensity:1.2}),V=new si(N,U);V.position.set(0,1.05,0),D.add(V);const Y=new W1(.2,.2,1.6),E=new Si({color:h.value,metalness:.6,roughness:.3,envMapIntensity:1.2}),X=new si(Y,E);X.position.set(0,0,0),D.add(X);const H=.09,J=1.5,me=800,oe=window.innerHeight,xe=new kl.Geometry(H,J,me),ye=new kl.Material({color:16720384});return ye.setPerspective(p.fov,oe),g=new pr(xe,ye),g.rotation.x=3.14,g.position.set(0,-.92,0),D.add(g),D},T=()=>{const D=new Ni,N=new Gh(1,1,1),U=new Si({color:h.value,metalness:.7,roughness:.3,envMapIntensity:1}),V=new si(N,U);return D.add(V),D},P=D=>{switch(O&&d.remove(O),D){case"rocket":O=Q();break;case"arrow":O=S();break;case"cube":O=T();break;case"custom":a?O=a.value:O=S();break;default:O=S()}d.add(O)},B=D=>{var Y,E;const N=(Y=D.target.files)==null?void 0:Y[0];if(!N)return;const U=(E=N.name.split(".").pop())==null?void 0:E.toLowerCase(),V=new FileReader;V.onload=X=>{var J;const H=(J=X.target)==null?void 0:J.result;if(H)if(U==="gltf"||U==="glb")new aE().parse(H,"",oe=>{a.value=oe.scene,o.value="custom",P("custom")},oe=>{We.error("加载模型失败："+oe.message)});else if(U==="obj"){const me=new qE;try{const oe=me.parse(H);a.value=oe,o.value="custom",P("custom")}catch(oe){We.error("加载模型失败："+oe.message)}}else We.error("不支持的文件格式，请使用.gltf、.glb或.obj格式的3D模型文件")},V.readAsText(N)},W=()=>{const D=new U1(16777215,6);d.add(D);const N=new wu(16777215,12);N.position.set(5,5,10),d.add(N);const U=new wu(16777215,1);U.position.set(-5,3,-5),d.add(U);const V=new cm(4890367,1,10);V.position.set(2,2,2),d.add(V)},C=()=>{var D=f.getDelta();b=requestAnimationFrame(C),v.begin(),O&&O.rotation.set(hr.degToRad(s.value),hr.degToRad(r.value),hr.degToRad(i.value)),g&&g.material.update(D),y.update(),m.render(d,p),v.end()},j=()=>{if(t.value&&p&&m){let D=t.value.clientWidth,N=t.value.clientHeight;p.aspect=D/N,p.updateProjectionMatrix(),m.setSize(D,N),g&&g.material.setPerspective(p.fov,N)}},w=D=>{if(!D||typeof D.pitch!="number")return;const{pitch:N,roll:U,yaw:V}=D;i.value=N,s.value=U,r.value=V},R=()=>{o.value==="arrow"?o.value="cube":(o.value,o.value="arrow"),P(o.value)},_=()=>{var D;(D=l.value)==null||D.click()};return St(()=>{k(),C(),e.on(He.DATA_UPDATE,w),window.addEventListener("resize",j)}),Oi(()=>{b&&cancelAnimationFrame(b),e.off(He.DATA_UPDATE,w),window.removeEventListener("resize",j),m.dispose()}),(D,N)=>{const U=ie("el-button");return G(),K("div",HE,[q("div",{ref_key:"container",ref:t,class:"canvas-container"},null,512),q("div",FE,[q("div",null,"Pitch: "+ve(i.value.toFixed(2))+"°",1),q("div",null,"Roll: "+ve(s.value.toFixed(2))+"°",1),q("div",null,"Yaw: "+ve(r.value.toFixed(2))+"°",1),q("div",KE,[x(U,{class:"model-switch",onClick:R,size:"small"},{default:A(()=>N[0]||(N[0]=[te(" 切换模型 ")])),_:1}),x(U,{class:"model-upload",onClick:_,size:"small"},{default:A(()=>N[1]||(N[1]=[te(" 导入模型 ")])),_:1}),q("input",{ref_key:"fileInput",ref:l,type:"file",accept:".gltf,.glb,.obj",style:{display:"none"},onChange:B},null,544)])])])}}}),vO=yt(JE,[["__scopeId","data-v-c84e5003"]]),eM={class:"chart-panel"},tM={class:"chart-controls"},nM={class:"charts-container"},iM={class:"chart-header"},sM={class:"chart-content"},rM=Oe({__name:"ChartPanel",setup(n){const e=en.getInstance(),t=Gc(),s=Vn.getInstance().useConfig("charts"),r=ae([]);let o=pe(()=>r.value.reduce((Q,T)=>Math.max(Q,T.id),0)+1);const a=Zs(),l={background:"#1e1e1e",gridColor:"#2c2c2c",textColor:"#d4d4d4",lineColors:["#4a9eff","#ff4a4a","#4aff4a","#ffd700","#ff4aff","#4affff"]},u={background:"#ffffff",gridColor:"#f0f0f0",textColor:"#333333",lineColors:["#3366ff","#ff3333","#33ff33","#ffcc00","#ff33ff","#33ffff"]},c=pe(()=>a.value?l:u),h=S=>{const Q={id:o.value,name:S,fields:[],data:[[]],timestamps:[],uplot:null,container:null};return r.value.push(Q),f(),Q},d=S=>{const Q=r.value.find(T=>T.id===S);Q&&(Q.data=[[]],Q.timestamps=[],Q.fields.forEach(()=>Q.data.push([])),Q.uplot&&Q.uplot.setData(Q.data))},f=()=>{const S=r.value.map(Q=>({id:Q.id,name:Q.name,fields:Q.fields}));s.value.list=S},p=()=>{const S=s.value.list||[];Array.isArray(S)&&S.forEach(Q=>{const T=h(Q.name);T.id=Q.id,Q.fields.forEach(P=>v(T.id,P))})},m=(S,Q)=>{const T={width:Q.clientWidth||200,height:300,cursor:{sync:{key:0}},series:[{label:"Time",value:(P,B)=>{if(!B)return"--";let W=new Date(B*1e3);return W.toLocaleString()+"."+W.getMilliseconds()}},...S.fields.map((P,B)=>({label:P,stroke:c.value.lineColors[B%c.value.lineColors.length]}))],axes:[{stroke:c.value.textColor,grid:{stroke:c.value.gridColor}},{stroke:c.value.textColor,grid:{stroke:c.value.gridColor}}],scales:{x:{time:!0}}};S.uplot=new q1(T,S.data,Q),S.container=Q},O=S=>{if(typeof S!="object"||S===null)return;const Q=Date.now();r.value.forEach(T=>{if(T.fields.length===0)return;T.timestamps.push(Q/1e3);let P=0;const B=[T.timestamps,...T.fields.map((W,C)=>{const j=S[W];let w=null;return typeof j=="number"&&(P++,w=j),T.data[C+1].push(w),T.data[C+1]})];P!=0&&(T.uplot&&T.uplot.setData(B),T.data=B)})},y=()=>{f()},b=S=>{S.data=[S.timestamps],S.fields.forEach(()=>S.data.push([])),f(),S.uplot&&(S.uplot.destroy(),S.container&&m(S,S.container))},v=(S,Q)=>{const T=r.value.find(P=>P.id===S);if(T){if(T.fields.includes(Q)){We.warning("该字段已添加到图表中");return}T.fields.push(Q),T.data.push([]),f(),T.uplot&&(T.uplot.destroy(),T.container&&m(T,T.container))}},g=S=>{const Q=r.value.findIndex(P=>P.id===S);if(Q===-1)return;const T=r.value[Q];T.uplot&&T.uplot.destroy(),r.value.splice(Q,1),f()},k=()=>{r.value.forEach(S=>{if(S.uplot&&S.container){let Q=S.container.clientWidth;Q&&S.uplot.setSize({width:Q,height:S.uplot.height})}})};return St(()=>{p(),e.on(He.DATA_UPDATE,O),window.addEventListener("resize",k)}),Oi(()=>{e.off(He.DATA_UPDATE,O),window.removeEventListener("resize",k),r.value.forEach(S=>{S.uplot&&S.uplot.destroy()})}),(S,Q)=>{const T=ie("el-button"),P=ie("el-input"),B=ie("el-option"),W=ie("el-select"),C=ie("Delete"),j=ie("el-icon"),w=ie("RefreshRight");return G(),K("div",eM,[q("div",tM,[x(T,{onClick:Q[0]||(Q[0]=R=>h("新图表")),type:"primary",size:"small"},{default:A(()=>Q[1]||(Q[1]=[te(" 添加图表 ")])),_:1})]),q("div",nM,[(G(!0),K(ke,null,Xe(r.value,R=>(G(),K("div",{key:R.id,class:"chart-item"},[q("div",iM,[x(P,{modelValue:R.name,"onUpdate:modelValue":_=>R.name=_,size:"small",placeholder:"图表名称",class:"chart-name-input",onChange:y},null,8,["modelValue","onUpdate:modelValue"]),x(W,{modelValue:R.fields,"onUpdate:modelValue":_=>R.fields=_,multiple:"",filterable:"",placeholder:"选择字段",size:"small",style:{"min-width":"200px"},onChange:_=>b(R)},{default:A(()=>[(G(!0),K(ke,null,Xe($(t).fields.map(_=>_.key),_=>(G(),be(B,{key:_,label:_,value:_},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","onChange"]),x(T,{onClick:_=>g(R.id),type:"danger",size:"small",circle:""},{default:A(()=>[x(j,null,{default:A(()=>[x(C)]),_:1})]),_:2},1032,["onClick"]),x(T,{onClick:_=>d(R.id),style:{"margin-left":"0"},type:"warning",size:"small",circle:""},{default:A(()=>[x(j,null,{default:A(()=>[x(w)]),_:1})]),_:2},1032,["onClick"])]),q("div",sM,[q("div",{ref_for:!0,ref:_=>{_&&!R.uplot&&m(R,_)},class:"chart-container"},null,512)])]))),128))])])}}}),wO=yt(rM,[["__scopeId","data-v-e6e95fc6"]]),oM={class:"data-table-container"},aM={class:"table-toolbar"},lM={class:"import-export-buttons"},uM={class:"operation-buttons"},cM=Oe({__name:"DataTable",setup(n){const e=en.getInstance(),t=Gc(),i=a=>{typeof a!="object"||a===null||Object.entries(a).forEach(([l,u])=>{const c=t.fields.find(h=>h.key===l);c?t.updateField(c,u):t.fields.push(t.createField(l,u))})},s=()=>{t.createField("new_field","")},r=()=>{t.saveToLocalStorage()},o=()=>{t.fields.forEach(a=>{a.value="",a.avg=null,a.avgSum=null,a.min=null,a.max=null,a.updateCount=0,a.lastUpdate=0}),t.saveToLocalStorage()};return St(()=>{t.loadFromLocalStorage(),e.on(He.DATA_UPDATE,i)}),Oi(()=>{e.off(He.DATA_UPDATE,i)}),(a,l)=>{const u=ie("el-alert"),c=ie("arrow-down"),h=ie("el-icon"),d=ie("el-button"),f=ie("el-checkbox"),p=ie("el-dropdown-item"),m=ie("el-dropdown-menu"),O=ie("el-dropdown"),y=ie("Delete"),b=ie("el-table-column"),v=ie("el-input"),g=ie("el-option"),k=ie("el-select"),S=ie("el-tooltip"),Q=ie("el-table");return G(),K("div",oM,[x(u,{type:"info",closable:!1,class:"mb-3"},{title:A(()=>l[3]||(l[3]=[q("div",{class:"flow-title"},"数据流转过程说明",-1)])),default:A(()=>[l[4]||(l[4]=q("div",{class:"flow-content"},[q("div",{class:"flow-step"},[q("div",{class:"step-number"},"1"),q("div",{class:"step-content"},[q("b",null,"数据采集："),te("设备（串口/USB/蓝牙等）采集数据并发送 ")])]),q("div",{class:"flow-step"},[q("div",{class:"step-number"},"2"),q("div",{class:"step-content"},[q("b",null,"脚本处理："),te("数据进入脚本的 DataReceiver 函数进行处理， 可在脚本面板进行编辑 ")])]),q("div",{class:"flow-step"},[q("div",{class:"step-number"},"3"),q("div",{class:"step-content"},[q("b",null,"数据更新："),te("脚本通过 updateDataTable({key: value}) 更新数据表 ")])]),q("div",{class:"flow-step"},[q("div",{class:"step-number"},"4"),q("div",{class:"step-content"},[q("b",null,"显示输出："),te("脚本 return 的数据会显示在命令行面板 ")])])],-1))]),_:1}),q("div",aM,[x(O,{trigger:"click"},{dropdown:A(()=>[x(m,null,{default:A(()=>[(G(!0),K(ke,null,Xe($(t).columnVisibility,(T,P)=>(G(),be(p,{key:P},{default:A(()=>[x(f,{modelValue:$(t).columnVisibility[P],"onUpdate:modelValue":B=>$(t).columnVisibility[P]=B,onChange:l[0]||(l[0]=B=>$(t).toggleColumnVisibility())},{default:A(()=>[te(ve(P==="key"?"Key":P==="name"?"字段名":P==="dataType"?"数据类型":P==="keyAddr"?"内存地址":P==="keySize"?"内存大小":P==="description"?"描述":P==="value"?"当前值":P==="avg"?"平均值":P==="min"?"最小值":P==="max"?"最大值":P==="lastUpdate"?"最后更新":P==="updateCount"?"更新次数":P),1)]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:2},1024))),128))]),_:1})]),default:A(()=>[x(d,{type:"primary",size:"small"},{default:A(()=>[l[5]||(l[5]=te(" 显示/隐藏列 ")),x(h,{class:"el-icon--right"},{default:A(()=>[x(c)]),_:1})]),_:1})]),_:1}),q("div",lM,[x(d,{type:"primary",size:"small",onClick:s},{default:A(()=>l[6]||(l[6]=[te("添加")])),_:1}),x(d,{type:"primary",size:"small",onClick:$(t).exportData},{default:A(()=>l[7]||(l[7]=[te("导出数据")])),_:1},8,["onClick"]),x(d,{type:"primary",size:"small",onClick:l[1]||(l[1]=T=>a.$refs.fileInput.click())},{default:A(()=>l[8]||(l[8]=[te("导入数据")])),_:1}),x(d,{type:"warning",size:"small",onClick:o},{default:A(()=>l[9]||(l[9]=[te("重置数据")])),_:1}),q("input",{ref:"fileInput",type:"file",accept:".json",style:{display:"none"},onChange:l[2]||(l[2]=T=>{var B;const P=(B=T.target.files)==null?void 0:B[0];P&&$(t).importData(P)})},null,544)])]),x(Q,{data:$(t).fields,border:"",stripe:""},{default:A(()=>[x(b,{label:"操作",width:"60",fixed:"left"},{default:A(({row:T})=>[q("div",uM,[x(d,{onClick:P=>$(t).deleteField(T.id),type:"danger",size:"small",circle:""},{default:A(()=>[x(h,null,{default:A(()=>[x(y)]),_:1})]),_:2},1032,["onClick"])])]),_:1}),$(t).columnVisibility.key?(G(),be(b,{key:0,label:"Key","min-width":"100"},{default:A(({row:T})=>[x(v,{modelValue:T.key,"onUpdate:modelValue":P=>T.key=P,size:"small",onChange:r},null,8,["modelValue","onUpdate:modelValue"])]),_:1})):Ee("",!0),$(t).columnVisibility.name?(G(),be(b,{key:1,label:"字段名","min-width":"100"},{default:A(({row:T})=>[x(v,{modelValue:T.name,"onUpdate:modelValue":P=>T.name=P,size:"small",onChange:r},null,8,["modelValue","onUpdate:modelValue"])]),_:1})):Ee("",!0),$(t).columnVisibility.keyAddr?(G(),be(b,{key:2,label:"内存地址","min-width":"100"},{default:A(({row:T})=>[x(v,{modelValue:T.keyAddr,"onUpdate:modelValue":P=>T.keyAddr=P,size:"small",onChange:r},null,8,["modelValue","onUpdate:modelValue"])]),_:1})):Ee("",!0),$(t).columnVisibility.keySize?(G(),be(b,{key:3,label:"内存大小","min-width":"100"},{default:A(({row:T})=>[x(v,{modelValue:T.keySize,"onUpdate:modelValue":P=>T.keySize=P,size:"small",onChange:r},null,8,["modelValue","onUpdate:modelValue"])]),_:1})):Ee("",!0),$(t).columnVisibility.dataType?(G(),be(b,{key:4,label:"数据类型","min-width":"80"},{default:A(({row:T})=>[x(k,{modelValue:T.dataType,"onUpdate:modelValue":P=>T.dataType=P,size:"small",onChange:r},{default:A(()=>[x(g,{label:"数字",value:"number"}),x(g,{label:"字符串",value:"string"}),x(g,{label:"布尔值",value:"boolean"}),x(g,{label:"对象",value:"object"})]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:1})):Ee("",!0),$(t).columnVisibility.description?(G(),be(b,{key:5,label:"描述","min-width":"150"},{default:A(({row:T})=>[x(v,{modelValue:T.description,"onUpdate:modelValue":P=>T.description=P,size:"small",onChange:r},null,8,["modelValue","onUpdate:modelValue"])]),_:1})):Ee("",!0),$(t).columnVisibility.value?(G(),be(b,{key:6,label:"当前值","min-width":"100"},{default:A(({row:T})=>[q("span",null,ve(T.value),1)]),_:1})):Ee("",!0),$(t).columnVisibility.avg?(G(),be(b,{key:7,label:"平均值","min-width":"100"},{default:A(({row:T})=>[q("span",null,ve(T.avg??"-"),1)]),_:1})):Ee("",!0),$(t).columnVisibility.min?(G(),be(b,{key:8,label:"最小值","min-width":"100"},{default:A(({row:T})=>[q("span",null,ve(T.min??"-"),1)]),_:1})):Ee("",!0),$(t).columnVisibility.max?(G(),be(b,{key:9,label:"最大值","min-width":"100"},{default:A(({row:T})=>[q("span",null,ve(T.max??"-"),1)]),_:1})):Ee("",!0),$(t).columnVisibility.lastUpdate?(G(),be(b,{key:10,label:"最后更新","min-width":"120"},{default:A(({row:T})=>[x(S,{content:new Date(T.lastUpdate).toLocaleString(),placement:"top",effect:"dark"},{default:A(()=>[q("span",null,ve(new Date(T.lastUpdate).toLocaleTimeString()+"."+String(new Date(T.lastUpdate).getMilliseconds()).padStart(3,"0")),1)]),_:2},1032,["content"])]),_:1})):Ee("",!0),$(t).columnVisibility.updateCount?(G(),be(b,{key:11,label:"更新次数",width:"100"},{default:A(({row:T})=>[q("span",null,ve(T.updateCount),1)]),_:1})):Ee("",!0)]),_:1},8,["data"])])}}}),bO=yt(cM,[["__scopeId","data-v-e749fc61"]]),hM=en.getInstance(),dM=Jp("quickSend",()=>{const n=bs.getInstance(),e=ae([]),t=ae(0),i=pe(()=>e.value.find(g=>g.id===t.value)||e.value[0]),s=ae({}),r=ae(1e3),o=g=>/^[0-9A-Fa-f\s]*$/.test(g),a=g=>{if(!g.content){We.warning("发送内容不能为空");return}if(g.type==="hex"&&!o(g.content)){We.error("HEX格式数据不合法");return}const k=n.stringToUint8Array(g.content+g.addCRLFType,g.type==="hex");hM.emit(He.SERIAL_SEND,k)},l=g=>{const k=s.value[g.id];k?(clearInterval(k),delete s.value[g.id]):s.value[g.id]=window.setInterval(()=>a(g),r.value)},u=()=>{i.value.items.push({id:Date.now(),name:"新建项目",content:"",type:"text",addCRLFType:"\\n"})},c=g=>{const k=i.value.items.findIndex(S=>S.id===g);k>-1&&i.value.items.splice(k,1)},h=g=>{g&&e.value.push({id:Date.now(),name:g,items:[]})},d=()=>{if(e.value.length<=1){We.warning("至少保留一个分组");return}const g=e.value.findIndex(k=>k.id===i.value.id);g>-1&&(e.value.splice(g,1),e.value.length==0&&h("默认分组"),p(e.value[0]))},f=g=>{g&&(i.value.name=g)},p=g=>{t.value=g.id},m=g=>{console.log("切换分组",g,e),t.value=g},O=g=>{try{if(!Array.isArray(g)||!g.every(k=>typeof k=="object"&&typeof k.id=="number"&&typeof k.name=="string"&&Array.isArray(k.items)))throw new Error("配置文件格式错误");e.value=g,p(e.value[0]),We.success("导入成功")}catch(k){We.error(`导入失败：${k instanceof Error?k.message:"无效的配置文件"}`)}},y=()=>JSON.stringify(e.value,null,2),b=()=>{localStorage.setItem("config.quickSendGroups",JSON.stringify(e.value))},v=()=>{const g=localStorage.getItem("config.quickSendGroups");if(g)try{e.value=JSON.parse(g)}catch{We.error("加载配置失败")}e.value.length==0&&(e.value=[{id:1,name:"默认分组",items:[{id:1,name:"查询版本",content:"AT+VERSION?",type:"text",addCRLFType:`
`},{id:2,name:"重启设备",content:"AT+RESET",type:"text",addCRLFType:`
`},{id:3,name:"查询状态",content:"AT+STATUS?",type:"text",addCRLFType:`
`},{id:4,name:"16进制测试",content:"AA BB CC 11 22",type:"hex",addCRLFType:""}]}]),p(e.value[0])};return Qe([e,i],()=>{b()},{deep:!0}),v(),{groups:e,currentGroupId:t,currentGroup:i,autoSendIntervals:s,autoSendInterval:r,sendData:a,toggleAutoSend:l,addItem:u,removeItem:c,addGroup:h,removeGroup:d,renameGroup:f,handleGroupChange:m,importConfig:O,exportConfig:y}}),fM={class:"quick-send"},pM={class:"group-select"},mM={class:"quick-send-actions"},gM={class:"action-group"},OM={class:"quick-send-list"},yM={class:"item-row"},vM={class:"item-settings"},wM={class:"setting-row"},bM={class:"setting-row"},xM={class:"setting-row"},SM={class:"setting-row"},_M=Oe({__name:"SerialQuickSend",setup(n){const e=dM(),t=ae(null),i=a=>{const l=a.target;if(l.files&&l.files[0]){const u=new FileReader;u.onload=c=>{var h;try{const d=JSON.parse((h=c.target)==null?void 0:h.result);e.importConfig(d)}catch{}},u.readAsText(l.files[0])}},s=()=>{const a=e.exportConfig(),l=new Blob([a],{type:"application/json"}),u=URL.createObjectURL(l),c=document.createElement("a");c.href=u,c.download="quick-send-config.json",c.click(),URL.revokeObjectURL(u)},r=()=>{const a=prompt("请输入分组名称");a&&e.addGroup(a)},o=()=>{const a=prompt("请输入新的分组名称",e.currentGroup.name);a&&e.renameGroup(a)};return(a,l)=>{const u=ie("el-option"),c=ie("el-select"),h=ie("el-button"),d=ie("el-button-group"),f=ie("Plus"),p=ie("el-icon"),m=ie("FolderAdd"),O=ie("FolderOpened"),y=ie("el-input"),b=ie("Setting"),v=ie("el-radio-button"),g=ie("el-radio-group"),k=ie("el-input-number"),S=ie("el-tooltip"),Q=ie("el-popover"),T=ie("Delete");return G(),K("div",fM,[q("div",pM,[x(c,{size:"small",modelValue:$(e).currentGroupId,"onUpdate:modelValue":l[0]||(l[0]=P=>$(e).currentGroupId=P),onChange:$(e).handleGroupChange},{default:A(()=>[(G(!0),K(ke,null,Xe($(e).groups,P=>(G(),be(u,{key:P.id,label:P.name,value:P.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue","onChange"]),x(d,{style:{width:"240px"}},{default:A(()=>[x(h,{size:"small",onClick:r,class:"compact-btn"},{default:A(()=>l[3]||(l[3]=[te("新增")])),_:1}),x(h,{size:"small",onClick:o,class:"compact-btn"},{default:A(()=>l[4]||(l[4]=[te("改名")])),_:1}),x(h,{size:"small",onClick:$(e).removeGroup,class:"compact-btn"},{default:A(()=>l[5]||(l[5]=[te("删除")])),_:1},8,["onClick"])]),_:1})]),q("div",mM,[q("div",gM,[x(h,{size:"small",onClick:$(e).addItem,class:"add-item-btn"},{default:A(()=>[x(p,null,{default:A(()=>[x(f)]),_:1}),l[6]||(l[6]=te(" 增加一条 "))]),_:1},8,["onClick"]),q("input",{type:"file",ref_key:"importInput",ref:t,style:{display:"none"},accept:"application/json",onChange:i},null,544),x(d,null,{default:A(()=>[x(h,{size:"small",onClick:l[1]||(l[1]=P=>a.$refs.importInput.click()),class:"compact-btn"},{default:A(()=>[x(p,null,{default:A(()=>[x(m)]),_:1})]),_:1}),x(h,{size:"small",onClick:s,class:"compact-btn"},{default:A(()=>[x(p,null,{default:A(()=>[x(O)]),_:1})]),_:1})]),_:1})])]),q("div",OM,[(G(!0),K(ke,null,Xe($(e).currentGroup.items,P=>(G(),K("div",{key:P.id,class:"mb-2 quick-send-item"},[q("div",yM,[x(h,{size:"small",type:"primary",onClick:B=>$(e).sendData(P)},{default:A(()=>[te(ve(P.name),1)]),_:2},1032,["onClick"]),x(y,{modelValue:P.content,"onUpdate:modelValue":B=>P.content=B,size:"small",placeholder:"请输入发送内容",class:"flex-grow"},null,8,["modelValue","onUpdate:modelValue"]),x(d,null,{default:A(()=>[x(Q,{placement:"bottom",width:300,trigger:"click"},{reference:A(()=>[x(h,{size:"small"},{default:A(()=>[x(p,null,{default:A(()=>[x(b)]),_:1})]),_:1})]),default:A(()=>[q("div",vM,[q("div",wM,[l[7]||(l[7]=q("span",null,"指令名称：",-1)),x(y,{modelValue:P.name,"onUpdate:modelValue":B=>P.name=B,placeholder:"名称",size:"small",style:{width:"120px"}},null,8,["modelValue","onUpdate:modelValue"])]),q("div",bM,[l[10]||(l[10]=q("span",null,"数据类型：",-1)),x(g,{modelValue:P.type,"onUpdate:modelValue":B=>P.type=B,size:"small"},{default:A(()=>[x(v,{value:"text"},{default:A(()=>l[8]||(l[8]=[te("文本")])),_:1}),x(v,{value:"hex"},{default:A(()=>l[9]||(l[9]=[te("HEX")])),_:1})]),_:2},1032,["modelValue","onUpdate:modelValue"])]),q("div",xM,[l[11]||(l[11]=q("span",null,"添加换行：",-1)),x(c,{modelValue:P.addCRLFType,"onUpdate:modelValue":B=>P.addCRLFType=B,size:"small",style:{width:"80px"}},{default:A(()=>[x(u,{value:"",label:"无"}),x(u,{value:`\r
`,label:"CRLF(\\r\\n)"}),x(u,{value:"\r",label:"CR(\\r)"}),x(u,{value:`
`,label:"LF(\\n)"}),x(u,{value:`

`,label:"LF2(\\n\\n)"})]),_:2},1032,["modelValue","onUpdate:modelValue"])]),q("div",SM,[l[12]||(l[12]=q("span",null,"定时发送：",-1)),x(S,{class:"box-item",effect:"dark",content:"间隔(ms)",placement:"bottom"},{default:A(()=>[x(k,{modelValue:$(e).autoSendInterval,"onUpdate:modelValue":l[2]||(l[2]=B=>$(e).autoSendInterval=B),min:100,max:1e4,size:"small",style:{width:"120px"},class:"me-2"},null,8,["modelValue"])]),_:1}),x(h,{size:"small",type:$(e).autoSendIntervals[P.id]?"success":"default",onClick:B=>$(e).toggleAutoSend(P)},{default:A(()=>[te(ve($(e).autoSendIntervals[P.id]?"停止":"开始"),1)]),_:2},1032,["type","onClick"])])])]),_:2},1024),x(h,{size:"small",type:"danger",onClick:B=>$(e).removeItem(P.id)},{default:A(()=>[x(p,null,{default:A(()=>[x(T)]),_:1})]),_:2},1032,["onClick"])]),_:2},1024)])]))),128))])])}}}),$M=yt(_M,[["__scopeId","data-v-a0ddafa7"]]);let nc=[],xO=[];(()=>{let n="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(e=>e?parseInt(e,36):1);for(let e=0,t=0;e<n.length;e++)(e%2?xO:nc).push(t=t+n[e])})();function kM(n){if(n<768)return!1;for(let e=0,t=nc.length;;){let i=e+t>>1;if(n<nc[i])t=i;else if(n>=xO[i])e=i+1;else return!0;if(e==t)return!1}}function vf(n){return n>=127462&&n<=127487}const wf=8205;function PM(n,e,t=!0,i=!0){return(t?SO:QM)(n,e,i)}function SO(n,e,t){if(e==n.length)return e;e&&_O(n.charCodeAt(e))&&$O(n.charCodeAt(e-1))&&e--;let i=Yl(n,e);for(e+=bf(i);e<n.length;){let s=Yl(n,e);if(i==wf||s==wf||t&&kM(s))e+=bf(s),i=s;else if(vf(s)){let r=0,o=e-2;for(;o>=0&&vf(Yl(n,o));)r++,o-=2;if(r%2==0)break;e+=2}else break}return e}function QM(n,e,t){for(;e>0;){let i=SO(n,e-2,t);if(i<e)return i;e--}return 0}function Yl(n,e){let t=n.charCodeAt(e);if(!$O(t)||e+1==n.length)return t;let i=n.charCodeAt(e+1);return _O(i)?(t-55296<<10)+(i-56320)+65536:t}function _O(n){return n>=56320&&n<57344}function $O(n){return n>=55296&&n<56320}function bf(n){return n<65536?1:2}class De{lineAt(e){if(e<0||e>this.length)throw new RangeError(`Invalid position ${e} in document of length ${this.length}`);return this.lineInner(e,!1,1,0)}line(e){if(e<1||e>this.lines)throw new RangeError(`Invalid line number ${e} in ${this.lines}-line document`);return this.lineInner(e,!0,1,0)}replace(e,t,i){[e,t]=Ts(this,e,t);let s=[];return this.decompose(0,e,s,2),i.length&&i.decompose(0,i.length,s,3),this.decompose(t,this.length,s,1),fn.from(s,this.length-(t-e)+i.length)}append(e){return this.replace(this.length,this.length,e)}slice(e,t=this.length){[e,t]=Ts(this,e,t);let i=[];return this.decompose(e,t,i,0),fn.from(i,t-e)}eq(e){if(e==this)return!0;if(e.length!=this.length||e.lines!=this.lines)return!1;let t=this.scanIdentical(e,1),i=this.length-this.scanIdentical(e,-1),s=new Or(this),r=new Or(e);for(let o=t,a=t;;){if(s.next(o),r.next(o),o=0,s.lineBreak!=r.lineBreak||s.done!=r.done||s.value!=r.value)return!1;if(a+=s.value.length,s.done||a>=i)return!0}}iter(e=1){return new Or(this,e)}iterRange(e,t=this.length){return new kO(this,e,t)}iterLines(e,t){let i;if(e==null)i=this.iter();else{t==null&&(t=this.lines+1);let s=this.line(e).from;i=this.iterRange(s,Math.max(s,t==this.lines+1?this.length:t<=1?0:this.line(t-1).to))}return new PO(i)}toString(){return this.sliceString(0)}toJSON(){let e=[];return this.flatten(e),e}constructor(){}static of(e){if(e.length==0)throw new RangeError("A document must have at least one line");return e.length==1&&!e[0]?De.empty:e.length<=32?new et(e):fn.from(et.split(e,[]))}}class et extends De{constructor(e,t=TM(e)){super(),this.text=e,this.length=t}get lines(){return this.text.length}get children(){return null}lineInner(e,t,i,s){for(let r=0;;r++){let o=this.text[r],a=s+o.length;if((t?i:a)>=e)return new AM(s,a,i,o);s=a+1,i++}}decompose(e,t,i,s){let r=e<=0&&t>=this.length?this:new et(xf(this.text,e,t),Math.min(t,this.length)-Math.max(0,e));if(s&1){let o=i.pop(),a=Yo(r.text,o.text.slice(),0,r.length);if(a.length<=32)i.push(new et(a,o.length+r.length));else{let l=a.length>>1;i.push(new et(a.slice(0,l)),new et(a.slice(l)))}}else i.push(r)}replace(e,t,i){if(!(i instanceof et))return super.replace(e,t,i);[e,t]=Ts(this,e,t);let s=Yo(this.text,Yo(i.text,xf(this.text,0,e)),t),r=this.length+i.length-(t-e);return s.length<=32?new et(s,r):fn.from(et.split(s,[]),r)}sliceString(e,t=this.length,i=`
`){[e,t]=Ts(this,e,t);let s="";for(let r=0,o=0;r<=t&&o<this.text.length;o++){let a=this.text[o],l=r+a.length;r>e&&o&&(s+=i),e<l&&t>r&&(s+=a.slice(Math.max(0,e-r),t-r)),r=l+1}return s}flatten(e){for(let t of this.text)e.push(t)}scanIdentical(){return 0}static split(e,t){let i=[],s=-1;for(let r of e)i.push(r),s+=r.length+1,i.length==32&&(t.push(new et(i,s)),i=[],s=-1);return s>-1&&t.push(new et(i,s)),t}}class fn extends De{constructor(e,t){super(),this.children=e,this.length=t,this.lines=0;for(let i of e)this.lines+=i.lines}lineInner(e,t,i,s){for(let r=0;;r++){let o=this.children[r],a=s+o.length,l=i+o.lines-1;if((t?l:a)>=e)return o.lineInner(e,t,i,s);s=a+1,i=l+1}}decompose(e,t,i,s){for(let r=0,o=0;o<=t&&r<this.children.length;r++){let a=this.children[r],l=o+a.length;if(e<=l&&t>=o){let u=s&((o<=e?1:0)|(l>=t?2:0));o>=e&&l<=t&&!u?i.push(a):a.decompose(e-o,t-o,i,u)}o=l+1}}replace(e,t,i){if([e,t]=Ts(this,e,t),i.lines<this.lines)for(let s=0,r=0;s<this.children.length;s++){let o=this.children[s],a=r+o.length;if(e>=r&&t<=a){let l=o.replace(e-r,t-r,i),u=this.lines-o.lines+l.lines;if(l.lines<u>>4&&l.lines>u>>6){let c=this.children.slice();return c[s]=l,new fn(c,this.length-(t-e)+i.length)}return super.replace(r,a,l)}r=a+1}return super.replace(e,t,i)}sliceString(e,t=this.length,i=`
`){[e,t]=Ts(this,e,t);let s="";for(let r=0,o=0;r<this.children.length&&o<=t;r++){let a=this.children[r],l=o+a.length;o>e&&r&&(s+=i),e<l&&t>o&&(s+=a.sliceString(e-o,t-o,i)),o=l+1}return s}flatten(e){for(let t of this.children)t.flatten(e)}scanIdentical(e,t){if(!(e instanceof fn))return 0;let i=0,[s,r,o,a]=t>0?[0,0,this.children.length,e.children.length]:[this.children.length-1,e.children.length-1,-1,-1];for(;;s+=t,r+=t){if(s==o||r==a)return i;let l=this.children[s],u=e.children[r];if(l!=u)return i+l.scanIdentical(u,t);i+=l.length+1}}static from(e,t=e.reduce((i,s)=>i+s.length+1,-1)){let i=0;for(let f of e)i+=f.lines;if(i<32){let f=[];for(let p of e)p.flatten(f);return new et(f,t)}let s=Math.max(32,i>>5),r=s<<1,o=s>>1,a=[],l=0,u=-1,c=[];function h(f){let p;if(f.lines>r&&f instanceof fn)for(let m of f.children)h(m);else f.lines>o&&(l>o||!l)?(d(),a.push(f)):f instanceof et&&l&&(p=c[c.length-1])instanceof et&&f.lines+p.lines<=32?(l+=f.lines,u+=f.length+1,c[c.length-1]=new et(p.text.concat(f.text),p.length+1+f.length)):(l+f.lines>s&&d(),l+=f.lines,u+=f.length+1,c.push(f))}function d(){l!=0&&(a.push(c.length==1?c[0]:fn.from(c,u)),u=-1,l=c.length=0)}for(let f of e)h(f);return d(),a.length==1?a[0]:new fn(a,t)}}De.empty=new et([""],0);function TM(n){let e=-1;for(let t of n)e+=t.length+1;return e}function Yo(n,e,t=0,i=1e9){for(let s=0,r=0,o=!0;r<n.length&&s<=i;r++){let a=n[r],l=s+a.length;l>=t&&(l>i&&(a=a.slice(0,i-s)),s<t&&(a=a.slice(t-s)),o?(e[e.length-1]+=a,o=!1):e.push(a)),s=l+1}return e}function xf(n,e,t){return Yo(n,[""],e,t)}class Or{constructor(e,t=1){this.dir=t,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[e],this.offsets=[t>0?1:(e instanceof et?e.text.length:e.children.length)<<1]}nextInner(e,t){for(this.done=this.lineBreak=!1;;){let i=this.nodes.length-1,s=this.nodes[i],r=this.offsets[i],o=r>>1,a=s instanceof et?s.text.length:s.children.length;if(o==(t>0?a:0)){if(i==0)return this.done=!0,this.value="",this;t>0&&this.offsets[i-1]++,this.nodes.pop(),this.offsets.pop()}else if((r&1)==(t>0?0:1)){if(this.offsets[i]+=t,e==0)return this.lineBreak=!0,this.value=`
`,this;e--}else if(s instanceof et){let l=s.text[o+(t<0?-1:0)];if(this.offsets[i]+=t,l.length>Math.max(0,e))return this.value=e==0?l:t>0?l.slice(e):l.slice(0,l.length-e),this;e-=l.length}else{let l=s.children[o+(t<0?-1:0)];e>l.length?(e-=l.length,this.offsets[i]+=t):(t<0&&this.offsets[i]--,this.nodes.push(l),this.offsets.push(t>0?1:(l instanceof et?l.text.length:l.children.length)<<1))}}}next(e=0){return e<0&&(this.nextInner(-e,-this.dir),e=this.value.length),this.nextInner(e,this.dir)}}class kO{constructor(e,t,i){this.value="",this.done=!1,this.cursor=new Or(e,t>i?-1:1),this.pos=t>i?e.length:0,this.from=Math.min(t,i),this.to=Math.max(t,i)}nextInner(e,t){if(t<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;e+=Math.max(0,t<0?this.pos-this.to:this.from-this.pos);let i=t<0?this.pos-this.from:this.to-this.pos;e>i&&(e=i),i-=e;let{value:s}=this.cursor.next(e);return this.pos+=(s.length+e)*t,this.value=s.length<=i?s:t<0?s.slice(s.length-i):s.slice(0,i),this.done=!this.value,this}next(e=0){return e<0?e=Math.max(e,this.from-this.pos):e>0&&(e=Math.min(e,this.to-this.pos)),this.nextInner(e,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&this.value!=""}}class PO{constructor(e){this.inner=e,this.afterBreak=!0,this.value="",this.done=!1}next(e=0){let{done:t,lineBreak:i,value:s}=this.inner.next(e);return t&&this.afterBreak?(this.value="",this.afterBreak=!1):t?(this.done=!0,this.value=""):i?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=s,this.afterBreak=!1),this}get lineBreak(){return!1}}typeof Symbol<"u"&&(De.prototype[Symbol.iterator]=function(){return this.iter()},Or.prototype[Symbol.iterator]=kO.prototype[Symbol.iterator]=PO.prototype[Symbol.iterator]=function(){return this});class AM{constructor(e,t,i,s){this.from=e,this.to=t,this.number=i,this.text=s}get length(){return this.to-this.from}}function Ts(n,e,t){return e=Math.max(0,Math.min(n.length,e)),[e,Math.max(e,Math.min(n.length,t))]}function bt(n,e,t=!0,i=!0){return PM(n,e,t,i)}function CM(n){return n>=56320&&n<57344}function EM(n){return n>=55296&&n<56320}function MM(n,e){let t=n.charCodeAt(e);if(!EM(t)||e+1==n.length)return t;let i=n.charCodeAt(e+1);return CM(i)?(t-55296<<10)+(i-56320)+65536:t}function RM(n){return n<65536?1:2}const ic=/\r\n?|\n/;var wt=function(n){return n[n.Simple=0]="Simple",n[n.TrackDel=1]="TrackDel",n[n.TrackBefore=2]="TrackBefore",n[n.TrackAfter=3]="TrackAfter",n}(wt||(wt={}));class Nn{constructor(e){this.sections=e}get length(){let e=0;for(let t=0;t<this.sections.length;t+=2)e+=this.sections[t];return e}get newLength(){let e=0;for(let t=0;t<this.sections.length;t+=2){let i=this.sections[t+1];e+=i<0?this.sections[t]:i}return e}get empty(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0}iterGaps(e){for(let t=0,i=0,s=0;t<this.sections.length;){let r=this.sections[t++],o=this.sections[t++];o<0?(e(i,s,r),s+=r):s+=o,i+=r}}iterChangedRanges(e,t=!1){sc(this,e,t)}get invertedDesc(){let e=[];for(let t=0;t<this.sections.length;){let i=this.sections[t++],s=this.sections[t++];s<0?e.push(i,s):e.push(s,i)}return new Nn(e)}composeDesc(e){return this.empty?e:e.empty?this:QO(this,e)}mapDesc(e,t=!1){return e.empty?this:rc(this,e,t)}mapPos(e,t=-1,i=wt.Simple){let s=0,r=0;for(let o=0;o<this.sections.length;){let a=this.sections[o++],l=this.sections[o++],u=s+a;if(l<0){if(u>e)return r+(e-s);r+=a}else{if(i!=wt.Simple&&u>=e&&(i==wt.TrackDel&&s<e&&u>e||i==wt.TrackBefore&&s<e||i==wt.TrackAfter&&u>e))return null;if(u>e||u==e&&t<0&&!a)return e==s||t<0?r:r+l;r+=l}s=u}if(e>s)throw new RangeError(`Position ${e} is out of range for changeset of length ${s}`);return r}touchesRange(e,t=e){for(let i=0,s=0;i<this.sections.length&&s<=t;){let r=this.sections[i++],o=this.sections[i++],a=s+r;if(o>=0&&s<=t&&a>=e)return s<e&&a>t?"cover":!0;s=a}return!1}toString(){let e="";for(let t=0;t<this.sections.length;){let i=this.sections[t++],s=this.sections[t++];e+=(e?" ":"")+i+(s>=0?":"+s:"")}return e}toJSON(){return this.sections}static fromJSON(e){if(!Array.isArray(e)||e.length%2||e.some(t=>typeof t!="number"))throw new RangeError("Invalid JSON representation of ChangeDesc");return new Nn(e)}static create(e){return new Nn(e)}}class ct extends Nn{constructor(e,t){super(e),this.inserted=t}apply(e){if(this.length!=e.length)throw new RangeError("Applying change set to a document with the wrong length");return sc(this,(t,i,s,r,o)=>e=e.replace(s,s+(i-t),o),!1),e}mapDesc(e,t=!1){return rc(this,e,t,!0)}invert(e){let t=this.sections.slice(),i=[];for(let s=0,r=0;s<t.length;s+=2){let o=t[s],a=t[s+1];if(a>=0){t[s]=a,t[s+1]=o;let l=s>>1;for(;i.length<l;)i.push(De.empty);i.push(o?e.slice(r,r+o):De.empty)}r+=o}return new ct(t,i)}compose(e){return this.empty?e:e.empty?this:QO(this,e,!0)}map(e,t=!1){return e.empty?this:rc(this,e,t,!0)}iterChanges(e,t=!1){sc(this,e,t)}get desc(){return Nn.create(this.sections)}filter(e){let t=[],i=[],s=[],r=new Rr(this);e:for(let o=0,a=0;;){let l=o==e.length?1e9:e[o++];for(;a<l||a==l&&r.len==0;){if(r.done)break e;let c=Math.min(r.len,l-a);pt(s,c,-1);let h=r.ins==-1?-1:r.off==0?r.ins:0;pt(t,c,h),h>0&&ai(i,t,r.text),r.forward(c),a+=c}let u=e[o++];for(;a<u;){if(r.done)break e;let c=Math.min(r.len,u-a);pt(t,c,-1),pt(s,c,r.ins==-1?-1:r.off==0?r.ins:0),r.forward(c),a+=c}}return{changes:new ct(t,i),filtered:Nn.create(s)}}toJSON(){let e=[];for(let t=0;t<this.sections.length;t+=2){let i=this.sections[t],s=this.sections[t+1];s<0?e.push(i):s==0?e.push([i]):e.push([i].concat(this.inserted[t>>1].toJSON()))}return e}static of(e,t,i){let s=[],r=[],o=0,a=null;function l(c=!1){if(!c&&!s.length)return;o<t&&pt(s,t-o,-1);let h=new ct(s,r);a=a?a.compose(h.map(a)):h,s=[],r=[],o=0}function u(c){if(Array.isArray(c))for(let h of c)u(h);else if(c instanceof ct){if(c.length!=t)throw new RangeError(`Mismatched change set length (got ${c.length}, expected ${t})`);l(),a=a?a.compose(c.map(a)):c}else{let{from:h,to:d=h,insert:f}=c;if(h>d||h<0||d>t)throw new RangeError(`Invalid change range ${h} to ${d} (in doc of length ${t})`);let p=f?typeof f=="string"?De.of(f.split(i||ic)):f:De.empty,m=p.length;if(h==d&&m==0)return;h<o&&l(),h>o&&pt(s,h-o,-1),pt(s,d-h,m),ai(r,s,p),o=d}}return u(e),l(!a),a}static empty(e){return new ct(e?[e,-1]:[],[])}static fromJSON(e){if(!Array.isArray(e))throw new RangeError("Invalid JSON representation of ChangeSet");let t=[],i=[];for(let s=0;s<e.length;s++){let r=e[s];if(typeof r=="number")t.push(r,-1);else{if(!Array.isArray(r)||typeof r[0]!="number"||r.some((o,a)=>a&&typeof o!="string"))throw new RangeError("Invalid JSON representation of ChangeSet");if(r.length==1)t.push(r[0],0);else{for(;i.length<s;)i.push(De.empty);i[s]=De.of(r.slice(1)),t.push(r[0],i[s].length)}}}return new ct(t,i)}static createSet(e,t){return new ct(e,t)}}function pt(n,e,t,i=!1){if(e==0&&t<=0)return;let s=n.length-2;s>=0&&t<=0&&t==n[s+1]?n[s]+=e:s>=0&&e==0&&n[s]==0?n[s+1]+=t:i?(n[s]+=e,n[s+1]+=t):n.push(e,t)}function ai(n,e,t){if(t.length==0)return;let i=e.length-2>>1;if(i<n.length)n[n.length-1]=n[n.length-1].append(t);else{for(;n.length<i;)n.push(De.empty);n.push(t)}}function sc(n,e,t){let i=n.inserted;for(let s=0,r=0,o=0;o<n.sections.length;){let a=n.sections[o++],l=n.sections[o++];if(l<0)s+=a,r+=a;else{let u=s,c=r,h=De.empty;for(;u+=a,c+=l,l&&i&&(h=h.append(i[o-2>>1])),!(t||o==n.sections.length||n.sections[o+1]<0);)a=n.sections[o++],l=n.sections[o++];e(s,u,r,c,h),s=u,r=c}}}function rc(n,e,t,i=!1){let s=[],r=i?[]:null,o=new Rr(n),a=new Rr(e);for(let l=-1;;){if(o.done&&a.len||a.done&&o.len)throw new Error("Mismatched change set lengths");if(o.ins==-1&&a.ins==-1){let u=Math.min(o.len,a.len);pt(s,u,-1),o.forward(u),a.forward(u)}else if(a.ins>=0&&(o.ins<0||l==o.i||o.off==0&&(a.len<o.len||a.len==o.len&&!t))){let u=a.len;for(pt(s,a.ins,-1);u;){let c=Math.min(o.len,u);o.ins>=0&&l<o.i&&o.len<=c&&(pt(s,0,o.ins),r&&ai(r,s,o.text),l=o.i),o.forward(c),u-=c}a.next()}else if(o.ins>=0){let u=0,c=o.len;for(;c;)if(a.ins==-1){let h=Math.min(c,a.len);u+=h,c-=h,a.forward(h)}else if(a.ins==0&&a.len<c)c-=a.len,a.next();else break;pt(s,u,l<o.i?o.ins:0),r&&l<o.i&&ai(r,s,o.text),l=o.i,o.forward(o.len-c)}else{if(o.done&&a.done)return r?ct.createSet(s,r):Nn.create(s);throw new Error("Mismatched change set lengths")}}}function QO(n,e,t=!1){let i=[],s=t?[]:null,r=new Rr(n),o=new Rr(e);for(let a=!1;;){if(r.done&&o.done)return s?ct.createSet(i,s):Nn.create(i);if(r.ins==0)pt(i,r.len,0,a),r.next();else if(o.len==0&&!o.done)pt(i,0,o.ins,a),s&&ai(s,i,o.text),o.next();else{if(r.done||o.done)throw new Error("Mismatched change set lengths");{let l=Math.min(r.len2,o.len),u=i.length;if(r.ins==-1){let c=o.ins==-1?-1:o.off?0:o.ins;pt(i,l,c,a),s&&c&&ai(s,i,o.text)}else o.ins==-1?(pt(i,r.off?0:r.len,l,a),s&&ai(s,i,r.textBit(l))):(pt(i,r.off?0:r.len,o.off?0:o.ins,a),s&&!o.off&&ai(s,i,o.text));a=(r.ins>l||o.ins>=0&&o.len>l)&&(a||i.length>u),r.forward2(l),o.forward(l)}}}}class Rr{constructor(e){this.set=e,this.i=0,this.next()}next(){let{sections:e}=this.set;this.i<e.length?(this.len=e[this.i++],this.ins=e[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return this.ins==-2}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:e}=this.set,t=this.i-2>>1;return t>=e.length?De.empty:e[t]}textBit(e){let{inserted:t}=this.set,i=this.i-2>>1;return i>=t.length&&!e?De.empty:t[i].slice(this.off,e==null?void 0:this.off+e)}forward(e){e==this.len?this.next():(this.len-=e,this.off+=e)}forward2(e){this.ins==-1?this.forward(e):e==this.ins?this.next():(this.ins-=e,this.off+=e)}}class Zi{constructor(e,t,i){this.from=e,this.to=t,this.flags=i}get anchor(){return this.flags&32?this.to:this.from}get head(){return this.flags&32?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return this.flags&8?-1:this.flags&16?1:0}get bidiLevel(){let e=this.flags&7;return e==7?null:e}get goalColumn(){let e=this.flags>>6;return e==16777215?void 0:e}map(e,t=-1){let i,s;return this.empty?i=s=e.mapPos(this.from,t):(i=e.mapPos(this.from,1),s=e.mapPos(this.to,-1)),i==this.from&&s==this.to?this:new Zi(i,s,this.flags)}extend(e,t=e){if(e<=this.anchor&&t>=this.anchor)return ee.range(e,t);let i=Math.abs(e-this.anchor)>Math.abs(t-this.anchor)?e:t;return ee.range(this.anchor,i)}eq(e,t=!1){return this.anchor==e.anchor&&this.head==e.head&&(!t||!this.empty||this.assoc==e.assoc)}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(e){if(!e||typeof e.anchor!="number"||typeof e.head!="number")throw new RangeError("Invalid JSON representation for SelectionRange");return ee.range(e.anchor,e.head)}static create(e,t,i){return new Zi(e,t,i)}}class ee{constructor(e,t){this.ranges=e,this.mainIndex=t}map(e,t=-1){return e.empty?this:ee.create(this.ranges.map(i=>i.map(e,t)),this.mainIndex)}eq(e,t=!1){if(this.ranges.length!=e.ranges.length||this.mainIndex!=e.mainIndex)return!1;for(let i=0;i<this.ranges.length;i++)if(!this.ranges[i].eq(e.ranges[i],t))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return this.ranges.length==1?this:new ee([this.main],0)}addRange(e,t=!0){return ee.create([e].concat(this.ranges),t?0:this.mainIndex+1)}replaceRange(e,t=this.mainIndex){let i=this.ranges.slice();return i[t]=e,ee.create(i,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(e=>e.toJSON()),main:this.mainIndex}}static fromJSON(e){if(!e||!Array.isArray(e.ranges)||typeof e.main!="number"||e.main>=e.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new ee(e.ranges.map(t=>Zi.fromJSON(t)),e.main)}static single(e,t=e){return new ee([ee.range(e,t)],0)}static create(e,t=0){if(e.length==0)throw new RangeError("A selection needs at least one range");for(let i=0,s=0;s<e.length;s++){let r=e[s];if(r.empty?r.from<=i:r.from<i)return ee.normalized(e.slice(),t);i=r.to}return new ee(e,t)}static cursor(e,t=0,i,s){return Zi.create(e,e,(t==0?0:t<0?8:16)|(i==null?7:Math.min(6,i))|(s??16777215)<<6)}static range(e,t,i,s){let r=(i??16777215)<<6|(s==null?7:Math.min(6,s));return t<e?Zi.create(t,e,48|r):Zi.create(e,t,(t>e?8:0)|r)}static normalized(e,t=0){let i=e[t];e.sort((s,r)=>s.from-r.from),t=e.indexOf(i);for(let s=1;s<e.length;s++){let r=e[s],o=e[s-1];if(r.empty?r.from<=o.to:r.from<o.to){let a=o.from,l=Math.max(r.to,o.to);s<=t&&t--,e.splice(--s,2,r.anchor>r.head?ee.range(l,a):ee.range(a,l))}}return new ee(e,t)}}function TO(n,e){for(let t of n.ranges)if(t.to>e)throw new RangeError("Selection points outside of document")}let gh=0;class ge{constructor(e,t,i,s,r){this.combine=e,this.compareInput=t,this.compare=i,this.isStatic=s,this.id=gh++,this.default=e([]),this.extensions=typeof r=="function"?r(this):r}get reader(){return this}static define(e={}){return new ge(e.combine||(t=>t),e.compareInput||((t,i)=>t===i),e.compare||(e.combine?(t,i)=>t===i:Oh),!!e.static,e.enables)}of(e){return new Go([],this,0,e)}compute(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new Go(e,this,1,t)}computeN(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new Go(e,this,2,t)}from(e,t){return t||(t=i=>i),this.compute([e],i=>t(i.field(e)))}}function Oh(n,e){return n==e||n.length==e.length&&n.every((t,i)=>t===e[i])}class Go{constructor(e,t,i,s){this.dependencies=e,this.facet=t,this.type=i,this.value=s,this.id=gh++}dynamicSlot(e){var t;let i=this.value,s=this.facet.compareInput,r=this.id,o=e[r]>>1,a=this.type==2,l=!1,u=!1,c=[];for(let h of this.dependencies)h=="doc"?l=!0:h=="selection"?u=!0:((t=e[h.id])!==null&&t!==void 0?t:1)&1||c.push(e[h.id]);return{create(h){return h.values[o]=i(h),1},update(h,d){if(l&&d.docChanged||u&&(d.docChanged||d.selection)||oc(h,c)){let f=i(h);if(a?!Sf(f,h.values[o],s):!s(f,h.values[o]))return h.values[o]=f,1}return 0},reconfigure:(h,d)=>{let f,p=d.config.address[r];if(p!=null){let m=Pa(d,p);if(this.dependencies.every(O=>O instanceof ge?d.facet(O)===h.facet(O):O instanceof yi?d.field(O,!1)==h.field(O,!1):!0)||(a?Sf(f=i(h),m,s):s(f=i(h),m)))return h.values[o]=m,0}else f=i(h);return h.values[o]=f,1}}}}function Sf(n,e,t){if(n.length!=e.length)return!1;for(let i=0;i<n.length;i++)if(!t(n[i],e[i]))return!1;return!0}function oc(n,e){let t=!1;for(let i of e)yr(n,i)&1&&(t=!0);return t}function ZM(n,e,t){let i=t.map(l=>n[l.id]),s=t.map(l=>l.type),r=i.filter(l=>!(l&1)),o=n[e.id]>>1;function a(l){let u=[];for(let c=0;c<i.length;c++){let h=Pa(l,i[c]);if(s[c]==2)for(let d of h)u.push(d);else u.push(h)}return e.combine(u)}return{create(l){for(let u of i)yr(l,u);return l.values[o]=a(l),1},update(l,u){if(!oc(l,r))return 0;let c=a(l);return e.compare(c,l.values[o])?0:(l.values[o]=c,1)},reconfigure(l,u){let c=oc(l,i),h=u.config.facets[e.id],d=u.facet(e);if(h&&!c&&Oh(t,h))return l.values[o]=d,0;let f=a(l);return e.compare(f,d)?(l.values[o]=d,0):(l.values[o]=f,1)}}}const vo=ge.define({static:!0});class yi{constructor(e,t,i,s,r){this.id=e,this.createF=t,this.updateF=i,this.compareF=s,this.spec=r,this.provides=void 0}static define(e){let t=new yi(gh++,e.create,e.update,e.compare||((i,s)=>i===s),e);return e.provide&&(t.provides=e.provide(t)),t}create(e){let t=e.facet(vo).find(i=>i.field==this);return((t==null?void 0:t.create)||this.createF)(e)}slot(e){let t=e[this.id]>>1;return{create:i=>(i.values[t]=this.create(i),1),update:(i,s)=>{let r=i.values[t],o=this.updateF(r,s);return this.compareF(r,o)?0:(i.values[t]=o,1)},reconfigure:(i,s)=>{let r=i.facet(vo),o=s.facet(vo),a;return(a=r.find(l=>l.field==this))&&a!=o.find(l=>l.field==this)?(i.values[t]=a.create(i),1):s.config.address[this.id]!=null?(i.values[t]=s.field(this),0):(i.values[t]=this.create(i),1)}}}init(e){return[this,vo.of({field:this,create:e})]}get extension(){return this}}const Pi={lowest:4,low:3,default:2,high:1,highest:0};function Us(n){return e=>new AO(e,n)}const cl={highest:Us(Pi.highest),high:Us(Pi.high),default:Us(Pi.default),low:Us(Pi.low),lowest:Us(Pi.lowest)};class AO{constructor(e,t){this.inner=e,this.prec=t}}class hl{of(e){return new ac(this,e)}reconfigure(e){return hl.reconfigure.of({compartment:this,extension:e})}get(e){return e.config.compartments.get(this)}}class ac{constructor(e,t){this.compartment=e,this.inner=t}}class ka{constructor(e,t,i,s,r,o){for(this.base=e,this.compartments=t,this.dynamicSlots=i,this.address=s,this.staticValues=r,this.facets=o,this.statusTemplate=[];this.statusTemplate.length<i.length;)this.statusTemplate.push(0)}staticFacet(e){let t=this.address[e.id];return t==null?e.default:this.staticValues[t>>1]}static resolve(e,t,i){let s=[],r=Object.create(null),o=new Map;for(let d of DM(e,t,o))d instanceof yi?s.push(d):(r[d.facet.id]||(r[d.facet.id]=[])).push(d);let a=Object.create(null),l=[],u=[];for(let d of s)a[d.id]=u.length<<1,u.push(f=>d.slot(f));let c=i==null?void 0:i.config.facets;for(let d in r){let f=r[d],p=f[0].facet,m=c&&c[d]||[];if(f.every(O=>O.type==0))if(a[p.id]=l.length<<1|1,Oh(m,f))l.push(i.facet(p));else{let O=p.combine(f.map(y=>y.value));l.push(i&&p.compare(O,i.facet(p))?i.facet(p):O)}else{for(let O of f)O.type==0?(a[O.id]=l.length<<1|1,l.push(O.value)):(a[O.id]=u.length<<1,u.push(y=>O.dynamicSlot(y)));a[p.id]=u.length<<1,u.push(O=>ZM(O,p,f))}}let h=u.map(d=>d(a));return new ka(e,o,h,a,l,r)}}function DM(n,e,t){let i=[[],[],[],[],[]],s=new Map;function r(o,a){let l=s.get(o);if(l!=null){if(l<=a)return;let u=i[l].indexOf(o);u>-1&&i[l].splice(u,1),o instanceof ac&&t.delete(o.compartment)}if(s.set(o,a),Array.isArray(o))for(let u of o)r(u,a);else if(o instanceof ac){if(t.has(o.compartment))throw new RangeError("Duplicate use of compartment in extensions");let u=e.get(o.compartment)||o.inner;t.set(o.compartment,u),r(u,a)}else if(o instanceof AO)r(o.inner,o.prec);else if(o instanceof yi)i[a].push(o),o.provides&&r(o.provides,a);else if(o instanceof Go)i[a].push(o),o.facet.extensions&&r(o.facet.extensions,Pi.default);else{let u=o.extension;if(!u)throw new Error(`Unrecognized extension value in extension set (${o}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);r(u,a)}}return r(n,Pi.default),i.reduce((o,a)=>o.concat(a))}function yr(n,e){if(e&1)return 2;let t=e>>1,i=n.status[t];if(i==4)throw new Error("Cyclic dependency between fields and/or facets");if(i&2)return i;n.status[t]=4;let s=n.computeSlot(n,n.config.dynamicSlots[t]);return n.status[t]=2|s}function Pa(n,e){return e&1?n.config.staticValues[e>>1]:n.values[e>>1]}const CO=ge.define(),lc=ge.define({combine:n=>n.some(e=>e),static:!0}),EO=ge.define({combine:n=>n.length?n[0]:void 0,static:!0}),MO=ge.define(),RO=ge.define(),ZO=ge.define(),DO=ge.define({combine:n=>n.length?n[0]:!1});class Ki{constructor(e,t){this.type=e,this.value=t}static define(){return new NM}}class NM{of(e){return new Ki(this,e)}}class IM{constructor(e){this.map=e}of(e){return new Fe(this,e)}}class Fe{constructor(e,t){this.type=e,this.value=t}map(e){let t=this.type.map(this.value,e);return t===void 0?void 0:t==this.value?this:new Fe(this.type,t)}is(e){return this.type==e}static define(e={}){return new IM(e.map||(t=>t))}static mapEffects(e,t){if(!e.length)return e;let i=[];for(let s of e){let r=s.map(t);r&&i.push(r)}return i}}Fe.reconfigure=Fe.define();Fe.appendConfig=Fe.define();class ft{constructor(e,t,i,s,r,o){this.startState=e,this.changes=t,this.selection=i,this.effects=s,this.annotations=r,this.scrollIntoView=o,this._doc=null,this._state=null,i&&TO(i,t.newLength),r.some(a=>a.type==ft.time)||(this.annotations=r.concat(ft.time.of(Date.now())))}static create(e,t,i,s,r,o){return new ft(e,t,i,s,r,o)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(e){for(let t of this.annotations)if(t.type==e)return t.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(e){let t=this.annotation(ft.userEvent);return!!(t&&(t==e||t.length>e.length&&t.slice(0,e.length)==e&&t[e.length]=="."))}}ft.time=Ki.define();ft.userEvent=Ki.define();ft.addToHistory=Ki.define();ft.remote=Ki.define();function LM(n,e){let t=[];for(let i=0,s=0;;){let r,o;if(i<n.length&&(s==e.length||e[s]>=n[i]))r=n[i++],o=n[i++];else if(s<e.length)r=e[s++],o=e[s++];else return t;!t.length||t[t.length-1]<r?t.push(r,o):t[t.length-1]<o&&(t[t.length-1]=o)}}function NO(n,e,t){var i;let s,r,o;return t?(s=e.changes,r=ct.empty(e.changes.length),o=n.changes.compose(e.changes)):(s=e.changes.map(n.changes),r=n.changes.mapDesc(e.changes,!0),o=n.changes.compose(s)),{changes:o,selection:e.selection?e.selection.map(r):(i=n.selection)===null||i===void 0?void 0:i.map(s),effects:Fe.mapEffects(n.effects,s).concat(Fe.mapEffects(e.effects,r)),annotations:n.annotations.length?n.annotations.concat(e.annotations):e.annotations,scrollIntoView:n.scrollIntoView||e.scrollIntoView}}function uc(n,e,t){let i=e.selection,s=gs(e.annotations);return e.userEvent&&(s=s.concat(ft.userEvent.of(e.userEvent))),{changes:e.changes instanceof ct?e.changes:ct.of(e.changes||[],t,n.facet(EO)),selection:i&&(i instanceof ee?i:ee.single(i.anchor,i.head)),effects:gs(e.effects),annotations:s,scrollIntoView:!!e.scrollIntoView}}function IO(n,e,t){let i=uc(n,e.length?e[0]:{},n.doc.length);e.length&&e[0].filter===!1&&(t=!1);for(let r=1;r<e.length;r++){e[r].filter===!1&&(t=!1);let o=!!e[r].sequential;i=NO(i,uc(n,e[r],o?i.changes.newLength:n.doc.length),o)}let s=ft.create(n,i.changes,i.selection,i.effects,i.annotations,i.scrollIntoView);return VM(t?zM(s):s)}function zM(n){let e=n.startState,t=!0;for(let s of e.facet(MO)){let r=s(n);if(r===!1){t=!1;break}Array.isArray(r)&&(t=t===!0?r:LM(t,r))}if(t!==!0){let s,r;if(t===!1)r=n.changes.invertedDesc,s=ct.empty(e.doc.length);else{let o=n.changes.filter(t);s=o.changes,r=o.filtered.mapDesc(o.changes).invertedDesc}n=ft.create(e,s,n.selection&&n.selection.map(r),Fe.mapEffects(n.effects,r),n.annotations,n.scrollIntoView)}let i=e.facet(RO);for(let s=i.length-1;s>=0;s--){let r=i[s](n);r instanceof ft?n=r:Array.isArray(r)&&r.length==1&&r[0]instanceof ft?n=r[0]:n=IO(e,gs(r),!1)}return n}function VM(n){let e=n.startState,t=e.facet(ZO),i=n;for(let s=t.length-1;s>=0;s--){let r=t[s](n);r&&Object.keys(r).length&&(i=NO(i,uc(e,r,n.changes.newLength),!0))}return i==n?n:ft.create(e,n.changes,n.selection,i.effects,i.annotations,i.scrollIntoView)}const XM=[];function gs(n){return n==null?XM:Array.isArray(n)?n:[n]}var Zn=function(n){return n[n.Word=0]="Word",n[n.Space=1]="Space",n[n.Other=2]="Other",n}(Zn||(Zn={}));const BM=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let cc;try{cc=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch{}function UM(n){if(cc)return cc.test(n);for(let e=0;e<n.length;e++){let t=n[e];if(/\w/.test(t)||t>""&&(t.toUpperCase()!=t.toLowerCase()||BM.test(t)))return!0}return!1}function jM(n){return e=>{if(!/\S/.test(e))return Zn.Space;if(UM(e))return Zn.Word;for(let t=0;t<n.length;t++)if(e.indexOf(n[t])>-1)return Zn.Word;return Zn.Other}}class Ne{constructor(e,t,i,s,r,o){this.config=e,this.doc=t,this.selection=i,this.values=s,this.status=e.statusTemplate.slice(),this.computeSlot=r,o&&(o._state=this);for(let a=0;a<this.config.dynamicSlots.length;a++)yr(this,a<<1);this.computeSlot=null}field(e,t=!0){let i=this.config.address[e.id];if(i==null){if(t)throw new RangeError("Field is not present in this state");return}return yr(this,i),Pa(this,i)}update(...e){return IO(this,e,!0)}applyTransaction(e){let t=this.config,{base:i,compartments:s}=t;for(let a of e.effects)a.is(hl.reconfigure)?(t&&(s=new Map,t.compartments.forEach((l,u)=>s.set(u,l)),t=null),s.set(a.value.compartment,a.value.extension)):a.is(Fe.reconfigure)?(t=null,i=a.value):a.is(Fe.appendConfig)&&(t=null,i=gs(i).concat(a.value));let r;t?r=e.startState.values.slice():(t=ka.resolve(i,s,this),r=new Ne(t,this.doc,this.selection,t.dynamicSlots.map(()=>null),(l,u)=>u.reconfigure(l,this),null).values);let o=e.startState.facet(lc)?e.newSelection:e.newSelection.asSingle();new Ne(t,e.newDoc,o,r,(a,l)=>l.update(a,e),e)}replaceSelection(e){return typeof e=="string"&&(e=this.toText(e)),this.changeByRange(t=>({changes:{from:t.from,to:t.to,insert:e},range:ee.cursor(t.from+e.length)}))}changeByRange(e){let t=this.selection,i=e(t.ranges[0]),s=this.changes(i.changes),r=[i.range],o=gs(i.effects);for(let a=1;a<t.ranges.length;a++){let l=e(t.ranges[a]),u=this.changes(l.changes),c=u.map(s);for(let d=0;d<a;d++)r[d]=r[d].map(c);let h=s.mapDesc(u,!0);r.push(l.range.map(h)),s=s.compose(c),o=Fe.mapEffects(o,c).concat(Fe.mapEffects(gs(l.effects),h))}return{changes:s,selection:ee.create(r,t.mainIndex),effects:o}}changes(e=[]){return e instanceof ct?e:ct.of(e,this.doc.length,this.facet(Ne.lineSeparator))}toText(e){return De.of(e.split(this.facet(Ne.lineSeparator)||ic))}sliceDoc(e=0,t=this.doc.length){return this.doc.sliceString(e,t,this.lineBreak)}facet(e){let t=this.config.address[e.id];return t==null?e.default:(yr(this,t),Pa(this,t))}toJSON(e){let t={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(e)for(let i in e){let s=e[i];s instanceof yi&&this.config.address[s.id]!=null&&(t[i]=s.spec.toJSON(this.field(e[i]),this))}return t}static fromJSON(e,t={},i){if(!e||typeof e.doc!="string")throw new RangeError("Invalid JSON representation for EditorState");let s=[];if(i){for(let r in i)if(Object.prototype.hasOwnProperty.call(e,r)){let o=i[r],a=e[r];s.push(o.init(l=>o.spec.fromJSON(a,l)))}}return Ne.create({doc:e.doc,selection:ee.fromJSON(e.selection),extensions:t.extensions?s.concat([t.extensions]):s})}static create(e={}){let t=ka.resolve(e.extensions||[],new Map),i=e.doc instanceof De?e.doc:De.of((e.doc||"").split(t.staticFacet(Ne.lineSeparator)||ic)),s=e.selection?e.selection instanceof ee?e.selection:ee.single(e.selection.anchor,e.selection.head):ee.single(0);return TO(s,i.length),t.staticFacet(lc)||(s=s.asSingle()),new Ne(t,i,s,t.dynamicSlots.map(()=>null),(r,o)=>o.create(r),null)}get tabSize(){return this.facet(Ne.tabSize)}get lineBreak(){return this.facet(Ne.lineSeparator)||`
`}get readOnly(){return this.facet(DO)}phrase(e,...t){for(let i of this.facet(Ne.phrases))if(Object.prototype.hasOwnProperty.call(i,e)){e=i[e];break}return t.length&&(e=e.replace(/\$(\$|\d*)/g,(i,s)=>{if(s=="$")return"$";let r=+(s||1);return!r||r>t.length?i:t[r-1]})),e}languageDataAt(e,t,i=-1){let s=[];for(let r of this.facet(CO))for(let o of r(this,t,i))Object.prototype.hasOwnProperty.call(o,e)&&s.push(o[e]);return s}charCategorizer(e){return jM(this.languageDataAt("wordChars",e).join(""))}wordAt(e){let{text:t,from:i,length:s}=this.doc.lineAt(e),r=this.charCategorizer(e),o=e-i,a=e-i;for(;o>0;){let l=bt(t,o,!1);if(r(t.slice(l,o))!=Zn.Word)break;o=l}for(;a<s;){let l=bt(t,a);if(r(t.slice(a,l))!=Zn.Word)break;a=l}return o==a?null:ee.range(o+i,a+i)}}Ne.allowMultipleSelections=lc;Ne.tabSize=ge.define({combine:n=>n.length?n[0]:4});Ne.lineSeparator=EO;Ne.readOnly=DO;Ne.phrases=ge.define({compare(n,e){let t=Object.keys(n),i=Object.keys(e);return t.length==i.length&&t.every(s=>n[s]==e[s])}});Ne.languageData=CO;Ne.changeFilter=MO;Ne.transactionFilter=RO;Ne.transactionExtender=ZO;hl.reconfigure=Fe.define();function WM(n,e,t={}){let i={};for(let s of n)for(let r of Object.keys(s)){let o=s[r],a=i[r];if(a===void 0)i[r]=o;else if(!(a===o||o===void 0))if(Object.hasOwnProperty.call(t,r))i[r]=t[r](a,o);else throw new Error("Config merge conflict for field "+r)}for(let s in e)i[s]===void 0&&(i[s]=e[s]);return i}class Wi{eq(e){return this==e}range(e,t=e){return hc.create(e,t,this)}}Wi.prototype.startSide=Wi.prototype.endSide=0;Wi.prototype.point=!1;Wi.prototype.mapMode=wt.TrackDel;let hc=class LO{constructor(e,t,i){this.from=e,this.to=t,this.value=i}static create(e,t,i){return new LO(e,t,i)}};function dc(n,e){return n.from-e.from||n.value.startSide-e.value.startSide}class yh{constructor(e,t,i,s){this.from=e,this.to=t,this.value=i,this.maxPoint=s}get length(){return this.to[this.to.length-1]}findIndex(e,t,i,s=0){let r=i?this.to:this.from;for(let o=s,a=r.length;;){if(o==a)return o;let l=o+a>>1,u=r[l]-e||(i?this.value[l].endSide:this.value[l].startSide)-t;if(l==o)return u>=0?o:a;u>=0?a=l:o=l+1}}between(e,t,i,s){for(let r=this.findIndex(t,-1e9,!0),o=this.findIndex(i,1e9,!1,r);r<o;r++)if(s(this.from[r]+e,this.to[r]+e,this.value[r])===!1)return!1}map(e,t){let i=[],s=[],r=[],o=-1,a=-1;for(let l=0;l<this.value.length;l++){let u=this.value[l],c=this.from[l]+e,h=this.to[l]+e,d,f;if(c==h){let p=t.mapPos(c,u.startSide,u.mapMode);if(p==null||(d=f=p,u.startSide!=u.endSide&&(f=t.mapPos(c,u.endSide),f<d)))continue}else if(d=t.mapPos(c,u.startSide),f=t.mapPos(h,u.endSide),d>f||d==f&&u.startSide>0&&u.endSide<=0)continue;(f-d||u.endSide-u.startSide)<0||(o<0&&(o=d),u.point&&(a=Math.max(a,f-d)),i.push(u),s.push(d-o),r.push(f-o))}return{mapped:i.length?new yh(s,r,i,a):null,pos:o}}}class ze{constructor(e,t,i,s){this.chunkPos=e,this.chunk=t,this.nextLayer=i,this.maxPoint=s}static create(e,t,i,s){return new ze(e,t,i,s)}get length(){let e=this.chunk.length-1;return e<0?0:Math.max(this.chunkEnd(e),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let e=this.nextLayer.size;for(let t of this.chunk)e+=t.value.length;return e}chunkEnd(e){return this.chunkPos[e]+this.chunk[e].length}update(e){let{add:t=[],sort:i=!1,filterFrom:s=0,filterTo:r=this.length}=e,o=e.filter;if(t.length==0&&!o)return this;if(i&&(t=t.slice().sort(dc)),this.isEmpty)return t.length?ze.of(t):this;let a=new zO(this,null,-1).goto(0),l=0,u=[],c=new Zr;for(;a.value||l<t.length;)if(l<t.length&&(a.from-t[l].from||a.startSide-t[l].value.startSide)>=0){let h=t[l++];c.addInner(h.from,h.to,h.value)||u.push(h)}else a.rangeIndex==1&&a.chunkIndex<this.chunk.length&&(l==t.length||this.chunkEnd(a.chunkIndex)<t[l].from)&&(!o||s>this.chunkEnd(a.chunkIndex)||r<this.chunkPos[a.chunkIndex])&&c.addChunk(this.chunkPos[a.chunkIndex],this.chunk[a.chunkIndex])?a.nextChunk():((!o||s>a.to||r<a.from||o(a.from,a.to,a.value))&&(c.addInner(a.from,a.to,a.value)||u.push(hc.create(a.from,a.to,a.value))),a.next());return c.finishInner(this.nextLayer.isEmpty&&!u.length?ze.empty:this.nextLayer.update({add:u,filter:o,filterFrom:s,filterTo:r}))}map(e){if(e.empty||this.isEmpty)return this;let t=[],i=[],s=-1;for(let o=0;o<this.chunk.length;o++){let a=this.chunkPos[o],l=this.chunk[o],u=e.touchesRange(a,a+l.length);if(u===!1)s=Math.max(s,l.maxPoint),t.push(l),i.push(e.mapPos(a));else if(u===!0){let{mapped:c,pos:h}=l.map(a,e);c&&(s=Math.max(s,c.maxPoint),t.push(c),i.push(h))}}let r=this.nextLayer.map(e);return t.length==0?r:new ze(i,t,r||ze.empty,s)}between(e,t,i){if(!this.isEmpty){for(let s=0;s<this.chunk.length;s++){let r=this.chunkPos[s],o=this.chunk[s];if(t>=r&&e<=r+o.length&&o.between(r,e-r,t-r,i)===!1)return}this.nextLayer.between(e,t,i)}}iter(e=0){return Dr.from([this]).goto(e)}get isEmpty(){return this.nextLayer==this}static iter(e,t=0){return Dr.from(e).goto(t)}static compare(e,t,i,s,r=-1){let o=e.filter(h=>h.maxPoint>0||!h.isEmpty&&h.maxPoint>=r),a=t.filter(h=>h.maxPoint>0||!h.isEmpty&&h.maxPoint>=r),l=_f(o,a,i),u=new js(o,l,r),c=new js(a,l,r);i.iterGaps((h,d,f)=>$f(u,h,c,d,f,s)),i.empty&&i.length==0&&$f(u,0,c,0,0,s)}static eq(e,t,i=0,s){s==null&&(s=999999999);let r=e.filter(c=>!c.isEmpty&&t.indexOf(c)<0),o=t.filter(c=>!c.isEmpty&&e.indexOf(c)<0);if(r.length!=o.length)return!1;if(!r.length)return!0;let a=_f(r,o),l=new js(r,a,0).goto(i),u=new js(o,a,0).goto(i);for(;;){if(l.to!=u.to||!fc(l.active,u.active)||l.point&&(!u.point||!l.point.eq(u.point)))return!1;if(l.to>s)return!0;l.next(),u.next()}}static spans(e,t,i,s,r=-1){let o=new js(e,null,r).goto(t),a=t,l=o.openStart;for(;;){let u=Math.min(o.to,i);if(o.point){let c=o.activeForPoint(o.to),h=o.pointFrom<t?c.length+1:o.point.startSide<0?c.length:Math.min(c.length,l);s.point(a,u,o.point,c,h,o.pointRank),l=Math.min(o.openEnd(u),c.length)}else u>a&&(s.span(a,u,o.active,l),l=o.openEnd(u));if(o.to>i)return l+(o.point&&o.to>i?1:0);a=o.to,o.next()}}static of(e,t=!1){let i=new Zr;for(let s of e instanceof hc?[e]:t?qM(e):e)i.add(s.from,s.to,s.value);return i.finish()}static join(e){if(!e.length)return ze.empty;let t=e[e.length-1];for(let i=e.length-2;i>=0;i--)for(let s=e[i];s!=ze.empty;s=s.nextLayer)t=new ze(s.chunkPos,s.chunk,t,Math.max(s.maxPoint,t.maxPoint));return t}}ze.empty=new ze([],[],null,-1);function qM(n){if(n.length>1)for(let e=n[0],t=1;t<n.length;t++){let i=n[t];if(dc(e,i)>0)return n.slice().sort(dc);e=i}return n}ze.empty.nextLayer=ze.empty;class Zr{finishChunk(e){this.chunks.push(new yh(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,e&&(this.from=[],this.to=[],this.value=[])}constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}add(e,t,i){this.addInner(e,t,i)||(this.nextLayer||(this.nextLayer=new Zr)).add(e,t,i)}addInner(e,t,i){let s=e-this.lastTo||i.startSide-this.last.endSide;if(s<=0&&(e-this.lastFrom||i.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return s<0?!1:(this.from.length==250&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=e),this.from.push(e-this.chunkStart),this.to.push(t-this.chunkStart),this.last=i,this.lastFrom=e,this.lastTo=t,this.value.push(i),i.point&&(this.maxPoint=Math.max(this.maxPoint,t-e)),!0)}addChunk(e,t){if((e-this.lastTo||t.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,t.maxPoint),this.chunks.push(t),this.chunkPos.push(e);let i=t.value.length-1;return this.last=t.value[i],this.lastFrom=t.from[i]+e,this.lastTo=t.to[i]+e,!0}finish(){return this.finishInner(ze.empty)}finishInner(e){if(this.from.length&&this.finishChunk(!1),this.chunks.length==0)return e;let t=ze.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(e):e,this.setMaxPoint);return this.from=null,t}}function _f(n,e,t){let i=new Map;for(let r of n)for(let o=0;o<r.chunk.length;o++)r.chunk[o].maxPoint<=0&&i.set(r.chunk[o],r.chunkPos[o]);let s=new Set;for(let r of e)for(let o=0;o<r.chunk.length;o++){let a=i.get(r.chunk[o]);a!=null&&(t?t.mapPos(a):a)==r.chunkPos[o]&&!(t!=null&&t.touchesRange(a,a+r.chunk[o].length))&&s.add(r.chunk[o])}return s}class zO{constructor(e,t,i,s=0){this.layer=e,this.skip=t,this.minPoint=i,this.rank=s}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(e,t=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(e,t,!1),this}gotoInner(e,t,i){for(;this.chunkIndex<this.layer.chunk.length;){let s=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(s)||this.layer.chunkEnd(this.chunkIndex)<e||s.maxPoint<this.minPoint))break;this.chunkIndex++,i=!1}if(this.chunkIndex<this.layer.chunk.length){let s=this.layer.chunk[this.chunkIndex].findIndex(e-this.layer.chunkPos[this.chunkIndex],t,!0);(!i||this.rangeIndex<s)&&this.setRangeIndex(s)}this.next()}forward(e,t){(this.to-e||this.endSide-t)<0&&this.gotoInner(e,t,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let e=this.layer.chunkPos[this.chunkIndex],t=this.layer.chunk[this.chunkIndex],i=e+t.from[this.rangeIndex];if(this.from=i,this.to=e+t.to[this.rangeIndex],this.value=t.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex(e){if(e==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=e}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(e){return this.from-e.from||this.startSide-e.startSide||this.rank-e.rank||this.to-e.to||this.endSide-e.endSide}}class Dr{constructor(e){this.heap=e}static from(e,t=null,i=-1){let s=[];for(let r=0;r<e.length;r++)for(let o=e[r];!o.isEmpty;o=o.nextLayer)o.maxPoint>=i&&s.push(new zO(o,t,i,r));return s.length==1?s[0]:new Dr(s)}get startSide(){return this.value?this.value.startSide:0}goto(e,t=-1e9){for(let i of this.heap)i.goto(e,t);for(let i=this.heap.length>>1;i>=0;i--)Gl(this.heap,i);return this.next(),this}forward(e,t){for(let i of this.heap)i.forward(e,t);for(let i=this.heap.length>>1;i>=0;i--)Gl(this.heap,i);(this.to-e||this.value.endSide-t)<0&&this.next()}next(){if(this.heap.length==0)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let e=this.heap[0];this.from=e.from,this.to=e.to,this.value=e.value,this.rank=e.rank,e.value&&e.next(),Gl(this.heap,0)}}}function Gl(n,e){for(let t=n[e];;){let i=(e<<1)+1;if(i>=n.length)break;let s=n[i];if(i+1<n.length&&s.compare(n[i+1])>=0&&(s=n[i+1],i++),t.compare(s)<0)break;n[i]=t,n[e]=s,e=i}}class js{constructor(e,t,i){this.minPoint=i,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=Dr.from(e,t,i)}goto(e,t=-1e9){return this.cursor.goto(e,t),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=e,this.endSide=t,this.openStart=-1,this.next(),this}forward(e,t){for(;this.minActive>-1&&(this.activeTo[this.minActive]-e||this.active[this.minActive].endSide-t)<0;)this.removeActive(this.minActive);this.cursor.forward(e,t)}removeActive(e){wo(this.active,e),wo(this.activeTo,e),wo(this.activeRank,e),this.minActive=kf(this.active,this.activeTo)}addActive(e){let t=0,{value:i,to:s,rank:r}=this.cursor;for(;t<this.activeRank.length&&(r-this.activeRank[t]||s-this.activeTo[t])>0;)t++;bo(this.active,t,i),bo(this.activeTo,t,s),bo(this.activeRank,t,r),e&&bo(e,t,this.cursor.from),this.minActive=kf(this.active,this.activeTo)}next(){let e=this.to,t=this.point;this.point=null;let i=this.openStart<0?[]:null;for(;;){let s=this.minActive;if(s>-1&&(this.activeTo[s]-this.cursor.from||this.active[s].endSide-this.cursor.startSide)<0){if(this.activeTo[s]>e){this.to=this.activeTo[s],this.endSide=this.active[s].endSide;break}this.removeActive(s),i&&wo(i,s)}else if(this.cursor.value)if(this.cursor.from>e){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let r=this.cursor.value;if(!r.point)this.addActive(i),this.cursor.next();else if(t&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=r,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=r.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}}else{this.to=this.endSide=1e9;break}}if(i){this.openStart=0;for(let s=i.length-1;s>=0&&i[s]<e;s--)this.openStart++}}activeForPoint(e){if(!this.active.length)return this.active;let t=[];for(let i=this.active.length-1;i>=0&&!(this.activeRank[i]<this.pointRank);i--)(this.activeTo[i]>e||this.activeTo[i]==e&&this.active[i].endSide>=this.point.endSide)&&t.push(this.active[i]);return t.reverse()}openEnd(e){let t=0;for(let i=this.activeTo.length-1;i>=0&&this.activeTo[i]>e;i--)t++;return t}}function $f(n,e,t,i,s,r){n.goto(e),t.goto(i);let o=i+s,a=i,l=i-e;for(;;){let u=n.to+l-t.to,c=u||n.endSide-t.endSide,h=c<0?n.to+l:t.to,d=Math.min(h,o);if(n.point||t.point?n.point&&t.point&&(n.point==t.point||n.point.eq(t.point))&&fc(n.activeForPoint(n.to),t.activeForPoint(t.to))||r.comparePoint(a,d,n.point,t.point):d>a&&!fc(n.active,t.active)&&r.compareRange(a,d,n.active,t.active),h>o)break;(u||n.openEnd!=t.openEnd)&&r.boundChange&&r.boundChange(h),a=h,c<=0&&n.next(),c>=0&&t.next()}}function fc(n,e){if(n.length!=e.length)return!1;for(let t=0;t<n.length;t++)if(n[t]!=e[t]&&!n[t].eq(e[t]))return!1;return!0}function wo(n,e){for(let t=e,i=n.length-1;t<i;t++)n[t]=n[t+1];n.pop()}function bo(n,e,t){for(let i=n.length-1;i>=e;i--)n[i+1]=n[i];n[e]=t}function kf(n,e){let t=-1,i=1e9;for(let s=0;s<e.length;s++)(e[s]-i||n[s].endSide-n[t].endSide)<0&&(t=s,i=e[s]);return t}function dl(n,e,t=n.length){let i=0;for(let s=0;s<t&&s<n.length;)n.charCodeAt(s)==9?(i+=e-i%e,s++):(i++,s=bt(n,s));return i}function YM(n,e,t,i){for(let s=0,r=0;;){if(r>=e)return s;if(s==n.length)break;r+=n.charCodeAt(s)==9?t-r%t:1,s=bt(n,s)}return n.length}const pc="ͼ",Pf=typeof Symbol>"u"?"__"+pc:Symbol.for(pc),mc=typeof Symbol>"u"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet"),Qf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:{};class di{constructor(e,t){this.rules=[];let{finish:i}=t||{};function s(o){return/^@/.test(o)?[o]:o.split(/,\s*/)}function r(o,a,l,u){let c=[],h=/^@(\w+)\b/.exec(o[0]),d=h&&h[1]=="keyframes";if(h&&a==null)return l.push(o[0]+";");for(let f in a){let p=a[f];if(/&/.test(f))r(f.split(/,\s*/).map(m=>o.map(O=>m.replace(/&/,O))).reduce((m,O)=>m.concat(O)),p,l);else if(p&&typeof p=="object"){if(!h)throw new RangeError("The value of a property ("+f+") should be a primitive value.");r(s(f),p,c,d)}else p!=null&&c.push(f.replace(/_.*/,"").replace(/[A-Z]/g,m=>"-"+m.toLowerCase())+": "+p+";")}(c.length||d)&&l.push((i&&!h&&!u?o.map(i):o).join(", ")+" {"+c.join(" ")+"}")}for(let o in e)r(s(o),e[o],this.rules)}getRules(){return this.rules.join(`
`)}static newName(){let e=Qf[Pf]||1;return Qf[Pf]=e+1,pc+e.toString(36)}static mount(e,t,i){let s=e[mc],r=i&&i.nonce;s?r&&s.setNonce(r):s=new GM(e,r),s.mount(Array.isArray(t)?t:[t],e)}}let Tf=new Map;class GM{constructor(e,t){let i=e.ownerDocument||e,s=i.defaultView;if(!e.head&&e.adoptedStyleSheets&&s.CSSStyleSheet){let r=Tf.get(i);if(r)return e[mc]=r;this.sheet=new s.CSSStyleSheet,Tf.set(i,this)}else this.styleTag=i.createElement("style"),t&&this.styleTag.setAttribute("nonce",t);this.modules=[],e[mc]=this}mount(e,t){let i=this.sheet,s=0,r=0;for(let o=0;o<e.length;o++){let a=e[o],l=this.modules.indexOf(a);if(l<r&&l>-1&&(this.modules.splice(l,1),r--,l=-1),l==-1){if(this.modules.splice(r++,0,a),i)for(let u=0;u<a.rules.length;u++)i.insertRule(a.rules[u],s++)}else{for(;r<l;)s+=this.modules[r++].rules.length;s+=a.rules.length,r++}}if(i)t.adoptedStyleSheets.indexOf(this.sheet)<0&&(t.adoptedStyleSheets=[this.sheet,...t.adoptedStyleSheets]);else{let o="";for(let l=0;l<this.modules.length;l++)o+=this.modules[l].getRules()+`
`;this.styleTag.textContent=o;let a=t.head||t;this.styleTag.parentNode!=a&&a.insertBefore(this.styleTag,a.firstChild)}}setNonce(e){this.styleTag&&this.styleTag.getAttribute("nonce")!=e&&this.styleTag.setAttribute("nonce",e)}}var fi={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},Nr={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},HM=typeof navigator<"u"&&/Mac/.test(navigator.platform),FM=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var dt=0;dt<10;dt++)fi[48+dt]=fi[96+dt]=String(dt);for(var dt=1;dt<=24;dt++)fi[dt+111]="F"+dt;for(var dt=65;dt<=90;dt++)fi[dt]=String.fromCharCode(dt+32),Nr[dt]=String.fromCharCode(dt);for(var Hl in fi)Nr.hasOwnProperty(Hl)||(Nr[Hl]=fi[Hl]);function KM(n){var e=HM&&n.metaKey&&n.shiftKey&&!n.ctrlKey&&!n.altKey||FM&&n.shiftKey&&n.key&&n.key.length==1||n.key=="Unidentified",t=!e&&n.key||(n.shiftKey?Nr:fi)[n.keyCode]||n.key||"Unidentified";return t=="Esc"&&(t="Escape"),t=="Del"&&(t="Delete"),t=="Left"&&(t="ArrowLeft"),t=="Up"&&(t="ArrowUp"),t=="Right"&&(t="ArrowRight"),t=="Down"&&(t="ArrowDown"),t}function Ir(n){let e;return n.nodeType==11?e=n.getSelection?n:n.ownerDocument:e=n,e.getSelection()}function gc(n,e){return e?n==e||n.contains(e.nodeType!=1?e.parentNode:e):!1}function Ho(n,e){if(!e.anchorNode)return!1;try{return gc(n,e.anchorNode)}catch{return!1}}function Lr(n){return n.nodeType==3?Yi(n,0,n.nodeValue.length).getClientRects():n.nodeType==1?n.getClientRects():[]}function vr(n,e,t,i){return t?Af(n,e,t,i,-1)||Af(n,e,t,i,1):!1}function qi(n){for(var e=0;;e++)if(n=n.previousSibling,!n)return e}function Qa(n){return n.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(n.nodeName)}function Af(n,e,t,i,s){for(;;){if(n==t&&e==i)return!0;if(e==(s<0?0:vn(n))){if(n.nodeName=="DIV")return!1;let r=n.parentNode;if(!r||r.nodeType!=1)return!1;e=qi(n)+(s<0?0:1),n=r}else if(n.nodeType==1){if(n=n.childNodes[e+(s<0?-1:0)],n.nodeType==1&&n.contentEditable=="false")return!1;e=s<0?vn(n):0}else return!1}}function vn(n){return n.nodeType==3?n.nodeValue.length:n.childNodes.length}function fl(n,e){let t=e?n.left:n.right;return{left:t,right:t,top:n.top,bottom:n.bottom}}function JM(n){let e=n.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:n.innerWidth,top:0,bottom:n.innerHeight}}function VO(n,e){let t=e.width/n.offsetWidth,i=e.height/n.offsetHeight;return(t>.995&&t<1.005||!isFinite(t)||Math.abs(e.width-n.offsetWidth)<1)&&(t=1),(i>.995&&i<1.005||!isFinite(i)||Math.abs(e.height-n.offsetHeight)<1)&&(i=1),{scaleX:t,scaleY:i}}function eR(n,e,t,i,s,r,o,a){let l=n.ownerDocument,u=l.defaultView||window;for(let c=n,h=!1;c&&!h;)if(c.nodeType==1){let d,f=c==l.body,p=1,m=1;if(f)d=JM(u);else{if(/^(fixed|sticky)$/.test(getComputedStyle(c).position)&&(h=!0),c.scrollHeight<=c.clientHeight&&c.scrollWidth<=c.clientWidth){c=c.assignedSlot||c.parentNode;continue}let b=c.getBoundingClientRect();({scaleX:p,scaleY:m}=VO(c,b)),d={left:b.left,right:b.left+c.clientWidth*p,top:b.top,bottom:b.top+c.clientHeight*m}}let O=0,y=0;if(s=="nearest")e.top<d.top?(y=-(d.top-e.top+o),t>0&&e.bottom>d.bottom+y&&(y=e.bottom-d.bottom+y+o)):e.bottom>d.bottom&&(y=e.bottom-d.bottom+o,t<0&&e.top-y<d.top&&(y=-(d.top+y-e.top+o)));else{let b=e.bottom-e.top,v=d.bottom-d.top;y=(s=="center"&&b<=v?e.top+b/2-v/2:s=="start"||s=="center"&&t<0?e.top-o:e.bottom-v+o)-d.top}if(i=="nearest"?e.left<d.left?(O=-(d.left-e.left+r),t>0&&e.right>d.right+O&&(O=e.right-d.right+O+r)):e.right>d.right&&(O=e.right-d.right+r,t<0&&e.left<d.left+O&&(O=-(d.left+O-e.left+r))):O=(i=="center"?e.left+(e.right-e.left)/2-(d.right-d.left)/2:i=="start"==a?e.left-r:e.right-(d.right-d.left)+r)-d.left,O||y)if(f)u.scrollBy(O,y);else{let b=0,v=0;if(y){let g=c.scrollTop;c.scrollTop+=y/m,v=(c.scrollTop-g)*m}if(O){let g=c.scrollLeft;c.scrollLeft+=O/p,b=(c.scrollLeft-g)*p}e={left:e.left-b,top:e.top-v,right:e.right-b,bottom:e.bottom-v},b&&Math.abs(b-O)<1&&(i="nearest"),v&&Math.abs(v-y)<1&&(s="nearest")}if(f)break;c=c.assignedSlot||c.parentNode}else if(c.nodeType==11)c=c.host;else break}function tR(n){let e=n.ownerDocument,t,i;for(let s=n.parentNode;s&&!(s==e.body||t&&i);)if(s.nodeType==1)!i&&s.scrollHeight>s.clientHeight&&(i=s),!t&&s.scrollWidth>s.clientWidth&&(t=s),s=s.assignedSlot||s.parentNode;else if(s.nodeType==11)s=s.host;else break;return{x:t,y:i}}class nR{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(e){return this.anchorNode==e.anchorNode&&this.anchorOffset==e.anchorOffset&&this.focusNode==e.focusNode&&this.focusOffset==e.focusOffset}setRange(e){let{anchorNode:t,focusNode:i}=e;this.set(t,Math.min(e.anchorOffset,t?vn(t):0),i,Math.min(e.focusOffset,i?vn(i):0))}set(e,t,i,s){this.anchorNode=e,this.anchorOffset=t,this.focusNode=i,this.focusOffset=s}}let is=null;function XO(n){if(n.setActive)return n.setActive();if(is)return n.focus(is);let e=[];for(let t=n;t&&(e.push(t,t.scrollTop,t.scrollLeft),t!=t.ownerDocument);t=t.parentNode);if(n.focus(is==null?{get preventScroll(){return is={preventScroll:!0},!0}}:void 0),!is){is=!1;for(let t=0;t<e.length;){let i=e[t++],s=e[t++],r=e[t++];i.scrollTop!=s&&(i.scrollTop=s),i.scrollLeft!=r&&(i.scrollLeft=r)}}}let Cf;function Yi(n,e,t=e){let i=Cf||(Cf=document.createRange());return i.setEnd(n,t),i.setStart(n,e),i}function Os(n,e,t,i){let s={key:e,code:e,keyCode:t,which:t,cancelable:!0};i&&({altKey:s.altKey,ctrlKey:s.ctrlKey,shiftKey:s.shiftKey,metaKey:s.metaKey}=i);let r=new KeyboardEvent("keydown",s);r.synthetic=!0,n.dispatchEvent(r);let o=new KeyboardEvent("keyup",s);return o.synthetic=!0,n.dispatchEvent(o),r.defaultPrevented||o.defaultPrevented}function iR(n){for(;n;){if(n&&(n.nodeType==9||n.nodeType==11&&n.host))return n;n=n.assignedSlot||n.parentNode}return null}function BO(n){for(;n.attributes.length;)n.removeAttributeNode(n.attributes[0])}function sR(n,e){let t=e.focusNode,i=e.focusOffset;if(!t||e.anchorNode!=t||e.anchorOffset!=i)return!1;for(i=Math.min(i,vn(t));;)if(i){if(t.nodeType!=1)return!1;let s=t.childNodes[i-1];s.contentEditable=="false"?i--:(t=s,i=vn(t))}else{if(t==n)return!0;i=qi(t),t=t.parentNode}}function UO(n){return n.scrollTop>Math.max(1,n.scrollHeight-n.clientHeight-4)}function jO(n,e){for(let t=n,i=e;;){if(t.nodeType==3&&i>0)return{node:t,offset:i};if(t.nodeType==1&&i>0){if(t.contentEditable=="false")return null;t=t.childNodes[i-1],i=vn(t)}else if(t.parentNode&&!Qa(t))i=qi(t),t=t.parentNode;else return null}}function WO(n,e){for(let t=n,i=e;;){if(t.nodeType==3&&i<t.nodeValue.length)return{node:t,offset:i};if(t.nodeType==1&&i<t.childNodes.length){if(t.contentEditable=="false")return null;t=t.childNodes[i],i=0}else if(t.parentNode&&!Qa(t))i=qi(t)+1,t=t.parentNode;else return null}}class mt{constructor(e,t,i=!0){this.node=e,this.offset=t,this.precise=i}static before(e,t){return new mt(e.parentNode,qi(e),t)}static after(e,t){return new mt(e.parentNode,qi(e)+1,t)}}const vh=[];class je{constructor(){this.parent=null,this.dom=null,this.flags=2}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(e){let t=this.posAtStart;for(let i of this.children){if(i==e)return t;t+=i.length+i.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(e){return this.posBefore(e)+e.length}sync(e,t){if(this.flags&2){let i=this.dom,s=null,r;for(let o of this.children){if(o.flags&7){if(!o.dom&&(r=s?s.nextSibling:i.firstChild)){let a=je.get(r);(!a||!a.parent&&a.canReuseDOM(o))&&o.reuseDOM(r)}o.sync(e,t),o.flags&=-8}if(r=s?s.nextSibling:i.firstChild,t&&!t.written&&t.node==i&&r!=o.dom&&(t.written=!0),o.dom.parentNode==i)for(;r&&r!=o.dom;)r=Ef(r);else i.insertBefore(o.dom,r);s=o.dom}for(r=s?s.nextSibling:i.firstChild,r&&t&&t.node==i&&(t.written=!0);r;)r=Ef(r)}else if(this.flags&1)for(let i of this.children)i.flags&7&&(i.sync(e,t),i.flags&=-8)}reuseDOM(e){}localPosFromDOM(e,t){let i;if(e==this.dom)i=this.dom.childNodes[t];else{let s=vn(e)==0?0:t==0?-1:1;for(;;){let r=e.parentNode;if(r==this.dom)break;s==0&&r.firstChild!=r.lastChild&&(e==r.firstChild?s=-1:s=1),e=r}s<0?i=e:i=e.nextSibling}if(i==this.dom.firstChild)return 0;for(;i&&!je.get(i);)i=i.nextSibling;if(!i)return this.length;for(let s=0,r=0;;s++){let o=this.children[s];if(o.dom==i)return r;r+=o.length+o.breakAfter}}domBoundsAround(e,t,i=0){let s=-1,r=-1,o=-1,a=-1;for(let l=0,u=i,c=i;l<this.children.length;l++){let h=this.children[l],d=u+h.length;if(u<e&&d>t)return h.domBoundsAround(e,t,u);if(d>=e&&s==-1&&(s=l,r=u),u>t&&h.dom.parentNode==this.dom){o=l,a=c;break}c=d,u=d+h.breakAfter}return{from:r,to:a<0?i+this.length:a,startDOM:(s?this.children[s-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:o<this.children.length&&o>=0?this.children[o].dom:null}}markDirty(e=!1){this.flags|=2,this.markParentsDirty(e)}markParentsDirty(e){for(let t=this.parent;t;t=t.parent){if(e&&(t.flags|=2),t.flags&1)return;t.flags|=1,e=!1}}setParent(e){this.parent!=e&&(this.parent=e,this.flags&7&&this.markParentsDirty(!0))}setDOM(e){this.dom!=e&&(this.dom&&(this.dom.cmView=null),this.dom=e,e.cmView=this)}get rootView(){for(let e=this;;){let t=e.parent;if(!t)return e;e=t}}replaceChildren(e,t,i=vh){this.markDirty();for(let s=e;s<t;s++){let r=this.children[s];r.parent==this&&i.indexOf(r)<0&&r.destroy()}i.length<250?this.children.splice(e,t-e,...i):this.children=[].concat(this.children.slice(0,e),i,this.children.slice(t));for(let s=0;s<i.length;s++)i[s].setParent(this)}ignoreMutation(e){return!1}ignoreEvent(e){return!1}childCursor(e=this.length){return new qO(this.children,e,this.children.length)}childPos(e,t=1){return this.childCursor().findPos(e,t)}toString(){let e=this.constructor.name.replace("View","");return e+(this.children.length?"("+this.children.join()+")":this.length?"["+(e=="Text"?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(e){return e.cmView}get isEditable(){return!0}get isWidget(){return!1}get isHidden(){return!1}merge(e,t,i,s,r,o){return!1}become(e){return!1}canReuseDOM(e){return e.constructor==this.constructor&&!((this.flags|e.flags)&8)}getSide(){return 0}destroy(){for(let e of this.children)e.parent==this&&e.destroy();this.parent=null}}je.prototype.breakAfter=0;function Ef(n){let e=n.nextSibling;return n.parentNode.removeChild(n),e}class qO{constructor(e,t,i){this.children=e,this.pos=t,this.i=i,this.off=0}findPos(e,t=1){for(;;){if(e>this.pos||e==this.pos&&(t>0||this.i==0||this.children[this.i-1].breakAfter))return this.off=e-this.pos,this;let i=this.children[--this.i];this.pos-=i.length+i.breakAfter}}}function YO(n,e,t,i,s,r,o,a,l){let{children:u}=n,c=u.length?u[e]:null,h=r.length?r[r.length-1]:null,d=h?h.breakAfter:o;if(!(e==i&&c&&!o&&!d&&r.length<2&&c.merge(t,s,r.length?h:null,t==0,a,l))){if(i<u.length){let f=u[i];f&&(s<f.length||f.breakAfter&&(h!=null&&h.breakAfter))?(e==i&&(f=f.split(s),s=0),!d&&h&&f.merge(0,s,h,!0,0,l)?r[r.length-1]=f:((s||f.children.length&&!f.children[0].length)&&f.merge(0,s,null,!1,0,l),r.push(f))):f!=null&&f.breakAfter&&(h?h.breakAfter=1:o=1),i++}for(c&&(c.breakAfter=o,t>0&&(!o&&r.length&&c.merge(t,c.length,r[0],!1,a,0)?c.breakAfter=r.shift().breakAfter:(t<c.length||c.children.length&&c.children[c.children.length-1].length==0)&&c.merge(t,c.length,null,!1,a,0),e++));e<i&&r.length;)if(u[i-1].become(r[r.length-1]))i--,r.pop(),l=r.length?0:a;else if(u[e].become(r[0]))e++,r.shift(),a=r.length?0:l;else break;!r.length&&e&&i<u.length&&!u[e-1].breakAfter&&u[i].merge(0,0,u[e-1],!1,a,l)&&e--,(e<i||r.length)&&n.replaceChildren(e,i,r)}}function GO(n,e,t,i,s,r){let o=n.childCursor(),{i:a,off:l}=o.findPos(t,1),{i:u,off:c}=o.findPos(e,-1),h=e-t;for(let d of i)h+=d.length;n.length+=h,YO(n,u,c,a,l,i,0,s,r)}let kt=typeof navigator<"u"?navigator:{userAgent:"",vendor:"",platform:""},Oc=typeof document<"u"?document:{documentElement:{style:{}}};const yc=/Edge\/(\d+)/.exec(kt.userAgent),HO=/MSIE \d/.test(kt.userAgent),vc=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(kt.userAgent),pl=!!(HO||vc||yc),Mf=!pl&&/gecko\/(\d+)/i.test(kt.userAgent),Fl=!pl&&/Chrome\/(\d+)/.exec(kt.userAgent),Rf="webkitFontSmoothing"in Oc.documentElement.style,FO=!pl&&/Apple Computer/.test(kt.vendor),Zf=FO&&(/Mobile\/\w+/.test(kt.userAgent)||kt.maxTouchPoints>2);var re={mac:Zf||/Mac/.test(kt.platform),windows:/Win/.test(kt.platform),linux:/Linux|X11/.test(kt.platform),ie:pl,ie_version:HO?Oc.documentMode||6:vc?+vc[1]:yc?+yc[1]:0,gecko:Mf,gecko_version:Mf?+(/Firefox\/(\d+)/.exec(kt.userAgent)||[0,0])[1]:0,chrome:!!Fl,chrome_version:Fl?+Fl[1]:0,ios:Zf,android:/Android\b/.test(kt.userAgent),webkit:Rf,safari:FO,webkit_version:Rf?+(/\bAppleWebKit\/(\d+)/.exec(kt.userAgent)||[0,0])[1]:0,tabSize:Oc.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"};const rR=256;class tn extends je{constructor(e){super(),this.text=e}get length(){return this.text.length}createDOM(e){this.setDOM(e||document.createTextNode(this.text))}sync(e,t){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(t&&t.node==this.dom&&(t.written=!0),this.dom.nodeValue=this.text)}reuseDOM(e){e.nodeType==3&&this.createDOM(e)}merge(e,t,i){return this.flags&8||i&&(!(i instanceof tn)||this.length-(t-e)+i.length>rR||i.flags&8)?!1:(this.text=this.text.slice(0,e)+(i?i.text:"")+this.text.slice(t),this.markDirty(),!0)}split(e){let t=new tn(this.text.slice(e));return this.text=this.text.slice(0,e),this.markDirty(),t.flags|=this.flags&8,t}localPosFromDOM(e,t){return e==this.dom?t:t?this.text.length:0}domAtPos(e){return new mt(this.dom,e)}domBoundsAround(e,t,i){return{from:i,to:i+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(e,t){return oR(this.dom,e,t)}}class jn extends je{constructor(e,t=[],i=0){super(),this.mark=e,this.children=t,this.length=i;for(let s of t)s.setParent(this)}setAttrs(e){if(BO(e),this.mark.class&&(e.className=this.mark.class),this.mark.attrs)for(let t in this.mark.attrs)e.setAttribute(t,this.mark.attrs[t]);return e}canReuseDOM(e){return super.canReuseDOM(e)&&!((this.flags|e.flags)&8)}reuseDOM(e){e.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(e),this.flags|=6)}sync(e,t){this.dom?this.flags&4&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(e,t)}merge(e,t,i,s,r,o){return i&&(!(i instanceof jn&&i.mark.eq(this.mark))||e&&r<=0||t<this.length&&o<=0)?!1:(GO(this,e,t,i?i.children.slice():[],r-1,o-1),this.markDirty(),!0)}split(e){let t=[],i=0,s=-1,r=0;for(let a of this.children){let l=i+a.length;l>e&&t.push(i<e?a.split(e-i):a),s<0&&i>=e&&(s=r),i=l,r++}let o=this.length-e;return this.length=e,s>-1&&(this.children.length=s,this.markDirty()),new jn(this.mark,t,o)}domAtPos(e){return KO(this,e)}coordsAt(e,t){return e0(this,e,t)}}function oR(n,e,t){let i=n.nodeValue.length;e>i&&(e=i);let s=e,r=e,o=0;e==0&&t<0||e==i&&t>=0?re.chrome||re.gecko||(e?(s--,o=1):r<i&&(r++,o=-1)):t<0?s--:r<i&&r++;let a=Yi(n,s,r).getClientRects();if(!a.length)return null;let l=a[(o?o<0:t>=0)?0:a.length-1];return re.safari&&!o&&l.width==0&&(l=Array.prototype.find.call(a,u=>u.width)||l),o?fl(l,o<0):l||null}class Di extends je{static create(e,t,i){return new Di(e,t,i)}constructor(e,t,i){super(),this.widget=e,this.length=t,this.side=i,this.prevWidget=null}split(e){let t=Di.create(this.widget,this.length-e,this.side);return this.length-=e,t}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}getSide(){return this.side}merge(e,t,i,s,r,o){return i&&(!(i instanceof Di)||!this.widget.compare(i.widget)||e>0&&r<=0||t<this.length&&o<=0)?!1:(this.length=e+(i?i.length:0)+(this.length-t),!0)}become(e){return e instanceof Di&&e.side==this.side&&this.widget.constructor==e.widget.constructor?(this.widget.compare(e.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get overrideDOMText(){if(this.length==0)return De.empty;let e=this;for(;e.parent;)e=e.parent;let{view:t}=e,i=t&&t.state.doc,s=this.posAtStart;return i?i.slice(s,s+this.length):De.empty}domAtPos(e){return(this.length?e==0:this.side>0)?mt.before(this.dom):mt.after(this.dom,e==this.length)}domBoundsAround(){return null}coordsAt(e,t){let i=this.widget.coordsAt(this.dom,e,t);if(i)return i;let s=this.dom.getClientRects(),r=null;if(!s.length)return null;let o=this.side?this.side<0:e>0;for(let a=o?s.length-1:0;r=s[a],!(e>0?a==0:a==s.length-1||r.top<r.bottom);a+=o?-1:1);return fl(r,!o)}get isEditable(){return!1}get isWidget(){return!0}get isHidden(){return this.widget.isHidden}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class As extends je{constructor(e){super(),this.side=e}get length(){return 0}merge(){return!1}become(e){return e instanceof As&&e.side==this.side}split(){return new As(this.side)}sync(){if(!this.dom){let e=document.createElement("img");e.className="cm-widgetBuffer",e.setAttribute("aria-hidden","true"),this.setDOM(e)}}getSide(){return this.side}domAtPos(e){return this.side>0?mt.before(this.dom):mt.after(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(e){return this.dom.getBoundingClientRect()}get overrideDOMText(){return De.empty}get isHidden(){return!0}}tn.prototype.children=Di.prototype.children=As.prototype.children=vh;function KO(n,e){let t=n.dom,{children:i}=n,s=0;for(let r=0;s<i.length;s++){let o=i[s],a=r+o.length;if(!(a==r&&o.getSide()<=0)){if(e>r&&e<a&&o.dom.parentNode==t)return o.domAtPos(e-r);if(e<=r)break;r=a}}for(let r=s;r>0;r--){let o=i[r-1];if(o.dom.parentNode==t)return o.domAtPos(o.length)}for(let r=s;r<i.length;r++){let o=i[r];if(o.dom.parentNode==t)return o.domAtPos(0)}return new mt(t,0)}function JO(n,e,t){let i,{children:s}=n;t>0&&e instanceof jn&&s.length&&(i=s[s.length-1])instanceof jn&&i.mark.eq(e.mark)?JO(i,e.children[0],t-1):(s.push(e),e.setParent(n)),n.length+=e.length}function e0(n,e,t){let i=null,s=-1,r=null,o=-1;function a(u,c){for(let h=0,d=0;h<u.children.length&&d<=c;h++){let f=u.children[h],p=d+f.length;p>=c&&(f.children.length?a(f,c-d):(!r||r.isHidden&&t>0)&&(p>c||d==p&&f.getSide()>0)?(r=f,o=c-d):(d<c||d==p&&f.getSide()<0&&!f.isHidden)&&(i=f,s=c-d)),d=p}}a(n,e);let l=(t<0?i:r)||i||r;return l?l.coordsAt(Math.max(0,l==i?s:o),t):aR(n)}function aR(n){let e=n.dom.lastChild;if(!e)return n.dom.getBoundingClientRect();let t=Lr(e);return t[t.length-1]||null}function wc(n,e){for(let t in n)t=="class"&&e.class?e.class+=" "+n.class:t=="style"&&e.style?e.style+=";"+n.style:e[t]=n[t];return e}const Df=Object.create(null);function Ta(n,e,t){if(n==e)return!0;n||(n=Df),e||(e=Df);let i=Object.keys(n),s=Object.keys(e);if(i.length-(t&&i.indexOf(t)>-1?1:0)!=s.length-(t&&s.indexOf(t)>-1?1:0))return!1;for(let r of i)if(r!=t&&(s.indexOf(r)==-1||n[r]!==e[r]))return!1;return!0}function bc(n,e,t){let i=!1;if(e)for(let s in e)t&&s in t||(i=!0,s=="style"?n.style.cssText="":n.removeAttribute(s));if(t)for(let s in t)e&&e[s]==t[s]||(i=!0,s=="style"?n.style.cssText=t[s]:n.setAttribute(s,t[s]));return i}function lR(n){let e=Object.create(null);for(let t=0;t<n.attributes.length;t++){let i=n.attributes[t];e[i.name]=i.value}return e}class ml{eq(e){return!1}updateDOM(e,t){return!1}compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}get estimatedHeight(){return-1}get lineBreaks(){return 0}ignoreEvent(e){return!0}coordsAt(e,t,i){return null}get isHidden(){return!1}get editable(){return!1}destroy(e){}}var Ut=function(n){return n[n.Text=0]="Text",n[n.WidgetBefore=1]="WidgetBefore",n[n.WidgetAfter=2]="WidgetAfter",n[n.WidgetRange=3]="WidgetRange",n}(Ut||(Ut={}));class tt extends Wi{constructor(e,t,i,s){super(),this.startSide=e,this.endSide=t,this.widget=i,this.spec=s}get heightRelevant(){return!1}static mark(e){return new Yr(e)}static widget(e){let t=Math.max(-1e4,Math.min(1e4,e.side||0)),i=!!e.block;return t+=i&&!e.inlineOrder?t>0?3e8:-4e8:t>0?1e8:-1e8,new pi(e,t,t,i,e.widget||null,!1)}static replace(e){let t=!!e.block,i,s;if(e.isBlockGap)i=-5e8,s=4e8;else{let{start:r,end:o}=t0(e,t);i=(r?t?-3e8:-1:5e8)-1,s=(o?t?2e8:1:-6e8)+1}return new pi(e,i,s,t,e.widget||null,!0)}static line(e){return new Gr(e)}static set(e,t=!1){return ze.of(e,t)}hasHeight(){return this.widget?this.widget.estimatedHeight>-1:!1}}tt.none=ze.empty;class Yr extends tt{constructor(e){let{start:t,end:i}=t0(e);super(t?-1:5e8,i?1:-6e8,null,e),this.tagName=e.tagName||"span",this.class=e.class||"",this.attrs=e.attributes||null}eq(e){var t,i;return this==e||e instanceof Yr&&this.tagName==e.tagName&&(this.class||((t=this.attrs)===null||t===void 0?void 0:t.class))==(e.class||((i=e.attrs)===null||i===void 0?void 0:i.class))&&Ta(this.attrs,e.attrs,"class")}range(e,t=e){if(e>=t)throw new RangeError("Mark decorations may not be empty");return super.range(e,t)}}Yr.prototype.point=!1;class Gr extends tt{constructor(e){super(-2e8,-2e8,null,e)}eq(e){return e instanceof Gr&&this.spec.class==e.spec.class&&Ta(this.spec.attributes,e.spec.attributes)}range(e,t=e){if(t!=e)throw new RangeError("Line decoration ranges must be zero-length");return super.range(e,t)}}Gr.prototype.mapMode=wt.TrackBefore;Gr.prototype.point=!0;class pi extends tt{constructor(e,t,i,s,r,o){super(t,i,r,e),this.block=s,this.isReplace=o,this.mapMode=s?t<=0?wt.TrackBefore:wt.TrackAfter:wt.TrackDel}get type(){return this.startSide!=this.endSide?Ut.WidgetRange:this.startSide<=0?Ut.WidgetBefore:Ut.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&(this.widget.estimatedHeight>=5||this.widget.lineBreaks>0)}eq(e){return e instanceof pi&&uR(this.widget,e.widget)&&this.block==e.block&&this.startSide==e.startSide&&this.endSide==e.endSide}range(e,t=e){if(this.isReplace&&(e>t||e==t&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&t!=e)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(e,t)}}pi.prototype.point=!0;function t0(n,e=!1){let{inclusiveStart:t,inclusiveEnd:i}=n;return t==null&&(t=n.inclusive),i==null&&(i=n.inclusive),{start:t??e,end:i??e}}function uR(n,e){return n==e||!!(n&&e&&n.compare(e))}function Fo(n,e,t,i=0){let s=t.length-1;s>=0&&t[s]+i>=n?t[s]=Math.max(t[s],e):t.push(n,e)}class nt extends je{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(e,t,i,s,r,o){if(i){if(!(i instanceof nt))return!1;this.dom||i.transferDOM(this)}return s&&this.setDeco(i?i.attrs:null),GO(this,e,t,i?i.children.slice():[],r,o),!0}split(e){let t=new nt;if(t.breakAfter=this.breakAfter,this.length==0)return t;let{i,off:s}=this.childPos(e);s&&(t.append(this.children[i].split(s),0),this.children[i].merge(s,this.children[i].length,null,!1,0,0),i++);for(let r=i;r<this.children.length;r++)t.append(this.children[r],0);for(;i>0&&this.children[i-1].length==0;)this.children[--i].destroy();return this.children.length=i,this.markDirty(),this.length=e,t}transferDOM(e){this.dom&&(this.markDirty(),e.setDOM(this.dom),e.prevAttrs=this.prevAttrs===void 0?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(e){Ta(this.attrs,e)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=e)}append(e,t){JO(this,e,t)}addLineDeco(e){let t=e.spec.attributes,i=e.spec.class;t&&(this.attrs=wc(t,this.attrs||{})),i&&(this.attrs=wc({class:i},this.attrs||{}))}domAtPos(e){return KO(this,e)}reuseDOM(e){e.nodeName=="DIV"&&(this.setDOM(e),this.flags|=6)}sync(e,t){var i;this.dom?this.flags&4&&(BO(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),this.prevAttrs!==void 0&&(bc(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(e,t);let s=this.dom.lastChild;for(;s&&je.get(s)instanceof jn;)s=s.lastChild;if(!s||!this.length||s.nodeName!="BR"&&((i=je.get(s))===null||i===void 0?void 0:i.isEditable)==!1&&(!re.ios||!this.children.some(r=>r instanceof tn))){let r=document.createElement("BR");r.cmIgnore=!0,this.dom.appendChild(r)}}measureTextSize(){if(this.children.length==0||this.length>20)return null;let e=0,t;for(let i of this.children){if(!(i instanceof tn)||/[^ -~]/.test(i.text))return null;let s=Lr(i.dom);if(s.length!=1)return null;e+=s[0].width,t=s[0].height}return e?{lineHeight:this.dom.getBoundingClientRect().height,charWidth:e/this.length,textHeight:t}:null}coordsAt(e,t){let i=e0(this,e,t);if(!this.children.length&&i&&this.parent){let{heightOracle:s}=this.parent.view.viewState,r=i.bottom-i.top;if(Math.abs(r-s.lineHeight)<2&&s.textHeight<r){let o=(r-s.textHeight)/2;return{top:i.top+o,bottom:i.bottom-o,left:i.left,right:i.left}}}return i}become(e){return e instanceof nt&&this.children.length==0&&e.children.length==0&&Ta(this.attrs,e.attrs)&&this.breakAfter==e.breakAfter}covers(){return!0}static find(e,t){for(let i=0,s=0;i<e.children.length;i++){let r=e.children[i],o=s+r.length;if(o>=t){if(r instanceof nt)return r;if(o>t)break}s=o+r.breakAfter}return null}}class In extends je{constructor(e,t,i){super(),this.widget=e,this.length=t,this.deco=i,this.breakAfter=0,this.prevWidget=null}merge(e,t,i,s,r,o){return i&&(!(i instanceof In)||!this.widget.compare(i.widget)||e>0&&r<=0||t<this.length&&o<=0)?!1:(this.length=e+(i?i.length:0)+(this.length-t),!0)}domAtPos(e){return e==0?mt.before(this.dom):mt.after(this.dom,e==this.length)}split(e){let t=this.length-e;this.length=e;let i=new In(this.widget,t,this.deco);return i.breakAfter=this.breakAfter,i}get children(){return vh}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):De.empty}domBoundsAround(){return null}become(e){return e instanceof In&&e.widget.constructor==this.widget.constructor?(e.widget.compare(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,this.deco=e.deco,this.breakAfter=e.breakAfter,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get isEditable(){return!1}get isWidget(){return!0}coordsAt(e,t){let i=this.widget.coordsAt(this.dom,e,t);return i||(this.widget instanceof xc?null:fl(this.dom.getBoundingClientRect(),this.length?e==0:t<=0))}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}covers(e){let{startSide:t,endSide:i}=this.deco;return t==i?!1:e<0?t<0:i>0}}class xc extends ml{constructor(e){super(),this.height=e}toDOM(){let e=document.createElement("div");return e.className="cm-gap",this.updateDOM(e),e}eq(e){return e.height==this.height}updateDOM(e){return e.style.height=this.height+"px",!0}get editable(){return!0}get estimatedHeight(){return this.height}ignoreEvent(){return!1}}class wr{constructor(e,t,i,s){this.doc=e,this.pos=t,this.end=i,this.disallowBlockEffectsFor=s,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.bufferMarks=[],this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=e.iter(),this.skip=t}posCovered(){if(this.content.length==0)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let e=this.content[this.content.length-1];return!(e.breakAfter||e instanceof In&&e.deco.endSide<0)}getLine(){return this.curLine||(this.content.push(this.curLine=new nt),this.atCursorPos=!0),this.curLine}flushBuffer(e=this.bufferMarks){this.pendingBuffer&&(this.curLine.append(xo(new As(-1),e),e.length),this.pendingBuffer=0)}addBlockWidget(e){this.flushBuffer(),this.curLine=null,this.content.push(e)}finish(e){this.pendingBuffer&&e<=this.bufferMarks.length?this.flushBuffer():this.pendingBuffer=0,!this.posCovered()&&!(e&&this.content.length&&this.content[this.content.length-1]instanceof In)&&this.getLine()}buildText(e,t,i){for(;e>0;){if(this.textOff==this.text.length){let{value:r,lineBreak:o,done:a}=this.cursor.next(this.skip);if(this.skip=0,a)throw new Error("Ran out of text content when drawing inline views");if(o){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer(),this.curLine=null,this.atCursorPos=!0,e--;continue}else this.text=r,this.textOff=0}let s=Math.min(this.text.length-this.textOff,e,512);this.flushBuffer(t.slice(t.length-i)),this.getLine().append(xo(new tn(this.text.slice(this.textOff,this.textOff+s)),t),i),this.atCursorPos=!0,this.textOff+=s,e-=s,i=0}}span(e,t,i,s){this.buildText(t-e,i,s),this.pos=t,this.openStart<0&&(this.openStart=s)}point(e,t,i,s,r,o){if(this.disallowBlockEffectsFor[o]&&i instanceof pi){if(i.block)throw new RangeError("Block decorations may not be specified via plugins");if(t>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let a=t-e;if(i instanceof pi)if(i.block)i.startSide>0&&!this.posCovered()&&this.getLine(),this.addBlockWidget(new In(i.widget||Cs.block,a,i));else{let l=Di.create(i.widget||Cs.inline,a,a?0:i.startSide),u=this.atCursorPos&&!l.isEditable&&r<=s.length&&(e<t||i.startSide>0),c=!l.isEditable&&(e<t||r>s.length||i.startSide<=0),h=this.getLine();this.pendingBuffer==2&&!u&&!l.isEditable&&(this.pendingBuffer=0),this.flushBuffer(s),u&&(h.append(xo(new As(1),s),r),r=s.length+Math.max(0,r-s.length)),h.append(xo(l,s),r),this.atCursorPos=c,this.pendingBuffer=c?e<t||r>s.length?1:2:0,this.pendingBuffer&&(this.bufferMarks=s.slice())}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(i);a&&(this.textOff+a<=this.text.length?this.textOff+=a:(this.skip+=a-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=t),this.openStart<0&&(this.openStart=r)}static build(e,t,i,s,r){let o=new wr(e,t,i,r);return o.openEnd=ze.spans(s,t,i,o),o.openStart<0&&(o.openStart=o.openEnd),o.finish(o.openEnd),o}}function xo(n,e){for(let t of e)n=new jn(t,[n],n.length);return n}class Cs extends ml{constructor(e){super(),this.tag=e}eq(e){return e.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(e){return e.nodeName.toLowerCase()==this.tag}get isHidden(){return!0}}Cs.inline=new Cs("span");Cs.block=new Cs("div");var ut=function(n){return n[n.LTR=0]="LTR",n[n.RTL=1]="RTL",n}(ut||(ut={}));const Gi=ut.LTR,wh=ut.RTL;function n0(n){let e=[];for(let t=0;t<n.length;t++)e.push(1<<+n[t]);return e}const cR=n0("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),hR=n0("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),Sc=Object.create(null),ln=[];for(let n of["()","[]","{}"]){let e=n.charCodeAt(0),t=n.charCodeAt(1);Sc[e]=t,Sc[t]=-e}function i0(n){return n<=247?cR[n]:1424<=n&&n<=1524?2:1536<=n&&n<=1785?hR[n-1536]:1774<=n&&n<=2220?4:8192<=n&&n<=8204?256:64336<=n&&n<=65023?4:1}const dR=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class li{get dir(){return this.level%2?wh:Gi}constructor(e,t,i){this.from=e,this.to=t,this.level=i}side(e,t){return this.dir==t==e?this.to:this.from}forward(e,t){return e==(this.dir==t)}static find(e,t,i,s){let r=-1;for(let o=0;o<e.length;o++){let a=e[o];if(a.from<=t&&a.to>=t){if(a.level==i)return o;(r<0||(s!=0?s<0?a.from<t:a.to>t:e[r].level>a.level))&&(r=o)}}if(r<0)throw new RangeError("Index out of range");return r}}function s0(n,e){if(n.length!=e.length)return!1;for(let t=0;t<n.length;t++){let i=n[t],s=e[t];if(i.from!=s.from||i.to!=s.to||i.direction!=s.direction||!s0(i.inner,s.inner))return!1}return!0}const Ue=[];function fR(n,e,t,i,s){for(let r=0;r<=i.length;r++){let o=r?i[r-1].to:e,a=r<i.length?i[r].from:t,l=r?256:s;for(let u=o,c=l,h=l;u<a;u++){let d=i0(n.charCodeAt(u));d==512?d=c:d==8&&h==4&&(d=16),Ue[u]=d==4?2:d,d&7&&(h=d),c=d}for(let u=o,c=l,h=l;u<a;u++){let d=Ue[u];if(d==128)u<a-1&&c==Ue[u+1]&&c&24?d=Ue[u]=c:Ue[u]=256;else if(d==64){let f=u+1;for(;f<a&&Ue[f]==64;)f++;let p=u&&c==8||f<t&&Ue[f]==8?h==1?1:8:256;for(let m=u;m<f;m++)Ue[m]=p;u=f-1}else d==8&&h==1&&(Ue[u]=1);c=d,d&7&&(h=d)}}}function pR(n,e,t,i,s){let r=s==1?2:1;for(let o=0,a=0,l=0;o<=i.length;o++){let u=o?i[o-1].to:e,c=o<i.length?i[o].from:t;for(let h=u,d,f,p;h<c;h++)if(f=Sc[d=n.charCodeAt(h)])if(f<0){for(let m=a-3;m>=0;m-=3)if(ln[m+1]==-f){let O=ln[m+2],y=O&2?s:O&4?O&1?r:s:0;y&&(Ue[h]=Ue[ln[m]]=y),a=m;break}}else{if(ln.length==189)break;ln[a++]=h,ln[a++]=d,ln[a++]=l}else if((p=Ue[h])==2||p==1){let m=p==s;l=m?0:1;for(let O=a-3;O>=0;O-=3){let y=ln[O+2];if(y&2)break;if(m)ln[O+2]|=2;else{if(y&4)break;ln[O+2]|=4}}}}}function mR(n,e,t,i){for(let s=0,r=i;s<=t.length;s++){let o=s?t[s-1].to:n,a=s<t.length?t[s].from:e;for(let l=o;l<a;){let u=Ue[l];if(u==256){let c=l+1;for(;;)if(c==a){if(s==t.length)break;c=t[s++].to,a=s<t.length?t[s].from:e}else if(Ue[c]==256)c++;else break;let h=r==1,d=(c<e?Ue[c]:i)==1,f=h==d?h?1:2:i;for(let p=c,m=s,O=m?t[m-1].to:n;p>l;)p==O&&(p=t[--m].from,O=m?t[m-1].to:n),Ue[--p]=f;l=c}else r=u,l++}}}function _c(n,e,t,i,s,r,o){let a=i%2?2:1;if(i%2==s%2)for(let l=e,u=0;l<t;){let c=!0,h=!1;if(u==r.length||l<r[u].from){let m=Ue[l];m!=a&&(c=!1,h=m==16)}let d=!c&&a==1?[]:null,f=c?i:i+1,p=l;e:for(;;)if(u<r.length&&p==r[u].from){if(h)break e;let m=r[u];if(!c)for(let O=m.to,y=u+1;;){if(O==t)break e;if(y<r.length&&r[y].from==O)O=r[y++].to;else{if(Ue[O]==a)break e;break}}if(u++,d)d.push(m);else{m.from>l&&o.push(new li(l,m.from,f));let O=m.direction==Gi!=!(f%2);$c(n,O?i+1:i,s,m.inner,m.from,m.to,o),l=m.to}p=m.to}else{if(p==t||(c?Ue[p]!=a:Ue[p]==a))break;p++}d?_c(n,l,p,i+1,s,d,o):l<p&&o.push(new li(l,p,f)),l=p}else for(let l=t,u=r.length;l>e;){let c=!0,h=!1;if(!u||l>r[u-1].to){let m=Ue[l-1];m!=a&&(c=!1,h=m==16)}let d=!c&&a==1?[]:null,f=c?i:i+1,p=l;e:for(;;)if(u&&p==r[u-1].to){if(h)break e;let m=r[--u];if(!c)for(let O=m.from,y=u;;){if(O==e)break e;if(y&&r[y-1].to==O)O=r[--y].from;else{if(Ue[O-1]==a)break e;break}}if(d)d.push(m);else{m.to<l&&o.push(new li(m.to,l,f));let O=m.direction==Gi!=!(f%2);$c(n,O?i+1:i,s,m.inner,m.from,m.to,o),l=m.from}p=m.from}else{if(p==e||(c?Ue[p-1]!=a:Ue[p-1]==a))break;p--}d?_c(n,p,l,i+1,s,d,o):p<l&&o.push(new li(p,l,f)),l=p}}function $c(n,e,t,i,s,r,o){let a=e%2?2:1;fR(n,s,r,i,a),pR(n,s,r,i,a),mR(s,r,i,a),_c(n,s,r,e,t,i,o)}function gR(n,e,t){if(!n)return[new li(0,0,e==wh?1:0)];if(e==Gi&&!t.length&&!dR.test(n))return r0(n.length);if(t.length)for(;n.length>Ue.length;)Ue[Ue.length]=256;let i=[],s=e==Gi?0:1;return $c(n,s,s,t,0,n.length,i),i}function r0(n){return[new li(0,n,0)]}let o0="";function OR(n,e,t,i,s){var r;let o=i.head-n.from,a=li.find(e,o,(r=i.bidiLevel)!==null&&r!==void 0?r:-1,i.assoc),l=e[a],u=l.side(s,t);if(o==u){let d=a+=s?1:-1;if(d<0||d>=e.length)return null;l=e[a=d],o=l.side(!s,t),u=l.side(s,t)}let c=bt(n.text,o,l.forward(s,t));(c<l.from||c>l.to)&&(c=u),o0=n.text.slice(Math.min(o,c),Math.max(o,c));let h=a==(s?e.length-1:0)?null:e[a+(s?1:-1)];return h&&c==u&&h.level+(s?0:1)<l.level?ee.cursor(h.side(!s,t)+n.from,h.forward(s,t)?1:-1,h.level):ee.cursor(c+n.from,l.forward(s,t)?-1:1,l.level)}function yR(n,e,t){for(let i=e;i<t;i++){let s=i0(n.charCodeAt(i));if(s==1)return Gi;if(s==2||s==4)return wh}return Gi}const a0=ge.define(),l0=ge.define(),u0=ge.define(),c0=ge.define(),kc=ge.define(),h0=ge.define(),d0=ge.define(),bh=ge.define(),xh=ge.define(),f0=ge.define({combine:n=>n.some(e=>e)}),vR=ge.define({combine:n=>n.some(e=>e)}),p0=ge.define();class ys{constructor(e,t="nearest",i="nearest",s=5,r=5,o=!1){this.range=e,this.y=t,this.x=i,this.yMargin=s,this.xMargin=r,this.isSnapshot=o}map(e){return e.empty?this:new ys(this.range.map(e),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}clip(e){return this.range.to<=e.doc.length?this:new ys(ee.cursor(e.doc.length),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}}const So=Fe.define({map:(n,e)=>n.map(e)}),m0=Fe.define();function mn(n,e,t){let i=n.facet(c0);i.length?i[0](e):window.onerror?window.onerror(String(e),t,void 0,void 0,e):t?console.error(t+":",e):console.error(e)}const Cn=ge.define({combine:n=>n.length?n[0]:!0});let wR=0;const rr=ge.define();class mi{constructor(e,t,i,s,r){this.id=e,this.create=t,this.domEventHandlers=i,this.domEventObservers=s,this.extension=r(this)}static define(e,t){const{eventHandlers:i,eventObservers:s,provide:r,decorations:o}=t||{};return new mi(wR++,e,i,s,a=>{let l=[rr.of(a)];return o&&l.push(zr.of(u=>{let c=u.plugin(a);return c?o(c):tt.none})),r&&l.push(r(a)),l})}static fromClass(e,t){return mi.define(i=>new e(i),t)}}class Kl{constructor(e){this.spec=e,this.mustUpdate=null,this.value=null}update(e){if(this.value){if(this.mustUpdate){let t=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(t)}catch(i){if(mn(t.state,i,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch{}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.create(e)}catch(t){mn(e.state,t,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(e){var t;if(!((t=this.value)===null||t===void 0)&&t.destroy)try{this.value.destroy()}catch(i){mn(e.state,i,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const g0=ge.define(),Sh=ge.define(),zr=ge.define(),O0=ge.define(),_h=ge.define(),y0=ge.define();function Nf(n,e){let t=n.state.facet(y0);if(!t.length)return t;let i=t.map(r=>r instanceof Function?r(n):r),s=[];return ze.spans(i,e.from,e.to,{point(){},span(r,o,a,l){let u=r-e.from,c=o-e.from,h=s;for(let d=a.length-1;d>=0;d--,l--){let f=a[d].spec.bidiIsolate,p;if(f==null&&(f=yR(e.text,u,c)),l>0&&h.length&&(p=h[h.length-1]).to==u&&p.direction==f)p.to=c,h=p.inner;else{let m={from:u,to:c,direction:f,inner:[]};h.push(m),h=m.inner}}}}),s}const v0=ge.define();function w0(n){let e=0,t=0,i=0,s=0;for(let r of n.state.facet(v0)){let o=r(n);o&&(o.left!=null&&(e=Math.max(e,o.left)),o.right!=null&&(t=Math.max(t,o.right)),o.top!=null&&(i=Math.max(i,o.top)),o.bottom!=null&&(s=Math.max(s,o.bottom)))}return{left:e,right:t,top:i,bottom:s}}const or=ge.define();class jt{constructor(e,t,i,s){this.fromA=e,this.toA=t,this.fromB=i,this.toB=s}join(e){return new jt(Math.min(this.fromA,e.fromA),Math.max(this.toA,e.toA),Math.min(this.fromB,e.fromB),Math.max(this.toB,e.toB))}addToSet(e){let t=e.length,i=this;for(;t>0;t--){let s=e[t-1];if(!(s.fromA>i.toA)){if(s.toA<i.fromA)break;i=i.join(s),e.splice(t-1,1)}}return e.splice(t,0,i),e}static extendWithRanges(e,t){if(t.length==0)return e;let i=[];for(let s=0,r=0,o=0,a=0;;s++){let l=s==e.length?null:e[s],u=o-a,c=l?l.fromB:1e9;for(;r<t.length&&t[r]<c;){let h=t[r],d=t[r+1],f=Math.max(a,h),p=Math.min(c,d);if(f<=p&&new jt(f+u,p+u,f,p).addToSet(i),d>c)break;r+=2}if(!l)return i;new jt(l.fromA,l.toA,l.fromB,l.toB).addToSet(i),o=l.toA,a=l.toB}}}class Aa{constructor(e,t,i){this.view=e,this.state=t,this.transactions=i,this.flags=0,this.startState=e.state,this.changes=ct.empty(this.startState.doc.length);for(let r of i)this.changes=this.changes.compose(r.changes);let s=[];this.changes.iterChangedRanges((r,o,a,l)=>s.push(new jt(r,o,a,l))),this.changedRanges=s}static create(e,t,i){return new Aa(e,t,i)}get viewportChanged(){return(this.flags&4)>0}get viewportMoved(){return(this.flags&8)>0}get heightChanged(){return(this.flags&2)>0}get geometryChanged(){return this.docChanged||(this.flags&18)>0}get focusChanged(){return(this.flags&1)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(e=>e.selection)}get empty(){return this.flags==0&&this.transactions.length==0}}class If extends je{get length(){return this.view.state.doc.length}constructor(e){super(),this.view=e,this.decorations=[],this.dynamicDecorationMap=[!1],this.domChanged=null,this.hasComposition=null,this.markedForComposition=new Set,this.editContextFormatting=tt.none,this.lastCompositionAfterCursor=!1,this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(e.contentDOM),this.children=[new nt],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new jt(0,0,0,e.state.doc.length)],0,null)}update(e){var t;let i=e.changedRanges;this.minWidth>0&&i.length&&(i.every(({fromA:u,toA:c})=>c<this.minWidthFrom||u>this.minWidthTo)?(this.minWidthFrom=e.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=e.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.updateEditContextFormatting(e);let s=-1;this.view.inputState.composing>=0&&!this.view.observer.editContext&&(!((t=this.domChanged)===null||t===void 0)&&t.newSel?s=this.domChanged.newSel.head:!PR(e.changes,this.hasComposition)&&!e.selectionSet&&(s=e.state.selection.main.head));let r=s>-1?xR(this.view,e.changes,s):null;if(this.domChanged=null,this.hasComposition){this.markedForComposition.clear();let{from:u,to:c}=this.hasComposition;i=new jt(u,c,e.changes.mapPos(u,-1),e.changes.mapPos(c,1)).addToSet(i.slice())}this.hasComposition=r?{from:r.range.fromB,to:r.range.toB}:null,(re.ie||re.chrome)&&!r&&e&&e.state.doc.lines!=e.startState.doc.lines&&(this.forceSelection=!0);let o=this.decorations,a=this.updateDeco(),l=$R(o,a,e.changes);return i=jt.extendWithRanges(i,l),!(this.flags&7)&&i.length==0?!1:(this.updateInner(i,e.startState.doc.length,r),e.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(e,t,i){this.view.viewState.mustMeasureContent=!0,this.updateChildren(e,t,i);let{observer:s}=this.view;s.ignore(()=>{this.dom.style.height=this.view.viewState.contentHeight/this.view.scaleY+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let o=re.chrome||re.ios?{node:s.selectionRange.focusNode,written:!1}:void 0;this.sync(this.view,o),this.flags&=-8,o&&(o.written||s.selectionRange.focusNode!=o.node)&&(this.forceSelection=!0),this.dom.style.height=""}),this.markedForComposition.forEach(o=>o.flags&=-9);let r=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let o of this.children)o instanceof In&&o.widget instanceof xc&&r.push(o.dom);s.updateGaps(r)}updateChildren(e,t,i){let s=i?i.range.addToSet(e.slice()):e,r=this.childCursor(t);for(let o=s.length-1;;o--){let a=o>=0?s[o]:null;if(!a)break;let{fromA:l,toA:u,fromB:c,toB:h}=a,d,f,p,m;if(i&&i.range.fromB<h&&i.range.toB>c){let g=wr.build(this.view.state.doc,c,i.range.fromB,this.decorations,this.dynamicDecorationMap),k=wr.build(this.view.state.doc,i.range.toB,h,this.decorations,this.dynamicDecorationMap);f=g.breakAtStart,p=g.openStart,m=k.openEnd;let S=this.compositionView(i);k.breakAtStart?S.breakAfter=1:k.content.length&&S.merge(S.length,S.length,k.content[0],!1,k.openStart,0)&&(S.breakAfter=k.content[0].breakAfter,k.content.shift()),g.content.length&&S.merge(0,0,g.content[g.content.length-1],!0,0,g.openEnd)&&g.content.pop(),d=g.content.concat(S).concat(k.content)}else({content:d,breakAtStart:f,openStart:p,openEnd:m}=wr.build(this.view.state.doc,c,h,this.decorations,this.dynamicDecorationMap));let{i:O,off:y}=r.findPos(u,1),{i:b,off:v}=r.findPos(l,-1);YO(this,b,v,O,y,d,f,p,m)}i&&this.fixCompositionDOM(i)}updateEditContextFormatting(e){this.editContextFormatting=this.editContextFormatting.map(e.changes);for(let t of e.transactions)for(let i of t.effects)i.is(m0)&&(this.editContextFormatting=i.value)}compositionView(e){let t=new tn(e.text.nodeValue);t.flags|=8;for(let{deco:s}of e.marks)t=new jn(s,[t],t.length);let i=new nt;return i.append(t,0),i}fixCompositionDOM(e){let t=(r,o)=>{o.flags|=8|(o.children.some(l=>l.flags&7)?1:0),this.markedForComposition.add(o);let a=je.get(r);a&&a!=o&&(a.dom=null),o.setDOM(r)},i=this.childPos(e.range.fromB,1),s=this.children[i.i];t(e.line,s);for(let r=e.marks.length-1;r>=-1;r--)i=s.childPos(i.off,1),s=s.children[i.i],t(r>=0?e.marks[r].node:e.text,s)}updateSelection(e=!1,t=!1){(e||!this.view.observer.selectionRange.focusNode)&&this.view.observer.readSelectionRange();let i=this.view.root.activeElement,s=i==this.dom,r=!s&&!(this.view.state.facet(Cn)||this.dom.tabIndex>-1)&&Ho(this.dom,this.view.observer.selectionRange)&&!(i&&this.dom.contains(i));if(!(s||t||r))return;let o=this.forceSelection;this.forceSelection=!1;let a=this.view.state.selection.main,l=this.moveToLine(this.domAtPos(a.anchor)),u=a.empty?l:this.moveToLine(this.domAtPos(a.head));if(re.gecko&&a.empty&&!this.hasComposition&&bR(l)){let h=document.createTextNode("");this.view.observer.ignore(()=>l.node.insertBefore(h,l.node.childNodes[l.offset]||null)),l=u=new mt(h,0),o=!0}let c=this.view.observer.selectionRange;(o||!c.focusNode||(!vr(l.node,l.offset,c.anchorNode,c.anchorOffset)||!vr(u.node,u.offset,c.focusNode,c.focusOffset))&&!this.suppressWidgetCursorChange(c,a))&&(this.view.observer.ignore(()=>{re.android&&re.chrome&&this.dom.contains(c.focusNode)&&kR(c.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let h=Ir(this.view.root);if(h)if(a.empty){if(re.gecko){let d=SR(l.node,l.offset);if(d&&d!=3){let f=(d==1?jO:WO)(l.node,l.offset);f&&(l=new mt(f.node,f.offset))}}h.collapse(l.node,l.offset),a.bidiLevel!=null&&h.caretBidiLevel!==void 0&&(h.caretBidiLevel=a.bidiLevel)}else if(h.extend){h.collapse(l.node,l.offset);try{h.extend(u.node,u.offset)}catch{}}else{let d=document.createRange();a.anchor>a.head&&([l,u]=[u,l]),d.setEnd(u.node,u.offset),d.setStart(l.node,l.offset),h.removeAllRanges(),h.addRange(d)}r&&this.view.root.activeElement==this.dom&&(this.dom.blur(),i&&i.focus())}),this.view.observer.setSelectionRange(l,u)),this.impreciseAnchor=l.precise?null:new mt(c.anchorNode,c.anchorOffset),this.impreciseHead=u.precise?null:new mt(c.focusNode,c.focusOffset)}suppressWidgetCursorChange(e,t){return this.hasComposition&&t.empty&&vr(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset)&&this.posFromDOM(e.focusNode,e.focusOffset)==t.head}enforceCursorAssoc(){if(this.hasComposition)return;let{view:e}=this,t=e.state.selection.main,i=Ir(e.root),{anchorNode:s,anchorOffset:r}=e.observer.selectionRange;if(!i||!t.empty||!t.assoc||!i.modify)return;let o=nt.find(this,t.head);if(!o)return;let a=o.posAtStart;if(t.head==a||t.head==a+o.length)return;let l=this.coordsAt(t.head,-1),u=this.coordsAt(t.head,1);if(!l||!u||l.bottom>u.top)return;let c=this.domAtPos(t.head+t.assoc);i.collapse(c.node,c.offset),i.modify("move",t.assoc<0?"forward":"backward","lineboundary"),e.observer.readSelectionRange();let h=e.observer.selectionRange;e.docView.posFromDOM(h.anchorNode,h.anchorOffset)!=t.from&&i.collapse(s,r)}moveToLine(e){let t=this.dom,i;if(e.node!=t)return e;for(let s=e.offset;!i&&s<t.childNodes.length;s++){let r=je.get(t.childNodes[s]);r instanceof nt&&(i=r.domAtPos(0))}for(let s=e.offset-1;!i&&s>=0;s--){let r=je.get(t.childNodes[s]);r instanceof nt&&(i=r.domAtPos(r.length))}return i?new mt(i.node,i.offset,!0):e}nearest(e){for(let t=e;t;){let i=je.get(t);if(i&&i.rootView==this)return i;t=t.parentNode}return null}posFromDOM(e,t){let i=this.nearest(e);if(!i)throw new RangeError("Trying to find position for a DOM position outside of the document");return i.localPosFromDOM(e,t)+i.posAtStart}domAtPos(e){let{i:t,off:i}=this.childCursor().findPos(e,-1);for(;t<this.children.length-1;){let s=this.children[t];if(i<s.length||s instanceof nt)break;t++,i=0}return this.children[t].domAtPos(i)}coordsAt(e,t){let i=null,s=0;for(let r=this.length,o=this.children.length-1;o>=0;o--){let a=this.children[o],l=r-a.breakAfter,u=l-a.length;if(l<e)break;if(u<=e&&(u<e||a.covers(-1))&&(l>e||a.covers(1))&&(!i||a instanceof nt&&!(i instanceof nt&&t>=0)))i=a,s=u;else if(i&&u==e&&l==e&&a instanceof In&&Math.abs(t)<2){if(a.deco.startSide<0)break;o&&(i=null)}r=u}return i?i.coordsAt(e-s,t):null}coordsForChar(e){let{i:t,off:i}=this.childPos(e,1),s=this.children[t];if(!(s instanceof nt))return null;for(;s.children.length;){let{i:a,off:l}=s.childPos(i,1);for(;;a++){if(a==s.children.length)return null;if((s=s.children[a]).length)break}i=l}if(!(s instanceof tn))return null;let r=bt(s.text,i);if(r==i)return null;let o=Yi(s.dom,i,r).getClientRects();for(let a=0;a<o.length;a++){let l=o[a];if(a==o.length-1||l.top<l.bottom&&l.left<l.right)return l}return null}measureVisibleLineHeights(e){let t=[],{from:i,to:s}=e,r=this.view.contentDOM.clientWidth,o=r>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,a=-1,l=this.view.textDirection==ut.LTR;for(let u=0,c=0;c<this.children.length;c++){let h=this.children[c],d=u+h.length;if(d>s)break;if(u>=i){let f=h.dom.getBoundingClientRect();if(t.push(f.height),o){let p=h.dom.lastChild,m=p?Lr(p):[];if(m.length){let O=m[m.length-1],y=l?O.right-f.left:f.right-O.left;y>a&&(a=y,this.minWidth=r,this.minWidthFrom=u,this.minWidthTo=d)}}}u=d+h.breakAfter}return t}textDirectionAt(e){let{i:t}=this.childPos(e,1);return getComputedStyle(this.children[t].dom).direction=="rtl"?ut.RTL:ut.LTR}measureTextSize(){for(let r of this.children)if(r instanceof nt){let o=r.measureTextSize();if(o)return o}let e=document.createElement("div"),t,i,s;return e.className="cm-line",e.style.width="99999px",e.style.position="absolute",e.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.dom.appendChild(e);let r=Lr(e.firstChild)[0];t=e.getBoundingClientRect().height,i=r?r.width/27:7,s=r?r.height:t,e.remove()}),{lineHeight:t,charWidth:i,textHeight:s}}childCursor(e=this.length){let t=this.children.length;return t&&(e-=this.children[--t].length),new qO(this.children,e,t)}computeBlockGapDeco(){let e=[],t=this.view.viewState;for(let i=0,s=0;;s++){let r=s==t.viewports.length?null:t.viewports[s],o=r?r.from-1:this.length;if(o>i){let a=(t.lineBlockAt(o).bottom-t.lineBlockAt(i).top)/this.view.scaleY;e.push(tt.replace({widget:new xc(a),block:!0,inclusive:!0,isBlockGap:!0}).range(i,o))}if(!r)break;i=r.to+1}return tt.set(e)}updateDeco(){let e=1,t=this.view.state.facet(zr).map(r=>(this.dynamicDecorationMap[e++]=typeof r=="function")?r(this.view):r),i=!1,s=this.view.state.facet(O0).map((r,o)=>{let a=typeof r=="function";return a&&(i=!0),a?r(this.view):r});for(s.length&&(this.dynamicDecorationMap[e++]=i,t.push(ze.join(s))),this.decorations=[this.editContextFormatting,...t,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco];e<this.decorations.length;)this.dynamicDecorationMap[e++]=!1;return this.decorations}scrollIntoView(e){if(e.isSnapshot){let u=this.view.viewState.lineBlockAt(e.range.head);this.view.scrollDOM.scrollTop=u.top-e.yMargin,this.view.scrollDOM.scrollLeft=e.xMargin;return}for(let u of this.view.state.facet(p0))try{if(u(this.view,e.range,e))return!0}catch(c){mn(this.view.state,c,"scroll handler")}let{range:t}=e,i=this.coordsAt(t.head,t.empty?t.assoc:t.head>t.anchor?-1:1),s;if(!i)return;!t.empty&&(s=this.coordsAt(t.anchor,t.anchor>t.head?-1:1))&&(i={left:Math.min(i.left,s.left),top:Math.min(i.top,s.top),right:Math.max(i.right,s.right),bottom:Math.max(i.bottom,s.bottom)});let r=w0(this.view),o={left:i.left-r.left,top:i.top-r.top,right:i.right+r.right,bottom:i.bottom+r.bottom},{offsetWidth:a,offsetHeight:l}=this.view.scrollDOM;eR(this.view.scrollDOM,o,t.head<t.anchor?-1:1,e.x,e.y,Math.max(Math.min(e.xMargin,a),-a),Math.max(Math.min(e.yMargin,l),-l),this.view.textDirection==ut.LTR)}}function bR(n){return n.node.nodeType==1&&n.node.firstChild&&(n.offset==0||n.node.childNodes[n.offset-1].contentEditable=="false")&&(n.offset==n.node.childNodes.length||n.node.childNodes[n.offset].contentEditable=="false")}function b0(n,e){let t=n.observer.selectionRange;if(!t.focusNode)return null;let i=jO(t.focusNode,t.focusOffset),s=WO(t.focusNode,t.focusOffset),r=i||s;if(s&&i&&s.node!=i.node){let a=je.get(s.node);if(!a||a instanceof tn&&a.text!=s.node.nodeValue)r=s;else if(n.docView.lastCompositionAfterCursor){let l=je.get(i.node);!l||l instanceof tn&&l.text!=i.node.nodeValue||(r=s)}}if(n.docView.lastCompositionAfterCursor=r!=i,!r)return null;let o=e-r.offset;return{from:o,to:o+r.node.nodeValue.length,node:r.node}}function xR(n,e,t){let i=b0(n,t);if(!i)return null;let{node:s,from:r,to:o}=i,a=s.nodeValue;if(/[\n\r]/.test(a)||n.state.doc.sliceString(i.from,i.to)!=a)return null;let l=e.invertedDesc,u=new jt(l.mapPos(r),l.mapPos(o),r,o),c=[];for(let h=s.parentNode;;h=h.parentNode){let d=je.get(h);if(d instanceof jn)c.push({node:h,deco:d.mark});else{if(d instanceof nt||h.nodeName=="DIV"&&h.parentNode==n.contentDOM)return{range:u,text:s,marks:c,line:h};if(h!=n.contentDOM)c.push({node:h,deco:new Yr({inclusive:!0,attributes:lR(h),tagName:h.tagName.toLowerCase()})});else return null}}}function SR(n,e){return n.nodeType!=1?0:(e&&n.childNodes[e-1].contentEditable=="false"?1:0)|(e<n.childNodes.length&&n.childNodes[e].contentEditable=="false"?2:0)}let _R=class{constructor(){this.changes=[]}compareRange(e,t){Fo(e,t,this.changes)}comparePoint(e,t){Fo(e,t,this.changes)}boundChange(e){Fo(e,e,this.changes)}};function $R(n,e,t){let i=new _R;return ze.compare(n,e,t,i),i.changes}function kR(n,e){for(let t=n;t&&t!=e;t=t.assignedSlot||t.parentNode)if(t.nodeType==1&&t.contentEditable=="false")return!0;return!1}function PR(n,e){let t=!1;return e&&n.iterChangedRanges((i,s)=>{i<e.to&&s>e.from&&(t=!0)}),t}function QR(n,e,t=1){let i=n.charCategorizer(e),s=n.doc.lineAt(e),r=e-s.from;if(s.length==0)return ee.cursor(e);r==0?t=1:r==s.length&&(t=-1);let o=r,a=r;t<0?o=bt(s.text,r,!1):a=bt(s.text,r);let l=i(s.text.slice(o,a));for(;o>0;){let u=bt(s.text,o,!1);if(i(s.text.slice(u,o))!=l)break;o=u}for(;a<s.length;){let u=bt(s.text,a);if(i(s.text.slice(a,u))!=l)break;a=u}return ee.range(o+s.from,a+s.from)}function TR(n,e){return e.left>n?e.left-n:Math.max(0,n-e.right)}function AR(n,e){return e.top>n?e.top-n:Math.max(0,n-e.bottom)}function Jl(n,e){return n.top<e.bottom-1&&n.bottom>e.top+1}function Lf(n,e){return e<n.top?{top:e,left:n.left,right:n.right,bottom:n.bottom}:n}function zf(n,e){return e>n.bottom?{top:n.top,left:n.left,right:n.right,bottom:e}:n}function Pc(n,e,t){let i,s,r,o,a=!1,l,u,c,h;for(let p=n.firstChild;p;p=p.nextSibling){let m=Lr(p);for(let O=0;O<m.length;O++){let y=m[O];s&&Jl(s,y)&&(y=Lf(zf(y,s.bottom),s.top));let b=TR(e,y),v=AR(t,y);if(b==0&&v==0)return p.nodeType==3?Vf(p,e,t):Pc(p,e,t);if(!i||o>v||o==v&&r>b){i=p,s=y,r=b,o=v;let g=v?t<y.top?-1:1:b?e<y.left?-1:1:0;a=!g||(g>0?O<m.length-1:O>0)}b==0?t>y.bottom&&(!c||c.bottom<y.bottom)?(l=p,c=y):t<y.top&&(!h||h.top>y.top)&&(u=p,h=y):c&&Jl(c,y)?c=zf(c,y.bottom):h&&Jl(h,y)&&(h=Lf(h,y.top))}}if(c&&c.bottom>=t?(i=l,s=c):h&&h.top<=t&&(i=u,s=h),!i)return{node:n,offset:0};let d=Math.max(s.left,Math.min(s.right,e));if(i.nodeType==3)return Vf(i,d,t);if(a&&i.contentEditable!="false")return Pc(i,d,t);let f=Array.prototype.indexOf.call(n.childNodes,i)+(e>=(s.left+s.right)/2?1:0);return{node:n,offset:f}}function Vf(n,e,t){let i=n.nodeValue.length,s=-1,r=1e9,o=0;for(let a=0;a<i;a++){let l=Yi(n,a,a+1).getClientRects();for(let u=0;u<l.length;u++){let c=l[u];if(c.top==c.bottom)continue;o||(o=e-c.left);let h=(c.top>t?c.top-t:t-c.bottom)-1;if(c.left-1<=e&&c.right+1>=e&&h<r){let d=e>=(c.left+c.right)/2,f=d;if((re.chrome||re.gecko)&&Yi(n,a).getBoundingClientRect().left==c.right&&(f=!d),h<=0)return{node:n,offset:a+(f?1:0)};s=a+(f?1:0),r=h}}}return{node:n,offset:s>-1?s:o>0?n.nodeValue.length:0}}function x0(n,e,t,i=-1){var s,r;let o=n.contentDOM.getBoundingClientRect(),a=o.top+n.viewState.paddingTop,l,{docHeight:u}=n.viewState,{x:c,y:h}=e,d=h-a;if(d<0)return 0;if(d>u)return n.state.doc.length;for(let g=n.viewState.heightOracle.textHeight/2,k=!1;l=n.elementAtHeight(d),l.type!=Ut.Text;)for(;d=i>0?l.bottom+g:l.top-g,!(d>=0&&d<=u);){if(k)return t?null:0;k=!0,i=-i}h=a+d;let f=l.from;if(f<n.viewport.from)return n.viewport.from==0?0:t?null:Xf(n,o,l,c,h);if(f>n.viewport.to)return n.viewport.to==n.state.doc.length?n.state.doc.length:t?null:Xf(n,o,l,c,h);let p=n.dom.ownerDocument,m=n.root.elementFromPoint?n.root:p,O=m.elementFromPoint(c,h);O&&!n.contentDOM.contains(O)&&(O=null),O||(c=Math.max(o.left+1,Math.min(o.right-1,c)),O=m.elementFromPoint(c,h),O&&!n.contentDOM.contains(O)&&(O=null));let y,b=-1;if(O&&((s=n.docView.nearest(O))===null||s===void 0?void 0:s.isEditable)!=!1){if(p.caretPositionFromPoint){let g=p.caretPositionFromPoint(c,h);g&&({offsetNode:y,offset:b}=g)}else if(p.caretRangeFromPoint){let g=p.caretRangeFromPoint(c,h);g&&({startContainer:y,startOffset:b}=g,(!n.contentDOM.contains(y)||re.safari&&CR(y,b,c)||re.chrome&&ER(y,b,c))&&(y=void 0))}y&&(b=Math.min(vn(y),b))}if(!y||!n.docView.dom.contains(y)){let g=nt.find(n.docView,f);if(!g)return d>l.top+l.height/2?l.to:l.from;({node:y,offset:b}=Pc(g.dom,c,h))}let v=n.docView.nearest(y);if(!v)return null;if(v.isWidget&&((r=v.dom)===null||r===void 0?void 0:r.nodeType)==1){let g=v.dom.getBoundingClientRect();return e.y<g.top||e.y<=g.bottom&&e.x<=(g.left+g.right)/2?v.posAtStart:v.posAtEnd}else return v.localPosFromDOM(y,b)+v.posAtStart}function Xf(n,e,t,i,s){let r=Math.round((i-e.left)*n.defaultCharacterWidth);if(n.lineWrapping&&t.height>n.defaultLineHeight*1.5){let a=n.viewState.heightOracle.textHeight,l=Math.floor((s-t.top-(n.defaultLineHeight-a)*.5)/a);r+=l*n.viewState.heightOracle.lineLength}let o=n.state.sliceDoc(t.from,t.to);return t.from+YM(o,r,n.state.tabSize)}function CR(n,e,t){let i;if(n.nodeType!=3||e!=(i=n.nodeValue.length))return!1;for(let s=n.nextSibling;s;s=s.nextSibling)if(s.nodeType!=1||s.nodeName!="BR")return!1;return Yi(n,i-1,i).getBoundingClientRect().left>t}function ER(n,e,t){if(e!=0)return!1;for(let s=n;;){let r=s.parentNode;if(!r||r.nodeType!=1||r.firstChild!=s)return!1;if(r.classList.contains("cm-line"))break;s=r}let i=n.nodeType==1?n.getBoundingClientRect():Yi(n,0,Math.max(n.nodeValue.length,1)).getBoundingClientRect();return t-i.left>5}function MR(n,e){let t=n.lineBlockAt(e);if(Array.isArray(t.type)){for(let i of t.type)if(i.to>e||i.to==e&&(i.to==t.to||i.type==Ut.Text))return i}return t}function RR(n,e,t,i){let s=MR(n,e.head),r=!i||s.type!=Ut.Text||!(n.lineWrapping||s.widgetLineBreaks)?null:n.coordsAtPos(e.assoc<0&&e.head>s.from?e.head-1:e.head);if(r){let o=n.dom.getBoundingClientRect(),a=n.textDirectionAt(s.from),l=n.posAtCoords({x:t==(a==ut.LTR)?o.right-1:o.left+1,y:(r.top+r.bottom)/2});if(l!=null)return ee.cursor(l,t?-1:1)}return ee.cursor(t?s.to:s.from,t?-1:1)}function Bf(n,e,t,i){let s=n.state.doc.lineAt(e.head),r=n.bidiSpans(s),o=n.textDirectionAt(s.from);for(let a=e,l=null;;){let u=OR(s,r,o,a,t),c=o0;if(!u){if(s.number==(t?n.state.doc.lines:1))return a;c=`
`,s=n.state.doc.line(s.number+(t?1:-1)),r=n.bidiSpans(s),u=n.visualLineSide(s,!t)}if(l){if(!l(c))return a}else{if(!i)return u;l=i(c)}a=u}}function ZR(n,e,t){let i=n.state.charCategorizer(e),s=i(t);return r=>{let o=i(r);return s==Zn.Space&&(s=o),s==o}}function DR(n,e,t,i){let s=e.head,r=t?1:-1;if(s==(t?n.state.doc.length:0))return ee.cursor(s,e.assoc);let o=e.goalColumn,a,l=n.contentDOM.getBoundingClientRect(),u=n.coordsAtPos(s,e.assoc||-1),c=n.documentTop;if(u)o==null&&(o=u.left-l.left),a=r<0?u.top:u.bottom;else{let f=n.viewState.lineBlockAt(s);o==null&&(o=Math.min(l.right-l.left,n.defaultCharacterWidth*(s-f.from))),a=(r<0?f.top:f.bottom)+c}let h=l.left+o,d=i??n.viewState.heightOracle.textHeight>>1;for(let f=0;;f+=10){let p=a+(d+f)*r,m=x0(n,{x:h,y:p},!1,r);if(p<l.top||p>l.bottom||(r<0?m<s:m>s)){let O=n.docView.coordsForChar(m),y=!O||p<O.top?-1:1;return ee.cursor(m,y,void 0,o)}}}function Ko(n,e,t){for(;;){let i=0;for(let s of n)s.between(e-1,e+1,(r,o,a)=>{if(e>r&&e<o){let l=i||t||(e-r<o-e?-1:1);e=l<0?r:o,i=l}});if(!i)return e}}function eu(n,e,t){let i=Ko(n.state.facet(_h).map(s=>s(n)),t.from,e.head>t.from?-1:1);return i==t.from?t:ee.cursor(i,i<t.from?1:-1)}const ar="￿";class NR{constructor(e,t){this.points=e,this.text="",this.lineSeparator=t.facet(Ne.lineSeparator)}append(e){this.text+=e}lineBreak(){this.text+=ar}readRange(e,t){if(!e)return this;let i=e.parentNode;for(let s=e;;){this.findPointBefore(i,s);let r=this.text.length;this.readNode(s);let o=s.nextSibling;if(o==t)break;let a=je.get(s),l=je.get(o);(a&&l?a.breakAfter:(a?a.breakAfter:Qa(s))||Qa(o)&&(s.nodeName!="BR"||s.cmIgnore)&&this.text.length>r)&&this.lineBreak(),s=o}return this.findPointBefore(i,t),this}readTextNode(e){let t=e.nodeValue;for(let i of this.points)i.node==e&&(i.pos=this.text.length+Math.min(i.offset,t.length));for(let i=0,s=this.lineSeparator?null:/\r\n?|\n/g;;){let r=-1,o=1,a;if(this.lineSeparator?(r=t.indexOf(this.lineSeparator,i),o=this.lineSeparator.length):(a=s.exec(t))&&(r=a.index,o=a[0].length),this.append(t.slice(i,r<0?t.length:r)),r<0)break;if(this.lineBreak(),o>1)for(let l of this.points)l.node==e&&l.pos>this.text.length&&(l.pos-=o-1);i=r+o}}readNode(e){if(e.cmIgnore)return;let t=je.get(e),i=t&&t.overrideDOMText;if(i!=null){this.findPointInside(e,i.length);for(let s=i.iter();!s.next().done;)s.lineBreak?this.lineBreak():this.append(s.value)}else e.nodeType==3?this.readTextNode(e):e.nodeName=="BR"?e.nextSibling&&this.lineBreak():e.nodeType==1&&this.readRange(e.firstChild,null)}findPointBefore(e,t){for(let i of this.points)i.node==e&&e.childNodes[i.offset]==t&&(i.pos=this.text.length)}findPointInside(e,t){for(let i of this.points)(e.nodeType==3?i.node==e:e.contains(i.node))&&(i.pos=this.text.length+(IR(e,i.node,i.offset)?t:0))}}function IR(n,e,t){for(;;){if(!e||t<vn(e))return!1;if(e==n)return!0;t=qi(e)+1,e=e.parentNode}}class Uf{constructor(e,t){this.node=e,this.offset=t,this.pos=-1}}class LR{constructor(e,t,i,s){this.typeOver=s,this.bounds=null,this.text="",this.domChanged=t>-1;let{impreciseHead:r,impreciseAnchor:o}=e.docView;if(e.state.readOnly&&t>-1)this.newSel=null;else if(t>-1&&(this.bounds=e.docView.domBoundsAround(t,i,0))){let a=r||o?[]:XR(e),l=new NR(a,e.state);l.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=l.text,this.newSel=BR(a,this.bounds.from)}else{let a=e.observer.selectionRange,l=r&&r.node==a.focusNode&&r.offset==a.focusOffset||!gc(e.contentDOM,a.focusNode)?e.state.selection.main.head:e.docView.posFromDOM(a.focusNode,a.focusOffset),u=o&&o.node==a.anchorNode&&o.offset==a.anchorOffset||!gc(e.contentDOM,a.anchorNode)?e.state.selection.main.anchor:e.docView.posFromDOM(a.anchorNode,a.anchorOffset),c=e.viewport;if((re.ios||re.chrome)&&e.state.selection.main.empty&&l!=u&&(c.from>0||c.to<e.state.doc.length)){let h=Math.min(l,u),d=Math.max(l,u),f=c.from-h,p=c.to-d;(f==0||f==1||h==0)&&(p==0||p==-1||d==e.state.doc.length)&&(l=0,u=e.state.doc.length)}this.newSel=ee.single(u,l)}}}function S0(n,e){let t,{newSel:i}=e,s=n.state.selection.main,r=n.inputState.lastKeyTime>Date.now()-100?n.inputState.lastKeyCode:-1;if(e.bounds){let{from:o,to:a}=e.bounds,l=s.from,u=null;(r===8||re.android&&e.text.length<a-o)&&(l=s.to,u="end");let c=VR(n.state.doc.sliceString(o,a,ar),e.text,l-o,u);c&&(re.chrome&&r==13&&c.toB==c.from+2&&e.text.slice(c.from,c.toB)==ar+ar&&c.toB--,t={from:o+c.from,to:o+c.toA,insert:De.of(e.text.slice(c.from,c.toB).split(ar))})}else i&&(!n.hasFocus&&n.state.facet(Cn)||i.main.eq(s))&&(i=null);if(!t&&!i)return!1;if(!t&&e.typeOver&&!s.empty&&i&&i.main.empty?t={from:s.from,to:s.to,insert:n.state.doc.slice(s.from,s.to)}:(re.mac||re.android)&&t&&t.from==t.to&&t.from==s.head-1&&/^\. ?$/.test(t.insert.toString())&&n.contentDOM.getAttribute("autocorrect")=="off"?(i&&t.insert.length==2&&(i=ee.single(i.main.anchor-1,i.main.head-1)),t={from:t.from,to:t.to,insert:De.of([t.insert.toString().replace("."," ")])}):t&&t.from>=s.from&&t.to<=s.to&&(t.from!=s.from||t.to!=s.to)&&s.to-s.from-(t.to-t.from)<=4?t={from:s.from,to:s.to,insert:n.state.doc.slice(s.from,t.from).append(t.insert).append(n.state.doc.slice(t.to,s.to))}:re.chrome&&t&&t.from==t.to&&t.from==s.head&&t.insert.toString()==`
 `&&n.lineWrapping&&(i&&(i=ee.single(i.main.anchor-1,i.main.head-1)),t={from:s.from,to:s.to,insert:De.of([" "])}),t)return $h(n,t,i,r);if(i&&!i.main.eq(s)){let o=!1,a="select";return n.inputState.lastSelectionTime>Date.now()-50&&(n.inputState.lastSelectionOrigin=="select"&&(o=!0),a=n.inputState.lastSelectionOrigin),n.dispatch({selection:i,scrollIntoView:o,userEvent:a}),!0}else return!1}function $h(n,e,t,i=-1){if(re.ios&&n.inputState.flushIOSKey(e))return!0;let s=n.state.selection.main;if(re.android&&(e.to==s.to&&(e.from==s.from||e.from==s.from-1&&n.state.sliceDoc(e.from,s.from)==" ")&&e.insert.length==1&&e.insert.lines==2&&Os(n.contentDOM,"Enter",13)||(e.from==s.from-1&&e.to==s.to&&e.insert.length==0||i==8&&e.insert.length<e.to-e.from&&e.to>s.head)&&Os(n.contentDOM,"Backspace",8)||e.from==s.from&&e.to==s.to+1&&e.insert.length==0&&Os(n.contentDOM,"Delete",46)))return!0;let r=e.insert.toString();n.inputState.composing>=0&&n.inputState.composing++;let o,a=()=>o||(o=zR(n,e,t));return n.state.facet(h0).some(l=>l(n,e.from,e.to,r,a))||n.dispatch(a()),!0}function zR(n,e,t){let i,s=n.state,r=s.selection.main;if(e.from>=r.from&&e.to<=r.to&&e.to-e.from>=(r.to-r.from)/3&&(!t||t.main.empty&&t.main.from==e.from+e.insert.length)&&n.inputState.composing<0){let a=r.from<e.from?s.sliceDoc(r.from,e.from):"",l=r.to>e.to?s.sliceDoc(e.to,r.to):"";i=s.replaceSelection(n.state.toText(a+e.insert.sliceString(0,void 0,n.state.lineBreak)+l))}else{let a=s.changes(e),l=t&&t.main.to<=a.newLength?t.main:void 0;if(s.selection.ranges.length>1&&n.inputState.composing>=0&&e.to<=r.to&&e.to>=r.to-10){let u=n.state.sliceDoc(e.from,e.to),c,h=t&&b0(n,t.main.head);if(h){let p=e.insert.length-(e.to-e.from);c={from:h.from,to:h.to-p}}else c=n.state.doc.lineAt(r.head);let d=r.to-e.to,f=r.to-r.from;i=s.changeByRange(p=>{if(p.from==r.from&&p.to==r.to)return{changes:a,range:l||p.map(a)};let m=p.to-d,O=m-u.length;if(p.to-p.from!=f||n.state.sliceDoc(O,m)!=u||p.to>=c.from&&p.from<=c.to)return{range:p};let y=s.changes({from:O,to:m,insert:e.insert}),b=p.to-r.to;return{changes:y,range:l?ee.range(Math.max(0,l.anchor+b),Math.max(0,l.head+b)):p.map(y)}})}else i={changes:a,selection:l&&s.selection.replaceRange(l)}}let o="input.type";return(n.composing||n.inputState.compositionPendingChange&&n.inputState.compositionEndedAt>Date.now()-50)&&(n.inputState.compositionPendingChange=!1,o+=".compose",n.inputState.compositionFirstChange&&(o+=".start",n.inputState.compositionFirstChange=!1)),s.update(i,{userEvent:o,scrollIntoView:!0})}function VR(n,e,t,i){let s=Math.min(n.length,e.length),r=0;for(;r<s&&n.charCodeAt(r)==e.charCodeAt(r);)r++;if(r==s&&n.length==e.length)return null;let o=n.length,a=e.length;for(;o>0&&a>0&&n.charCodeAt(o-1)==e.charCodeAt(a-1);)o--,a--;if(i=="end"){let l=Math.max(0,r-Math.min(o,a));t-=o+l-r}if(o<r&&n.length<e.length){let l=t<=r&&t>=o?r-t:0;r-=l,a=r+(a-o),o=r}else if(a<r){let l=t<=r&&t>=a?r-t:0;r-=l,o=r+(o-a),a=r}return{from:r,toA:o,toB:a}}function XR(n){let e=[];if(n.root.activeElement!=n.contentDOM)return e;let{anchorNode:t,anchorOffset:i,focusNode:s,focusOffset:r}=n.observer.selectionRange;return t&&(e.push(new Uf(t,i)),(s!=t||r!=i)&&e.push(new Uf(s,r))),e}function BR(n,e){if(n.length==0)return null;let t=n[0].pos,i=n.length==2?n[1].pos:t;return t>-1&&i>-1?ee.single(t+e,i+e):null}class UR{setSelectionOrigin(e){this.lastSelectionOrigin=e,this.lastSelectionTime=Date.now()}constructor(e){this.view=e,this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.pendingIOSKey=void 0,this.tabFocusMode=-1,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastContextMenu=0,this.scrollHandlers=[],this.handlers=Object.create(null),this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.compositionPendingKey=!1,this.compositionPendingChange=!1,this.mouseSelection=null,this.draggedContent=null,this.handleEvent=this.handleEvent.bind(this),this.notifiedFocused=e.hasFocus,re.safari&&e.contentDOM.addEventListener("input",()=>null),re.gecko&&oZ(e.contentDOM.ownerDocument)}handleEvent(e){!KR(this.view,e)||this.ignoreDuringComposition(e)||e.type=="keydown"&&this.keydown(e)||this.runHandlers(e.type,e)}runHandlers(e,t){let i=this.handlers[e];if(i){for(let s of i.observers)s(this.view,t);for(let s of i.handlers){if(t.defaultPrevented)break;if(s(this.view,t)){t.preventDefault();break}}}}ensureHandlers(e){let t=jR(e),i=this.handlers,s=this.view.contentDOM;for(let r in t)if(r!="scroll"){let o=!t[r].handlers.length,a=i[r];a&&o!=!a.handlers.length&&(s.removeEventListener(r,this.handleEvent),a=null),a||s.addEventListener(r,this.handleEvent,{passive:o})}for(let r in i)r!="scroll"&&!t[r]&&s.removeEventListener(r,this.handleEvent);this.handlers=t}keydown(e){if(this.lastKeyCode=e.keyCode,this.lastKeyTime=Date.now(),e.keyCode==9&&this.tabFocusMode>-1&&(!this.tabFocusMode||Date.now()<=this.tabFocusMode))return!0;if(this.tabFocusMode>0&&e.keyCode!=27&&$0.indexOf(e.keyCode)<0&&(this.tabFocusMode=-1),re.android&&re.chrome&&!e.synthetic&&(e.keyCode==13||e.keyCode==8))return this.view.observer.delayAndroidKey(e.key,e.keyCode),!0;let t;return re.ios&&!e.synthetic&&!e.altKey&&!e.metaKey&&((t=_0.find(i=>i.keyCode==e.keyCode))&&!e.ctrlKey||WR.indexOf(e.key)>-1&&e.ctrlKey&&!e.shiftKey)?(this.pendingIOSKey=t||e,setTimeout(()=>this.flushIOSKey(),250),!0):(e.keyCode!=229&&this.view.observer.forceFlush(),!1)}flushIOSKey(e){let t=this.pendingIOSKey;return!t||t.key=="Enter"&&e&&e.from<e.to&&/^\S+$/.test(e.insert.toString())?!1:(this.pendingIOSKey=void 0,Os(this.view.contentDOM,t.key,t.keyCode,t instanceof KeyboardEvent?t:void 0))}ignoreDuringComposition(e){return/^key/.test(e.type)?this.composing>0?!0:re.safari&&!re.ios&&this.compositionPendingKey&&Date.now()-this.compositionEndedAt<100?(this.compositionPendingKey=!1,!0):!1:!1}startMouseSelection(e){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=e}update(e){this.view.observer.update(e),this.mouseSelection&&this.mouseSelection.update(e),this.draggedContent&&e.docChanged&&(this.draggedContent=this.draggedContent.map(e.changes)),e.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}function jf(n,e){return(t,i)=>{try{return e.call(n,i,t)}catch(s){mn(t.state,s)}}}function jR(n){let e=Object.create(null);function t(i){return e[i]||(e[i]={observers:[],handlers:[]})}for(let i of n){let s=i.spec;if(s&&s.domEventHandlers)for(let r in s.domEventHandlers){let o=s.domEventHandlers[r];o&&t(r).handlers.push(jf(i.value,o))}if(s&&s.domEventObservers)for(let r in s.domEventObservers){let o=s.domEventObservers[r];o&&t(r).observers.push(jf(i.value,o))}}for(let i in nn)t(i).handlers.push(nn[i]);for(let i in qt)t(i).observers.push(qt[i]);return e}const _0=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Enter",keyCode:13,inputType:"insertLineBreak"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],WR="dthko",$0=[16,17,18,20,91,92,224,225],_o=6;function $o(n){return Math.max(0,n)*.7+8}function qR(n,e){return Math.max(Math.abs(n.clientX-e.clientX),Math.abs(n.clientY-e.clientY))}class YR{constructor(e,t,i,s){this.view=e,this.startEvent=t,this.style=i,this.mustSelect=s,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=t,this.scrollParents=tR(e.contentDOM),this.atoms=e.state.facet(_h).map(o=>o(e));let r=e.contentDOM.ownerDocument;r.addEventListener("mousemove",this.move=this.move.bind(this)),r.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=t.shiftKey,this.multiple=e.state.facet(Ne.allowMultipleSelections)&&GR(e,t),this.dragging=FR(e,t)&&Q0(t)==1?null:!1}start(e){this.dragging===!1&&this.select(e)}move(e){if(e.buttons==0)return this.destroy();if(this.dragging||this.dragging==null&&qR(this.startEvent,e)<10)return;this.select(this.lastEvent=e);let t=0,i=0,s=0,r=0,o=this.view.win.innerWidth,a=this.view.win.innerHeight;this.scrollParents.x&&({left:s,right:o}=this.scrollParents.x.getBoundingClientRect()),this.scrollParents.y&&({top:r,bottom:a}=this.scrollParents.y.getBoundingClientRect());let l=w0(this.view);e.clientX-l.left<=s+_o?t=-$o(s-e.clientX):e.clientX+l.right>=o-_o&&(t=$o(e.clientX-o)),e.clientY-l.top<=r+_o?i=-$o(r-e.clientY):e.clientY+l.bottom>=a-_o&&(i=$o(e.clientY-a)),this.setScrollSpeed(t,i)}up(e){this.dragging==null&&this.select(this.lastEvent),this.dragging||e.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let e=this.view.contentDOM.ownerDocument;e.removeEventListener("mousemove",this.move),e.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=this.view.inputState.draggedContent=null}setScrollSpeed(e,t){this.scrollSpeed={x:e,y:t},e||t?this.scrolling<0&&(this.scrolling=setInterval(()=>this.scroll(),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){let{x:e,y:t}=this.scrollSpeed;e&&this.scrollParents.x&&(this.scrollParents.x.scrollLeft+=e,e=0),t&&this.scrollParents.y&&(this.scrollParents.y.scrollTop+=t,t=0),(e||t)&&this.view.win.scrollBy(e,t),this.dragging===!1&&this.select(this.lastEvent)}skipAtoms(e){let t=null;for(let i=0;i<e.ranges.length;i++){let s=e.ranges[i],r=null;if(s.empty){let o=Ko(this.atoms,s.from,0);o!=s.from&&(r=ee.cursor(o,-1))}else{let o=Ko(this.atoms,s.from,-1),a=Ko(this.atoms,s.to,1);(o!=s.from||a!=s.to)&&(r=ee.range(s.from==s.anchor?o:a,s.from==s.head?o:a))}r&&(t||(t=e.ranges.slice()),t[i]=r)}return t?ee.create(t,e.mainIndex):e}select(e){let{view:t}=this,i=this.skipAtoms(this.style.get(e,this.extend,this.multiple));(this.mustSelect||!i.eq(t.state.selection,this.dragging===!1))&&this.view.dispatch({selection:i,userEvent:"select.pointer"}),this.mustSelect=!1}update(e){e.transactions.some(t=>t.isUserEvent("input.type"))?this.destroy():this.style.update(e)&&setTimeout(()=>this.select(this.lastEvent),20)}}function GR(n,e){let t=n.state.facet(a0);return t.length?t[0](e):re.mac?e.metaKey:e.ctrlKey}function HR(n,e){let t=n.state.facet(l0);return t.length?t[0](e):re.mac?!e.altKey:!e.ctrlKey}function FR(n,e){let{main:t}=n.state.selection;if(t.empty)return!1;let i=Ir(n.root);if(!i||i.rangeCount==0)return!0;let s=i.getRangeAt(0).getClientRects();for(let r=0;r<s.length;r++){let o=s[r];if(o.left<=e.clientX&&o.right>=e.clientX&&o.top<=e.clientY&&o.bottom>=e.clientY)return!0}return!1}function KR(n,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let t=e.target,i;t!=n.contentDOM;t=t.parentNode)if(!t||t.nodeType==11||(i=je.get(t))&&i.ignoreEvent(e))return!1;return!0}const nn=Object.create(null),qt=Object.create(null),k0=re.ie&&re.ie_version<15||re.ios&&re.webkit_version<604;function JR(n){let e=n.dom.parentNode;if(!e)return;let t=e.appendChild(document.createElement("textarea"));t.style.cssText="position: fixed; left: -10000px; top: 10px",t.focus(),setTimeout(()=>{n.focus(),t.remove(),P0(n,t.value)},50)}function gl(n,e,t){for(let i of n.facet(e))t=i(t,n);return t}function P0(n,e){e=gl(n.state,bh,e);let{state:t}=n,i,s=1,r=t.toText(e),o=r.lines==t.selection.ranges.length;if(Qc!=null&&t.selection.ranges.every(l=>l.empty)&&Qc==r.toString()){let l=-1;i=t.changeByRange(u=>{let c=t.doc.lineAt(u.from);if(c.from==l)return{range:u};l=c.from;let h=t.toText((o?r.line(s++).text:e)+t.lineBreak);return{changes:{from:c.from,insert:h},range:ee.cursor(u.from+h.length)}})}else o?i=t.changeByRange(l=>{let u=r.line(s++);return{changes:{from:l.from,to:l.to,insert:u.text},range:ee.cursor(l.from+u.length)}}):i=t.replaceSelection(r);n.dispatch(i,{userEvent:"input.paste",scrollIntoView:!0})}qt.scroll=n=>{n.inputState.lastScrollTop=n.scrollDOM.scrollTop,n.inputState.lastScrollLeft=n.scrollDOM.scrollLeft};nn.keydown=(n,e)=>(n.inputState.setSelectionOrigin("select"),e.keyCode==27&&n.inputState.tabFocusMode!=0&&(n.inputState.tabFocusMode=Date.now()+2e3),!1);qt.touchstart=(n,e)=>{n.inputState.lastTouchTime=Date.now(),n.inputState.setSelectionOrigin("select.pointer")};qt.touchmove=n=>{n.inputState.setSelectionOrigin("select.pointer")};nn.mousedown=(n,e)=>{if(n.observer.flush(),n.inputState.lastTouchTime>Date.now()-2e3)return!1;let t=null;for(let i of n.state.facet(u0))if(t=i(n,e),t)break;if(!t&&e.button==0&&(t=nZ(n,e)),t){let i=!n.hasFocus;n.inputState.startMouseSelection(new YR(n,e,t,i)),i&&n.observer.ignore(()=>{XO(n.contentDOM);let r=n.root.activeElement;r&&!r.contains(n.contentDOM)&&r.blur()});let s=n.inputState.mouseSelection;if(s)return s.start(e),s.dragging===!1}return!1};function Wf(n,e,t,i){if(i==1)return ee.cursor(e,t);if(i==2)return QR(n.state,e,t);{let s=nt.find(n.docView,e),r=n.state.doc.lineAt(s?s.posAtEnd:e),o=s?s.posAtStart:r.from,a=s?s.posAtEnd:r.to;return a<n.state.doc.length&&a==r.to&&a++,ee.range(o,a)}}let qf=(n,e,t)=>e>=t.top&&e<=t.bottom&&n>=t.left&&n<=t.right;function eZ(n,e,t,i){let s=nt.find(n.docView,e);if(!s)return 1;let r=e-s.posAtStart;if(r==0)return 1;if(r==s.length)return-1;let o=s.coordsAt(r,-1);if(o&&qf(t,i,o))return-1;let a=s.coordsAt(r,1);return a&&qf(t,i,a)?1:o&&o.bottom>=i?-1:1}function Yf(n,e){let t=n.posAtCoords({x:e.clientX,y:e.clientY},!1);return{pos:t,bias:eZ(n,t,e.clientX,e.clientY)}}const tZ=re.ie&&re.ie_version<=11;let Gf=null,Hf=0,Ff=0;function Q0(n){if(!tZ)return n.detail;let e=Gf,t=Ff;return Gf=n,Ff=Date.now(),Hf=!e||t>Date.now()-400&&Math.abs(e.clientX-n.clientX)<2&&Math.abs(e.clientY-n.clientY)<2?(Hf+1)%3:1}function nZ(n,e){let t=Yf(n,e),i=Q0(e),s=n.state.selection;return{update(r){r.docChanged&&(t.pos=r.changes.mapPos(t.pos),s=s.map(r.changes))},get(r,o,a){let l=Yf(n,r),u,c=Wf(n,l.pos,l.bias,i);if(t.pos!=l.pos&&!o){let h=Wf(n,t.pos,t.bias,i),d=Math.min(h.from,c.from),f=Math.max(h.to,c.to);c=d<c.from?ee.range(d,f):ee.range(f,d)}return o?s.replaceRange(s.main.extend(c.from,c.to)):a&&i==1&&s.ranges.length>1&&(u=iZ(s,l.pos))?u:a?s.addRange(c):ee.create([c])}}}function iZ(n,e){for(let t=0;t<n.ranges.length;t++){let{from:i,to:s}=n.ranges[t];if(i<=e&&s>=e)return ee.create(n.ranges.slice(0,t).concat(n.ranges.slice(t+1)),n.mainIndex==t?0:n.mainIndex-(n.mainIndex>t?1:0))}return null}nn.dragstart=(n,e)=>{let{selection:{main:t}}=n.state;if(e.target.draggable){let s=n.docView.nearest(e.target);if(s&&s.isWidget){let r=s.posAtStart,o=r+s.length;(r>=t.to||o<=t.from)&&(t=ee.range(r,o))}}let{inputState:i}=n;return i.mouseSelection&&(i.mouseSelection.dragging=!0),i.draggedContent=t,e.dataTransfer&&(e.dataTransfer.setData("Text",gl(n.state,xh,n.state.sliceDoc(t.from,t.to))),e.dataTransfer.effectAllowed="copyMove"),!1};nn.dragend=n=>(n.inputState.draggedContent=null,!1);function Kf(n,e,t,i){if(t=gl(n.state,bh,t),!t)return;let s=n.posAtCoords({x:e.clientX,y:e.clientY},!1),{draggedContent:r}=n.inputState,o=i&&r&&HR(n,e)?{from:r.from,to:r.to}:null,a={from:s,insert:t},l=n.state.changes(o?[o,a]:a);n.focus(),n.dispatch({changes:l,selection:{anchor:l.mapPos(s,-1),head:l.mapPos(s,1)},userEvent:o?"move.drop":"input.drop"}),n.inputState.draggedContent=null}nn.drop=(n,e)=>{if(!e.dataTransfer)return!1;if(n.state.readOnly)return!0;let t=e.dataTransfer.files;if(t&&t.length){let i=Array(t.length),s=0,r=()=>{++s==t.length&&Kf(n,e,i.filter(o=>o!=null).join(n.state.lineBreak),!1)};for(let o=0;o<t.length;o++){let a=new FileReader;a.onerror=r,a.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(a.result)||(i[o]=a.result),r()},a.readAsText(t[o])}return!0}else{let i=e.dataTransfer.getData("Text");if(i)return Kf(n,e,i,!0),!0}return!1};nn.paste=(n,e)=>{if(n.state.readOnly)return!0;n.observer.flush();let t=k0?null:e.clipboardData;return t?(P0(n,t.getData("text/plain")||t.getData("text/uri-list")),!0):(JR(n),!1)};function sZ(n,e){let t=n.dom.parentNode;if(!t)return;let i=t.appendChild(document.createElement("textarea"));i.style.cssText="position: fixed; left: -10000px; top: 10px",i.value=e,i.focus(),i.selectionEnd=e.length,i.selectionStart=0,setTimeout(()=>{i.remove(),n.focus()},50)}function rZ(n){let e=[],t=[],i=!1;for(let s of n.selection.ranges)s.empty||(e.push(n.sliceDoc(s.from,s.to)),t.push(s));if(!e.length){let s=-1;for(let{from:r}of n.selection.ranges){let o=n.doc.lineAt(r);o.number>s&&(e.push(o.text),t.push({from:o.from,to:Math.min(n.doc.length,o.to+1)})),s=o.number}i=!0}return{text:gl(n,xh,e.join(n.lineBreak)),ranges:t,linewise:i}}let Qc=null;nn.copy=nn.cut=(n,e)=>{let{text:t,ranges:i,linewise:s}=rZ(n.state);if(!t&&!s)return!1;Qc=s?t:null,e.type=="cut"&&!n.state.readOnly&&n.dispatch({changes:i,scrollIntoView:!0,userEvent:"delete.cut"});let r=k0?null:e.clipboardData;return r?(r.clearData(),r.setData("text/plain",t),!0):(sZ(n,t),!1)};const T0=Ki.define();function A0(n,e){let t=[];for(let i of n.facet(d0)){let s=i(n,e);s&&t.push(s)}return t?n.update({effects:t,annotations:T0.of(!0)}):null}function C0(n){setTimeout(()=>{let e=n.hasFocus;if(e!=n.inputState.notifiedFocused){let t=A0(n.state,e);t?n.dispatch(t):n.update([])}},10)}qt.focus=n=>{n.inputState.lastFocusTime=Date.now(),!n.scrollDOM.scrollTop&&(n.inputState.lastScrollTop||n.inputState.lastScrollLeft)&&(n.scrollDOM.scrollTop=n.inputState.lastScrollTop,n.scrollDOM.scrollLeft=n.inputState.lastScrollLeft),C0(n)};qt.blur=n=>{n.observer.clearSelectionRange(),C0(n)};qt.compositionstart=qt.compositionupdate=n=>{n.observer.editContext||(n.inputState.compositionFirstChange==null&&(n.inputState.compositionFirstChange=!0),n.inputState.composing<0&&(n.inputState.composing=0))};qt.compositionend=n=>{n.observer.editContext||(n.inputState.composing=-1,n.inputState.compositionEndedAt=Date.now(),n.inputState.compositionPendingKey=!0,n.inputState.compositionPendingChange=n.observer.pendingRecords().length>0,n.inputState.compositionFirstChange=null,re.chrome&&re.android?n.observer.flushSoon():n.inputState.compositionPendingChange?Promise.resolve().then(()=>n.observer.flush()):setTimeout(()=>{n.inputState.composing<0&&n.docView.hasComposition&&n.update([])},50))};qt.contextmenu=n=>{n.inputState.lastContextMenu=Date.now()};nn.beforeinput=(n,e)=>{var t,i;if(e.inputType=="insertReplacementText"&&n.observer.editContext){let r=(t=e.dataTransfer)===null||t===void 0?void 0:t.getData("text/plain"),o=e.getTargetRanges();if(r&&o.length){let a=o[0],l=n.posAtDOM(a.startContainer,a.startOffset),u=n.posAtDOM(a.endContainer,a.endOffset);return $h(n,{from:l,to:u,insert:n.state.toText(r)},null),!0}}let s;if(re.chrome&&re.android&&(s=_0.find(r=>r.inputType==e.inputType))&&(n.observer.delayAndroidKey(s.key,s.keyCode),s.key=="Backspace"||s.key=="Delete")){let r=((i=window.visualViewport)===null||i===void 0?void 0:i.height)||0;setTimeout(()=>{var o;(((o=window.visualViewport)===null||o===void 0?void 0:o.height)||0)>r+10&&n.hasFocus&&(n.contentDOM.blur(),n.focus())},100)}return re.ios&&e.inputType=="deleteContentForward"&&n.observer.flushSoon(),re.safari&&e.inputType=="insertText"&&n.inputState.composing>=0&&setTimeout(()=>qt.compositionend(n,e),20),!1};const Jf=new Set;function oZ(n){Jf.has(n)||(Jf.add(n),n.addEventListener("copy",()=>{}),n.addEventListener("cut",()=>{}))}const ep=["pre-wrap","normal","pre-line","break-spaces"];let Es=!1;function tp(){Es=!1}class aZ{constructor(e){this.lineWrapping=e,this.doc=De.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.textHeight=14,this.lineLength=30}heightForGap(e,t){let i=this.doc.lineAt(t).number-this.doc.lineAt(e).number+1;return this.lineWrapping&&(i+=Math.max(0,Math.ceil((t-e-i*this.lineLength*.5)/this.lineLength))),this.lineHeight*i}heightForLine(e){return this.lineWrapping?(1+Math.max(0,Math.ceil((e-this.lineLength)/(this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(e){return this.doc=e,this}mustRefreshForWrapping(e){return ep.indexOf(e)>-1!=this.lineWrapping}mustRefreshForHeights(e){let t=!1;for(let i=0;i<e.length;i++){let s=e[i];s<0?i++:this.heightSamples[Math.floor(s*10)]||(t=!0,this.heightSamples[Math.floor(s*10)]=!0)}return t}refresh(e,t,i,s,r,o){let a=ep.indexOf(e)>-1,l=Math.round(t)!=Math.round(this.lineHeight)||this.lineWrapping!=a;if(this.lineWrapping=a,this.lineHeight=t,this.charWidth=i,this.textHeight=s,this.lineLength=r,l){this.heightSamples={};for(let u=0;u<o.length;u++){let c=o[u];c<0?u++:this.heightSamples[Math.floor(c*10)]=!0}}return l}}class lZ{constructor(e,t){this.from=e,this.heights=t,this.index=0}get more(){return this.index<this.heights.length}}class pn{constructor(e,t,i,s,r){this.from=e,this.length=t,this.top=i,this.height=s,this._content=r}get type(){return typeof this._content=="number"?Ut.Text:Array.isArray(this._content)?this._content:this._content.type}get to(){return this.from+this.length}get bottom(){return this.top+this.height}get widget(){return this._content instanceof pi?this._content.widget:null}get widgetLineBreaks(){return typeof this._content=="number"?this._content:0}join(e){let t=(Array.isArray(this._content)?this._content:[this]).concat(Array.isArray(e._content)?e._content:[e]);return new pn(this.from,this.length+e.length,this.top,this.height+e.height,t)}}var Ye=function(n){return n[n.ByPos=0]="ByPos",n[n.ByHeight=1]="ByHeight",n[n.ByPosNoHeight=2]="ByPosNoHeight",n}(Ye||(Ye={}));const Jo=.001;class xt{constructor(e,t,i=2){this.length=e,this.height=t,this.flags=i}get outdated(){return(this.flags&2)>0}set outdated(e){this.flags=(e?2:0)|this.flags&-3}setHeight(e){this.height!=e&&(Math.abs(this.height-e)>Jo&&(Es=!0),this.height=e)}replace(e,t,i){return xt.of(i)}decomposeLeft(e,t){t.push(this)}decomposeRight(e,t){t.push(this)}applyChanges(e,t,i,s){let r=this,o=i.doc;for(let a=s.length-1;a>=0;a--){let{fromA:l,toA:u,fromB:c,toB:h}=s[a],d=r.lineAt(l,Ye.ByPosNoHeight,i.setDoc(t),0,0),f=d.to>=u?d:r.lineAt(u,Ye.ByPosNoHeight,i,0,0);for(h+=f.to-u,u=f.to;a>0&&d.from<=s[a-1].toA;)l=s[a-1].fromA,c=s[a-1].fromB,a--,l<d.from&&(d=r.lineAt(l,Ye.ByPosNoHeight,i,0,0));c+=d.from-l,l=d.from;let p=kh.build(i.setDoc(o),e,c,h);r=Ca(r,r.replace(l,u,p))}return r.updateHeight(i,0)}static empty(){return new Zt(0,0)}static of(e){if(e.length==1)return e[0];let t=0,i=e.length,s=0,r=0;for(;;)if(t==i)if(s>r*2){let a=e[t-1];a.break?e.splice(--t,1,a.left,null,a.right):e.splice(--t,1,a.left,a.right),i+=1+a.break,s-=a.size}else if(r>s*2){let a=e[i];a.break?e.splice(i,1,a.left,null,a.right):e.splice(i,1,a.left,a.right),i+=2+a.break,r-=a.size}else break;else if(s<r){let a=e[t++];a&&(s+=a.size)}else{let a=e[--i];a&&(r+=a.size)}let o=0;return e[t-1]==null?(o=1,t--):e[t]==null&&(o=1,i++),new uZ(xt.of(e.slice(0,t)),o,xt.of(e.slice(i)))}}function Ca(n,e){return n==e?n:(n.constructor!=e.constructor&&(Es=!0),e)}xt.prototype.size=1;class E0 extends xt{constructor(e,t,i){super(e,t),this.deco=i}blockAt(e,t,i,s){return new pn(s,this.length,i,this.height,this.deco||0)}lineAt(e,t,i,s,r){return this.blockAt(0,i,s,r)}forEachLine(e,t,i,s,r,o){e<=r+this.length&&t>=r&&o(this.blockAt(0,i,s,r))}updateHeight(e,t=0,i=!1,s){return s&&s.from<=t&&s.more&&this.setHeight(s.heights[s.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class Zt extends E0{constructor(e,t){super(e,t,null),this.collapsed=0,this.widgetHeight=0,this.breaks=0}blockAt(e,t,i,s){return new pn(s,this.length,i,this.height,this.breaks)}replace(e,t,i){let s=i[0];return i.length==1&&(s instanceof Zt||s instanceof ht&&s.flags&4)&&Math.abs(this.length-s.length)<10?(s instanceof ht?s=new Zt(s.length,this.height):s.height=this.height,this.outdated||(s.outdated=!1),s):xt.of(i)}updateHeight(e,t=0,i=!1,s){return s&&s.from<=t&&s.more?this.setHeight(s.heights[s.index++]):(i||this.outdated)&&this.setHeight(Math.max(this.widgetHeight,e.heightForLine(this.length-this.collapsed))+this.breaks*e.lineHeight),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class ht extends xt{constructor(e){super(e,0)}heightMetrics(e,t){let i=e.doc.lineAt(t).number,s=e.doc.lineAt(t+this.length).number,r=s-i+1,o,a=0;if(e.lineWrapping){let l=Math.min(this.height,e.lineHeight*r);o=l/r,this.length>r+1&&(a=(this.height-l)/(this.length-r-1))}else o=this.height/r;return{firstLine:i,lastLine:s,perLine:o,perChar:a}}blockAt(e,t,i,s){let{firstLine:r,lastLine:o,perLine:a,perChar:l}=this.heightMetrics(t,s);if(t.lineWrapping){let u=s+(e<t.lineHeight?0:Math.round(Math.max(0,Math.min(1,(e-i)/this.height))*this.length)),c=t.doc.lineAt(u),h=a+c.length*l,d=Math.max(i,e-h/2);return new pn(c.from,c.length,d,h,0)}else{let u=Math.max(0,Math.min(o-r,Math.floor((e-i)/a))),{from:c,length:h}=t.doc.line(r+u);return new pn(c,h,i+a*u,a,0)}}lineAt(e,t,i,s,r){if(t==Ye.ByHeight)return this.blockAt(e,i,s,r);if(t==Ye.ByPosNoHeight){let{from:f,to:p}=i.doc.lineAt(e);return new pn(f,p-f,0,0,0)}let{firstLine:o,perLine:a,perChar:l}=this.heightMetrics(i,r),u=i.doc.lineAt(e),c=a+u.length*l,h=u.number-o,d=s+a*h+l*(u.from-r-h);return new pn(u.from,u.length,Math.max(s,Math.min(d,s+this.height-c)),c,0)}forEachLine(e,t,i,s,r,o){e=Math.max(e,r),t=Math.min(t,r+this.length);let{firstLine:a,perLine:l,perChar:u}=this.heightMetrics(i,r);for(let c=e,h=s;c<=t;){let d=i.doc.lineAt(c);if(c==e){let p=d.number-a;h+=l*p+u*(e-r-p)}let f=l+u*d.length;o(new pn(d.from,d.length,h,f,0)),h+=f,c=d.to+1}}replace(e,t,i){let s=this.length-t;if(s>0){let r=i[i.length-1];r instanceof ht?i[i.length-1]=new ht(r.length+s):i.push(null,new ht(s-1))}if(e>0){let r=i[0];r instanceof ht?i[0]=new ht(e+r.length):i.unshift(new ht(e-1),null)}return xt.of(i)}decomposeLeft(e,t){t.push(new ht(e-1),null)}decomposeRight(e,t){t.push(null,new ht(this.length-e-1))}updateHeight(e,t=0,i=!1,s){let r=t+this.length;if(s&&s.from<=t+this.length&&s.more){let o=[],a=Math.max(t,s.from),l=-1;for(s.from>t&&o.push(new ht(s.from-t-1).updateHeight(e,t));a<=r&&s.more;){let c=e.doc.lineAt(a).length;o.length&&o.push(null);let h=s.heights[s.index++];l==-1?l=h:Math.abs(h-l)>=Jo&&(l=-2);let d=new Zt(c,h);d.outdated=!1,o.push(d),a+=c+1}a<=r&&o.push(null,new ht(r-a).updateHeight(e,a));let u=xt.of(o);return(l<0||Math.abs(u.height-this.height)>=Jo||Math.abs(l-this.heightMetrics(e,t).perLine)>=Jo)&&(Es=!0),Ca(this,u)}else(i||this.outdated)&&(this.setHeight(e.heightForGap(t,t+this.length)),this.outdated=!1);return this}toString(){return`gap(${this.length})`}}class uZ extends xt{constructor(e,t,i){super(e.length+t+i.length,e.height+i.height,t|(e.outdated||i.outdated?2:0)),this.left=e,this.right=i,this.size=e.size+i.size}get break(){return this.flags&1}blockAt(e,t,i,s){let r=i+this.left.height;return e<r?this.left.blockAt(e,t,i,s):this.right.blockAt(e,t,r,s+this.left.length+this.break)}lineAt(e,t,i,s,r){let o=s+this.left.height,a=r+this.left.length+this.break,l=t==Ye.ByHeight?e<o:e<a,u=l?this.left.lineAt(e,t,i,s,r):this.right.lineAt(e,t,i,o,a);if(this.break||(l?u.to<a:u.from>a))return u;let c=t==Ye.ByPosNoHeight?Ye.ByPosNoHeight:Ye.ByPos;return l?u.join(this.right.lineAt(a,c,i,o,a)):this.left.lineAt(a,c,i,s,r).join(u)}forEachLine(e,t,i,s,r,o){let a=s+this.left.height,l=r+this.left.length+this.break;if(this.break)e<l&&this.left.forEachLine(e,t,i,s,r,o),t>=l&&this.right.forEachLine(e,t,i,a,l,o);else{let u=this.lineAt(l,Ye.ByPos,i,s,r);e<u.from&&this.left.forEachLine(e,u.from-1,i,s,r,o),u.to>=e&&u.from<=t&&o(u),t>u.to&&this.right.forEachLine(u.to+1,t,i,a,l,o)}}replace(e,t,i){let s=this.left.length+this.break;if(t<s)return this.balanced(this.left.replace(e,t,i),this.right);if(e>this.left.length)return this.balanced(this.left,this.right.replace(e-s,t-s,i));let r=[];e>0&&this.decomposeLeft(e,r);let o=r.length;for(let a of i)r.push(a);if(e>0&&np(r,o-1),t<this.length){let a=r.length;this.decomposeRight(t,r),np(r,a)}return xt.of(r)}decomposeLeft(e,t){let i=this.left.length;if(e<=i)return this.left.decomposeLeft(e,t);t.push(this.left),this.break&&(i++,e>=i&&t.push(null)),e>i&&this.right.decomposeLeft(e-i,t)}decomposeRight(e,t){let i=this.left.length,s=i+this.break;if(e>=s)return this.right.decomposeRight(e-s,t);e<i&&this.left.decomposeRight(e,t),this.break&&e<s&&t.push(null),t.push(this.right)}balanced(e,t){return e.size>2*t.size||t.size>2*e.size?xt.of(this.break?[e,null,t]:[e,t]):(this.left=Ca(this.left,e),this.right=Ca(this.right,t),this.setHeight(e.height+t.height),this.outdated=e.outdated||t.outdated,this.size=e.size+t.size,this.length=e.length+this.break+t.length,this)}updateHeight(e,t=0,i=!1,s){let{left:r,right:o}=this,a=t+r.length+this.break,l=null;return s&&s.from<=t+r.length&&s.more?l=r=r.updateHeight(e,t,i,s):r.updateHeight(e,t,i),s&&s.from<=a+o.length&&s.more?l=o=o.updateHeight(e,a,i,s):o.updateHeight(e,a,i),l?this.balanced(r,o):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function np(n,e){let t,i;n[e]==null&&(t=n[e-1])instanceof ht&&(i=n[e+1])instanceof ht&&n.splice(e-1,3,new ht(t.length+1+i.length))}const cZ=5;class kh{constructor(e,t){this.pos=e,this.oracle=t,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=e}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(e,t){if(this.lineStart>-1){let i=Math.min(t,this.lineEnd),s=this.nodes[this.nodes.length-1];s instanceof Zt?s.length+=i-this.pos:(i>this.pos||!this.isCovered)&&this.nodes.push(new Zt(i-this.pos,-1)),this.writtenTo=i,t>i&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=t}point(e,t,i){if(e<t||i.heightRelevant){let s=i.widget?i.widget.estimatedHeight:0,r=i.widget?i.widget.lineBreaks:0;s<0&&(s=this.oracle.lineHeight);let o=t-e;i.block?this.addBlock(new E0(o,s,i)):(o||r||s>=cZ)&&this.addLineDeco(s,r,o)}else t>e&&this.span(e,t);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:e,to:t}=this.oracle.doc.lineAt(this.pos);this.lineStart=e,this.lineEnd=t,this.writtenTo<e&&((this.writtenTo<e-1||this.nodes[this.nodes.length-1]==null)&&this.nodes.push(this.blankContent(this.writtenTo,e-1)),this.nodes.push(null)),this.pos>e&&this.nodes.push(new Zt(this.pos-e,-1)),this.writtenTo=this.pos}blankContent(e,t){let i=new ht(t-e);return this.oracle.doc.lineAt(e).to==t&&(i.flags|=4),i}ensureLine(){this.enterLine();let e=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(e instanceof Zt)return e;let t=new Zt(0,-1);return this.nodes.push(t),t}addBlock(e){this.enterLine();let t=e.deco;t&&t.startSide>0&&!this.isCovered&&this.ensureLine(),this.nodes.push(e),this.writtenTo=this.pos=this.pos+e.length,t&&t.endSide>0&&(this.covering=e)}addLineDeco(e,t,i){let s=this.ensureLine();s.length+=i,s.collapsed+=i,s.widgetHeight=Math.max(s.widgetHeight,e),s.breaks+=t,this.writtenTo=this.pos=this.pos+i}finish(e){let t=this.nodes.length==0?null:this.nodes[this.nodes.length-1];this.lineStart>-1&&!(t instanceof Zt)&&!this.isCovered?this.nodes.push(new Zt(0,-1)):(this.writtenTo<this.pos||t==null)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos));let i=e;for(let s of this.nodes)s instanceof Zt&&s.updateHeight(this.oracle,i),i+=s?s.length:1;return this.nodes}static build(e,t,i,s){let r=new kh(i,e);return ze.spans(t,i,s,r,0),r.finish(i)}}function hZ(n,e,t){let i=new dZ;return ze.compare(n,e,t,i,0),i.changes}class dZ{constructor(){this.changes=[]}compareRange(){}comparePoint(e,t,i,s){(e<t||i&&i.heightRelevant||s&&s.heightRelevant)&&Fo(e,t,this.changes,5)}}function fZ(n,e){let t=n.getBoundingClientRect(),i=n.ownerDocument,s=i.defaultView||window,r=Math.max(0,t.left),o=Math.min(s.innerWidth,t.right),a=Math.max(0,t.top),l=Math.min(s.innerHeight,t.bottom);for(let u=n.parentNode;u&&u!=i.body;)if(u.nodeType==1){let c=u,h=window.getComputedStyle(c);if((c.scrollHeight>c.clientHeight||c.scrollWidth>c.clientWidth)&&h.overflow!="visible"){let d=c.getBoundingClientRect();r=Math.max(r,d.left),o=Math.min(o,d.right),a=Math.max(a,d.top),l=Math.min(u==n.parentNode?s.innerHeight:l,d.bottom)}u=h.position=="absolute"||h.position=="fixed"?c.offsetParent:c.parentNode}else if(u.nodeType==11)u=u.host;else break;return{left:r-t.left,right:Math.max(r,o)-t.left,top:a-(t.top+e),bottom:Math.max(a,l)-(t.top+e)}}function pZ(n){let e=n.getBoundingClientRect(),t=n.ownerDocument.defaultView||window;return e.left<t.innerWidth&&e.right>0&&e.top<t.innerHeight&&e.bottom>0}function mZ(n,e){let t=n.getBoundingClientRect();return{left:0,right:t.right-t.left,top:e,bottom:t.bottom-(t.top+e)}}class tu{constructor(e,t,i,s){this.from=e,this.to=t,this.size=i,this.displaySize=s}static same(e,t){if(e.length!=t.length)return!1;for(let i=0;i<e.length;i++){let s=e[i],r=t[i];if(s.from!=r.from||s.to!=r.to||s.size!=r.size)return!1}return!0}draw(e,t){return tt.replace({widget:new gZ(this.displaySize*(t?e.scaleY:e.scaleX),t)}).range(this.from,this.to)}}class gZ extends ml{constructor(e,t){super(),this.size=e,this.vertical=t}eq(e){return e.size==this.size&&e.vertical==this.vertical}toDOM(){let e=document.createElement("div");return this.vertical?e.style.height=this.size+"px":(e.style.width=this.size+"px",e.style.height="2px",e.style.display="inline-block"),e}get estimatedHeight(){return this.vertical?this.size:-1}}class ip{constructor(e){this.state=e,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scrollTop=0,this.scrolledToBottom=!1,this.scaleX=1,this.scaleY=1,this.scrollAnchorPos=0,this.scrollAnchorHeight=-1,this.scaler=sp,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=ut.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let t=e.facet(Sh).some(i=>typeof i!="function"&&i.class=="cm-lineWrapping");this.heightOracle=new aZ(t),this.stateDeco=e.facet(zr).filter(i=>typeof i!="function"),this.heightMap=xt.empty().applyChanges(this.stateDeco,De.empty,this.heightOracle.setDoc(e.doc),[new jt(0,0,0,e.doc.length)]);for(let i=0;i<2&&(this.viewport=this.getViewport(0,null),!!this.updateForViewport());i++);this.updateViewportLines(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=tt.set(this.lineGaps.map(i=>i.draw(this,!1))),this.computeVisibleRanges()}updateForViewport(){let e=[this.viewport],{main:t}=this.state.selection;for(let i=0;i<=1;i++){let s=i?t.head:t.anchor;if(!e.some(({from:r,to:o})=>s>=r&&s<=o)){let{from:r,to:o}=this.lineBlockAt(s);e.push(new ko(r,o))}}return this.viewports=e.sort((i,s)=>i.from-s.from),this.updateScaler()}updateScaler(){let e=this.scaler;return this.scaler=this.heightMap.height<=7e6?sp:new Ph(this.heightOracle,this.heightMap,this.viewports),e.eq(this.scaler)?0:2}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,e=>{this.viewportLines.push(lr(e,this.scaler))})}update(e,t=null){this.state=e.state;let i=this.stateDeco;this.stateDeco=this.state.facet(zr).filter(c=>typeof c!="function");let s=e.changedRanges,r=jt.extendWithRanges(s,hZ(i,this.stateDeco,e?e.changes:ct.empty(this.state.doc.length))),o=this.heightMap.height,a=this.scrolledToBottom?null:this.scrollAnchorAt(this.scrollTop);tp(),this.heightMap=this.heightMap.applyChanges(this.stateDeco,e.startState.doc,this.heightOracle.setDoc(this.state.doc),r),(this.heightMap.height!=o||Es)&&(e.flags|=2),a?(this.scrollAnchorPos=e.changes.mapPos(a.from,-1),this.scrollAnchorHeight=a.top):(this.scrollAnchorPos=-1,this.scrollAnchorHeight=this.heightMap.height);let l=r.length?this.mapViewport(this.viewport,e.changes):this.viewport;(t&&(t.range.head<l.from||t.range.head>l.to)||!this.viewportIsAppropriate(l))&&(l=this.getViewport(0,t));let u=l.from!=this.viewport.from||l.to!=this.viewport.to;this.viewport=l,e.flags|=this.updateForViewport(),(u||!e.changes.empty||e.flags&2)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,e.changes))),e.flags|=this.computeVisibleRanges(e.changes),t&&(this.scrollTarget=t),!this.mustEnforceCursorAssoc&&e.selectionSet&&e.view.lineWrapping&&e.state.selection.main.empty&&e.state.selection.main.assoc&&!e.state.facet(vR)&&(this.mustEnforceCursorAssoc=!0)}measure(e){let t=e.contentDOM,i=window.getComputedStyle(t),s=this.heightOracle,r=i.whiteSpace;this.defaultTextDirection=i.direction=="rtl"?ut.RTL:ut.LTR;let o=this.heightOracle.mustRefreshForWrapping(r),a=t.getBoundingClientRect(),l=o||this.mustMeasureContent||this.contentDOMHeight!=a.height;this.contentDOMHeight=a.height,this.mustMeasureContent=!1;let u=0,c=0;if(a.width&&a.height){let{scaleX:g,scaleY:k}=VO(t,a);(g>.005&&Math.abs(this.scaleX-g)>.005||k>.005&&Math.abs(this.scaleY-k)>.005)&&(this.scaleX=g,this.scaleY=k,u|=16,o=l=!0)}let h=(parseInt(i.paddingTop)||0)*this.scaleY,d=(parseInt(i.paddingBottom)||0)*this.scaleY;(this.paddingTop!=h||this.paddingBottom!=d)&&(this.paddingTop=h,this.paddingBottom=d,u|=18),this.editorWidth!=e.scrollDOM.clientWidth&&(s.lineWrapping&&(l=!0),this.editorWidth=e.scrollDOM.clientWidth,u|=16);let f=e.scrollDOM.scrollTop*this.scaleY;this.scrollTop!=f&&(this.scrollAnchorHeight=-1,this.scrollTop=f),this.scrolledToBottom=UO(e.scrollDOM);let p=(this.printing?mZ:fZ)(t,this.paddingTop),m=p.top-this.pixelViewport.top,O=p.bottom-this.pixelViewport.bottom;this.pixelViewport=p;let y=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(y!=this.inView&&(this.inView=y,y&&(l=!0)),!this.inView&&!this.scrollTarget&&!pZ(e.dom))return 0;let b=a.width;if((this.contentDOMWidth!=b||this.editorHeight!=e.scrollDOM.clientHeight)&&(this.contentDOMWidth=a.width,this.editorHeight=e.scrollDOM.clientHeight,u|=16),l){let g=e.docView.measureVisibleLineHeights(this.viewport);if(s.mustRefreshForHeights(g)&&(o=!0),o||s.lineWrapping&&Math.abs(b-this.contentDOMWidth)>s.charWidth){let{lineHeight:k,charWidth:S,textHeight:Q}=e.docView.measureTextSize();o=k>0&&s.refresh(r,k,S,Q,b/S,g),o&&(e.docView.minWidth=0,u|=16)}m>0&&O>0?c=Math.max(m,O):m<0&&O<0&&(c=Math.min(m,O)),tp();for(let k of this.viewports){let S=k.from==this.viewport.from?g:e.docView.measureVisibleLineHeights(k);this.heightMap=(o?xt.empty().applyChanges(this.stateDeco,De.empty,this.heightOracle,[new jt(0,0,0,e.state.doc.length)]):this.heightMap).updateHeight(s,0,o,new lZ(k.from,S))}Es&&(u|=2)}let v=!this.viewportIsAppropriate(this.viewport,c)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return v&&(u&2&&(u|=this.updateScaler()),this.viewport=this.getViewport(c,this.scrollTarget),u|=this.updateForViewport()),(u&2||v)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(o?[]:this.lineGaps,e)),u|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,e.docView.enforceCursorAssoc()),u}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(e,t){let i=.5-Math.max(-.5,Math.min(.5,e/1e3/2)),s=this.heightMap,r=this.heightOracle,{visibleTop:o,visibleBottom:a}=this,l=new ko(s.lineAt(o-i*1e3,Ye.ByHeight,r,0,0).from,s.lineAt(a+(1-i)*1e3,Ye.ByHeight,r,0,0).to);if(t){let{head:u}=t.range;if(u<l.from||u>l.to){let c=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),h=s.lineAt(u,Ye.ByPos,r,0,0),d;t.y=="center"?d=(h.top+h.bottom)/2-c/2:t.y=="start"||t.y=="nearest"&&u<l.from?d=h.top:d=h.bottom-c,l=new ko(s.lineAt(d-1e3/2,Ye.ByHeight,r,0,0).from,s.lineAt(d+c+1e3/2,Ye.ByHeight,r,0,0).to)}}return l}mapViewport(e,t){let i=t.mapPos(e.from,-1),s=t.mapPos(e.to,1);return new ko(this.heightMap.lineAt(i,Ye.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(s,Ye.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:e,to:t},i=0){if(!this.inView)return!0;let{top:s}=this.heightMap.lineAt(e,Ye.ByPos,this.heightOracle,0,0),{bottom:r}=this.heightMap.lineAt(t,Ye.ByPos,this.heightOracle,0,0),{visibleTop:o,visibleBottom:a}=this;return(e==0||s<=o-Math.max(10,Math.min(-i,250)))&&(t==this.state.doc.length||r>=a+Math.max(10,Math.min(i,250)))&&s>o-2*1e3&&r<a+2*1e3}mapLineGaps(e,t){if(!e.length||t.empty)return e;let i=[];for(let s of e)t.touchesRange(s.from,s.to)||i.push(new tu(t.mapPos(s.from),t.mapPos(s.to),s.size,s.displaySize));return i}ensureLineGaps(e,t){let i=this.heightOracle.lineWrapping,s=i?1e4:2e3,r=s>>1,o=s<<1;if(this.defaultTextDirection!=ut.LTR&&!i)return[];let a=[],l=(c,h,d,f)=>{if(h-c<r)return;let p=this.state.selection.main,m=[p.from];p.empty||m.push(p.to);for(let y of m)if(y>c&&y<h){l(c,y-10,d,f),l(y+10,h,d,f);return}let O=yZ(e,y=>y.from>=d.from&&y.to<=d.to&&Math.abs(y.from-c)<r&&Math.abs(y.to-h)<r&&!m.some(b=>y.from<b&&y.to>b));if(!O){if(h<d.to&&t&&i&&t.visibleRanges.some(v=>v.from<=h&&v.to>=h)){let v=t.moveToLineBoundary(ee.cursor(h),!1,!0).head;v>c&&(h=v)}let y=this.gapSize(d,c,h,f),b=i||y<2e6?y:2e6;O=new tu(c,h,y,b)}a.push(O)},u=c=>{if(c.length<o||c.type!=Ut.Text)return;let h=OZ(c.from,c.to,this.stateDeco);if(h.total<o)return;let d=this.scrollTarget?this.scrollTarget.range.head:null,f,p;if(i){let m=s/this.heightOracle.lineLength*this.heightOracle.lineHeight,O,y;if(d!=null){let b=Qo(h,d),v=((this.visibleBottom-this.visibleTop)/2+m)/c.height;O=b-v,y=b+v}else O=(this.visibleTop-c.top-m)/c.height,y=(this.visibleBottom-c.top+m)/c.height;f=Po(h,O),p=Po(h,y)}else{let m=h.total*this.heightOracle.charWidth,O=s*this.heightOracle.charWidth,y=0;if(m>2e6)for(let S of e)S.from>=c.from&&S.from<c.to&&S.size!=S.displaySize&&S.from*this.heightOracle.charWidth+y<this.pixelViewport.left&&(y=S.size-S.displaySize);let b=this.pixelViewport.left+y,v=this.pixelViewport.right+y,g,k;if(d!=null){let S=Qo(h,d),Q=((v-b)/2+O)/m;g=S-Q,k=S+Q}else g=(b-O)/m,k=(v+O)/m;f=Po(h,g),p=Po(h,k)}f>c.from&&l(c.from,f,c,h),p<c.to&&l(p,c.to,c,h)};for(let c of this.viewportLines)Array.isArray(c.type)?c.type.forEach(u):u(c);return a}gapSize(e,t,i,s){let r=Qo(s,i)-Qo(s,t);return this.heightOracle.lineWrapping?e.height*r:s.total*this.heightOracle.charWidth*r}updateLineGaps(e){tu.same(e,this.lineGaps)||(this.lineGaps=e,this.lineGapDeco=tt.set(e.map(t=>t.draw(this,this.heightOracle.lineWrapping))))}computeVisibleRanges(e){let t=this.stateDeco;this.lineGaps.length&&(t=t.concat(this.lineGapDeco));let i=[];ze.spans(t,this.viewport.from,this.viewport.to,{span(r,o){i.push({from:r,to:o})},point(){}},20);let s=0;if(i.length!=this.visibleRanges.length)s=12;else for(let r=0;r<i.length&&!(s&8);r++){let o=this.visibleRanges[r],a=i[r];(o.from!=a.from||o.to!=a.to)&&(s|=4,e&&e.mapPos(o.from,-1)==a.from&&e.mapPos(o.to,1)==a.to||(s|=8))}return this.visibleRanges=i,s}lineBlockAt(e){return e>=this.viewport.from&&e<=this.viewport.to&&this.viewportLines.find(t=>t.from<=e&&t.to>=e)||lr(this.heightMap.lineAt(e,Ye.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(e){return e>=this.viewportLines[0].top&&e<=this.viewportLines[this.viewportLines.length-1].bottom&&this.viewportLines.find(t=>t.top<=e&&t.bottom>=e)||lr(this.heightMap.lineAt(this.scaler.fromDOM(e),Ye.ByHeight,this.heightOracle,0,0),this.scaler)}scrollAnchorAt(e){let t=this.lineBlockAtHeight(e+8);return t.from>=this.viewport.from||this.viewportLines[0].top-e>200?t:this.viewportLines[0]}elementAtHeight(e){return lr(this.heightMap.blockAt(this.scaler.fromDOM(e),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class ko{constructor(e,t){this.from=e,this.to=t}}function OZ(n,e,t){let i=[],s=n,r=0;return ze.spans(t,n,e,{span(){},point(o,a){o>s&&(i.push({from:s,to:o}),r+=o-s),s=a}},20),s<e&&(i.push({from:s,to:e}),r+=e-s),{total:r,ranges:i}}function Po({total:n,ranges:e},t){if(t<=0)return e[0].from;if(t>=1)return e[e.length-1].to;let i=Math.floor(n*t);for(let s=0;;s++){let{from:r,to:o}=e[s],a=o-r;if(i<=a)return r+i;i-=a}}function Qo(n,e){let t=0;for(let{from:i,to:s}of n.ranges){if(e<=s){t+=e-i;break}t+=s-i}return t/n.total}function yZ(n,e){for(let t of n)if(e(t))return t}const sp={toDOM(n){return n},fromDOM(n){return n},scale:1,eq(n){return n==this}};class Ph{constructor(e,t,i){let s=0,r=0,o=0;this.viewports=i.map(({from:a,to:l})=>{let u=t.lineAt(a,Ye.ByPos,e,0,0).top,c=t.lineAt(l,Ye.ByPos,e,0,0).bottom;return s+=c-u,{from:a,to:l,top:u,bottom:c,domTop:0,domBottom:0}}),this.scale=(7e6-s)/(t.height-s);for(let a of this.viewports)a.domTop=o+(a.top-r)*this.scale,o=a.domBottom=a.domTop+(a.bottom-a.top),r=a.bottom}toDOM(e){for(let t=0,i=0,s=0;;t++){let r=t<this.viewports.length?this.viewports[t]:null;if(!r||e<r.top)return s+(e-i)*this.scale;if(e<=r.bottom)return r.domTop+(e-r.top);i=r.bottom,s=r.domBottom}}fromDOM(e){for(let t=0,i=0,s=0;;t++){let r=t<this.viewports.length?this.viewports[t]:null;if(!r||e<r.domTop)return i+(e-s)/this.scale;if(e<=r.domBottom)return r.top+(e-r.domTop);i=r.bottom,s=r.domBottom}}eq(e){return e instanceof Ph?this.scale==e.scale&&this.viewports.length==e.viewports.length&&this.viewports.every((t,i)=>t.from==e.viewports[i].from&&t.to==e.viewports[i].to):!1}}function lr(n,e){if(e.scale==1)return n;let t=e.toDOM(n.top),i=e.toDOM(n.bottom);return new pn(n.from,n.length,t,i-t,Array.isArray(n._content)?n._content.map(s=>lr(s,e)):n._content)}const To=ge.define({combine:n=>n.join(" ")}),Tc=ge.define({combine:n=>n.indexOf(!0)>-1}),Ac=di.newName(),M0=di.newName(),R0=di.newName(),Z0={"&light":"."+M0,"&dark":"."+R0};function Cc(n,e,t){return new di(e,{finish(i){return/&/.test(i)?i.replace(/&\w*/,s=>{if(s=="&")return n;if(!t||!t[s])throw new RangeError(`Unsupported selector: ${s}`);return t[s]}):n+" "+i}})}const vZ=Cc("."+Ac,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0,overflowAnchor:"none"},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",minHeight:"100%",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused > .cm-scroller > .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#ddd"},".cm-dropCursor":{position:"absolute"},"&.cm-focused > .cm-scroller > .cm-cursorLayer .cm-cursor":{display:"block"},".cm-iso":{unicodeBidi:"isolate"},".cm-announced":{position:"fixed",top:"-10000px"},"@media print":{".cm-announced":{display:"none"}},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",insetInlineStart:0,zIndex:200},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",borderRight:"1px solid #ddd"},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0,zIndex:300},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top"},".cm-highlightSpace":{backgroundImage:"radial-gradient(circle at 50% 55%, #aaa 20%, transparent 5%)",backgroundPosition:"center"},".cm-highlightTab":{backgroundImage:`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>')`,backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},Z0),wZ={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},nu=re.ie&&re.ie_version<=11;class bZ{constructor(e){this.view=e,this.active=!1,this.editContext=null,this.selectionRange=new nR,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.printQuery=null,this.parentCheck=-1,this.dom=e.contentDOM,this.observer=new MutationObserver(t=>{for(let i of t)this.queue.push(i);(re.ie&&re.ie_version<=11||re.ios&&e.composing)&&t.some(i=>i.type=="childList"&&i.removedNodes.length||i.type=="characterData"&&i.oldValue.length>i.target.nodeValue.length)?this.flushSoon():this.flush()}),window.EditContext&&e.constructor.EDIT_CONTEXT!==!1&&!(re.chrome&&re.chrome_version<126)&&(this.editContext=new SZ(e),e.state.facet(Cn)&&(e.contentDOM.editContext=this.editContext.editContext)),nu&&(this.onCharData=t=>{this.queue.push({target:t.target,type:"characterData",oldValue:t.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),window.matchMedia&&(this.printQuery=window.matchMedia("print")),typeof ResizeObserver=="function"&&(this.resizeScroll=new ResizeObserver(()=>{var t;((t=this.view.docView)===null||t===void 0?void 0:t.lastUpdate)<Date.now()-75&&this.onResize()}),this.resizeScroll.observe(e.scrollDOM)),this.addWindowListeners(this.win=e.win),this.start(),typeof IntersectionObserver=="function"&&(this.intersection=new IntersectionObserver(t=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),t.length>0&&t[t.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{threshold:[0,.001]}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(t=>{t.length>0&&t[t.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(e){this.view.inputState.runHandlers("scroll",e),this.intersecting&&this.view.measure()}onScroll(e){this.intersecting&&this.flush(!1),this.editContext&&this.view.requestMeasure(this.editContext.measureReq),this.onScrollChanged(e)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(e){(e.type=="change"||!e.type)&&!e.matches||(this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500))}updateGaps(e){if(this.gapIntersection&&(e.length!=this.gaps.length||this.gaps.some((t,i)=>t!=e[i]))){this.gapIntersection.disconnect();for(let t of e)this.gapIntersection.observe(t);this.gaps=e}}onSelectionChange(e){let t=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:i}=this,s=this.selectionRange;if(i.state.facet(Cn)?i.root.activeElement!=this.dom:!Ho(this.dom,s))return;let r=s.anchorNode&&i.docView.nearest(s.anchorNode);if(r&&r.ignoreEvent(e)){t||(this.selectionChanged=!1);return}(re.ie&&re.ie_version<=11||re.android&&re.chrome)&&!i.state.selection.main.empty&&s.focusNode&&vr(s.focusNode,s.focusOffset,s.anchorNode,s.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:e}=this,t=Ir(e.root);if(!t)return!1;let i=re.safari&&e.root.nodeType==11&&e.root.activeElement==this.dom&&xZ(this.view,t)||t;if(!i||this.selectionRange.eq(i))return!1;let s=Ho(this.dom,i);return s&&!this.selectionChanged&&e.inputState.lastFocusTime>Date.now()-200&&e.inputState.lastTouchTime<Date.now()-300&&sR(this.dom,i)?(this.view.inputState.lastFocusTime=0,e.docView.updateSelection(),!1):(this.selectionRange.setRange(i),s&&(this.selectionChanged=!0),!0)}setSelectionRange(e,t){this.selectionRange.set(e.node,e.offset,t.node,t.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let e=0,t=null;for(let i=this.dom;i;)if(i.nodeType==1)!t&&e<this.scrollTargets.length&&this.scrollTargets[e]==i?e++:t||(t=this.scrollTargets.slice(0,e)),t&&t.push(i),i=i.assignedSlot||i.parentNode;else if(i.nodeType==11)i=i.host;else break;if(e<this.scrollTargets.length&&!t&&(t=this.scrollTargets.slice(0,e)),t){for(let i of this.scrollTargets)i.removeEventListener("scroll",this.onScroll);for(let i of this.scrollTargets=t)i.addEventListener("scroll",this.onScroll)}}ignore(e){if(!this.active)return e();try{return this.stop(),e()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,wZ),nu&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),nu&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(e,t){var i;if(!this.delayedAndroidKey){let s=()=>{let r=this.delayedAndroidKey;r&&(this.clearDelayedAndroidKey(),this.view.inputState.lastKeyCode=r.keyCode,this.view.inputState.lastKeyTime=Date.now(),!this.flush()&&r.force&&Os(this.dom,r.key,r.keyCode))};this.flushingAndroidKey=this.view.win.requestAnimationFrame(s)}(!this.delayedAndroidKey||e=="Enter")&&(this.delayedAndroidKey={key:e,keyCode:t,force:this.lastChange<Date.now()-50||!!(!((i=this.delayedAndroidKey)===null||i===void 0)&&i.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()}))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}pendingRecords(){for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}processRecords(){let e=this.pendingRecords();e.length&&(this.queue=[]);let t=-1,i=-1,s=!1;for(let r of e){let o=this.readMutation(r);o&&(o.typeOver&&(s=!0),t==-1?{from:t,to:i}=o:(t=Math.min(o.from,t),i=Math.max(o.to,i)))}return{from:t,to:i,typeOver:s}}readChange(){let{from:e,to:t,typeOver:i}=this.processRecords(),s=this.selectionChanged&&Ho(this.dom,this.selectionRange);if(e<0&&!s)return null;e>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1;let r=new LR(this.view,e,t,i);return this.view.docView.domChanged={newSel:r.newSel?r.newSel.main:null},r}flush(e=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;e&&this.readSelectionRange();let t=this.readChange();if(!t)return this.view.requestMeasure(),!1;let i=this.view.state,s=S0(this.view,t);return this.view.state==i&&(t.domChanged||t.newSel&&!t.newSel.main.eq(this.view.state.selection.main))&&this.view.update([]),s}readMutation(e){let t=this.view.docView.nearest(e.target);if(!t||t.ignoreMutation(e))return null;if(t.markDirty(e.type=="attributes"),e.type=="attributes"&&(t.flags|=4),e.type=="childList"){let i=rp(t,e.previousSibling||e.target.previousSibling,-1),s=rp(t,e.nextSibling||e.target.nextSibling,1);return{from:i?t.posAfter(i):t.posAtStart,to:s?t.posBefore(s):t.posAtEnd,typeOver:!1}}else return e.type=="characterData"?{from:t.posAtStart,to:t.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}:null}setWindow(e){e!=this.win&&(this.removeWindowListeners(this.win),this.win=e,this.addWindowListeners(this.win))}addWindowListeners(e){e.addEventListener("resize",this.onResize),this.printQuery?this.printQuery.addEventListener?this.printQuery.addEventListener("change",this.onPrint):this.printQuery.addListener(this.onPrint):e.addEventListener("beforeprint",this.onPrint),e.addEventListener("scroll",this.onScroll),e.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(e){e.removeEventListener("scroll",this.onScroll),e.removeEventListener("resize",this.onResize),this.printQuery?this.printQuery.removeEventListener?this.printQuery.removeEventListener("change",this.onPrint):this.printQuery.removeListener(this.onPrint):e.removeEventListener("beforeprint",this.onPrint),e.document.removeEventListener("selectionchange",this.onSelectionChange)}update(e){this.editContext&&(this.editContext.update(e),e.startState.facet(Cn)!=e.state.facet(Cn)&&(e.view.contentDOM.editContext=e.state.facet(Cn)?this.editContext.editContext:null))}destroy(){var e,t,i;this.stop(),(e=this.intersection)===null||e===void 0||e.disconnect(),(t=this.gapIntersection)===null||t===void 0||t.disconnect(),(i=this.resizeScroll)===null||i===void 0||i.disconnect();for(let s of this.scrollTargets)s.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey),this.editContext&&(this.view.contentDOM.editContext=null,this.editContext.destroy())}}function rp(n,e,t){for(;e;){let i=je.get(e);if(i&&i.parent==n)return i;let s=e.parentNode;e=s!=n.dom?s:t>0?e.nextSibling:e.previousSibling}return null}function op(n,e){let t=e.startContainer,i=e.startOffset,s=e.endContainer,r=e.endOffset,o=n.docView.domAtPos(n.state.selection.main.anchor);return vr(o.node,o.offset,s,r)&&([t,i,s,r]=[s,r,t,i]),{anchorNode:t,anchorOffset:i,focusNode:s,focusOffset:r}}function xZ(n,e){if(e.getComposedRanges){let s=e.getComposedRanges(n.root)[0];if(s)return op(n,s)}let t=null;function i(s){s.preventDefault(),s.stopImmediatePropagation(),t=s.getTargetRanges()[0]}return n.contentDOM.addEventListener("beforeinput",i,!0),n.dom.ownerDocument.execCommand("indent"),n.contentDOM.removeEventListener("beforeinput",i,!0),t?op(n,t):null}class SZ{constructor(e){this.from=0,this.to=0,this.pendingContextChange=null,this.handlers=Object.create(null),this.composing=null,this.resetRange(e.state);let t=this.editContext=new window.EditContext({text:e.state.doc.sliceString(this.from,this.to),selectionStart:this.toContextPos(Math.max(this.from,Math.min(this.to,e.state.selection.main.anchor))),selectionEnd:this.toContextPos(e.state.selection.main.head)});this.handlers.textupdate=i=>{let s=e.state.selection.main,{anchor:r,head:o}=s,a=this.toEditorPos(i.updateRangeStart),l=this.toEditorPos(i.updateRangeEnd);e.inputState.composing>=0&&!this.composing&&(this.composing={contextBase:i.updateRangeStart,editorBase:a,drifted:!1});let u={from:a,to:l,insert:De.of(i.text.split(`
`))};if(u.from==this.from&&r<this.from?u.from=r:u.to==this.to&&r>this.to&&(u.to=r),u.from==u.to&&!u.insert.length){let c=ee.single(this.toEditorPos(i.selectionStart),this.toEditorPos(i.selectionEnd));c.main.eq(s)||e.dispatch({selection:c,userEvent:"select"});return}if((re.mac||re.android)&&u.from==o-1&&/^\. ?$/.test(i.text)&&e.contentDOM.getAttribute("autocorrect")=="off"&&(u={from:a,to:l,insert:De.of([i.text.replace("."," ")])}),this.pendingContextChange=u,!e.state.readOnly){let c=this.to-this.from+(u.to-u.from+u.insert.length);$h(e,u,ee.single(this.toEditorPos(i.selectionStart,c),this.toEditorPos(i.selectionEnd,c)))}this.pendingContextChange&&(this.revertPending(e.state),this.setSelection(e.state))},this.handlers.characterboundsupdate=i=>{let s=[],r=null;for(let o=this.toEditorPos(i.rangeStart),a=this.toEditorPos(i.rangeEnd);o<a;o++){let l=e.coordsForChar(o);r=l&&new DOMRect(l.left,l.top,l.right-l.left,l.bottom-l.top)||r||new DOMRect,s.push(r)}t.updateCharacterBounds(i.rangeStart,s)},this.handlers.textformatupdate=i=>{let s=[];for(let r of i.getTextFormats()){let o=r.underlineStyle,a=r.underlineThickness;if(o!="None"&&a!="None"){let l=this.toEditorPos(r.rangeStart),u=this.toEditorPos(r.rangeEnd);if(l<u){let c=`text-decoration: underline ${o=="Dashed"?"dashed ":o=="Squiggle"?"wavy ":""}${a=="Thin"?1:2}px`;s.push(tt.mark({attributes:{style:c}}).range(l,u))}}}e.dispatch({effects:m0.of(tt.set(s))})},this.handlers.compositionstart=()=>{e.inputState.composing<0&&(e.inputState.composing=0,e.inputState.compositionFirstChange=!0)},this.handlers.compositionend=()=>{if(e.inputState.composing=-1,e.inputState.compositionFirstChange=null,this.composing){let{drifted:i}=this.composing;this.composing=null,i&&this.reset(e.state)}};for(let i in this.handlers)t.addEventListener(i,this.handlers[i]);this.measureReq={read:i=>{this.editContext.updateControlBounds(i.contentDOM.getBoundingClientRect());let s=Ir(i.root);s&&s.rangeCount&&this.editContext.updateSelectionBounds(s.getRangeAt(0).getBoundingClientRect())}}}applyEdits(e){let t=0,i=!1,s=this.pendingContextChange;return e.changes.iterChanges((r,o,a,l,u)=>{if(i)return;let c=u.length-(o-r);if(s&&o>=s.to)if(s.from==r&&s.to==o&&s.insert.eq(u)){s=this.pendingContextChange=null,t+=c,this.to+=c;return}else s=null,this.revertPending(e.state);if(r+=t,o+=t,o<=this.from)this.from+=c,this.to+=c;else if(r<this.to){if(r<this.from||o>this.to||this.to-this.from+u.length>3e4){i=!0;return}this.editContext.updateText(this.toContextPos(r),this.toContextPos(o),u.toString()),this.to+=c}t+=c}),s&&!i&&this.revertPending(e.state),!i}update(e){let t=this.pendingContextChange;this.composing&&(this.composing.drifted||e.transactions.some(i=>!i.isUserEvent("input.type")&&i.changes.touchesRange(this.from,this.to)))?(this.composing.drifted=!0,this.composing.editorBase=e.changes.mapPos(this.composing.editorBase)):!this.applyEdits(e)||!this.rangeIsValid(e.state)?(this.pendingContextChange=null,this.reset(e.state)):(e.docChanged||e.selectionSet||t)&&this.setSelection(e.state),(e.geometryChanged||e.docChanged||e.selectionSet)&&e.view.requestMeasure(this.measureReq)}resetRange(e){let{head:t}=e.selection.main;this.from=Math.max(0,t-1e4),this.to=Math.min(e.doc.length,t+1e4)}reset(e){this.resetRange(e),this.editContext.updateText(0,this.editContext.text.length,e.doc.sliceString(this.from,this.to)),this.setSelection(e)}revertPending(e){let t=this.pendingContextChange;this.pendingContextChange=null,this.editContext.updateText(this.toContextPos(t.from),this.toContextPos(t.from+t.insert.length),e.doc.sliceString(t.from,t.to))}setSelection(e){let{main:t}=e.selection,i=this.toContextPos(Math.max(this.from,Math.min(this.to,t.anchor))),s=this.toContextPos(t.head);(this.editContext.selectionStart!=i||this.editContext.selectionEnd!=s)&&this.editContext.updateSelection(i,s)}rangeIsValid(e){let{head:t}=e.selection.main;return!(this.from>0&&t-this.from<500||this.to<e.doc.length&&this.to-t<500||this.to-this.from>1e4*3)}toEditorPos(e,t=this.to-this.from){e=Math.min(e,t);let i=this.composing;return i&&i.drifted?i.editorBase+(e-i.contextBase):e+this.from}toContextPos(e){let t=this.composing;return t&&t.drifted?t.contextBase+(e-t.editorBase):e-this.from}destroy(){for(let e in this.handlers)this.editContext.removeEventListener(e,this.handlers[e])}}class _e{get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return this.inputState.composing>0}get compositionStarted(){return this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}constructor(e={}){var t;this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.className="cm-announced",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),e.parent&&e.parent.appendChild(this.dom);let{dispatch:i}=e;this.dispatchTransactions=e.dispatchTransactions||i&&(s=>s.forEach(r=>i(r,this)))||(s=>this.update(s)),this.dispatch=this.dispatch.bind(this),this._root=e.root||iR(e.parent)||document,this.viewState=new ip(e.state||Ne.create(e)),e.scrollTo&&e.scrollTo.is(So)&&(this.viewState.scrollTarget=e.scrollTo.value.clip(this.viewState.state)),this.plugins=this.state.facet(rr).map(s=>new Kl(s));for(let s of this.plugins)s.update(this);this.observer=new bZ(this),this.inputState=new UR(this),this.inputState.ensureHandlers(this.plugins),this.docView=new If(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),!((t=document.fonts)===null||t===void 0)&&t.ready&&document.fonts.ready.then(()=>this.requestMeasure())}dispatch(...e){let t=e.length==1&&e[0]instanceof ft?e:e.length==1&&Array.isArray(e[0])?e[0]:[this.state.update(...e)];this.dispatchTransactions(t,this)}update(e){if(this.updateState!=0)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let t=!1,i=!1,s,r=this.state;for(let d of e){if(d.startState!=r)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");r=d.state}if(this.destroyed){this.viewState.state=r;return}let o=this.hasFocus,a=0,l=null;e.some(d=>d.annotation(T0))?(this.inputState.notifiedFocused=o,a=1):o!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=o,l=A0(r,o),l||(a=1));let u=this.observer.delayedAndroidKey,c=null;if(u?(this.observer.clearDelayedAndroidKey(),c=this.observer.readChange(),(c&&!this.state.doc.eq(r.doc)||!this.state.selection.eq(r.selection))&&(c=null)):this.observer.clear(),r.facet(Ne.phrases)!=this.state.facet(Ne.phrases))return this.setState(r);s=Aa.create(this,r,e),s.flags|=a;let h=this.viewState.scrollTarget;try{this.updateState=2;for(let d of e){if(h&&(h=h.map(d.changes)),d.scrollIntoView){let{main:f}=d.state.selection;h=new ys(f.empty?f:ee.cursor(f.head,f.head>f.anchor?-1:1))}for(let f of d.effects)f.is(So)&&(h=f.value.clip(this.state))}this.viewState.update(s,h),this.bidiCache=Ea.update(this.bidiCache,s.changes),s.empty||(this.updatePlugins(s),this.inputState.update(s)),t=this.docView.update(s),this.state.facet(or)!=this.styleModules&&this.mountStyles(),i=this.updateAttrs(),this.showAnnouncements(e),this.docView.updateSelection(t,e.some(d=>d.isUserEvent("select.pointer")))}finally{this.updateState=0}if(s.startState.facet(To)!=s.state.facet(To)&&(this.viewState.mustMeasureContent=!0),(t||i||h||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),t&&this.docViewUpdate(),!s.empty)for(let d of this.state.facet(kc))try{d(s)}catch(f){mn(this.state,f,"update listener")}(l||c)&&Promise.resolve().then(()=>{l&&this.state==l.startState&&this.dispatch(l),c&&!S0(this,c)&&u.force&&Os(this.contentDOM,u.key,u.keyCode)})}setState(e){if(this.updateState!=0)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=e;return}this.updateState=2;let t=this.hasFocus;try{for(let i of this.plugins)i.destroy(this);this.viewState=new ip(e),this.plugins=e.facet(rr).map(i=>new Kl(i)),this.pluginMap.clear();for(let i of this.plugins)i.update(this);this.docView.destroy(),this.docView=new If(this),this.inputState.ensureHandlers(this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}t&&this.focus(),this.requestMeasure()}updatePlugins(e){let t=e.startState.facet(rr),i=e.state.facet(rr);if(t!=i){let s=[];for(let r of i){let o=t.indexOf(r);if(o<0)s.push(new Kl(r));else{let a=this.plugins[o];a.mustUpdate=e,s.push(a)}}for(let r of this.plugins)r.mustUpdate!=e&&r.destroy(this);this.plugins=s,this.pluginMap.clear()}else for(let s of this.plugins)s.mustUpdate=e;for(let s=0;s<this.plugins.length;s++)this.plugins[s].update(this);t!=i&&this.inputState.ensureHandlers(this.plugins)}docViewUpdate(){for(let e of this.plugins){let t=e.value;if(t&&t.docViewUpdate)try{t.docViewUpdate(this)}catch(i){mn(this.state,i,"doc view update listener")}}}measure(e=!0){if(this.destroyed)return;if(this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.observer.delayedAndroidKey){this.measureScheduled=-1,this.requestMeasure();return}this.measureScheduled=0,e&&this.observer.forceFlush();let t=null,i=this.scrollDOM,s=i.scrollTop*this.scaleY,{scrollAnchorPos:r,scrollAnchorHeight:o}=this.viewState;Math.abs(s-this.viewState.scrollTop)>1&&(o=-1),this.viewState.scrollAnchorHeight=-1;try{for(let a=0;;a++){if(o<0)if(UO(i))r=-1,o=this.viewState.heightMap.height;else{let f=this.viewState.scrollAnchorAt(s);r=f.from,o=f.top}this.updateState=1;let l=this.viewState.measure(this);if(!l&&!this.measureRequests.length&&this.viewState.scrollTarget==null)break;if(a>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let u=[];l&4||([this.measureRequests,u]=[u,this.measureRequests]);let c=u.map(f=>{try{return f.read(this)}catch(p){return mn(this.state,p),ap}}),h=Aa.create(this,this.state,[]),d=!1;h.flags|=l,t?t.flags|=l:t=h,this.updateState=2,h.empty||(this.updatePlugins(h),this.inputState.update(h),this.updateAttrs(),d=this.docView.update(h),d&&this.docViewUpdate());for(let f=0;f<u.length;f++)if(c[f]!=ap)try{let p=u[f];p.write&&p.write(c[f],this)}catch(p){mn(this.state,p)}if(d&&this.docView.updateSelection(!0),!h.viewportChanged&&this.measureRequests.length==0){if(this.viewState.editorHeight)if(this.viewState.scrollTarget){this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,o=-1;continue}else{let p=(r<0?this.viewState.heightMap.height:this.viewState.lineBlockAt(r).top)-o;if(p>1||p<-1){s=s+p,i.scrollTop=s/this.scaleY,o=-1;continue}}break}}}finally{this.updateState=0,this.measureScheduled=-1}if(t&&!t.empty)for(let a of this.state.facet(kc))a(t)}get themeClasses(){return Ac+" "+(this.state.facet(Tc)?R0:M0)+" "+this.state.facet(To)}updateAttrs(){let e=lp(this,g0,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),t={spellcheck:"false",autocorrect:"off",autocapitalize:"off",writingsuggestions:"false",translate:"no",contenteditable:this.state.facet(Cn)?"true":"false",class:"cm-content",style:`${re.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(t["aria-readonly"]="true"),lp(this,Sh,t);let i=this.observer.ignore(()=>{let s=bc(this.contentDOM,this.contentAttrs,t),r=bc(this.dom,this.editorAttrs,e);return s||r});return this.editorAttrs=e,this.contentAttrs=t,i}showAnnouncements(e){let t=!0;for(let i of e)for(let s of i.effects)if(s.is(_e.announce)){t&&(this.announceDOM.textContent=""),t=!1;let r=this.announceDOM.appendChild(document.createElement("div"));r.textContent=s.value}}mountStyles(){this.styleModules=this.state.facet(or);let e=this.state.facet(_e.cspNonce);di.mount(this.root,this.styleModules.concat(vZ).reverse(),e?{nonce:e}:void 0)}readMeasured(){if(this.updateState==2)throw new Error("Reading the editor layout isn't allowed during an update");this.updateState==0&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(e){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure())),e){if(this.measureRequests.indexOf(e)>-1)return;if(e.key!=null){for(let t=0;t<this.measureRequests.length;t++)if(this.measureRequests[t].key===e.key){this.measureRequests[t]=e;return}}this.measureRequests.push(e)}}plugin(e){let t=this.pluginMap.get(e);return(t===void 0||t&&t.spec!=e)&&this.pluginMap.set(e,t=this.plugins.find(i=>i.spec==e)||null),t&&t.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}get scaleX(){return this.viewState.scaleX}get scaleY(){return this.viewState.scaleY}elementAtHeight(e){return this.readMeasured(),this.viewState.elementAtHeight(e)}lineBlockAtHeight(e){return this.readMeasured(),this.viewState.lineBlockAtHeight(e)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(e){return this.viewState.lineBlockAt(e)}get contentHeight(){return this.viewState.contentHeight}moveByChar(e,t,i){return eu(this,e,Bf(this,e,t,i))}moveByGroup(e,t){return eu(this,e,Bf(this,e,t,i=>ZR(this,e.head,i)))}visualLineSide(e,t){let i=this.bidiSpans(e),s=this.textDirectionAt(e.from),r=i[t?i.length-1:0];return ee.cursor(r.side(t,s)+e.from,r.forward(!t,s)?1:-1)}moveToLineBoundary(e,t,i=!0){return RR(this,e,t,i)}moveVertically(e,t,i){return eu(this,e,DR(this,e,t,i))}domAtPos(e){return this.docView.domAtPos(e)}posAtDOM(e,t=0){return this.docView.posFromDOM(e,t)}posAtCoords(e,t=!0){return this.readMeasured(),x0(this,e,t)}coordsAtPos(e,t=1){this.readMeasured();let i=this.docView.coordsAt(e,t);if(!i||i.left==i.right)return i;let s=this.state.doc.lineAt(e),r=this.bidiSpans(s),o=r[li.find(r,e-s.from,-1,t)];return fl(i,o.dir==ut.LTR==t>0)}coordsForChar(e){return this.readMeasured(),this.docView.coordsForChar(e)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(e){return!this.state.facet(f0)||e<this.viewport.from||e>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(e))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(e){if(e.length>_Z)return r0(e.length);let t=this.textDirectionAt(e.from),i;for(let r of this.bidiCache)if(r.from==e.from&&r.dir==t&&(r.fresh||s0(r.isolates,i=Nf(this,e))))return r.order;i||(i=Nf(this,e));let s=gR(e.text,t,i);return this.bidiCache.push(new Ea(e.from,e.to,t,i,!0,s)),s}get hasFocus(){var e;return(this.dom.ownerDocument.hasFocus()||re.safari&&((e=this.inputState)===null||e===void 0?void 0:e.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{XO(this.contentDOM),this.docView.updateSelection()})}setRoot(e){this._root!=e&&(this._root=e,this.observer.setWindow((e.nodeType==9?e:e.ownerDocument).defaultView||window),this.mountStyles())}destroy(){this.root.activeElement==this.contentDOM&&this.contentDOM.blur();for(let e of this.plugins)e.destroy(this);this.plugins=[],this.inputState.destroy(),this.docView.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(e,t={}){return So.of(new ys(typeof e=="number"?ee.cursor(e):e,t.y,t.x,t.yMargin,t.xMargin))}scrollSnapshot(){let{scrollTop:e,scrollLeft:t}=this.scrollDOM,i=this.viewState.scrollAnchorAt(e);return So.of(new ys(ee.cursor(i.from),"start","start",i.top-e,t,!0))}setTabFocusMode(e){e==null?this.inputState.tabFocusMode=this.inputState.tabFocusMode<0?0:-1:typeof e=="boolean"?this.inputState.tabFocusMode=e?0:-1:this.inputState.tabFocusMode!=0&&(this.inputState.tabFocusMode=Date.now()+e)}static domEventHandlers(e){return mi.define(()=>({}),{eventHandlers:e})}static domEventObservers(e){return mi.define(()=>({}),{eventObservers:e})}static theme(e,t){let i=di.newName(),s=[To.of(i),or.of(Cc(`.${i}`,e))];return t&&t.dark&&s.push(Tc.of(!0)),s}static baseTheme(e){return cl.lowest(or.of(Cc("."+Ac,e,Z0)))}static findFromDOM(e){var t;let i=e.querySelector(".cm-content"),s=i&&je.get(i)||je.get(e);return((t=s==null?void 0:s.rootView)===null||t===void 0?void 0:t.view)||null}}_e.styleModule=or;_e.inputHandler=h0;_e.clipboardInputFilter=bh;_e.clipboardOutputFilter=xh;_e.scrollHandler=p0;_e.focusChangeEffect=d0;_e.perLineTextDirection=f0;_e.exceptionSink=c0;_e.updateListener=kc;_e.editable=Cn;_e.mouseSelectionStyle=u0;_e.dragMovesSelection=l0;_e.clickAddsSelectionRange=a0;_e.decorations=zr;_e.outerDecorations=O0;_e.atomicRanges=_h;_e.bidiIsolatedRanges=y0;_e.scrollMargins=v0;_e.darkTheme=Tc;_e.cspNonce=ge.define({combine:n=>n.length?n[0]:""});_e.contentAttributes=Sh;_e.editorAttributes=g0;_e.lineWrapping=_e.contentAttributes.of({class:"cm-lineWrapping"});_e.announce=Fe.define();const _Z=4096,ap={};class Ea{constructor(e,t,i,s,r,o){this.from=e,this.to=t,this.dir=i,this.isolates=s,this.fresh=r,this.order=o}static update(e,t){if(t.empty&&!e.some(r=>r.fresh))return e;let i=[],s=e.length?e[e.length-1].dir:ut.LTR;for(let r=Math.max(0,e.length-10);r<e.length;r++){let o=e[r];o.dir==s&&!t.touchesRange(o.from,o.to)&&i.push(new Ea(t.mapPos(o.from,1),t.mapPos(o.to,-1),o.dir,o.isolates,!1,o.order))}return i}}function lp(n,e,t){for(let i=n.state.facet(e),s=i.length-1;s>=0;s--){let r=i[s],o=typeof r=="function"?r(n):r;o&&wc(o,t)}return t}const $Z=re.mac?"mac":re.windows?"win":re.linux?"linux":"key";function kZ(n,e){const t=n.split(/-(?!$)/);let i=t[t.length-1];i=="Space"&&(i=" ");let s,r,o,a;for(let l=0;l<t.length-1;++l){const u=t[l];if(/^(cmd|meta|m)$/i.test(u))a=!0;else if(/^a(lt)?$/i.test(u))s=!0;else if(/^(c|ctrl|control)$/i.test(u))r=!0;else if(/^s(hift)?$/i.test(u))o=!0;else if(/^mod$/i.test(u))e=="mac"?a=!0:r=!0;else throw new Error("Unrecognized modifier name: "+u)}return s&&(i="Alt-"+i),r&&(i="Ctrl-"+i),a&&(i="Meta-"+i),o&&(i="Shift-"+i),i}function Ao(n,e,t){return e.altKey&&(n="Alt-"+n),e.ctrlKey&&(n="Ctrl-"+n),e.metaKey&&(n="Meta-"+n),t!==!1&&e.shiftKey&&(n="Shift-"+n),n}const PZ=cl.default(_e.domEventHandlers({keydown(n,e){return CZ(QZ(e.state),n,e,"editor")}})),Ma=ge.define({enables:PZ}),up=new WeakMap;function QZ(n){let e=n.facet(Ma),t=up.get(e);return t||up.set(e,t=AZ(e.reduce((i,s)=>i.concat(s),[]))),t}let oi=null;const TZ=4e3;function AZ(n,e=$Z){let t=Object.create(null),i=Object.create(null),s=(o,a)=>{let l=i[o];if(l==null)i[o]=a;else if(l!=a)throw new Error("Key binding "+o+" is used both as a regular binding and as a multi-stroke prefix")},r=(o,a,l,u,c)=>{var h,d;let f=t[o]||(t[o]=Object.create(null)),p=a.split(/ (?!$)/).map(y=>kZ(y,e));for(let y=1;y<p.length;y++){let b=p.slice(0,y).join(" ");s(b,!0),f[b]||(f[b]={preventDefault:!0,stopPropagation:!1,run:[v=>{let g=oi={view:v,prefix:b,scope:o};return setTimeout(()=>{oi==g&&(oi=null)},TZ),!0}]})}let m=p.join(" ");s(m,!1);let O=f[m]||(f[m]={preventDefault:!1,stopPropagation:!1,run:((d=(h=f._any)===null||h===void 0?void 0:h.run)===null||d===void 0?void 0:d.slice())||[]});l&&O.run.push(l),u&&(O.preventDefault=!0),c&&(O.stopPropagation=!0)};for(let o of n){let a=o.scope?o.scope.split(" "):["editor"];if(o.any)for(let u of a){let c=t[u]||(t[u]=Object.create(null));c._any||(c._any={preventDefault:!1,stopPropagation:!1,run:[]});let{any:h}=o;for(let d in c)c[d].run.push(f=>h(f,Ec))}let l=o[e]||o.key;if(l)for(let u of a)r(u,l,o.run,o.preventDefault,o.stopPropagation),o.shift&&r(u,"Shift-"+l,o.shift,o.preventDefault,o.stopPropagation)}return t}let Ec=null;function CZ(n,e,t,i){Ec=e;let s=KM(e),r=MM(s,0),o=RM(r)==s.length&&s!=" ",a="",l=!1,u=!1,c=!1;oi&&oi.view==t&&oi.scope==i&&(a=oi.prefix+" ",$0.indexOf(e.keyCode)<0&&(u=!0,oi=null));let h=new Set,d=O=>{if(O){for(let y of O.run)if(!h.has(y)&&(h.add(y),y(t)))return O.stopPropagation&&(c=!0),!0;O.preventDefault&&(O.stopPropagation&&(c=!0),u=!0)}return!1},f=n[i],p,m;return f&&(d(f[a+Ao(s,e,!o)])?l=!0:o&&(e.altKey||e.metaKey||e.ctrlKey)&&!(re.windows&&e.ctrlKey&&e.altKey)&&(p=fi[e.keyCode])&&p!=s?(d(f[a+Ao(p,e,!0)])||e.shiftKey&&(m=Nr[e.keyCode])!=s&&m!=p&&d(f[a+Ao(m,e,!1)]))&&(l=!0):o&&e.shiftKey&&d(f[a+Ao(s,e,!0)])&&(l=!0),!l&&d(f._any)&&(l=!0)),u&&(l=!0),l&&c&&e.stopPropagation(),Ec=null,l}const EZ=!(re.ios&&re.webkit&&re.webkit_version<534),cp={".cm-line":{},".cm-content":{}};EZ&&(cp[".cm-line"].caretColor=cp[".cm-content"].caretColor="transparent !important");class Hi extends Wi{compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}eq(e){return!1}destroy(e){}}Hi.prototype.elementClass="";Hi.prototype.toDOM=void 0;Hi.prototype.mapMode=wt.TrackBefore;Hi.prototype.startSide=Hi.prototype.endSide=-1;Hi.prototype.point=!0;const iu=ge.define(),MZ=ge.define(),ea=ge.define(),hp=ge.define({combine:n=>n.some(e=>e)});function RZ(n){return[ZZ]}const ZZ=mi.fromClass(class{constructor(n){this.view=n,this.prevViewport=n.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.gutters=n.state.facet(ea).map(e=>new fp(n,e));for(let e of this.gutters)this.dom.appendChild(e.dom);this.fixed=!n.state.facet(hp),this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),n.scrollDOM.insertBefore(this.dom,n.contentDOM)}update(n){if(this.updateGutters(n)){let e=this.prevViewport,t=n.view.viewport,i=Math.min(e.to,t.to)-Math.max(e.from,t.from);this.syncGutters(i<(t.to-t.from)*.8)}n.geometryChanged&&(this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px"),this.view.state.facet(hp)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":""),this.prevViewport=n.view.viewport}syncGutters(n){let e=this.dom.nextSibling;n&&this.dom.remove();let t=ze.iter(this.view.state.facet(iu),this.view.viewport.from),i=[],s=this.gutters.map(r=>new DZ(r,this.view.viewport,-this.view.documentPadding.top));for(let r of this.view.viewportLineBlocks)if(i.length&&(i=[]),Array.isArray(r.type)){let o=!0;for(let a of r.type)if(a.type==Ut.Text&&o){Mc(t,i,a.from);for(let l of s)l.line(this.view,a,i);o=!1}else if(a.widget)for(let l of s)l.widget(this.view,a)}else if(r.type==Ut.Text){Mc(t,i,r.from);for(let o of s)o.line(this.view,r,i)}else if(r.widget)for(let o of s)o.widget(this.view,r);for(let r of s)r.finish();n&&this.view.scrollDOM.insertBefore(this.dom,e)}updateGutters(n){let e=n.startState.facet(ea),t=n.state.facet(ea),i=n.docChanged||n.heightChanged||n.viewportChanged||!ze.eq(n.startState.facet(iu),n.state.facet(iu),n.view.viewport.from,n.view.viewport.to);if(e==t)for(let s of this.gutters)s.update(n)&&(i=!0);else{i=!0;let s=[];for(let r of t){let o=e.indexOf(r);o<0?s.push(new fp(this.view,r)):(this.gutters[o].update(n),s.push(this.gutters[o]))}for(let r of this.gutters)r.dom.remove(),s.indexOf(r)<0&&r.destroy();for(let r of s)this.dom.appendChild(r.dom);this.gutters=s}return i}destroy(){for(let n of this.gutters)n.destroy();this.dom.remove()}},{provide:n=>_e.scrollMargins.of(e=>{let t=e.plugin(n);return!t||t.gutters.length==0||!t.fixed?null:e.textDirection==ut.LTR?{left:t.dom.offsetWidth*e.scaleX}:{right:t.dom.offsetWidth*e.scaleX}})});function dp(n){return Array.isArray(n)?n:[n]}function Mc(n,e,t){for(;n.value&&n.from<=t;)n.from==t&&e.push(n.value),n.next()}class DZ{constructor(e,t,i){this.gutter=e,this.height=i,this.i=0,this.cursor=ze.iter(e.markers,t.from)}addElement(e,t,i){let{gutter:s}=this,r=(t.top-this.height)/e.scaleY,o=t.height/e.scaleY;if(this.i==s.elements.length){let a=new D0(e,o,r,i);s.elements.push(a),s.dom.appendChild(a.dom)}else s.elements[this.i].update(e,o,r,i);this.height=t.bottom,this.i++}line(e,t,i){let s=[];Mc(this.cursor,s,t.from),i.length&&(s=s.concat(i));let r=this.gutter.config.lineMarker(e,t,s);r&&s.unshift(r);let o=this.gutter;s.length==0&&!o.config.renderEmptyElements||this.addElement(e,t,s)}widget(e,t){let i=this.gutter.config.widgetMarker(e,t.widget,t),s=i?[i]:null;for(let r of e.state.facet(MZ)){let o=r(e,t.widget,t);o&&(s||(s=[])).push(o)}s&&this.addElement(e,t,s)}finish(){let e=this.gutter;for(;e.elements.length>this.i;){let t=e.elements.pop();e.dom.removeChild(t.dom),t.destroy()}}}class fp{constructor(e,t){this.view=e,this.config=t,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let i in t.domEventHandlers)this.dom.addEventListener(i,s=>{let r=s.target,o;if(r!=this.dom&&this.dom.contains(r)){for(;r.parentNode!=this.dom;)r=r.parentNode;let l=r.getBoundingClientRect();o=(l.top+l.bottom)/2}else o=s.clientY;let a=e.lineBlockAtHeight(o-e.documentTop);t.domEventHandlers[i](e,a,s)&&s.preventDefault()});this.markers=dp(t.markers(e)),t.initialSpacer&&(this.spacer=new D0(e,0,0,[t.initialSpacer(e)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(e){let t=this.markers;if(this.markers=dp(this.config.markers(e.view)),this.spacer&&this.config.updateSpacer){let s=this.config.updateSpacer(this.spacer.markers[0],e);s!=this.spacer.markers[0]&&this.spacer.update(e.view,0,0,[s])}let i=e.view.viewport;return!ze.eq(this.markers,t,i.from,i.to)||(this.config.lineMarkerChange?this.config.lineMarkerChange(e):!1)}destroy(){for(let e of this.elements)e.destroy()}}class D0{constructor(e,t,i,s){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(e,t,i,s)}update(e,t,i,s){this.height!=t&&(this.height=t,this.dom.style.height=t+"px"),this.above!=i&&(this.dom.style.marginTop=(this.above=i)?i+"px":""),NZ(this.markers,s)||this.setMarkers(e,s)}setMarkers(e,t){let i="cm-gutterElement",s=this.dom.firstChild;for(let r=0,o=0;;){let a=o,l=r<t.length?t[r++]:null,u=!1;if(l){let c=l.elementClass;c&&(i+=" "+c);for(let h=o;h<this.markers.length;h++)if(this.markers[h].compare(l)){a=h,u=!0;break}}else a=this.markers.length;for(;o<a;){let c=this.markers[o++];if(c.toDOM){c.destroy(s);let h=s.nextSibling;s.remove(),s=h}}if(!l)break;l.toDOM&&(u?s=s.nextSibling:this.dom.insertBefore(l.toDOM(e),s)),u&&o++}this.dom.className=i,this.markers=t}destroy(){this.setMarkers(null,[])}}function NZ(n,e){if(n.length!=e.length)return!1;for(let t=0;t<n.length;t++)if(!n[t].compare(e[t]))return!1;return!0}const IZ=ge.define(),LZ=ge.define(),os=ge.define({combine(n){return WM(n,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(e,t){let i=Object.assign({},e);for(let s in t){let r=i[s],o=t[s];i[s]=r?(a,l,u)=>r(a,l,u)||o(a,l,u):o}return i}})}});class su extends Hi{constructor(e){super(),this.number=e}eq(e){return this.number==e.number}toDOM(){return document.createTextNode(this.number)}}function ru(n,e){return n.state.facet(os).formatNumber(e,n.state)}const zZ=ea.compute([os],n=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers(e){return e.state.facet(IZ)},lineMarker(e,t,i){return i.some(s=>s.toDOM)?null:new su(ru(e,e.state.doc.lineAt(t.from).number))},widgetMarker:(e,t,i)=>{for(let s of e.state.facet(LZ)){let r=s(e,t,i);if(r)return r}return null},lineMarkerChange:e=>e.startState.facet(os)!=e.state.facet(os),initialSpacer(e){return new su(ru(e,pp(e.state.doc.lines)))},updateSpacer(e,t){let i=ru(t.view,pp(t.view.state.doc.lines));return i==e.number?e:new su(i)},domEventHandlers:n.facet(os).domEventHandlers}));function VZ(n={}){return[os.of(n),RZ(),zZ]}function pp(n){let e=9;for(;e<n;)e=e*10+9;return e}const N0=1024;let XZ=0;class ou{constructor(e,t){this.from=e,this.to=t}}class Pe{constructor(e={}){this.id=XZ++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof e!="function"&&(e=At.match(e)),t=>{let i=e(t);return i===void 0?null:[this,i]}}}Pe.closedBy=new Pe({deserialize:n=>n.split(" ")});Pe.openedBy=new Pe({deserialize:n=>n.split(" ")});Pe.group=new Pe({deserialize:n=>n.split(" ")});Pe.isolate=new Pe({deserialize:n=>{if(n&&n!="rtl"&&n!="ltr"&&n!="auto")throw new RangeError("Invalid value for isolate: "+n);return n||"auto"}});Pe.contextHash=new Pe({perNode:!0});Pe.lookAhead=new Pe({perNode:!0});Pe.mounted=new Pe({perNode:!0});class Ra{constructor(e,t,i){this.tree=e,this.overlay=t,this.parser=i}static get(e){return e&&e.props&&e.props[Pe.mounted.id]}}const BZ=Object.create(null);class At{constructor(e,t,i,s=0){this.name=e,this.props=t,this.id=i,this.flags=s}static define(e){let t=e.props&&e.props.length?Object.create(null):BZ,i=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(e.name==null?8:0),s=new At(e.name||"",t,e.id,i);if(e.props){for(let r of e.props)if(Array.isArray(r)||(r=r(s)),r){if(r[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");t[r[0].id]=r[1]}}return s}prop(e){return this.props[e.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(e){if(typeof e=="string"){if(this.name==e)return!0;let t=this.prop(Pe.group);return t?t.indexOf(e)>-1:!1}return this.id==e}static match(e){let t=Object.create(null);for(let i in e)for(let s of i.split(" "))t[s]=e[i];return i=>{for(let s=i.prop(Pe.group),r=-1;r<(s?s.length:0);r++){let o=t[r<0?i.name:s[r]];if(o)return o}}}}At.none=new At("",Object.create(null),0,8);class Qh{constructor(e){this.types=e;for(let t=0;t<e.length;t++)if(e[t].id!=t)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...e){let t=[];for(let i of this.types){let s=null;for(let r of e){let o=r(i);o&&(s||(s=Object.assign({},i.props)),s[o[0].id]=o[1])}t.push(s?new At(i.name,s,i.id,i.flags):i)}return new Qh(t)}}const Co=new WeakMap,mp=new WeakMap;var at;(function(n){n[n.ExcludeBuffers=1]="ExcludeBuffers",n[n.IncludeAnonymous=2]="IncludeAnonymous",n[n.IgnoreMounts=4]="IgnoreMounts",n[n.IgnoreOverlays=8]="IgnoreOverlays"})(at||(at={}));class rt{constructor(e,t,i,s,r){if(this.type=e,this.children=t,this.positions=i,this.length=s,this.props=null,r&&r.length){this.props=Object.create(null);for(let[o,a]of r)this.props[typeof o=="number"?o:o.id]=a}}toString(){let e=Ra.get(this);if(e&&!e.overlay)return e.tree.toString();let t="";for(let i of this.children){let s=i.toString();s&&(t&&(t+=","),t+=s)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(t.length?"("+t+")":""):t}cursor(e=0){return new Zc(this.topNode,e)}cursorAt(e,t=0,i=0){let s=Co.get(this)||this.topNode,r=new Zc(s);return r.moveTo(e,t),Co.set(this,r._tree),r}get topNode(){return new Tt(this,0,0,null)}resolve(e,t=0){let i=Vr(Co.get(this)||this.topNode,e,t,!1);return Co.set(this,i),i}resolveInner(e,t=0){let i=Vr(mp.get(this)||this.topNode,e,t,!0);return mp.set(this,i),i}resolveStack(e,t=0){return WZ(this,e,t)}iterate(e){let{enter:t,leave:i,from:s=0,to:r=this.length}=e,o=e.mode||0,a=(o&at.IncludeAnonymous)>0;for(let l=this.cursor(o|at.IncludeAnonymous);;){let u=!1;if(l.from<=r&&l.to>=s&&(!a&&l.type.isAnonymous||t(l)!==!1)){if(l.firstChild())continue;u=!0}for(;u&&i&&(a||!l.type.isAnonymous)&&i(l),!l.nextSibling();){if(!l.parent())return;u=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let t in this.props)e.push([+t,this.props[t]]);return e}balance(e={}){return this.children.length<=8?this:Ch(At.none,this.children,this.positions,0,this.children.length,0,this.length,(t,i,s)=>new rt(this.type,t,i,s,this.propValues),e.makeTree||((t,i,s)=>new rt(At.none,t,i,s)))}static build(e){return qZ(e)}}rt.empty=new rt(At.none,[],[],0);class Th{constructor(e,t){this.buffer=e,this.index=t}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new Th(this.buffer,this.index)}}class gi{constructor(e,t,i){this.buffer=e,this.length=t,this.set=i}get type(){return At.none}toString(){let e=[];for(let t=0;t<this.buffer.length;)e.push(this.childString(t)),t=this.buffer[t+3];return e.join(",")}childString(e){let t=this.buffer[e],i=this.buffer[e+3],s=this.set.types[t],r=s.name;if(/\W/.test(r)&&!s.isError&&(r=JSON.stringify(r)),e+=4,i==e)return r;let o=[];for(;e<i;)o.push(this.childString(e)),e=this.buffer[e+3];return r+"("+o.join(",")+")"}findChild(e,t,i,s,r){let{buffer:o}=this,a=-1;for(let l=e;l!=t&&!(I0(r,s,o[l+1],o[l+2])&&(a=l,i>0));l=o[l+3]);return a}slice(e,t,i){let s=this.buffer,r=new Uint16Array(t-e),o=0;for(let a=e,l=0;a<t;){r[l++]=s[a++],r[l++]=s[a++]-i;let u=r[l++]=s[a++]-i;r[l++]=s[a++]-e,o=Math.max(o,u)}return new gi(r,o,this.set)}}function I0(n,e,t,i){switch(n){case-2:return t<e;case-1:return i>=e&&t<e;case 0:return t<e&&i>e;case 1:return t<=e&&i>e;case 2:return i>e;case 4:return!0}}function Vr(n,e,t,i){for(var s;n.from==n.to||(t<1?n.from>=e:n.from>e)||(t>-1?n.to<=e:n.to<e);){let o=!i&&n instanceof Tt&&n.index<0?null:n.parent;if(!o)return n;n=o}let r=i?0:at.IgnoreOverlays;if(i)for(let o=n,a=o.parent;a;o=a,a=o.parent)o instanceof Tt&&o.index<0&&((s=a.enter(e,t,r))===null||s===void 0?void 0:s.from)!=o.from&&(n=a);for(;;){let o=n.enter(e,t,r);if(!o)return n;n=o}}class L0{cursor(e=0){return new Zc(this,e)}getChild(e,t=null,i=null){let s=gp(this,e,t,i);return s.length?s[0]:null}getChildren(e,t=null,i=null){return gp(this,e,t,i)}resolve(e,t=0){return Vr(this,e,t,!1)}resolveInner(e,t=0){return Vr(this,e,t,!0)}matchContext(e){return Rc(this.parent,e)}enterUnfinishedNodesBefore(e){let t=this.childBefore(e),i=this;for(;t;){let s=t.lastChild;if(!s||s.to!=t.to)break;s.type.isError&&s.from==s.to?(i=t,t=s.prevSibling):t=s}return i}get node(){return this}get next(){return this.parent}}class Tt extends L0{constructor(e,t,i,s){super(),this._tree=e,this.from=t,this.index=i,this._parent=s}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,t,i,s,r=0){for(let o=this;;){for(let{children:a,positions:l}=o._tree,u=t>0?a.length:-1;e!=u;e+=t){let c=a[e],h=l[e]+o.from;if(I0(s,i,h,h+c.length)){if(c instanceof gi){if(r&at.ExcludeBuffers)continue;let d=c.findChild(0,c.buffer.length,t,i-h,s);if(d>-1)return new gn(new UZ(o,c,e,h),null,d)}else if(r&at.IncludeAnonymous||!c.type.isAnonymous||Ah(c)){let d;if(!(r&at.IgnoreMounts)&&(d=Ra.get(c))&&!d.overlay)return new Tt(d.tree,h,e,o);let f=new Tt(c,h,e,o);return r&at.IncludeAnonymous||!f.type.isAnonymous?f:f.nextChild(t<0?c.children.length-1:0,t,i,s)}}}if(r&at.IncludeAnonymous||!o.type.isAnonymous||(o.index>=0?e=o.index+t:e=t<0?-1:o._parent._tree.children.length,o=o._parent,!o))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}enter(e,t,i=0){let s;if(!(i&at.IgnoreOverlays)&&(s=Ra.get(this._tree))&&s.overlay){let r=e-this.from;for(let{from:o,to:a}of s.overlay)if((t>0?o<=r:o<r)&&(t<0?a>=r:a>r))return new Tt(s.tree,s.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,t,i)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}get tree(){return this._tree}toTree(){return this._tree}toString(){return this._tree.toString()}}function gp(n,e,t,i){let s=n.cursor(),r=[];if(!s.firstChild())return r;if(t!=null){for(let o=!1;!o;)if(o=s.type.is(t),!s.nextSibling())return r}for(;;){if(i!=null&&s.type.is(i))return r;if(s.type.is(e)&&r.push(s.node),!s.nextSibling())return i==null?r:[]}}function Rc(n,e,t=e.length-1){for(let i=n;t>=0;i=i.parent){if(!i)return!1;if(!i.type.isAnonymous){if(e[t]&&e[t]!=i.name)return!1;t--}}return!0}class UZ{constructor(e,t,i,s){this.parent=e,this.buffer=t,this.index=i,this.start=s}}class gn extends L0{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(e,t,i){super(),this.context=e,this._parent=t,this.index=i,this.type=e.buffer.set.types[e.buffer.buffer[i]]}child(e,t,i){let{buffer:s}=this.context,r=s.findChild(this.index+4,s.buffer[this.index+3],e,t-this.context.start,i);return r<0?null:new gn(this.context,this,r)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}enter(e,t,i=0){if(i&at.ExcludeBuffers)return null;let{buffer:s}=this.context,r=s.findChild(this.index+4,s.buffer[this.index+3],t>0?1:-1,e-this.context.start,t);return r<0?null:new gn(this.context,this,r)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,t=e.buffer[this.index+3];return t<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new gn(this.context,this._parent,t):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,t=this._parent?this._parent.index+4:0;return this.index==t?this.externalSibling(-1):new gn(this.context,this._parent,e.findChild(t,this.index,-1,0,4))}get tree(){return null}toTree(){let e=[],t=[],{buffer:i}=this.context,s=this.index+4,r=i.buffer[this.index+3];if(r>s){let o=i.buffer[this.index+1];e.push(i.slice(s,r,o)),t.push(0)}return new rt(this.type,e,t,this.to-this.from)}toString(){return this.context.buffer.childString(this.index)}}function z0(n){if(!n.length)return null;let e=0,t=n[0];for(let r=1;r<n.length;r++){let o=n[r];(o.from>t.from||o.to<t.to)&&(t=o,e=r)}let i=t instanceof Tt&&t.index<0?null:t.parent,s=n.slice();return i?s[e]=i:s.splice(e,1),new jZ(s,t)}class jZ{constructor(e,t){this.heads=e,this.node=t}get next(){return z0(this.heads)}}function WZ(n,e,t){let i=n.resolveInner(e,t),s=null;for(let r=i instanceof Tt?i:i.context.parent;r;r=r.parent)if(r.index<0){let o=r.parent;(s||(s=[i])).push(o.resolve(e,t)),r=o}else{let o=Ra.get(r.tree);if(o&&o.overlay&&o.overlay[0].from<=e&&o.overlay[o.overlay.length-1].to>=e){let a=new Tt(o.tree,o.overlay[0].from+r.from,-1,r);(s||(s=[i])).push(Vr(a,e,t,!1))}}return s?z0(s):i}class Zc{get name(){return this.type.name}constructor(e,t=0){if(this.mode=t,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof Tt)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let i=e._parent;i;i=i._parent)this.stack.unshift(i.index);this.bufferNode=e,this.yieldBuf(e.index)}}yieldNode(e){return e?(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0):!1}yieldBuf(e,t){this.index=e;let{start:i,buffer:s}=this.buffer;return this.type=t||s.set.types[s.buffer[e]],this.from=i+s.buffer[e+1],this.to=i+s.buffer[e+2],!0}yield(e){return e?e instanceof Tt?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,t,i){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,t,i,this.mode));let{buffer:s}=this.buffer,r=s.findChild(this.index+4,s.buffer[this.index+3],e,t-this.buffer.start,i);return r<0?!1:(this.stack.push(this.index),this.yieldBuf(r))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,t,i=this.mode){return this.buffer?i&at.ExcludeBuffers?!1:this.enterChild(1,e,t):this.yield(this._tree.enter(e,t,i))}parent(){if(!this.buffer)return this.yieldNode(this.mode&at.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&at.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode)):!1;let{buffer:t}=this.buffer,i=this.stack.length-1;if(e<0){let s=i<0?0:this.stack[i]+4;if(this.index!=s)return this.yieldBuf(t.findChild(s,this.index,-1,0,4))}else{let s=t.buffer[this.index+3];if(s<(i<0?t.buffer.length:t.buffer[this.stack[i]+3]))return this.yieldBuf(s)}return i<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let t,i,{buffer:s}=this;if(s){if(e>0){if(this.index<s.buffer.buffer.length)return!1}else for(let r=0;r<this.index;r++)if(s.buffer.buffer[r+3]<this.index)return!1;({index:t,parent:i}=s)}else({index:t,_parent:i}=this._tree);for(;i;{index:t,_parent:i}=i)if(t>-1)for(let r=t+e,o=e<0?-1:i._tree.children.length;r!=o;r+=e){let a=i._tree.children[r];if(this.mode&at.IncludeAnonymous||a instanceof gi||!a.type.isAnonymous||Ah(a))return!1}return!0}move(e,t){if(t&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,t=0){for(;(this.from==this.to||(t<1?this.from>=e:this.from>e)||(t>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,t););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,t=null,i=0;if(e&&e.context==this.buffer)e:for(let s=this.index,r=this.stack.length;r>=0;){for(let o=e;o;o=o._parent)if(o.index==s){if(s==this.index)return o;t=o,i=r+1;break e}s=this.stack[--r]}for(let s=i;s<this.stack.length;s++)t=new gn(this.buffer,t,this.stack[s]);return this.bufferNode=new gn(this.buffer,t,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,t){for(let i=0;;){let s=!1;if(this.type.isAnonymous||e(this)!==!1){if(this.firstChild()){i++;continue}this.type.isAnonymous||(s=!0)}for(;;){if(s&&t&&t(this),s=this.type.isAnonymous,!i)return;if(this.nextSibling())break;this.parent(),i--,s=!0}}}matchContext(e){if(!this.buffer)return Rc(this.node.parent,e);let{buffer:t}=this.buffer,{types:i}=t.set;for(let s=e.length-1,r=this.stack.length-1;s>=0;r--){if(r<0)return Rc(this._tree,e,s);let o=i[t.buffer[this.stack[r]]];if(!o.isAnonymous){if(e[s]&&e[s]!=o.name)return!1;s--}}return!0}}function Ah(n){return n.children.some(e=>e instanceof gi||!e.type.isAnonymous||Ah(e))}function qZ(n){var e;let{buffer:t,nodeSet:i,maxBufferLength:s=N0,reused:r=[],minRepeatType:o=i.types.length}=n,a=Array.isArray(t)?new Th(t,t.length):t,l=i.types,u=0,c=0;function h(k,S,Q,T,P,B){let{id:W,start:C,end:j,size:w}=a,R=c,_=u;for(;w<0;)if(a.next(),w==-1){let Y=r[W];Q.push(Y),T.push(C-k);return}else if(w==-3){u=W;return}else if(w==-4){c=W;return}else throw new RangeError(`Unrecognized record size: ${w}`);let D=l[W],N,U,V=C-k;if(j-C<=s&&(U=O(a.pos-S,P))){let Y=new Uint16Array(U.size-U.skip),E=a.pos-U.size,X=Y.length;for(;a.pos>E;)X=y(U.start,Y,X);N=new gi(Y,j-U.start,i),V=U.start-k}else{let Y=a.pos-w;a.next();let E=[],X=[],H=W>=o?W:-1,J=0,me=j;for(;a.pos>Y;)H>=0&&a.id==H&&a.size>=0?(a.end<=me-s&&(p(E,X,C,J,a.end,me,H,R,_),J=E.length,me=a.end),a.next()):B>2500?d(C,Y,E,X):h(C,Y,E,X,H,B+1);if(H>=0&&J>0&&J<E.length&&p(E,X,C,J,C,me,H,R,_),E.reverse(),X.reverse(),H>-1&&J>0){let oe=f(D,_);N=Ch(D,E,X,0,E.length,0,j-C,oe,oe)}else N=m(D,E,X,j-C,R-j,_)}Q.push(N),T.push(V)}function d(k,S,Q,T){let P=[],B=0,W=-1;for(;a.pos>S;){let{id:C,start:j,end:w,size:R}=a;if(R>4)a.next();else{if(W>-1&&j<W)break;W<0&&(W=w-s),P.push(C,j,w),B++,a.next()}}if(B){let C=new Uint16Array(B*4),j=P[P.length-2];for(let w=P.length-3,R=0;w>=0;w-=3)C[R++]=P[w],C[R++]=P[w+1]-j,C[R++]=P[w+2]-j,C[R++]=R;Q.push(new gi(C,P[2]-j,i)),T.push(j-k)}}function f(k,S){return(Q,T,P)=>{let B=0,W=Q.length-1,C,j;if(W>=0&&(C=Q[W])instanceof rt){if(!W&&C.type==k&&C.length==P)return C;(j=C.prop(Pe.lookAhead))&&(B=T[W]+C.length+j)}return m(k,Q,T,P,B,S)}}function p(k,S,Q,T,P,B,W,C,j){let w=[],R=[];for(;k.length>T;)w.push(k.pop()),R.push(S.pop()+Q-P);k.push(m(i.types[W],w,R,B-P,C-B,j)),S.push(P-Q)}function m(k,S,Q,T,P,B,W){if(B){let C=[Pe.contextHash,B];W=W?[C].concat(W):[C]}if(P>25){let C=[Pe.lookAhead,P];W=W?[C].concat(W):[C]}return new rt(k,S,Q,T,W)}function O(k,S){let Q=a.fork(),T=0,P=0,B=0,W=Q.end-s,C={size:0,start:0,skip:0};e:for(let j=Q.pos-k;Q.pos>j;){let w=Q.size;if(Q.id==S&&w>=0){C.size=T,C.start=P,C.skip=B,B+=4,T+=4,Q.next();continue}let R=Q.pos-w;if(w<0||R<j||Q.start<W)break;let _=Q.id>=o?4:0,D=Q.start;for(Q.next();Q.pos>R;){if(Q.size<0)if(Q.size==-3)_+=4;else break e;else Q.id>=o&&(_+=4);Q.next()}P=D,T+=w,B+=_}return(S<0||T==k)&&(C.size=T,C.start=P,C.skip=B),C.size>4?C:void 0}function y(k,S,Q){let{id:T,start:P,end:B,size:W}=a;if(a.next(),W>=0&&T<o){let C=Q;if(W>4){let j=a.pos-(W-4);for(;a.pos>j;)Q=y(k,S,Q)}S[--Q]=C,S[--Q]=B-k,S[--Q]=P-k,S[--Q]=T}else W==-3?u=T:W==-4&&(c=T);return Q}let b=[],v=[];for(;a.pos>0;)h(n.start||0,n.bufferStart||0,b,v,-1,0);let g=(e=n.length)!==null&&e!==void 0?e:b.length?v[0]+b[0].length:0;return new rt(l[n.topID],b.reverse(),v.reverse(),g)}const Op=new WeakMap;function ta(n,e){if(!n.isAnonymous||e instanceof gi||e.type!=n)return 1;let t=Op.get(e);if(t==null){t=1;for(let i of e.children){if(i.type!=n||!(i instanceof rt)){t=1;break}t+=ta(n,i)}Op.set(e,t)}return t}function Ch(n,e,t,i,s,r,o,a,l){let u=0;for(let p=i;p<s;p++)u+=ta(n,e[p]);let c=Math.ceil(u*1.5/8),h=[],d=[];function f(p,m,O,y,b){for(let v=O;v<y;){let g=v,k=m[v],S=ta(n,p[v]);for(v++;v<y;v++){let Q=ta(n,p[v]);if(S+Q>=c)break;S+=Q}if(v==g+1){if(S>c){let Q=p[g];f(Q.children,Q.positions,0,Q.children.length,m[g]+b);continue}h.push(p[g])}else{let Q=m[v-1]+p[v-1].length-k;h.push(Ch(n,p,m,g,v,k,Q,null,l))}d.push(k+b-r)}}return f(e,t,i,s,0),(a||l)(h,d,o)}class YZ{constructor(){this.map=new WeakMap}setBuffer(e,t,i){let s=this.map.get(e);s||this.map.set(e,s=new Map),s.set(t,i)}getBuffer(e,t){let i=this.map.get(e);return i&&i.get(t)}set(e,t){e instanceof gn?this.setBuffer(e.context.buffer,e.index,t):e instanceof Tt&&this.map.set(e.tree,t)}get(e){return e instanceof gn?this.getBuffer(e.context.buffer,e.index):e instanceof Tt?this.map.get(e.tree):void 0}cursorSet(e,t){e.buffer?this.setBuffer(e.buffer.buffer,e.index,t):this.map.set(e.tree,t)}cursorGet(e){return e.buffer?this.getBuffer(e.buffer.buffer,e.index):this.map.get(e.tree)}}class Vi{constructor(e,t,i,s,r=!1,o=!1){this.from=e,this.to=t,this.tree=i,this.offset=s,this.open=(r?1:0)|(o?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(e,t=[],i=!1){let s=[new Vi(0,e.length,e,0,!1,i)];for(let r of t)r.to>e.length&&s.push(r);return s}static applyChanges(e,t,i=128){if(!t.length)return e;let s=[],r=1,o=e.length?e[0]:null;for(let a=0,l=0,u=0;;a++){let c=a<t.length?t[a]:null,h=c?c.fromA:1e9;if(h-l>=i)for(;o&&o.from<h;){let d=o;if(l>=d.from||h<=d.to||u){let f=Math.max(d.from,l)-u,p=Math.min(d.to,h)-u;d=f>=p?null:new Vi(f,p,d.tree,d.offset+u,a>0,!!c)}if(d&&s.push(d),o.to>h)break;o=r<e.length?e[r++]:null}if(!c)break;l=c.toA,u=c.toA-c.toB}return s}}class V0{startParse(e,t,i){return typeof e=="string"&&(e=new GZ(e)),i=i?i.length?i.map(s=>new ou(s.from,s.to)):[new ou(0,0)]:[new ou(0,e.length)],this.createParse(e,t||[],i)}parse(e,t,i){let s=this.startParse(e,t,i);for(;;){let r=s.advance();if(r)return r}}}class GZ{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,t){return this.string.slice(e,t)}}new Pe({perNode:!0});let HZ=0;class Bt{constructor(e,t,i,s){this.name=e,this.set=t,this.base=i,this.modified=s,this.id=HZ++}toString(){let{name:e}=this;for(let t of this.modified)t.name&&(e=`${t.name}(${e})`);return e}static define(e,t){let i=typeof e=="string"?e:"?";if(e instanceof Bt&&(t=e),t!=null&&t.base)throw new Error("Can not derive from a modified tag");let s=new Bt(i,[],null,[]);if(s.set.push(s),t)for(let r of t.set)s.set.push(r);return s}static defineModifier(e){let t=new Za(e);return i=>i.modified.indexOf(t)>-1?i:Za.get(i.base||i,i.modified.concat(t).sort((s,r)=>s.id-r.id))}}let FZ=0;class Za{constructor(e){this.name=e,this.instances=[],this.id=FZ++}static get(e,t){if(!t.length)return e;let i=t[0].instances.find(a=>a.base==e&&KZ(t,a.modified));if(i)return i;let s=[],r=new Bt(e.name,s,e,t);for(let a of t)a.instances.push(r);let o=JZ(t);for(let a of e.set)if(!a.modified.length)for(let l of o)s.push(Za.get(a,l));return r}}function KZ(n,e){return n.length==e.length&&n.every((t,i)=>t==e[i])}function JZ(n){let e=[[]];for(let t=0;t<n.length;t++)for(let i=0,s=e.length;i<s;i++)e.push(e[i].concat(n[t]));return e.sort((t,i)=>i.length-t.length)}function X0(n){let e=Object.create(null);for(let t in n){let i=n[t];Array.isArray(i)||(i=[i]);for(let s of t.split(" "))if(s){let r=[],o=2,a=s;for(let h=0;;){if(a=="..."&&h>0&&h+3==s.length){o=1;break}let d=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(a);if(!d)throw new RangeError("Invalid path: "+s);if(r.push(d[0]=="*"?"":d[0][0]=='"'?JSON.parse(d[0]):d[0]),h+=d[0].length,h==s.length)break;let f=s[h++];if(h==s.length&&f=="!"){o=0;break}if(f!="/")throw new RangeError("Invalid path: "+s);a=s.slice(h)}let l=r.length-1,u=r[l];if(!u)throw new RangeError("Invalid path: "+s);let c=new Da(i,o,l>0?r.slice(0,l):null);e[u]=c.sort(e[u])}}return B0.add(e)}const B0=new Pe;class Da{constructor(e,t,i,s){this.tags=e,this.mode=t,this.context=i,this.next=s}get opaque(){return this.mode==0}get inherit(){return this.mode==1}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}}Da.empty=new Da([],2,null);function U0(n,e){let t=Object.create(null);for(let r of n)if(!Array.isArray(r.tag))t[r.tag.id]=r.class;else for(let o of r.tag)t[o.id]=r.class;let{scope:i,all:s=null}=e||{};return{style:r=>{let o=s;for(let a of r)for(let l of a.set){let u=t[l.id];if(u){o=o?o+" "+u:u;break}}return o},scope:i}}function e5(n,e){let t=null;for(let i of n){let s=i.style(e);s&&(t=t?t+" "+s:s)}return t}function t5(n,e,t,i=0,s=n.length){let r=new n5(i,Array.isArray(e)?e:[e],t);r.highlightRange(n.cursor(),i,s,"",r.highlighters),r.flush(s)}class n5{constructor(e,t,i){this.at=e,this.highlighters=t,this.span=i,this.class=""}startSpan(e,t){t!=this.class&&(this.flush(e),e>this.at&&(this.at=e),this.class=t)}flush(e){e>this.at&&this.class&&this.span(this.at,e,this.class)}highlightRange(e,t,i,s,r){let{type:o,from:a,to:l}=e;if(a>=i||l<=t)return;o.isTop&&(r=this.highlighters.filter(f=>!f.scope||f.scope(o)));let u=s,c=i5(e)||Da.empty,h=e5(r,c.tags);if(h&&(u&&(u+=" "),u+=h,c.mode==1&&(s+=(s?" ":"")+h)),this.startSpan(Math.max(t,a),u),c.opaque)return;let d=e.tree&&e.tree.prop(Pe.mounted);if(d&&d.overlay){let f=e.node.enter(d.overlay[0].from+a,1),p=this.highlighters.filter(O=>!O.scope||O.scope(d.tree.type)),m=e.firstChild();for(let O=0,y=a;;O++){let b=O<d.overlay.length?d.overlay[O]:null,v=b?b.from+a:l,g=Math.max(t,y),k=Math.min(i,v);if(g<k&&m)for(;e.from<k&&(this.highlightRange(e,g,k,s,r),this.startSpan(Math.min(k,e.to),u),!(e.to>=v||!e.nextSibling())););if(!b||v>i)break;y=b.to+a,y>t&&(this.highlightRange(f.cursor(),Math.max(t,b.from+a),Math.min(i,y),"",p),this.startSpan(Math.min(i,y),u))}m&&e.parent()}else if(e.firstChild()){d&&(s="");do if(!(e.to<=t)){if(e.from>=i)break;this.highlightRange(e,t,i,s,r),this.startSpan(Math.min(i,e.to),u)}while(e.nextSibling());e.parent()}}}function i5(n){let e=n.type.prop(B0);for(;e&&e.context&&!n.matchContext(e.context);)e=e.next;return e||null}const ne=Bt.define,Eo=ne(),ei=ne(),yp=ne(ei),vp=ne(ei),ti=ne(),Mo=ne(ti),au=ne(ti),hn=ne(),bi=ne(hn),un=ne(),cn=ne(),Dc=ne(),Ws=ne(Dc),Ro=ne(),I={comment:Eo,lineComment:ne(Eo),blockComment:ne(Eo),docComment:ne(Eo),name:ei,variableName:ne(ei),typeName:yp,tagName:ne(yp),propertyName:vp,attributeName:ne(vp),className:ne(ei),labelName:ne(ei),namespace:ne(ei),macroName:ne(ei),literal:ti,string:Mo,docString:ne(Mo),character:ne(Mo),attributeValue:ne(Mo),number:au,integer:ne(au),float:ne(au),bool:ne(ti),regexp:ne(ti),escape:ne(ti),color:ne(ti),url:ne(ti),keyword:un,self:ne(un),null:ne(un),atom:ne(un),unit:ne(un),modifier:ne(un),operatorKeyword:ne(un),controlKeyword:ne(un),definitionKeyword:ne(un),moduleKeyword:ne(un),operator:cn,derefOperator:ne(cn),arithmeticOperator:ne(cn),logicOperator:ne(cn),bitwiseOperator:ne(cn),compareOperator:ne(cn),updateOperator:ne(cn),definitionOperator:ne(cn),typeOperator:ne(cn),controlOperator:ne(cn),punctuation:Dc,separator:ne(Dc),bracket:Ws,angleBracket:ne(Ws),squareBracket:ne(Ws),paren:ne(Ws),brace:ne(Ws),content:hn,heading:bi,heading1:ne(bi),heading2:ne(bi),heading3:ne(bi),heading4:ne(bi),heading5:ne(bi),heading6:ne(bi),contentSeparator:ne(hn),list:ne(hn),quote:ne(hn),emphasis:ne(hn),strong:ne(hn),link:ne(hn),monospace:ne(hn),strikethrough:ne(hn),inserted:ne(),deleted:ne(),changed:ne(),invalid:ne(),meta:Ro,documentMeta:ne(Ro),annotation:ne(Ro),processingInstruction:ne(Ro),definition:Bt.defineModifier("definition"),constant:Bt.defineModifier("constant"),function:Bt.defineModifier("function"),standard:Bt.defineModifier("standard"),local:Bt.defineModifier("local"),special:Bt.defineModifier("special")};for(let n in I){let e=I[n];e instanceof Bt&&(e.name=n)}U0([{tag:I.link,class:"tok-link"},{tag:I.heading,class:"tok-heading"},{tag:I.emphasis,class:"tok-emphasis"},{tag:I.strong,class:"tok-strong"},{tag:I.keyword,class:"tok-keyword"},{tag:I.atom,class:"tok-atom"},{tag:I.bool,class:"tok-bool"},{tag:I.url,class:"tok-url"},{tag:I.labelName,class:"tok-labelName"},{tag:I.inserted,class:"tok-inserted"},{tag:I.deleted,class:"tok-deleted"},{tag:I.literal,class:"tok-literal"},{tag:I.string,class:"tok-string"},{tag:I.number,class:"tok-number"},{tag:[I.regexp,I.escape,I.special(I.string)],class:"tok-string2"},{tag:I.variableName,class:"tok-variableName"},{tag:I.local(I.variableName),class:"tok-variableName tok-local"},{tag:I.definition(I.variableName),class:"tok-variableName tok-definition"},{tag:I.special(I.variableName),class:"tok-variableName2"},{tag:I.definition(I.propertyName),class:"tok-propertyName tok-definition"},{tag:I.typeName,class:"tok-typeName"},{tag:I.namespace,class:"tok-namespace"},{tag:I.className,class:"tok-className"},{tag:I.macroName,class:"tok-macroName"},{tag:I.propertyName,class:"tok-propertyName"},{tag:I.operator,class:"tok-operator"},{tag:I.comment,class:"tok-comment"},{tag:I.meta,class:"tok-meta"},{tag:I.invalid,class:"tok-invalid"},{tag:I.punctuation,class:"tok-punctuation"}]);var lu;const as=new Pe;function j0(n){return ge.define({combine:n?e=>e.concat(n):void 0})}const Eh=new Pe;class Kt{constructor(e,t,i=[],s=""){this.data=e,this.name=s,Ne.prototype.hasOwnProperty("tree")||Object.defineProperty(Ne.prototype,"tree",{get(){return It(this)}}),this.parser=t,this.extension=[Rs.of(this),Ne.languageData.of((r,o,a)=>{let l=wp(r,o,a),u=l.type.prop(as);if(!u)return[];let c=r.facet(u),h=l.type.prop(Eh);if(h){let d=l.resolve(o-l.from,a);for(let f of h)if(f.test(d,r)){let p=r.facet(f.facet);return f.type=="replace"?p:p.concat(c)}}return c})].concat(i)}isActiveAt(e,t,i=-1){return wp(e,t,i).type.prop(as)==this.data}findRegions(e){let t=e.facet(Rs);if((t==null?void 0:t.data)==this.data)return[{from:0,to:e.doc.length}];if(!t||!t.allowsNesting)return[];let i=[],s=(r,o)=>{if(r.prop(as)==this.data){i.push({from:o,to:o+r.length});return}let a=r.prop(Pe.mounted);if(a){if(a.tree.prop(as)==this.data){if(a.overlay)for(let l of a.overlay)i.push({from:l.from+o,to:l.to+o});else i.push({from:o,to:o+r.length});return}else if(a.overlay){let l=i.length;if(s(a.tree,a.overlay[0].from+o),i.length>l)return}}for(let l=0;l<r.children.length;l++){let u=r.children[l];u instanceof rt&&s(u,r.positions[l]+o)}};return s(It(e),0),i}get allowsNesting(){return!0}}Kt.setState=Fe.define();function wp(n,e,t){let i=n.facet(Rs),s=It(n).topNode;if(!i||i.allowsNesting)for(let r=s;r;r=r.enter(e,t,at.ExcludeBuffers))r.type.isTop&&(s=r);return s}class Na extends Kt{constructor(e,t,i){super(e,t,[],i),this.parser=t}static define(e){let t=j0(e.languageData);return new Na(t,e.parser.configure({props:[as.add(i=>i.isTop?t:void 0)]}),e.name)}configure(e,t){return new Na(this.data,this.parser.configure(e),t||this.name)}get allowsNesting(){return this.parser.hasWrappers()}}function It(n){let e=n.field(Kt.state,!1);return e?e.tree:rt.empty}class s5{constructor(e){this.doc=e,this.cursorPos=0,this.string="",this.cursor=e.iter()}get length(){return this.doc.length}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,t){let i=this.cursorPos-this.string.length;return e<i||t>=this.cursorPos?this.doc.sliceString(e,t):this.string.slice(e-i,t-i)}}let qs=null;class Ia{constructor(e,t,i=[],s,r,o,a,l){this.parser=e,this.state=t,this.fragments=i,this.tree=s,this.treeLen=r,this.viewport=o,this.skipped=a,this.scheduleOn=l,this.parse=null,this.tempSkipped=[]}static create(e,t,i){return new Ia(e,t,[],rt.empty,0,i,[],null)}startParse(){return this.parser.startParse(new s5(this.state.doc),this.fragments)}work(e,t){return t!=null&&t>=this.state.doc.length&&(t=void 0),this.tree!=rt.empty&&this.isDone(t??this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var i;if(typeof e=="number"){let s=Date.now()+e;e=()=>Date.now()>s}for(this.parse||(this.parse=this.startParse()),t!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>t)&&t<this.state.doc.length&&this.parse.stopAt(t);;){let s=this.parse.advance();if(s)if(this.fragments=this.withoutTempSkipped(Vi.addTree(s,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(i=this.parse.stoppedAt)!==null&&i!==void 0?i:this.state.doc.length,this.tree=s,this.parse=null,this.treeLen<(t??this.state.doc.length))this.parse=this.startParse();else return!0;if(e())return!1}})}takeTree(){let e,t;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext(()=>{for(;!(t=this.parse.advance()););}),this.treeLen=e,this.tree=t,this.fragments=this.withoutTempSkipped(Vi.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let t=qs;qs=this;try{return e()}finally{qs=t}}withoutTempSkipped(e){for(let t;t=this.tempSkipped.pop();)e=bp(e,t.from,t.to);return e}changes(e,t){let{fragments:i,tree:s,treeLen:r,viewport:o,skipped:a}=this;if(this.takeTree(),!e.empty){let l=[];if(e.iterChangedRanges((u,c,h,d)=>l.push({fromA:u,toA:c,fromB:h,toB:d})),i=Vi.applyChanges(i,l),s=rt.empty,r=0,o={from:e.mapPos(o.from,-1),to:e.mapPos(o.to,1)},this.skipped.length){a=[];for(let u of this.skipped){let c=e.mapPos(u.from,1),h=e.mapPos(u.to,-1);c<h&&a.push({from:c,to:h})}}}return new Ia(this.parser,t,i,s,r,o,a,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let t=this.skipped.length;for(let i=0;i<this.skipped.length;i++){let{from:s,to:r}=this.skipped[i];s<e.to&&r>e.from&&(this.fragments=bp(this.fragments,s,r),this.skipped.splice(i--,1))}return this.skipped.length>=t?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,t){this.skipped.push({from:e,to:t})}static getSkippingParser(e){return new class extends V0{createParse(t,i,s){let r=s[0].from,o=s[s.length-1].to;return{parsedPos:r,advance(){let l=qs;if(l){for(let u of s)l.tempSkipped.push(u);e&&(l.scheduleOn=l.scheduleOn?Promise.all([l.scheduleOn,e]):e)}return this.parsedPos=o,new rt(At.none,[],[],o-r)},stoppedAt:null,stopAt(){}}}}}isDone(e){e=Math.min(e,this.state.doc.length);let t=this.fragments;return this.treeLen>=e&&t.length&&t[0].from==0&&t[0].to>=e}static get(){return qs}}function bp(n,e,t){return Vi.applyChanges(n,[{fromA:e,toA:t,fromB:e,toB:t}])}class Ms{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let t=this.context.changes(e.changes,e.state),i=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),t.viewport.to);return t.work(20,i)||t.takeTree(),new Ms(t)}static init(e){let t=Math.min(3e3,e.doc.length),i=Ia.create(e.facet(Rs).parser,e,{from:0,to:t});return i.work(20,t)||i.takeTree(),new Ms(i)}}Kt.state=yi.define({create:Ms.init,update(n,e){for(let t of e.effects)if(t.is(Kt.setState))return t.value;return e.startState.facet(Rs)!=e.state.facet(Rs)?Ms.init(e.state):n.apply(e)}});let W0=n=>{let e=setTimeout(()=>n(),500);return()=>clearTimeout(e)};typeof requestIdleCallback<"u"&&(W0=n=>{let e=-1,t=setTimeout(()=>{e=requestIdleCallback(n,{timeout:400})},100);return()=>e<0?clearTimeout(t):cancelIdleCallback(e)});const uu=typeof navigator<"u"&&(!((lu=navigator.scheduling)===null||lu===void 0)&&lu.isInputPending)?()=>navigator.scheduling.isInputPending():null,r5=mi.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let t=this.view.state.field(Kt.state).context;(t.updateViewport(e.view.viewport)||this.view.viewport.to>t.treeLen)&&this.scheduleWork(),(e.docChanged||e.selectionSet)&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(t)}scheduleWork(){if(this.working)return;let{state:e}=this.view,t=e.field(Kt.state);(t.tree!=t.context.tree||!t.context.isDone(e.doc.length))&&(this.working=W0(this.work))}work(e){this.working=null;let t=Date.now();if(this.chunkEnd<t&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=t+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:i,viewport:{to:s}}=this.view,r=i.field(Kt.state);if(r.tree==r.context.tree&&r.context.isDone(s+1e5))return;let o=Date.now()+Math.min(this.chunkBudget,100,e&&!uu?Math.max(25,e.timeRemaining()-5):1e9),a=r.context.treeLen<s&&i.doc.length>s+1e3,l=r.context.work(()=>uu&&uu()||Date.now()>o,s+(a?0:1e5));this.chunkBudget-=Date.now()-t,(l||this.chunkBudget<=0)&&(r.context.takeTree(),this.view.dispatch({effects:Kt.setState.of(new Ms(r.context))})),this.chunkBudget>0&&!(l&&!a)&&this.scheduleWork(),this.checkAsyncSchedule(r.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then(()=>this.scheduleWork()).catch(t=>mn(this.view.state,t)).then(()=>this.workScheduled--),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),Rs=ge.define({combine(n){return n.length?n[0]:null},enables:n=>[Kt.state,r5,_e.contentAttributes.compute([n],e=>{let t=e.facet(n);return t&&t.name?{"data-language":t.name}:{}})]});class o5{constructor(e,t=[]){this.language=e,this.support=t,this.extension=[e,t]}}const a5=ge.define(),Ol=ge.define({combine:n=>{if(!n.length)return"  ";let e=n[0];if(!e||/\S/.test(e)||Array.from(e).some(t=>t!=e[0]))throw new Error("Invalid indent unit: "+JSON.stringify(n[0]));return e}});function La(n){let e=n.facet(Ol);return e.charCodeAt(0)==9?n.tabSize*e.length:e.length}function za(n,e){let t="",i=n.tabSize,s=n.facet(Ol)[0];if(s=="	"){for(;e>=i;)t+="	",e-=i;s=" "}for(let r=0;r<e;r++)t+=s;return t}function q0(n,e){n instanceof Ne&&(n=new yl(n));for(let i of n.state.facet(a5)){let s=i(n,e);if(s!==void 0)return s}let t=It(n.state);return t.length>=e?l5(n,t,e):null}class yl{constructor(e,t={}){this.state=e,this.options=t,this.unit=La(e)}lineAt(e,t=1){let i=this.state.doc.lineAt(e),{simulateBreak:s,simulateDoubleBreak:r}=this.options;return s!=null&&s>=i.from&&s<=i.to?r&&s==e?{text:"",from:e}:(t<0?s<e:s<=e)?{text:i.text.slice(s-i.from),from:s}:{text:i.text.slice(0,s-i.from),from:i.from}:i}textAfterPos(e,t=1){if(this.options.simulateDoubleBreak&&e==this.options.simulateBreak)return"";let{text:i,from:s}=this.lineAt(e,t);return i.slice(e-s,Math.min(i.length,e+100-s))}column(e,t=1){let{text:i,from:s}=this.lineAt(e,t),r=this.countColumn(i,e-s),o=this.options.overrideIndentation?this.options.overrideIndentation(s):-1;return o>-1&&(r+=o-this.countColumn(i,i.search(/\S|$/))),r}countColumn(e,t=e.length){return dl(e,this.state.tabSize,t)}lineIndent(e,t=1){let{text:i,from:s}=this.lineAt(e,t),r=this.options.overrideIndentation;if(r){let o=r(s);if(o>-1)return o}return this.countColumn(i,i.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const Y0=new Pe;function l5(n,e,t){let i=e.resolveStack(t),s=e.resolveInner(t,-1).resolve(t,0).enterUnfinishedNodesBefore(t);if(s!=i.node){let r=[];for(let o=s;o&&!(o.from==i.node.from&&o.type==i.node.type);o=o.parent)r.push(o);for(let o=r.length-1;o>=0;o--)i={node:r[o],next:i}}return G0(i,n,t)}function G0(n,e,t){for(let i=n;i;i=i.next){let s=c5(i.node);if(s)return s(Mh.create(e,t,i))}return 0}function u5(n){return n.pos==n.options.simulateBreak&&n.options.simulateDoubleBreak}function c5(n){let e=n.type.prop(Y0);if(e)return e;let t=n.firstChild,i;if(t&&(i=t.type.prop(Pe.closedBy))){let s=n.lastChild,r=s&&i.indexOf(s.name)>-1;return o=>H0(o,!0,1,void 0,r&&!u5(o)?s.from:void 0)}return n.parent==null?h5:null}function h5(){return 0}class Mh extends yl{constructor(e,t,i){super(e.state,e.options),this.base=e,this.pos=t,this.context=i}get node(){return this.context.node}static create(e,t,i){return new Mh(e,t,i)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){return this.baseIndentFor(this.node)}baseIndentFor(e){let t=this.state.doc.lineAt(e.from);for(;;){let i=e.resolve(t.from);for(;i.parent&&i.parent.from==i.from;)i=i.parent;if(d5(i,e))break;t=this.state.doc.lineAt(i.from)}return this.lineIndent(t.from)}continue(){return G0(this.context.next,this.base,this.pos)}}function d5(n,e){for(let t=e;t;t=t.parent)if(n==t)return!0;return!1}function f5(n){let e=n.node,t=e.childAfter(e.from),i=e.lastChild;if(!t)return null;let s=n.options.simulateBreak,r=n.state.doc.lineAt(t.from),o=s==null||s<=r.from?r.to:Math.min(r.to,s);for(let a=t.to;;){let l=e.childAfter(a);if(!l||l==i)return null;if(!l.type.isSkipped){if(l.from>=o)return null;let u=/^ */.exec(r.text.slice(t.to-r.from))[0].length;return{from:t.from,to:t.to+u}}a=l.to}}function p5({closing:n,align:e=!0,units:t=1}){return i=>H0(i,e,t,n)}function H0(n,e,t,i,s){let r=n.textAfter,o=r.match(/^\s*/)[0].length,a=i&&r.slice(o,o+i.length)==i||s==n.pos+o,l=e?f5(n):null;return l?a?n.column(l.from):n.column(l.to):n.baseIndent+(a?0:n.unit*t)}const m5=n=>n.baseIndent;function cu({except:n,units:e=1}={}){return t=>{let i=n&&n.test(t.textAfter);return t.baseIndent+(i?0:e*t.unit)}}const g5=new Pe;function O5(n){let e=n.firstChild,t=n.lastChild;return e&&e.to<t.from?{from:e.to,to:t.type.isError?n.to:t.from}:null}class Hr{constructor(e,t){this.specs=e;let i;function s(a){let l=di.newName();return(i||(i=Object.create(null)))["."+l]=a,l}const r=typeof t.all=="string"?t.all:t.all?s(t.all):void 0,o=t.scope;this.scope=o instanceof Kt?a=>a.prop(as)==o.data:o?a=>a==o:void 0,this.style=U0(e.map(a=>({tag:a.tag,class:a.class||s(Object.assign({},a,{tag:null}))})),{all:r}).style,this.module=i?new di(i):null,this.themeType=t.themeType}static define(e,t){return new Hr(e,t||{})}}const Nc=ge.define(),y5=ge.define({combine(n){return n.length?[n[0]]:null}});function hu(n){let e=n.facet(Nc);return e.length?e:n.facet(y5)}function F0(n,e){let t=[w5],i;return n instanceof Hr&&(n.module&&t.push(_e.styleModule.of(n.module)),i=n.themeType),i?t.push(Nc.computeN([_e.darkTheme],s=>s.facet(_e.darkTheme)==(i=="dark")?[n]:[])):t.push(Nc.of(n)),t}class v5{constructor(e){this.markCache=Object.create(null),this.tree=It(e.state),this.decorations=this.buildDeco(e,hu(e.state)),this.decoratedTo=e.viewport.to}update(e){let t=It(e.state),i=hu(e.state),s=i!=hu(e.startState),{viewport:r}=e.view,o=e.changes.mapPos(this.decoratedTo,1);t.length<r.to&&!s&&t.type==this.tree.type&&o>=r.to?(this.decorations=this.decorations.map(e.changes),this.decoratedTo=o):(t!=this.tree||e.viewportChanged||s)&&(this.tree=t,this.decorations=this.buildDeco(e.view,i),this.decoratedTo=r.to)}buildDeco(e,t){if(!t||!this.tree.length)return tt.none;let i=new Zr;for(let{from:s,to:r}of e.visibleRanges)t5(this.tree,t,(o,a,l)=>{i.add(o,a,this.markCache[l]||(this.markCache[l]=tt.mark({class:l})))},s,r);return i.finish()}}const w5=cl.high(mi.fromClass(v5,{decorations:n=>n.decorations})),b5=Hr.define([{tag:I.meta,color:"#404740"},{tag:I.link,textDecoration:"underline"},{tag:I.heading,textDecoration:"underline",fontWeight:"bold"},{tag:I.emphasis,fontStyle:"italic"},{tag:I.strong,fontWeight:"bold"},{tag:I.strikethrough,textDecoration:"line-through"},{tag:I.keyword,color:"#708"},{tag:[I.atom,I.bool,I.url,I.contentSeparator,I.labelName],color:"#219"},{tag:[I.literal,I.inserted],color:"#164"},{tag:[I.string,I.deleted],color:"#a11"},{tag:[I.regexp,I.escape,I.special(I.string)],color:"#e40"},{tag:I.definition(I.variableName),color:"#00f"},{tag:I.local(I.variableName),color:"#30a"},{tag:[I.typeName,I.namespace],color:"#085"},{tag:I.className,color:"#167"},{tag:[I.special(I.variableName),I.macroName],color:"#256"},{tag:I.definition(I.propertyName),color:"#00c"},{tag:I.comment,color:"#940"},{tag:I.invalid,color:"#f00"}]),x5=1e4,S5="()[]{}",_5=new Pe;function Ic(n,e,t){let i=n.prop(e<0?Pe.openedBy:Pe.closedBy);if(i)return i;if(n.name.length==1){let s=t.indexOf(n.name);if(s>-1&&s%2==(e<0?1:0))return[t[s+e]]}return null}function Lc(n){let e=n.type.prop(_5);return e?e(n.node):n}function ls(n,e,t,i={}){let s=i.maxScanDistance||x5,r=i.brackets||S5,o=It(n),a=o.resolveInner(e,t);for(let l=a;l;l=l.parent){let u=Ic(l.type,t,r);if(u&&l.from<l.to){let c=Lc(l);if(c&&(t>0?e>=c.from&&e<c.to:e>c.from&&e<=c.to))return $5(n,e,t,l,c,u,r)}}return k5(n,e,t,o,a.type,s,r)}function $5(n,e,t,i,s,r,o){let a=i.parent,l={from:s.from,to:s.to},u=0,c=a==null?void 0:a.cursor();if(c&&(t<0?c.childBefore(i.from):c.childAfter(i.to)))do if(t<0?c.to<=i.from:c.from>=i.to){if(u==0&&r.indexOf(c.type.name)>-1&&c.from<c.to){let h=Lc(c);return{start:l,end:h?{from:h.from,to:h.to}:void 0,matched:!0}}else if(Ic(c.type,t,o))u++;else if(Ic(c.type,-t,o)){if(u==0){let h=Lc(c);return{start:l,end:h&&h.from<h.to?{from:h.from,to:h.to}:void 0,matched:!1}}u--}}while(t<0?c.prevSibling():c.nextSibling());return{start:l,matched:!1}}function k5(n,e,t,i,s,r,o){let a=t<0?n.sliceDoc(e-1,e):n.sliceDoc(e,e+1),l=o.indexOf(a);if(l<0||l%2==0!=t>0)return null;let u={from:t<0?e-1:e,to:t>0?e+1:e},c=n.doc.iterRange(e,t>0?n.doc.length:0),h=0;for(let d=0;!c.next().done&&d<=r;){let f=c.value;t<0&&(d+=f.length);let p=e+d*t;for(let m=t>0?0:f.length-1,O=t>0?f.length:-1;m!=O;m+=t){let y=o.indexOf(f[m]);if(!(y<0||i.resolveInner(p+m,1).type!=s))if(y%2==0==t>0)h++;else{if(h==1)return{start:u,end:{from:p+m,to:p+m+1},matched:y>>1==l>>1};h--}}t>0&&(d+=f.length)}return c.done?{start:u,matched:!1}:null}const P5=Object.create(null),xp=[At.none],Sp=[],_p=Object.create(null),Q5=Object.create(null);for(let[n,e]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])Q5[n]=T5(P5,e);function du(n,e){Sp.indexOf(n)>-1||(Sp.push(n),console.warn(e))}function T5(n,e){let t=[];for(let a of e.split(" ")){let l=[];for(let u of a.split(".")){let c=n[u]||I[u];c?typeof c=="function"?l.length?l=l.map(c):du(u,`Modifier ${u} used at start of tag`):l.length?du(u,`Tag ${u} used as modifier`):l=Array.isArray(c)?c:[c]:du(u,`Unknown highlighting tag ${u}`)}for(let u of l)t.push(u)}if(!t.length)return 0;let i=e.replace(/ /g,"_"),s=i+" "+t.map(a=>a.id),r=_p[s];if(r)return r.id;let o=_p[s]=At.define({id:xp.length,name:i,props:[X0({[i]:t})]});return xp.push(o),o.id}ut.RTL,ut.LTR;const A5=n=>{let{state:e}=n,t=e.doc.lineAt(e.selection.main.from),i=Zh(n.state,t.from);return i.line?C5(n):i.block?M5(n):!1};function Rh(n,e){return({state:t,dispatch:i})=>{if(t.readOnly)return!1;let s=n(e,t);return s?(i(t.update(s)),!0):!1}}const C5=Rh(D5,0),E5=Rh(K0,0),M5=Rh((n,e)=>K0(n,e,Z5(e)),0);function Zh(n,e){let t=n.languageDataAt("commentTokens",e);return t.length?t[0]:{}}const Ys=50;function R5(n,{open:e,close:t},i,s){let r=n.sliceDoc(i-Ys,i),o=n.sliceDoc(s,s+Ys),a=/\s*$/.exec(r)[0].length,l=/^\s*/.exec(o)[0].length,u=r.length-a;if(r.slice(u-e.length,u)==e&&o.slice(l,l+t.length)==t)return{open:{pos:i-a,margin:a&&1},close:{pos:s+l,margin:l&&1}};let c,h;s-i<=2*Ys?c=h=n.sliceDoc(i,s):(c=n.sliceDoc(i,i+Ys),h=n.sliceDoc(s-Ys,s));let d=/^\s*/.exec(c)[0].length,f=/\s*$/.exec(h)[0].length,p=h.length-f-t.length;return c.slice(d,d+e.length)==e&&h.slice(p,p+t.length)==t?{open:{pos:i+d+e.length,margin:/\s/.test(c.charAt(d+e.length))?1:0},close:{pos:s-f-t.length,margin:/\s/.test(h.charAt(p-1))?1:0}}:null}function Z5(n){let e=[];for(let t of n.selection.ranges){let i=n.doc.lineAt(t.from),s=t.to<=i.to?i:n.doc.lineAt(t.to);s.from>i.from&&s.from==t.to&&(s=t.to==i.to+1?i:n.doc.lineAt(t.to-1));let r=e.length-1;r>=0&&e[r].to>i.from?e[r].to=s.to:e.push({from:i.from+/^\s*/.exec(i.text)[0].length,to:s.to})}return e}function K0(n,e,t=e.selection.ranges){let i=t.map(r=>Zh(e,r.from).block);if(!i.every(r=>r))return null;let s=t.map((r,o)=>R5(e,i[o],r.from,r.to));if(n!=2&&!s.every(r=>r))return{changes:e.changes(t.map((r,o)=>s[o]?[]:[{from:r.from,insert:i[o].open+" "},{from:r.to,insert:" "+i[o].close}]))};if(n!=1&&s.some(r=>r)){let r=[];for(let o=0,a;o<s.length;o++)if(a=s[o]){let l=i[o],{open:u,close:c}=a;r.push({from:u.pos-l.open.length,to:u.pos+u.margin},{from:c.pos-c.margin,to:c.pos+l.close.length})}return{changes:r}}return null}function D5(n,e,t=e.selection.ranges){let i=[],s=-1;for(let{from:r,to:o}of t){let a=i.length,l=1e9,u=Zh(e,r).line;if(u){for(let c=r;c<=o;){let h=e.doc.lineAt(c);if(h.from>s&&(r==o||o>h.from)){s=h.from;let d=/^\s*/.exec(h.text)[0].length,f=d==h.length,p=h.text.slice(d,d+u.length)==u?d:-1;d<h.text.length&&d<l&&(l=d),i.push({line:h,comment:p,token:u,indent:d,empty:f,single:!1})}c=h.to+1}if(l<1e9)for(let c=a;c<i.length;c++)i[c].indent<i[c].line.text.length&&(i[c].indent=l);i.length==a+1&&(i[a].single=!0)}}if(n!=2&&i.some(r=>r.comment<0&&(!r.empty||r.single))){let r=[];for(let{line:a,token:l,indent:u,empty:c,single:h}of i)(h||!c)&&r.push({from:a.from+u,insert:l+" "});let o=e.changes(r);return{changes:o,selection:e.selection.map(o,1)}}else if(n!=1&&i.some(r=>r.comment>=0)){let r=[];for(let{line:o,comment:a,token:l}of i)if(a>=0){let u=o.from+a,c=u+l.length;o.text[c-o.from]==" "&&c++,r.push({from:u,to:c})}return{changes:r}}return null}function Ds(n,e){return ee.create(n.ranges.map(e),n.mainIndex)}function Sn(n,e){return n.update({selection:e,scrollIntoView:!0,userEvent:"select"})}function on({state:n,dispatch:e},t){let i=Ds(n.selection,t);return i.eq(n.selection,!0)?!1:(e(Sn(n,i)),!0)}function vl(n,e){return ee.cursor(e?n.to:n.from)}function J0(n,e){return on(n,t=>t.empty?n.moveByChar(t,e):vl(t,e))}function vt(n){return n.textDirectionAt(n.state.selection.main.head)==ut.LTR}const ey=n=>J0(n,!vt(n)),ty=n=>J0(n,vt(n));function ny(n,e){return on(n,t=>t.empty?n.moveByGroup(t,e):vl(t,e))}const N5=n=>ny(n,!vt(n)),I5=n=>ny(n,vt(n));function L5(n,e,t){if(e.type.prop(t))return!0;let i=e.to-e.from;return i&&(i>2||/[^\s,.;:]/.test(n.sliceDoc(e.from,e.to)))||e.firstChild}function wl(n,e,t){let i=It(n).resolveInner(e.head),s=t?Pe.closedBy:Pe.openedBy;for(let l=e.head;;){let u=t?i.childAfter(l):i.childBefore(l);if(!u)break;L5(n,u,s)?i=u:l=t?u.to:u.from}let r=i.type.prop(s),o,a;return r&&(o=t?ls(n,i.from,1):ls(n,i.to,-1))&&o.matched?a=t?o.end.to:o.end.from:a=t?i.to:i.from,ee.cursor(a,t?-1:1)}const z5=n=>on(n,e=>wl(n.state,e,!vt(n))),V5=n=>on(n,e=>wl(n.state,e,vt(n)));function iy(n,e){return on(n,t=>{if(!t.empty)return vl(t,e);let i=n.moveVertically(t,e);return i.head!=t.head?i:n.moveToLineBoundary(t,e)})}const sy=n=>iy(n,!1),ry=n=>iy(n,!0);function oy(n){let e=n.scrollDOM.clientHeight<n.scrollDOM.scrollHeight-2,t=0,i=0,s;if(e){for(let r of n.state.facet(_e.scrollMargins)){let o=r(n);o!=null&&o.top&&(t=Math.max(o==null?void 0:o.top,t)),o!=null&&o.bottom&&(i=Math.max(o==null?void 0:o.bottom,i))}s=n.scrollDOM.clientHeight-t-i}else s=(n.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:t,marginBottom:i,selfScroll:e,height:Math.max(n.defaultLineHeight,s-5)}}function ay(n,e){let t=oy(n),{state:i}=n,s=Ds(i.selection,o=>o.empty?n.moveVertically(o,e,t.height):vl(o,e));if(s.eq(i.selection))return!1;let r;if(t.selfScroll){let o=n.coordsAtPos(i.selection.main.head),a=n.scrollDOM.getBoundingClientRect(),l=a.top+t.marginTop,u=a.bottom-t.marginBottom;o&&o.top>l&&o.bottom<u&&(r=_e.scrollIntoView(s.main.head,{y:"start",yMargin:o.top-l}))}return n.dispatch(Sn(i,s),{effects:r}),!0}const $p=n=>ay(n,!1),zc=n=>ay(n,!0);function vi(n,e,t){let i=n.lineBlockAt(e.head),s=n.moveToLineBoundary(e,t);if(s.head==e.head&&s.head!=(t?i.to:i.from)&&(s=n.moveToLineBoundary(e,t,!1)),!t&&s.head==i.from&&i.length){let r=/^\s*/.exec(n.state.sliceDoc(i.from,Math.min(i.from+100,i.to)))[0].length;r&&e.head!=i.from+r&&(s=ee.cursor(i.from+r))}return s}const X5=n=>on(n,e=>vi(n,e,!0)),B5=n=>on(n,e=>vi(n,e,!1)),U5=n=>on(n,e=>vi(n,e,!vt(n))),j5=n=>on(n,e=>vi(n,e,vt(n))),W5=n=>on(n,e=>ee.cursor(n.lineBlockAt(e.head).from,1)),q5=n=>on(n,e=>ee.cursor(n.lineBlockAt(e.head).to,-1));function Y5(n,e,t){let i=!1,s=Ds(n.selection,r=>{let o=ls(n,r.head,-1)||ls(n,r.head,1)||r.head>0&&ls(n,r.head-1,1)||r.head<n.doc.length&&ls(n,r.head+1,-1);if(!o||!o.end)return r;i=!0;let a=o.start.from==r.head?o.end.to:o.end.from;return ee.cursor(a)});return i?(e(Sn(n,s)),!0):!1}const G5=({state:n,dispatch:e})=>Y5(n,e);function Yt(n,e){let t=Ds(n.state.selection,i=>{let s=e(i);return ee.range(i.anchor,s.head,s.goalColumn,s.bidiLevel||void 0)});return t.eq(n.state.selection)?!1:(n.dispatch(Sn(n.state,t)),!0)}function ly(n,e){return Yt(n,t=>n.moveByChar(t,e))}const uy=n=>ly(n,!vt(n)),cy=n=>ly(n,vt(n));function hy(n,e){return Yt(n,t=>n.moveByGroup(t,e))}const H5=n=>hy(n,!vt(n)),F5=n=>hy(n,vt(n)),K5=n=>Yt(n,e=>wl(n.state,e,!vt(n))),J5=n=>Yt(n,e=>wl(n.state,e,vt(n)));function dy(n,e){return Yt(n,t=>n.moveVertically(t,e))}const fy=n=>dy(n,!1),py=n=>dy(n,!0);function my(n,e){return Yt(n,t=>n.moveVertically(t,e,oy(n).height))}const kp=n=>my(n,!1),Pp=n=>my(n,!0),eD=n=>Yt(n,e=>vi(n,e,!0)),tD=n=>Yt(n,e=>vi(n,e,!1)),nD=n=>Yt(n,e=>vi(n,e,!vt(n))),iD=n=>Yt(n,e=>vi(n,e,vt(n))),sD=n=>Yt(n,e=>ee.cursor(n.lineBlockAt(e.head).from)),rD=n=>Yt(n,e=>ee.cursor(n.lineBlockAt(e.head).to)),Qp=({state:n,dispatch:e})=>(e(Sn(n,{anchor:0})),!0),Tp=({state:n,dispatch:e})=>(e(Sn(n,{anchor:n.doc.length})),!0),Ap=({state:n,dispatch:e})=>(e(Sn(n,{anchor:n.selection.main.anchor,head:0})),!0),Cp=({state:n,dispatch:e})=>(e(Sn(n,{anchor:n.selection.main.anchor,head:n.doc.length})),!0),oD=({state:n,dispatch:e})=>(e(n.update({selection:{anchor:0,head:n.doc.length},userEvent:"select"})),!0),aD=({state:n,dispatch:e})=>{let t=bl(n).map(({from:i,to:s})=>ee.range(i,Math.min(s+1,n.doc.length)));return e(n.update({selection:ee.create(t),userEvent:"select"})),!0},lD=({state:n,dispatch:e})=>{let t=Ds(n.selection,i=>{let s=It(n),r=s.resolveStack(i.from,1);if(i.empty){let o=s.resolveStack(i.from,-1);o.node.from>=r.node.from&&o.node.to<=r.node.to&&(r=o)}for(let o=r;o;o=o.next){let{node:a}=o;if((a.from<i.from&&a.to>=i.to||a.to>i.to&&a.from<=i.from)&&o.next)return ee.range(a.to,a.from)}return i});return t.eq(n.selection)?!1:(e(Sn(n,t)),!0)},uD=({state:n,dispatch:e})=>{let t=n.selection,i=null;return t.ranges.length>1?i=ee.create([t.main]):t.main.empty||(i=ee.create([ee.cursor(t.main.head)])),i?(e(Sn(n,i)),!0):!1};function Fr(n,e){if(n.state.readOnly)return!1;let t="delete.selection",{state:i}=n,s=i.changeByRange(r=>{let{from:o,to:a}=r;if(o==a){let l=e(r);l<o?(t="delete.backward",l=Zo(n,l,!1)):l>o&&(t="delete.forward",l=Zo(n,l,!0)),o=Math.min(o,l),a=Math.max(a,l)}else o=Zo(n,o,!1),a=Zo(n,a,!0);return o==a?{range:r}:{changes:{from:o,to:a},range:ee.cursor(o,o<r.head?-1:1)}});return s.changes.empty?!1:(n.dispatch(i.update(s,{scrollIntoView:!0,userEvent:t,effects:t=="delete.selection"?_e.announce.of(i.phrase("Selection deleted")):void 0})),!0)}function Zo(n,e,t){if(n instanceof _e)for(let i of n.state.facet(_e.atomicRanges).map(s=>s(n)))i.between(e,e,(s,r)=>{s<e&&r>e&&(e=t?r:s)});return e}const gy=(n,e,t)=>Fr(n,i=>{let s=i.from,{state:r}=n,o=r.doc.lineAt(s),a,l;if(t&&!e&&s>o.from&&s<o.from+200&&!/[^ \t]/.test(a=o.text.slice(0,s-o.from))){if(a[a.length-1]=="	")return s-1;let u=dl(a,r.tabSize),c=u%La(r)||La(r);for(let h=0;h<c&&a[a.length-1-h]==" ";h++)s--;l=s}else l=bt(o.text,s-o.from,e,e)+o.from,l==s&&o.number!=(e?r.doc.lines:1)?l+=e?1:-1:!e&&/[\ufe00-\ufe0f]/.test(o.text.slice(l-o.from,s-o.from))&&(l=bt(o.text,l-o.from,!1,!1)+o.from);return l}),Vc=n=>gy(n,!1,!0),Oy=n=>gy(n,!0,!1),yy=(n,e)=>Fr(n,t=>{let i=t.head,{state:s}=n,r=s.doc.lineAt(i),o=s.charCategorizer(i);for(let a=null;;){if(i==(e?r.to:r.from)){i==t.head&&r.number!=(e?s.doc.lines:1)&&(i+=e?1:-1);break}let l=bt(r.text,i-r.from,e)+r.from,u=r.text.slice(Math.min(i,l)-r.from,Math.max(i,l)-r.from),c=o(u);if(a!=null&&c!=a)break;(u!=" "||i!=t.head)&&(a=c),i=l}return i}),vy=n=>yy(n,!1),cD=n=>yy(n,!0),hD=n=>Fr(n,e=>{let t=n.lineBlockAt(e.head).to;return e.head<t?t:Math.min(n.state.doc.length,e.head+1)}),dD=n=>Fr(n,e=>{let t=n.moveToLineBoundary(e,!1).head;return e.head>t?t:Math.max(0,e.head-1)}),fD=n=>Fr(n,e=>{let t=n.moveToLineBoundary(e,!0).head;return e.head<t?t:Math.min(n.state.doc.length,e.head+1)}),pD=({state:n,dispatch:e})=>{if(n.readOnly)return!1;let t=n.changeByRange(i=>({changes:{from:i.from,to:i.to,insert:De.of(["",""])},range:ee.cursor(i.from)}));return e(n.update(t,{scrollIntoView:!0,userEvent:"input"})),!0},mD=({state:n,dispatch:e})=>{if(n.readOnly)return!1;let t=n.changeByRange(i=>{if(!i.empty||i.from==0||i.from==n.doc.length)return{range:i};let s=i.from,r=n.doc.lineAt(s),o=s==r.from?s-1:bt(r.text,s-r.from,!1)+r.from,a=s==r.to?s+1:bt(r.text,s-r.from,!0)+r.from;return{changes:{from:o,to:a,insert:n.doc.slice(s,a).append(n.doc.slice(o,s))},range:ee.cursor(a)}});return t.changes.empty?!1:(e(n.update(t,{scrollIntoView:!0,userEvent:"move.character"})),!0)};function bl(n){let e=[],t=-1;for(let i of n.selection.ranges){let s=n.doc.lineAt(i.from),r=n.doc.lineAt(i.to);if(!i.empty&&i.to==r.from&&(r=n.doc.lineAt(i.to-1)),t>=s.number){let o=e[e.length-1];o.to=r.to,o.ranges.push(i)}else e.push({from:s.from,to:r.to,ranges:[i]});t=r.number+1}return e}function wy(n,e,t){if(n.readOnly)return!1;let i=[],s=[];for(let r of bl(n)){if(t?r.to==n.doc.length:r.from==0)continue;let o=n.doc.lineAt(t?r.to+1:r.from-1),a=o.length+1;if(t){i.push({from:r.to,to:o.to},{from:r.from,insert:o.text+n.lineBreak});for(let l of r.ranges)s.push(ee.range(Math.min(n.doc.length,l.anchor+a),Math.min(n.doc.length,l.head+a)))}else{i.push({from:o.from,to:r.from},{from:r.to,insert:n.lineBreak+o.text});for(let l of r.ranges)s.push(ee.range(l.anchor-a,l.head-a))}}return i.length?(e(n.update({changes:i,scrollIntoView:!0,selection:ee.create(s,n.selection.mainIndex),userEvent:"move.line"})),!0):!1}const gD=({state:n,dispatch:e})=>wy(n,e,!1),OD=({state:n,dispatch:e})=>wy(n,e,!0);function by(n,e,t){if(n.readOnly)return!1;let i=[];for(let s of bl(n))t?i.push({from:s.from,insert:n.doc.slice(s.from,s.to)+n.lineBreak}):i.push({from:s.to,insert:n.lineBreak+n.doc.slice(s.from,s.to)});return e(n.update({changes:i,scrollIntoView:!0,userEvent:"input.copyline"})),!0}const yD=({state:n,dispatch:e})=>by(n,e,!1),vD=({state:n,dispatch:e})=>by(n,e,!0),wD=n=>{if(n.state.readOnly)return!1;let{state:e}=n,t=e.changes(bl(e).map(({from:s,to:r})=>(s>0?s--:r<e.doc.length&&r++,{from:s,to:r}))),i=Ds(e.selection,s=>{let r;if(n.lineWrapping){let o=n.lineBlockAt(s.head),a=n.coordsAtPos(s.head,s.assoc||1);a&&(r=o.bottom+n.documentTop-a.bottom+n.defaultLineHeight/2)}return n.moveVertically(s,!0,r)}).map(t);return n.dispatch({changes:t,selection:i,scrollIntoView:!0,userEvent:"delete.line"}),!0};function bD(n,e){if(/\(\)|\[\]|\{\}/.test(n.sliceDoc(e-1,e+1)))return{from:e,to:e};let t=It(n).resolveInner(e),i=t.childBefore(e),s=t.childAfter(e),r;return i&&s&&i.to<=e&&s.from>=e&&(r=i.type.prop(Pe.closedBy))&&r.indexOf(s.name)>-1&&n.doc.lineAt(i.to).from==n.doc.lineAt(s.from).from&&!/\S/.test(n.sliceDoc(i.to,s.from))?{from:i.to,to:s.from}:null}const Ep=xy(!1),xD=xy(!0);function xy(n){return({state:e,dispatch:t})=>{if(e.readOnly)return!1;let i=e.changeByRange(s=>{let{from:r,to:o}=s,a=e.doc.lineAt(r),l=!n&&r==o&&bD(e,r);n&&(r=o=(o<=a.to?a:e.doc.lineAt(o)).to);let u=new yl(e,{simulateBreak:r,simulateDoubleBreak:!!l}),c=q0(u,r);for(c==null&&(c=dl(/^\s*/.exec(e.doc.lineAt(r).text)[0],e.tabSize));o<a.to&&/\s/.test(a.text[o-a.from]);)o++;l?{from:r,to:o}=l:r>a.from&&r<a.from+100&&!/\S/.test(a.text.slice(0,r))&&(r=a.from);let h=["",za(e,c)];return l&&h.push(za(e,u.lineIndent(a.from,-1))),{changes:{from:r,to:o,insert:De.of(h)},range:ee.cursor(r+1+h[1].length)}});return t(e.update(i,{scrollIntoView:!0,userEvent:"input"})),!0}}function Dh(n,e){let t=-1;return n.changeByRange(i=>{let s=[];for(let o=i.from;o<=i.to;){let a=n.doc.lineAt(o);a.number>t&&(i.empty||i.to>a.from)&&(e(a,s,i),t=a.number),o=a.to+1}let r=n.changes(s);return{changes:s,range:ee.range(r.mapPos(i.anchor,1),r.mapPos(i.head,1))}})}const SD=({state:n,dispatch:e})=>{if(n.readOnly)return!1;let t=Object.create(null),i=new yl(n,{overrideIndentation:r=>{let o=t[r];return o??-1}}),s=Dh(n,(r,o,a)=>{let l=q0(i,r.from);if(l==null)return;/\S/.test(r.text)||(l=0);let u=/^\s*/.exec(r.text)[0],c=za(n,l);(u!=c||a.from<r.from+u.length)&&(t[r.from]=l,o.push({from:r.from,to:r.from+u.length,insert:c}))});return s.changes.empty||e(n.update(s,{userEvent:"indent"})),!0},Sy=({state:n,dispatch:e})=>n.readOnly?!1:(e(n.update(Dh(n,(t,i)=>{i.push({from:t.from,insert:n.facet(Ol)})}),{userEvent:"input.indent"})),!0),_y=({state:n,dispatch:e})=>n.readOnly?!1:(e(n.update(Dh(n,(t,i)=>{let s=/^\s*/.exec(t.text)[0];if(!s)return;let r=dl(s,n.tabSize),o=0,a=za(n,Math.max(0,r-La(n)));for(;o<s.length&&o<a.length&&s.charCodeAt(o)==a.charCodeAt(o);)o++;i.push({from:t.from+o,to:t.from+s.length,insert:a.slice(o)})}),{userEvent:"delete.dedent"})),!0),_D=n=>(n.setTabFocusMode(),!0),$D=[{key:"Ctrl-b",run:ey,shift:uy,preventDefault:!0},{key:"Ctrl-f",run:ty,shift:cy},{key:"Ctrl-p",run:sy,shift:fy},{key:"Ctrl-n",run:ry,shift:py},{key:"Ctrl-a",run:W5,shift:sD},{key:"Ctrl-e",run:q5,shift:rD},{key:"Ctrl-d",run:Oy},{key:"Ctrl-h",run:Vc},{key:"Ctrl-k",run:hD},{key:"Ctrl-Alt-h",run:vy},{key:"Ctrl-o",run:pD},{key:"Ctrl-t",run:mD},{key:"Ctrl-v",run:zc}],kD=[{key:"ArrowLeft",run:ey,shift:uy,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:N5,shift:H5,preventDefault:!0},{mac:"Cmd-ArrowLeft",run:U5,shift:nD,preventDefault:!0},{key:"ArrowRight",run:ty,shift:cy,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:I5,shift:F5,preventDefault:!0},{mac:"Cmd-ArrowRight",run:j5,shift:iD,preventDefault:!0},{key:"ArrowUp",run:sy,shift:fy,preventDefault:!0},{mac:"Cmd-ArrowUp",run:Qp,shift:Ap},{mac:"Ctrl-ArrowUp",run:$p,shift:kp},{key:"ArrowDown",run:ry,shift:py,preventDefault:!0},{mac:"Cmd-ArrowDown",run:Tp,shift:Cp},{mac:"Ctrl-ArrowDown",run:zc,shift:Pp},{key:"PageUp",run:$p,shift:kp},{key:"PageDown",run:zc,shift:Pp},{key:"Home",run:B5,shift:tD,preventDefault:!0},{key:"Mod-Home",run:Qp,shift:Ap},{key:"End",run:X5,shift:eD,preventDefault:!0},{key:"Mod-End",run:Tp,shift:Cp},{key:"Enter",run:Ep,shift:Ep},{key:"Mod-a",run:oD},{key:"Backspace",run:Vc,shift:Vc},{key:"Delete",run:Oy},{key:"Mod-Backspace",mac:"Alt-Backspace",run:vy},{key:"Mod-Delete",mac:"Alt-Delete",run:cD},{mac:"Mod-Backspace",run:dD},{mac:"Mod-Delete",run:fD}].concat($D.map(n=>({mac:n.key,run:n.run,shift:n.shift}))),PD=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:z5,shift:K5},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:V5,shift:J5},{key:"Alt-ArrowUp",run:gD},{key:"Shift-Alt-ArrowUp",run:yD},{key:"Alt-ArrowDown",run:OD},{key:"Shift-Alt-ArrowDown",run:vD},{key:"Escape",run:uD},{key:"Mod-Enter",run:xD},{key:"Alt-l",mac:"Ctrl-l",run:aD},{key:"Mod-i",run:lD,preventDefault:!0},{key:"Mod-[",run:_y},{key:"Mod-]",run:Sy},{key:"Mod-Alt-\\",run:SD},{key:"Shift-Mod-k",run:wD},{key:"Shift-Mod-\\",run:G5},{key:"Mod-/",run:A5},{key:"Alt-A",run:E5},{key:"Ctrl-m",mac:"Shift-Alt-m",run:_D}].concat(kD),QD={key:"Tab",run:Sy,shift:_y};var Mp={};class Va{constructor(e,t,i,s,r,o,a,l,u,c=0,h){this.p=e,this.stack=t,this.state=i,this.reducePos=s,this.pos=r,this.score=o,this.buffer=a,this.bufferBase=l,this.curContext=u,this.lookAhead=c,this.parent=h}toString(){return`[${this.stack.filter((e,t)=>t%3==0).concat(this.state)}]@${this.pos}${this.score?"!"+this.score:""}`}static start(e,t,i=0){let s=e.parser.context;return new Va(e,[],t,i,i,0,[],0,s?new Rp(s,s.start):null,0,null)}get context(){return this.curContext?this.curContext.context:null}pushState(e,t){this.stack.push(this.state,t,this.bufferBase+this.buffer.length),this.state=e}reduce(e){var t;let i=e>>19,s=e&65535,{parser:r}=this.p,o=this.reducePos<this.pos-25;o&&this.setLookAhead(this.pos);let a=r.dynamicPrecedence(s);if(a&&(this.score+=a),i==0){this.pushState(r.getGoto(this.state,s,!0),this.reducePos),s<r.minRepeatTerm&&this.storeNode(s,this.reducePos,this.reducePos,o?8:4,!0),this.reduceContext(s,this.reducePos);return}let l=this.stack.length-(i-1)*3-(e&262144?6:0),u=l?this.stack[l-2]:this.p.ranges[0].from,c=this.reducePos-u;c>=2e3&&!(!((t=this.p.parser.nodeSet.types[s])===null||t===void 0)&&t.isAnonymous)&&(u==this.p.lastBigReductionStart?(this.p.bigReductionCount++,this.p.lastBigReductionSize=c):this.p.lastBigReductionSize<c&&(this.p.bigReductionCount=1,this.p.lastBigReductionStart=u,this.p.lastBigReductionSize=c));let h=l?this.stack[l-1]:0,d=this.bufferBase+this.buffer.length-h;if(s<r.minRepeatTerm||e&131072){let f=r.stateFlag(this.state,1)?this.pos:this.reducePos;this.storeNode(s,u,f,d+4,!0)}if(e&262144)this.state=this.stack[l];else{let f=this.stack[l-3];this.state=r.getGoto(f,s,!0)}for(;this.stack.length>l;)this.stack.pop();this.reduceContext(s,u)}storeNode(e,t,i,s=4,r=!1){if(e==0&&(!this.stack.length||this.stack[this.stack.length-1]<this.buffer.length+this.bufferBase)){let o=this,a=this.buffer.length;if(a==0&&o.parent&&(a=o.bufferBase-o.parent.bufferBase,o=o.parent),a>0&&o.buffer[a-4]==0&&o.buffer[a-1]>-1){if(t==i)return;if(o.buffer[a-2]>=t){o.buffer[a-2]=i;return}}}if(!r||this.pos==i)this.buffer.push(e,t,i,s);else{let o=this.buffer.length;if(o>0&&this.buffer[o-4]!=0){let a=!1;for(let l=o;l>0&&this.buffer[l-2]>i;l-=4)if(this.buffer[l-1]>=0){a=!0;break}if(a)for(;o>0&&this.buffer[o-2]>i;)this.buffer[o]=this.buffer[o-4],this.buffer[o+1]=this.buffer[o-3],this.buffer[o+2]=this.buffer[o-2],this.buffer[o+3]=this.buffer[o-1],o-=4,s>4&&(s-=4)}this.buffer[o]=e,this.buffer[o+1]=t,this.buffer[o+2]=i,this.buffer[o+3]=s}}shift(e,t,i,s){if(e&131072)this.pushState(e&65535,this.pos);else if(e&262144)this.pos=s,this.shiftContext(t,i),t<=this.p.parser.maxNode&&this.buffer.push(t,i,s,4);else{let r=e,{parser:o}=this.p;(s>this.pos||t<=o.maxNode)&&(this.pos=s,o.stateFlag(r,1)||(this.reducePos=s)),this.pushState(r,i),this.shiftContext(t,i),t<=o.maxNode&&this.buffer.push(t,i,s,4)}}apply(e,t,i,s){e&65536?this.reduce(e):this.shift(e,t,i,s)}useNode(e,t){let i=this.p.reused.length-1;(i<0||this.p.reused[i]!=e)&&(this.p.reused.push(e),i++);let s=this.pos;this.reducePos=this.pos=s+e.length,this.pushState(t,s),this.buffer.push(i,s,this.reducePos,-1),this.curContext&&this.updateContext(this.curContext.tracker.reuse(this.curContext.context,e,this,this.p.stream.reset(this.pos-e.length)))}split(){let e=this,t=e.buffer.length;for(;t>0&&e.buffer[t-2]>e.reducePos;)t-=4;let i=e.buffer.slice(t),s=e.bufferBase+t;for(;e&&s==e.bufferBase;)e=e.parent;return new Va(this.p,this.stack.slice(),this.state,this.reducePos,this.pos,this.score,i,s,this.curContext,this.lookAhead,e)}recoverByDelete(e,t){let i=e<=this.p.parser.maxNode;i&&this.storeNode(e,this.pos,t,4),this.storeNode(0,this.pos,t,i?8:4),this.pos=this.reducePos=t,this.score-=190}canShift(e){for(let t=new TD(this);;){let i=this.p.parser.stateSlot(t.state,4)||this.p.parser.hasAction(t.state,e);if(i==0)return!1;if(!(i&65536))return!0;t.reduce(i)}}recoverByInsert(e){if(this.stack.length>=300)return[];let t=this.p.parser.nextStates(this.state);if(t.length>8||this.stack.length>=120){let s=[];for(let r=0,o;r<t.length;r+=2)(o=t[r+1])!=this.state&&this.p.parser.hasAction(o,e)&&s.push(t[r],o);if(this.stack.length<120)for(let r=0;s.length<8&&r<t.length;r+=2){let o=t[r+1];s.some((a,l)=>l&1&&a==o)||s.push(t[r],o)}t=s}let i=[];for(let s=0;s<t.length&&i.length<4;s+=2){let r=t[s+1];if(r==this.state)continue;let o=this.split();o.pushState(r,this.pos),o.storeNode(0,o.pos,o.pos,4,!0),o.shiftContext(t[s],this.pos),o.reducePos=this.pos,o.score-=200,i.push(o)}return i}forceReduce(){let{parser:e}=this.p,t=e.stateSlot(this.state,5);if(!(t&65536))return!1;if(!e.validAction(this.state,t)){let i=t>>19,s=t&65535,r=this.stack.length-i*3;if(r<0||e.getGoto(this.stack[r],s,!1)<0){let o=this.findForcedReduction();if(o==null)return!1;t=o}this.storeNode(0,this.pos,this.pos,4,!0),this.score-=100}return this.reducePos=this.pos,this.reduce(t),!0}findForcedReduction(){let{parser:e}=this.p,t=[],i=(s,r)=>{if(!t.includes(s))return t.push(s),e.allActions(s,o=>{if(!(o&393216))if(o&65536){let a=(o>>19)-r;if(a>1){let l=o&65535,u=this.stack.length-a*3;if(u>=0&&e.getGoto(this.stack[u],l,!1)>=0)return a<<19|65536|l}}else{let a=i(o,r+1);if(a!=null)return a}})};return i(this.state,0)}forceAll(){for(;!this.p.parser.stateFlag(this.state,2);)if(!this.forceReduce()){this.storeNode(0,this.pos,this.pos,4,!0);break}return this}get deadEnd(){if(this.stack.length!=3)return!1;let{parser:e}=this.p;return e.data[e.stateSlot(this.state,1)]==65535&&!e.stateSlot(this.state,4)}restart(){this.storeNode(0,this.pos,this.pos,4,!0),this.state=this.stack[0],this.stack.length=0}sameState(e){if(this.state!=e.state||this.stack.length!=e.stack.length)return!1;for(let t=0;t<this.stack.length;t+=3)if(this.stack[t]!=e.stack[t])return!1;return!0}get parser(){return this.p.parser}dialectEnabled(e){return this.p.parser.dialect.flags[e]}shiftContext(e,t){this.curContext&&this.updateContext(this.curContext.tracker.shift(this.curContext.context,e,this,this.p.stream.reset(t)))}reduceContext(e,t){this.curContext&&this.updateContext(this.curContext.tracker.reduce(this.curContext.context,e,this,this.p.stream.reset(t)))}emitContext(){let e=this.buffer.length-1;(e<0||this.buffer[e]!=-3)&&this.buffer.push(this.curContext.hash,this.pos,this.pos,-3)}emitLookAhead(){let e=this.buffer.length-1;(e<0||this.buffer[e]!=-4)&&this.buffer.push(this.lookAhead,this.pos,this.pos,-4)}updateContext(e){if(e!=this.curContext.context){let t=new Rp(this.curContext.tracker,e);t.hash!=this.curContext.hash&&this.emitContext(),this.curContext=t}}setLookAhead(e){e>this.lookAhead&&(this.emitLookAhead(),this.lookAhead=e)}close(){this.curContext&&this.curContext.tracker.strict&&this.emitContext(),this.lookAhead>0&&this.emitLookAhead()}}class Rp{constructor(e,t){this.tracker=e,this.context=t,this.hash=e.strict?e.hash(t):0}}class TD{constructor(e){this.start=e,this.state=e.state,this.stack=e.stack,this.base=this.stack.length}reduce(e){let t=e&65535,i=e>>19;i==0?(this.stack==this.start.stack&&(this.stack=this.stack.slice()),this.stack.push(this.state,0,0),this.base+=3):this.base-=(i-1)*3;let s=this.start.p.parser.getGoto(this.stack[this.base-3],t,!0);this.state=s}}class Xa{constructor(e,t,i){this.stack=e,this.pos=t,this.index=i,this.buffer=e.buffer,this.index==0&&this.maybeNext()}static create(e,t=e.bufferBase+e.buffer.length){return new Xa(e,t,t-e.bufferBase)}maybeNext(){let e=this.stack.parent;e!=null&&(this.index=this.stack.bufferBase-e.bufferBase,this.stack=e,this.buffer=e.buffer)}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}next(){this.index-=4,this.pos-=4,this.index==0&&this.maybeNext()}fork(){return new Xa(this.stack,this.pos,this.index)}}function ur(n,e=Uint16Array){if(typeof n!="string")return n;let t=null;for(let i=0,s=0;i<n.length;){let r=0;for(;;){let o=n.charCodeAt(i++),a=!1;if(o==126){r=65535;break}o>=92&&o--,o>=34&&o--;let l=o-32;if(l>=46&&(l-=46,a=!0),r+=l,a)break;r*=46}t?t[s++]=r:t=new e(r)}return t}class na{constructor(){this.start=-1,this.value=-1,this.end=-1,this.extended=-1,this.lookAhead=0,this.mask=0,this.context=0}}const Zp=new na;class AD{constructor(e,t){this.input=e,this.ranges=t,this.chunk="",this.chunkOff=0,this.chunk2="",this.chunk2Pos=0,this.next=-1,this.token=Zp,this.rangeIndex=0,this.pos=this.chunkPos=t[0].from,this.range=t[0],this.end=t[t.length-1].to,this.readNext()}resolveOffset(e,t){let i=this.range,s=this.rangeIndex,r=this.pos+e;for(;r<i.from;){if(!s)return null;let o=this.ranges[--s];r-=i.from-o.to,i=o}for(;t<0?r>i.to:r>=i.to;){if(s==this.ranges.length-1)return null;let o=this.ranges[++s];r+=o.from-i.to,i=o}return r}clipPos(e){if(e>=this.range.from&&e<this.range.to)return e;for(let t of this.ranges)if(t.to>e)return Math.max(e,t.from);return this.end}peek(e){let t=this.chunkOff+e,i,s;if(t>=0&&t<this.chunk.length)i=this.pos+e,s=this.chunk.charCodeAt(t);else{let r=this.resolveOffset(e,1);if(r==null)return-1;if(i=r,i>=this.chunk2Pos&&i<this.chunk2Pos+this.chunk2.length)s=this.chunk2.charCodeAt(i-this.chunk2Pos);else{let o=this.rangeIndex,a=this.range;for(;a.to<=i;)a=this.ranges[++o];this.chunk2=this.input.chunk(this.chunk2Pos=i),i+this.chunk2.length>a.to&&(this.chunk2=this.chunk2.slice(0,a.to-i)),s=this.chunk2.charCodeAt(0)}}return i>=this.token.lookAhead&&(this.token.lookAhead=i+1),s}acceptToken(e,t=0){let i=t?this.resolveOffset(t,-1):this.pos;if(i==null||i<this.token.start)throw new RangeError("Token end out of bounds");this.token.value=e,this.token.end=i}acceptTokenTo(e,t){this.token.value=e,this.token.end=t}getChunk(){if(this.pos>=this.chunk2Pos&&this.pos<this.chunk2Pos+this.chunk2.length){let{chunk:e,chunkPos:t}=this;this.chunk=this.chunk2,this.chunkPos=this.chunk2Pos,this.chunk2=e,this.chunk2Pos=t,this.chunkOff=this.pos-this.chunkPos}else{this.chunk2=this.chunk,this.chunk2Pos=this.chunkPos;let e=this.input.chunk(this.pos),t=this.pos+e.length;this.chunk=t>this.range.to?e.slice(0,this.range.to-this.pos):e,this.chunkPos=this.pos,this.chunkOff=0}}readNext(){return this.chunkOff>=this.chunk.length&&(this.getChunk(),this.chunkOff==this.chunk.length)?this.next=-1:this.next=this.chunk.charCodeAt(this.chunkOff)}advance(e=1){for(this.chunkOff+=e;this.pos+e>=this.range.to;){if(this.rangeIndex==this.ranges.length-1)return this.setDone();e-=this.range.to-this.pos,this.range=this.ranges[++this.rangeIndex],this.pos=this.range.from}return this.pos+=e,this.pos>=this.token.lookAhead&&(this.token.lookAhead=this.pos+1),this.readNext()}setDone(){return this.pos=this.chunkPos=this.end,this.range=this.ranges[this.rangeIndex=this.ranges.length-1],this.chunk="",this.next=-1}reset(e,t){if(t?(this.token=t,t.start=e,t.lookAhead=e+1,t.value=t.extended=-1):this.token=Zp,this.pos!=e){if(this.pos=e,e==this.end)return this.setDone(),this;for(;e<this.range.from;)this.range=this.ranges[--this.rangeIndex];for(;e>=this.range.to;)this.range=this.ranges[++this.rangeIndex];e>=this.chunkPos&&e<this.chunkPos+this.chunk.length?this.chunkOff=e-this.chunkPos:(this.chunk="",this.chunkOff=0),this.readNext()}return this}read(e,t){if(e>=this.chunkPos&&t<=this.chunkPos+this.chunk.length)return this.chunk.slice(e-this.chunkPos,t-this.chunkPos);if(e>=this.chunk2Pos&&t<=this.chunk2Pos+this.chunk2.length)return this.chunk2.slice(e-this.chunk2Pos,t-this.chunk2Pos);if(e>=this.range.from&&t<=this.range.to)return this.input.read(e,t);let i="";for(let s of this.ranges){if(s.from>=t)break;s.to>e&&(i+=this.input.read(Math.max(s.from,e),Math.min(s.to,t)))}return i}}class vs{constructor(e,t){this.data=e,this.id=t}token(e,t){let{parser:i}=t.p;$y(this.data,e,t,this.id,i.data,i.tokenPrecTable)}}vs.prototype.contextual=vs.prototype.fallback=vs.prototype.extend=!1;class Xc{constructor(e,t,i){this.precTable=t,this.elseToken=i,this.data=typeof e=="string"?ur(e):e}token(e,t){let i=e.pos,s=0;for(;;){let r=e.next<0,o=e.resolveOffset(1,1);if($y(this.data,e,t,0,this.data,this.precTable),e.token.value>-1)break;if(this.elseToken==null)return;if(r||s++,o==null)break;e.reset(o,e.token)}s&&(e.reset(i,e.token),e.acceptToken(this.elseToken,s))}}Xc.prototype.contextual=vs.prototype.fallback=vs.prototype.extend=!1;class Kr{constructor(e,t={}){this.token=e,this.contextual=!!t.contextual,this.fallback=!!t.fallback,this.extend=!!t.extend}}function $y(n,e,t,i,s,r){let o=0,a=1<<i,{dialect:l}=t.p.parser;e:for(;a&n[o];){let u=n[o+1];for(let f=o+3;f<u;f+=2)if((n[f+1]&a)>0){let p=n[f];if(l.allows(p)&&(e.token.value==-1||e.token.value==p||CD(p,e.token.value,s,r))){e.acceptToken(p);break}}let c=e.next,h=0,d=n[o+2];if(e.next<0&&d>h&&n[u+d*3-3]==65535){o=n[u+d*3-1];continue e}for(;h<d;){let f=h+d>>1,p=u+f+(f<<1),m=n[p],O=n[p+1]||65536;if(c<m)d=f;else if(c>=O)h=f+1;else{o=n[p+2],e.advance();continue e}}break}}function Dp(n,e,t){for(let i=e,s;(s=n[i])!=65535;i++)if(s==t)return i-e;return-1}function CD(n,e,t,i){let s=Dp(t,i,e);return s<0||Dp(t,i,n)<s}const Ct=typeof process<"u"&&Mp&&/\bparse\b/.test(Mp.LOG);let fu=null;function Np(n,e,t){let i=n.cursor(at.IncludeAnonymous);for(i.moveTo(e);;)if(!(t<0?i.childBefore(e):i.childAfter(e)))for(;;){if((t<0?i.to<e:i.from>e)&&!i.type.isError)return t<0?Math.max(0,Math.min(i.to-1,e-25)):Math.min(n.length,Math.max(i.from+1,e+25));if(t<0?i.prevSibling():i.nextSibling())break;if(!i.parent())return t<0?0:n.length}}class ED{constructor(e,t){this.fragments=e,this.nodeSet=t,this.i=0,this.fragment=null,this.safeFrom=-1,this.safeTo=-1,this.trees=[],this.start=[],this.index=[],this.nextFragment()}nextFragment(){let e=this.fragment=this.i==this.fragments.length?null:this.fragments[this.i++];if(e){for(this.safeFrom=e.openStart?Np(e.tree,e.from+e.offset,1)-e.offset:e.from,this.safeTo=e.openEnd?Np(e.tree,e.to+e.offset,-1)-e.offset:e.to;this.trees.length;)this.trees.pop(),this.start.pop(),this.index.pop();this.trees.push(e.tree),this.start.push(-e.offset),this.index.push(0),this.nextStart=this.safeFrom}else this.nextStart=1e9}nodeAt(e){if(e<this.nextStart)return null;for(;this.fragment&&this.safeTo<=e;)this.nextFragment();if(!this.fragment)return null;for(;;){let t=this.trees.length-1;if(t<0)return this.nextFragment(),null;let i=this.trees[t],s=this.index[t];if(s==i.children.length){this.trees.pop(),this.start.pop(),this.index.pop();continue}let r=i.children[s],o=this.start[t]+i.positions[s];if(o>e)return this.nextStart=o,null;if(r instanceof rt){if(o==e){if(o<this.safeFrom)return null;let a=o+r.length;if(a<=this.safeTo){let l=r.prop(Pe.lookAhead);if(!l||a+l<this.fragment.to)return r}}this.index[t]++,o+r.length>=Math.max(this.safeFrom,e)&&(this.trees.push(r),this.start.push(o),this.index.push(0))}else this.index[t]++,this.nextStart=o+r.length}}}class MD{constructor(e,t){this.stream=t,this.tokens=[],this.mainToken=null,this.actions=[],this.tokens=e.tokenizers.map(i=>new na)}getActions(e){let t=0,i=null,{parser:s}=e.p,{tokenizers:r}=s,o=s.stateSlot(e.state,3),a=e.curContext?e.curContext.hash:0,l=0;for(let u=0;u<r.length;u++){if(!(1<<u&o))continue;let c=r[u],h=this.tokens[u];if(!(i&&!c.fallback)&&((c.contextual||h.start!=e.pos||h.mask!=o||h.context!=a)&&(this.updateCachedToken(h,c,e),h.mask=o,h.context=a),h.lookAhead>h.end+25&&(l=Math.max(h.lookAhead,l)),h.value!=0)){let d=t;if(h.extended>-1&&(t=this.addActions(e,h.extended,h.end,t)),t=this.addActions(e,h.value,h.end,t),!c.extend&&(i=h,t>d))break}}for(;this.actions.length>t;)this.actions.pop();return l&&e.setLookAhead(l),!i&&e.pos==this.stream.end&&(i=new na,i.value=e.p.parser.eofTerm,i.start=i.end=e.pos,t=this.addActions(e,i.value,i.end,t)),this.mainToken=i,this.actions}getMainToken(e){if(this.mainToken)return this.mainToken;let t=new na,{pos:i,p:s}=e;return t.start=i,t.end=Math.min(i+1,s.stream.end),t.value=i==s.stream.end?s.parser.eofTerm:0,t}updateCachedToken(e,t,i){let s=this.stream.clipPos(i.pos);if(t.token(this.stream.reset(s,e),i),e.value>-1){let{parser:r}=i.p;for(let o=0;o<r.specialized.length;o++)if(r.specialized[o]==e.value){let a=r.specializers[o](this.stream.read(e.start,e.end),i);if(a>=0&&i.p.parser.dialect.allows(a>>1)){a&1?e.extended=a>>1:e.value=a>>1;break}}}else e.value=0,e.end=this.stream.clipPos(s+1)}putAction(e,t,i,s){for(let r=0;r<s;r+=3)if(this.actions[r]==e)return s;return this.actions[s++]=e,this.actions[s++]=t,this.actions[s++]=i,s}addActions(e,t,i,s){let{state:r}=e,{parser:o}=e.p,{data:a}=o;for(let l=0;l<2;l++)for(let u=o.stateSlot(r,l?2:1);;u+=3){if(a[u]==65535)if(a[u+1]==1)u=Tn(a,u+2);else{s==0&&a[u+1]==2&&(s=this.putAction(Tn(a,u+2),t,i,s));break}a[u]==t&&(s=this.putAction(Tn(a,u+1),t,i,s))}return s}}class RD{constructor(e,t,i,s){this.parser=e,this.input=t,this.ranges=s,this.recovering=0,this.nextStackID=9812,this.minStackPos=0,this.reused=[],this.stoppedAt=null,this.lastBigReductionStart=-1,this.lastBigReductionSize=0,this.bigReductionCount=0,this.stream=new AD(t,s),this.tokens=new MD(e,this.stream),this.topTerm=e.top[1];let{from:r}=s[0];this.stacks=[Va.start(this,e.top[0],r)],this.fragments=i.length&&this.stream.end-r>e.bufferLength*4?new ED(i,e.nodeSet):null}get parsedPos(){return this.minStackPos}advance(){let e=this.stacks,t=this.minStackPos,i=this.stacks=[],s,r;if(this.bigReductionCount>300&&e.length==1){let[o]=e;for(;o.forceReduce()&&o.stack.length&&o.stack[o.stack.length-2]>=this.lastBigReductionStart;);this.bigReductionCount=this.lastBigReductionSize=0}for(let o=0;o<e.length;o++){let a=e[o];for(;;){if(this.tokens.mainToken=null,a.pos>t)i.push(a);else{if(this.advanceStack(a,i,e))continue;{s||(s=[],r=[]),s.push(a);let l=this.tokens.getMainToken(a);r.push(l.value,l.end)}}break}}if(!i.length){let o=s&&ND(s);if(o)return Ct&&console.log("Finish with "+this.stackID(o)),this.stackToTree(o);if(this.parser.strict)throw Ct&&s&&console.log("Stuck with token "+(this.tokens.mainToken?this.parser.getName(this.tokens.mainToken.value):"none")),new SyntaxError("No parse at "+t);this.recovering||(this.recovering=5)}if(this.recovering&&s){let o=this.stoppedAt!=null&&s[0].pos>this.stoppedAt?s[0]:this.runRecovery(s,r,i);if(o)return Ct&&console.log("Force-finish "+this.stackID(o)),this.stackToTree(o.forceAll())}if(this.recovering){let o=this.recovering==1?1:this.recovering*3;if(i.length>o)for(i.sort((a,l)=>l.score-a.score);i.length>o;)i.pop();i.some(a=>a.reducePos>t)&&this.recovering--}else if(i.length>1){e:for(let o=0;o<i.length-1;o++){let a=i[o];for(let l=o+1;l<i.length;l++){let u=i[l];if(a.sameState(u)||a.buffer.length>500&&u.buffer.length>500)if((a.score-u.score||a.buffer.length-u.buffer.length)>0)i.splice(l--,1);else{i.splice(o--,1);continue e}}}i.length>12&&i.splice(12,i.length-12)}this.minStackPos=i[0].pos;for(let o=1;o<i.length;o++)i[o].pos<this.minStackPos&&(this.minStackPos=i[o].pos);return null}stopAt(e){if(this.stoppedAt!=null&&this.stoppedAt<e)throw new RangeError("Can't move stoppedAt forward");this.stoppedAt=e}advanceStack(e,t,i){let s=e.pos,{parser:r}=this,o=Ct?this.stackID(e)+" -> ":"";if(this.stoppedAt!=null&&s>this.stoppedAt)return e.forceReduce()?e:null;if(this.fragments){let u=e.curContext&&e.curContext.tracker.strict,c=u?e.curContext.hash:0;for(let h=this.fragments.nodeAt(s);h;){let d=this.parser.nodeSet.types[h.type.id]==h.type?r.getGoto(e.state,h.type.id):-1;if(d>-1&&h.length&&(!u||(h.prop(Pe.contextHash)||0)==c))return e.useNode(h,d),Ct&&console.log(o+this.stackID(e)+` (via reuse of ${r.getName(h.type.id)})`),!0;if(!(h instanceof rt)||h.children.length==0||h.positions[0]>0)break;let f=h.children[0];if(f instanceof rt&&h.positions[0]==0)h=f;else break}}let a=r.stateSlot(e.state,4);if(a>0)return e.reduce(a),Ct&&console.log(o+this.stackID(e)+` (via always-reduce ${r.getName(a&65535)})`),!0;if(e.stack.length>=8400)for(;e.stack.length>6e3&&e.forceReduce(););let l=this.tokens.getActions(e);for(let u=0;u<l.length;){let c=l[u++],h=l[u++],d=l[u++],f=u==l.length||!i,p=f?e:e.split(),m=this.tokens.mainToken;if(p.apply(c,h,m?m.start:p.pos,d),Ct&&console.log(o+this.stackID(p)+` (via ${c&65536?`reduce of ${r.getName(c&65535)}`:"shift"} for ${r.getName(h)} @ ${s}${p==e?"":", split"})`),f)return!0;p.pos>s?t.push(p):i.push(p)}return!1}advanceFully(e,t){let i=e.pos;for(;;){if(!this.advanceStack(e,null,null))return!1;if(e.pos>i)return Ip(e,t),!0}}runRecovery(e,t,i){let s=null,r=!1;for(let o=0;o<e.length;o++){let a=e[o],l=t[o<<1],u=t[(o<<1)+1],c=Ct?this.stackID(a)+" -> ":"";if(a.deadEnd&&(r||(r=!0,a.restart(),Ct&&console.log(c+this.stackID(a)+" (restarted)"),this.advanceFully(a,i))))continue;let h=a.split(),d=c;for(let f=0;h.forceReduce()&&f<10&&(Ct&&console.log(d+this.stackID(h)+" (via force-reduce)"),!this.advanceFully(h,i));f++)Ct&&(d=this.stackID(h)+" -> ");for(let f of a.recoverByInsert(l))Ct&&console.log(c+this.stackID(f)+" (via recover-insert)"),this.advanceFully(f,i);this.stream.end>a.pos?(u==a.pos&&(u++,l=0),a.recoverByDelete(l,u),Ct&&console.log(c+this.stackID(a)+` (via recover-delete ${this.parser.getName(l)})`),Ip(a,i)):(!s||s.score<a.score)&&(s=a)}return s}stackToTree(e){return e.close(),rt.build({buffer:Xa.create(e),nodeSet:this.parser.nodeSet,topID:this.topTerm,maxBufferLength:this.parser.bufferLength,reused:this.reused,start:this.ranges[0].from,length:e.pos-this.ranges[0].from,minRepeatType:this.parser.minRepeatTerm})}stackID(e){let t=(fu||(fu=new WeakMap)).get(e);return t||fu.set(e,t=String.fromCodePoint(this.nextStackID++)),t+e}}function Ip(n,e){for(let t=0;t<e.length;t++){let i=e[t];if(i.pos==n.pos&&i.sameState(n)){e[t].score<n.score&&(e[t]=n);return}}e.push(n)}class ZD{constructor(e,t,i){this.source=e,this.flags=t,this.disabled=i}allows(e){return!this.disabled||this.disabled[e]==0}}const pu=n=>n;class DD{constructor(e){this.start=e.start,this.shift=e.shift||pu,this.reduce=e.reduce||pu,this.reuse=e.reuse||pu,this.hash=e.hash||(()=>0),this.strict=e.strict!==!1}}class Ba extends V0{constructor(e){if(super(),this.wrappers=[],e.version!=14)throw new RangeError(`Parser version (${e.version}) doesn't match runtime version (14)`);let t=e.nodeNames.split(" ");this.minRepeatTerm=t.length;for(let a=0;a<e.repeatNodeCount;a++)t.push("");let i=Object.keys(e.topRules).map(a=>e.topRules[a][1]),s=[];for(let a=0;a<t.length;a++)s.push([]);function r(a,l,u){s[a].push([l,l.deserialize(String(u))])}if(e.nodeProps)for(let a of e.nodeProps){let l=a[0];typeof l=="string"&&(l=Pe[l]);for(let u=1;u<a.length;){let c=a[u++];if(c>=0)r(c,l,a[u++]);else{let h=a[u+-c];for(let d=-c;d>0;d--)r(a[u++],l,h);u++}}}this.nodeSet=new Qh(t.map((a,l)=>At.define({name:l>=this.minRepeatTerm?void 0:a,id:l,props:s[l],top:i.indexOf(l)>-1,error:l==0,skipped:e.skippedNodes&&e.skippedNodes.indexOf(l)>-1}))),e.propSources&&(this.nodeSet=this.nodeSet.extend(...e.propSources)),this.strict=!1,this.bufferLength=N0;let o=ur(e.tokenData);this.context=e.context,this.specializerSpecs=e.specialized||[],this.specialized=new Uint16Array(this.specializerSpecs.length);for(let a=0;a<this.specializerSpecs.length;a++)this.specialized[a]=this.specializerSpecs[a].term;this.specializers=this.specializerSpecs.map(Lp),this.states=ur(e.states,Uint32Array),this.data=ur(e.stateData),this.goto=ur(e.goto),this.maxTerm=e.maxTerm,this.tokenizers=e.tokenizers.map(a=>typeof a=="number"?new vs(o,a):a),this.topRules=e.topRules,this.dialects=e.dialects||{},this.dynamicPrecedences=e.dynamicPrecedences||null,this.tokenPrecTable=e.tokenPrec,this.termNames=e.termNames||null,this.maxNode=this.nodeSet.types.length-1,this.dialect=this.parseDialect(),this.top=this.topRules[Object.keys(this.topRules)[0]]}createParse(e,t,i){let s=new RD(this,e,t,i);for(let r of this.wrappers)s=r(s,e,t,i);return s}getGoto(e,t,i=!1){let s=this.goto;if(t>=s[0])return-1;for(let r=s[t+1];;){let o=s[r++],a=o&1,l=s[r++];if(a&&i)return l;for(let u=r+(o>>1);r<u;r++)if(s[r]==e)return l;if(a)return-1}}hasAction(e,t){let i=this.data;for(let s=0;s<2;s++)for(let r=this.stateSlot(e,s?2:1),o;;r+=3){if((o=i[r])==65535)if(i[r+1]==1)o=i[r=Tn(i,r+2)];else{if(i[r+1]==2)return Tn(i,r+2);break}if(o==t||o==0)return Tn(i,r+1)}return 0}stateSlot(e,t){return this.states[e*6+t]}stateFlag(e,t){return(this.stateSlot(e,0)&t)>0}validAction(e,t){return!!this.allActions(e,i=>i==t?!0:null)}allActions(e,t){let i=this.stateSlot(e,4),s=i?t(i):void 0;for(let r=this.stateSlot(e,1);s==null;r+=3){if(this.data[r]==65535)if(this.data[r+1]==1)r=Tn(this.data,r+2);else break;s=t(Tn(this.data,r+1))}return s}nextStates(e){let t=[];for(let i=this.stateSlot(e,1);;i+=3){if(this.data[i]==65535)if(this.data[i+1]==1)i=Tn(this.data,i+2);else break;if(!(this.data[i+2]&1)){let s=this.data[i+1];t.some((r,o)=>o&1&&r==s)||t.push(this.data[i],s)}}return t}configure(e){let t=Object.assign(Object.create(Ba.prototype),this);if(e.props&&(t.nodeSet=this.nodeSet.extend(...e.props)),e.top){let i=this.topRules[e.top];if(!i)throw new RangeError(`Invalid top rule name ${e.top}`);t.top=i}return e.tokenizers&&(t.tokenizers=this.tokenizers.map(i=>{let s=e.tokenizers.find(r=>r.from==i);return s?s.to:i})),e.specializers&&(t.specializers=this.specializers.slice(),t.specializerSpecs=this.specializerSpecs.map((i,s)=>{let r=e.specializers.find(a=>a.from==i.external);if(!r)return i;let o=Object.assign(Object.assign({},i),{external:r.to});return t.specializers[s]=Lp(o),o})),e.contextTracker&&(t.context=e.contextTracker),e.dialect&&(t.dialect=this.parseDialect(e.dialect)),e.strict!=null&&(t.strict=e.strict),e.wrap&&(t.wrappers=t.wrappers.concat(e.wrap)),e.bufferLength!=null&&(t.bufferLength=e.bufferLength),t}hasWrappers(){return this.wrappers.length>0}getName(e){return this.termNames?this.termNames[e]:String(e<=this.maxNode&&this.nodeSet.types[e].name||e)}get eofTerm(){return this.maxNode+1}get topNode(){return this.nodeSet.types[this.top[1]]}dynamicPrecedence(e){let t=this.dynamicPrecedences;return t==null?0:t[e]||0}parseDialect(e){let t=Object.keys(this.dialects),i=t.map(()=>!1);if(e)for(let r of e.split(" ")){let o=t.indexOf(r);o>=0&&(i[o]=!0)}let s=null;for(let r=0;r<t.length;r++)if(!i[r])for(let o=this.dialects[t[r]],a;(a=this.data[o++])!=65535;)(s||(s=new Uint8Array(this.maxTerm+1)))[a]=1;return new ZD(e,i,s)}static deserialize(e){return new Ba(e)}}function Tn(n,e){return n[e]|n[e+1]<<16}function ND(n){let e=null;for(let t of n){let i=t.p.stoppedAt;(t.pos==t.p.stream.end||i!=null&&t.pos>i)&&t.p.parser.stateFlag(t.state,2)&&(!e||e.score<t.score)&&(e=t)}return e}function Lp(n){if(n.external){let e=n.extend?1:0;return(t,i)=>n.external(t,i)<<1|e}return n.get}const ID=314,LD=315,zp=1,zD=2,VD=3,XD=4,BD=316,UD=318,jD=319,WD=5,qD=6,YD=0,Bc=[9,10,11,12,13,32,133,160,5760,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8232,8233,8239,8287,12288],ky=125,GD=59,Uc=47,HD=42,FD=43,KD=45,JD=60,eN=44,tN=63,nN=46,iN=91,sN=new DD({start:!1,shift(n,e){return e==WD||e==qD||e==UD?n:e==jD},strict:!1}),rN=new Kr((n,e)=>{let{next:t}=n;(t==ky||t==-1||e.context)&&n.acceptToken(BD)},{contextual:!0,fallback:!0}),oN=new Kr((n,e)=>{let{next:t}=n,i;Bc.indexOf(t)>-1||t==Uc&&((i=n.peek(1))==Uc||i==HD)||t!=ky&&t!=GD&&t!=-1&&!e.context&&n.acceptToken(ID)},{contextual:!0}),aN=new Kr((n,e)=>{n.next==iN&&!e.context&&n.acceptToken(LD)},{contextual:!0}),lN=new Kr((n,e)=>{let{next:t}=n;if(t==FD||t==KD){if(n.advance(),t==n.next){n.advance();let i=!e.context&&e.canShift(zp);n.acceptToken(i?zp:zD)}}else t==tN&&n.peek(1)==nN&&(n.advance(),n.advance(),(n.next<48||n.next>57)&&n.acceptToken(VD))},{contextual:!0});function mu(n,e){return n>=65&&n<=90||n>=97&&n<=122||n==95||n>=192||!e&&n>=48&&n<=57}const uN=new Kr((n,e)=>{if(n.next!=JD||!e.dialectEnabled(YD)||(n.advance(),n.next==Uc))return;let t=0;for(;Bc.indexOf(n.next)>-1;)n.advance(),t++;if(mu(n.next,!0)){for(n.advance(),t++;mu(n.next,!1);)n.advance(),t++;for(;Bc.indexOf(n.next)>-1;)n.advance(),t++;if(n.next==eN)return;for(let i=0;;i++){if(i==7){if(!mu(n.next,!0))return;break}if(n.next!="extends".charCodeAt(i))break;n.advance(),t++}}n.acceptToken(XD,-t)}),cN=X0({"get set async static":I.modifier,"for while do if else switch try catch finally return throw break continue default case":I.controlKeyword,"in of await yield void typeof delete instanceof":I.operatorKeyword,"let var const using function class extends":I.definitionKeyword,"import export from":I.moduleKeyword,"with debugger as new":I.keyword,TemplateString:I.special(I.string),super:I.atom,BooleanLiteral:I.bool,this:I.self,null:I.null,Star:I.modifier,VariableName:I.variableName,"CallExpression/VariableName TaggedTemplateExpression/VariableName":I.function(I.variableName),VariableDefinition:I.definition(I.variableName),Label:I.labelName,PropertyName:I.propertyName,PrivatePropertyName:I.special(I.propertyName),"CallExpression/MemberExpression/PropertyName":I.function(I.propertyName),"FunctionDeclaration/VariableDefinition":I.function(I.definition(I.variableName)),"ClassDeclaration/VariableDefinition":I.definition(I.className),"NewExpression/VariableName":I.className,PropertyDefinition:I.definition(I.propertyName),PrivatePropertyDefinition:I.definition(I.special(I.propertyName)),UpdateOp:I.updateOperator,"LineComment Hashbang":I.lineComment,BlockComment:I.blockComment,Number:I.number,String:I.string,Escape:I.escape,ArithOp:I.arithmeticOperator,LogicOp:I.logicOperator,BitOp:I.bitwiseOperator,CompareOp:I.compareOperator,RegExp:I.regexp,Equals:I.definitionOperator,Arrow:I.function(I.punctuation),": Spread":I.punctuation,"( )":I.paren,"[ ]":I.squareBracket,"{ }":I.brace,"InterpolationStart InterpolationEnd":I.special(I.brace),".":I.derefOperator,", ;":I.separator,"@":I.meta,TypeName:I.typeName,TypeDefinition:I.definition(I.typeName),"type enum interface implements namespace module declare":I.definitionKeyword,"abstract global Privacy readonly override":I.modifier,"is keyof unique infer asserts":I.operatorKeyword,JSXAttributeValue:I.attributeValue,JSXText:I.content,"JSXStartTag JSXStartCloseTag JSXSelfCloseEndTag JSXEndTag":I.angleBracket,"JSXIdentifier JSXNameSpacedName":I.tagName,"JSXAttribute/JSXIdentifier JSXAttribute/JSXNameSpacedName":I.attributeName,"JSXBuiltin/JSXIdentifier":I.standard(I.tagName)}),hN={__proto__:null,export:20,as:25,from:33,default:36,async:41,function:42,const:52,extends:56,this:60,true:68,false:68,null:80,void:84,typeof:88,super:104,new:138,delete:150,yield:159,await:163,class:168,public:231,private:231,protected:231,readonly:233,instanceof:252,satisfies:255,in:256,import:290,keyof:347,unique:351,infer:357,asserts:393,is:395,abstract:415,implements:417,type:419,let:422,var:424,using:427,interface:433,enum:437,namespace:443,module:445,declare:449,global:453,for:472,of:481,while:484,with:488,do:492,if:496,else:498,switch:502,case:508,try:514,catch:518,finally:522,return:526,throw:530,break:534,continue:538,debugger:542},dN={__proto__:null,async:125,get:127,set:129,declare:191,public:193,private:193,protected:193,static:195,abstract:197,override:199,readonly:205,accessor:207,new:399},fN={__proto__:null,"<":189},pN=Ba.deserialize({version:14,states:"$EOQ%TQlOOO%[QlOOO'_QpOOP(lO`OOO*zQ!0MxO'#CiO+RO#tO'#CjO+aO&jO'#CjO+oO#@ItO'#D_O.QQlO'#DeO.bQlO'#DpO%[QlO'#DxO0fQlO'#EQOOQ!0Lf'#EY'#EYO1PQ`O'#EVOOQO'#En'#EnOOQO'#Ij'#IjO1XQ`O'#GrO1dQ`O'#EmO1iQ`O'#EmO3hQ!0MxO'#JpO6[Q!0MxO'#JqO6uQ`O'#F[O6zQ,UO'#FsOOQ!0Lf'#Fe'#FeO7VO7dO'#FeO7eQMhO'#F{O9UQ`O'#FzOOQ!0Lf'#Jq'#JqOOQ!0Lb'#Jp'#JpO9ZQ`O'#GvOOQ['#K]'#K]O9fQ`O'#IWO9kQ!0LrO'#IXOOQ['#J^'#J^OOQ['#I]'#I]Q`QlOOQ`QlOOO9sQ!L^O'#DtO9zQlO'#D|O:RQlO'#EOO9aQ`O'#GrO:YQMhO'#CoO:hQ`O'#ElO:sQ`O'#EwO:xQMhO'#FdO;gQ`O'#GrOOQO'#K^'#K^O;lQ`O'#K^O;zQ`O'#GzO;zQ`O'#G{O;zQ`O'#G}O9aQ`O'#HQO<qQ`O'#HTO>YQ`O'#CeO>jQ`O'#HaO>rQ`O'#HgO>rQ`O'#HiO`QlO'#HkO>rQ`O'#HmO>rQ`O'#HpO>wQ`O'#HvO>|Q!0LsO'#H|O%[QlO'#IOO?XQ!0LsO'#IQO?dQ!0LsO'#ISO9kQ!0LrO'#IUO?oQ!0MxO'#CiO@qQpO'#DjQOQ`OOO%[QlO'#EOOAXQ`O'#ERO:YQMhO'#ElOAdQ`O'#ElOAoQ!bO'#FdOOQ['#Cg'#CgOOQ!0Lb'#Do'#DoOOQ!0Lb'#Jt'#JtO%[QlO'#JtOOQO'#Jw'#JwOOQO'#If'#IfOBoQpO'#EeOOQ!0Lb'#Ed'#EdOOQ!0Lb'#J{'#J{OCkQ!0MSO'#EeOCuQpO'#EUOOQO'#Jv'#JvODZQpO'#JwOEhQpO'#EUOCuQpO'#EePEuO&2DjO'#CbPOOO)CD{)CD{OOOO'#I^'#I^OFQO#tO,59UOOQ!0Lh,59U,59UOOOO'#I_'#I_OF`O&jO,59UOFnQ!L^O'#DaOOOO'#Ia'#IaOFuO#@ItO,59yOOQ!0Lf,59y,59yOGTQlO'#IbOGhQ`O'#JrOIgQ!fO'#JrO+}QlO'#JrOInQ`O,5:POJUQ`O'#EnOJcQ`O'#KROJnQ`O'#KQOJnQ`O'#KQOJvQ`O,5;[OJ{Q`O'#KPOOQ!0Ln,5:[,5:[OKSQlO,5:[OMQQ!0MxO,5:dOMqQ`O,5:lON[Q!0LrO'#KOONcQ`O'#J}O9ZQ`O'#J}ONwQ`O'#J}O! PQ`O,5;ZO! UQ`O'#J}O!#ZQ!fO'#JqOOQ!0Lh'#Ci'#CiO%[QlO'#EQO!#yQ!fO,5:qOOQS'#Jx'#JxOOQO-E<h-E<hO9aQ`O,5=^O!$aQ`O,5=^O!$fQlO,5;XO!&iQMhO'#EiO!(SQ`O,5;XO!(XQlO'#DwO!(cQpO,5;bO!(kQpO,5;bO%[QlO,5;bOOQ['#FS'#FSOOQ['#FU'#FUO%[QlO,5;cO%[QlO,5;cO%[QlO,5;cO%[QlO,5;cO%[QlO,5;cO%[QlO,5;cO%[QlO,5;cO%[QlO,5;cO%[QlO,5;cO%[QlO,5;cOOQ['#FY'#FYO!(yQlO,5;sOOQ!0Lf,5;x,5;xOOQ!0Lf,5;y,5;yOOQ!0Lf,5;{,5;{O%[QlO'#InO!*|Q!0LrO,5<hO%[QlO,5;cO!&iQMhO,5;cO!+kQMhO,5;cO!-]QMhO'#E[O%[QlO,5;vOOQ!0Lf,5;z,5;zO!-dQ,UO'#FiO!.aQ,UO'#KVO!-{Q,UO'#KVO!.hQ,UO'#KVOOQO'#KV'#KVO!.|Q,UO,5<ROOOW,5<_,5<_O!/_QlO'#FuOOOW'#Im'#ImO7VO7dO,5<PO!/fQ,UO'#FwOOQ!0Lf,5<P,5<PO!0VQ$IUO'#CwOOQ!0Lh'#C{'#C{O!0jO#@ItO'#DPO!1WQMjO,5<dO!1_Q`O,5<gO!2zQ(CWO'#GWO!3XQ`O'#GXO!3^Q`O'#GXO!4|Q(CWO'#G]O!6RQpO'#GaOOQO'#Gm'#GmO!+rQMhO'#GlOOQO'#Go'#GoO!+rQMhO'#GnO!6tQ$IUO'#JjOOQ!0Lh'#Jj'#JjO!7OQ`O'#JiO!7^Q`O'#JhO!7fQ`O'#CuOOQ!0Lh'#Cy'#CyO!7qQ`O'#C{OOQ!0Lh'#DT'#DTOOQ!0Lh'#DV'#DVO1SQ`O'#DXO!+rQMhO'#GOO!+rQMhO'#GQO!7vQ`O'#GSO!7{Q`O'#GTO!3^Q`O'#GZO!+rQMhO'#G`O;zQ`O'#JiO!8QQ`O'#EoO!8oQ`O,5<fOOQ!0Lb'#Cr'#CrO!8wQ`O'#EpO!9qQpO'#EqOOQ!0Lb'#KP'#KPO!9xQ!0LrO'#K_O9kQ!0LrO,5=bO`QlO,5>rOOQ['#Jf'#JfOOQ[,5>s,5>sOOQ[-E<Z-E<ZO!;wQ!0MxO,5:`O!9lQpO,5:^O!>bQ!0MxO,5:hO%[QlO,5:hO!@xQ!0MxO,5:jOOQO,5@x,5@xO!AiQMhO,5=^O!AwQ!0LrO'#JgO9UQ`O'#JgO!BYQ!0LrO,59ZO!BeQpO,59ZO!BmQMhO,59ZO:YQMhO,59ZO!BxQ`O,5;XO!CQQ`O'#H`O!CfQ`O'#KbO%[QlO,5;|O!9lQpO,5<OO!CnQ`O,5=yO!CsQ`O,5=yO!CxQ`O,5=yO9kQ!0LrO,5=yO;zQ`O,5=iOOQO'#Cw'#CwO!DWQpO,5=fO!D`QMhO,5=gO!DkQ`O,5=iO!DpQ!bO,5=lO!DxQ`O'#K^O>wQ`O'#HVO9aQ`O'#HXO!D}Q`O'#HXO:YQMhO'#HZO!ESQ`O'#HZOOQ[,5=o,5=oO!EXQ`O'#H[O!EjQ`O'#CoO!EoQ`O,59PO!EyQ`O,59PO!HOQlO,59POOQ[,59P,59PO!H`Q!0LrO,59PO%[QlO,59PO!JkQlO'#HcOOQ['#Hd'#HdOOQ['#He'#HeO`QlO,5={O!KRQ`O,5={O`QlO,5>RO`QlO,5>TO!KWQ`O,5>VO`QlO,5>XO!K]Q`O,5>[O!KbQlO,5>bOOQ[,5>h,5>hO%[QlO,5>hO9kQ!0LrO,5>jOOQ[,5>l,5>lO# lQ`O,5>lOOQ[,5>n,5>nO# lQ`O,5>nOOQ[,5>p,5>pO#!YQpO'#D]O%[QlO'#JtO#!{QpO'#JtO##VQpO'#DkO##hQpO'#DkO#%yQlO'#DkO#&QQ`O'#JsO#&YQ`O,5:UO#&_Q`O'#ErO#&mQ`O'#KSO#&uQ`O,5;]O#&zQpO'#DkO#'XQpO'#ETOOQ!0Lf,5:m,5:mO%[QlO,5:mO#'`Q`O,5:mO>wQ`O,5;WO!BeQpO,5;WO!BmQMhO,5;WO:YQMhO,5;WO#'hQ`O,5@`O#'mQ07dO,5:qOOQO-E<d-E<dO#(sQ!0MSO,5;POCuQpO,5:pO#(}QpO,5:pOCuQpO,5;PO!BYQ!0LrO,5:pOOQ!0Lb'#Eh'#EhOOQO,5;P,5;PO%[QlO,5;PO#)[Q!0LrO,5;PO#)gQ!0LrO,5;PO!BeQpO,5:pOOQO,5;V,5;VO#)uQ!0LrO,5;PPOOO'#I['#I[P#*ZO&2DjO,58|POOO,58|,58|OOOO-E<[-E<[OOQ!0Lh1G.p1G.pOOOO-E<]-E<]OOOO,59{,59{O#*fQ!bO,59{OOOO-E<_-E<_OOQ!0Lf1G/e1G/eO#*kQ!fO,5>|O+}QlO,5>|OOQO,5?S,5?SO#*uQlO'#IbOOQO-E<`-E<`O#+SQ`O,5@^O#+[Q!fO,5@^O#+cQ`O,5@lOOQ!0Lf1G/k1G/kO%[QlO,5@mO#+kQ`O'#IhOOQO-E<f-E<fO#+cQ`O,5@lOOQ!0Lb1G0v1G0vOOQ!0Ln1G/v1G/vOOQ!0Ln1G0W1G0WO%[QlO,5@jO#,PQ!0LrO,5@jO#,bQ!0LrO,5@jO#,iQ`O,5@iO9ZQ`O,5@iO#,qQ`O,5@iO#-PQ`O'#IkO#,iQ`O,5@iOOQ!0Lb1G0u1G0uO!(cQpO,5:sO!(nQpO,5:sOOQS,5:u,5:uO#-qQdO,5:uO#-yQMhO1G2xO9aQ`O1G2xOOQ!0Lf1G0s1G0sO#.XQ!0MxO1G0sO#/^Q!0MvO,5;TOOQ!0Lh'#GV'#GVO#/zQ!0MzO'#JjO!$fQlO1G0sO#2VQ!fO'#JuO%[QlO'#JuO#2aQ`O,5:cOOQ!0Lh'#D]'#D]OOQ!0Lf1G0|1G0|O%[QlO1G0|OOQ!0Lf1G1e1G1eO#2fQ`O1G0|O#4zQ!0MxO1G0}O#5RQ!0MxO1G0}O#7iQ!0MxO1G0}O#7pQ!0MxO1G0}O#:WQ!0MxO1G0}O#<nQ!0MxO1G0}O#<uQ!0MxO1G0}O#<|Q!0MxO1G0}O#?dQ!0MxO1G0}O#?kQ!0MxO1G0}O#AxQ?MtO'#CiO#CsQ?MtO1G1_O#CzQ?MtO'#JqO#D_Q!0MxO,5?YOOQ!0Lb-E<l-E<lO#FlQ!0MxO1G0}O#GiQ!0MzO1G0}OOQ!0Lf1G0}1G0}O#HlQMjO'#JzO#HvQ`O,5:vO#H{Q!0MxO1G1bO#IoQ,UO,5<VO#IwQ,UO,5<WO#JPQ,UO'#FnO#JhQ`O'#FmOOQO'#KW'#KWOOQO'#Il'#IlO#JmQ,UO1G1mOOQ!0Lf1G1m1G1mOOOW1G1x1G1xO#KOQ?MtO'#JpO#KYQ`O,5<aO!(yQlO,5<aOOOW-E<k-E<kOOQ!0Lf1G1k1G1kO#K_QpO'#KVOOQ!0Lf,5<c,5<cO#KgQpO,5<cO#KlQMhO'#DROOOO'#I`'#I`O#KsO#@ItO,59kOOQ!0Lh,59k,59kO%[QlO1G2OO!7{Q`O'#IpO#LOQ`O,5<yOOQ!0Lh,5<v,5<vO!+rQMhO'#IsO#LlQMjO,5=WO!+rQMhO'#IuO#M_QMjO,5=YO!&iQMhO,5=[OOQO1G2R1G2RO#MiQ!dO'#CrO#M|Q(CWO'#EpO$ RQpO'#GaO$ iQ!dO,5<rO$ pQ`O'#KYO9ZQ`O'#KYO$!OQ`O,5<tO!+rQMhO,5<sO$!TQ`O'#GYO$!fQ`O,5<sO$!kQ!dO'#GVO$!xQ!dO'#KZO$#SQ`O'#KZO!&iQMhO'#KZO$#XQ`O,5<wO$#^QlO'#JtO$#hQpO'#GbO##hQpO'#GbO$#yQ`O'#GfO!3^Q`O'#GjO$$OQ!0LrO'#IrO$$ZQpO,5<{OOQ!0Lp,5<{,5<{O$$bQpO'#GbO$$oQpO'#GcO$%QQpO'#GcO$%VQMjO,5=WO$%gQMjO,5=YOOQ!0Lh,5=],5=]O!+rQMhO,5@TO!+rQMhO,5@TO$%wQ`O'#IwO$&VQ`O,5@SO$&_Q`O,59aOOQ!0Lh,59g,59gO$'UQ$IYO,59sOOQ!0Lh'#Jn'#JnO$'wQMjO,5<jO$(jQMjO,5<lO@iQ`O,5<nOOQ!0Lh,5<o,5<oO$(tQ`O,5<uO$(yQMjO,5<zO$)ZQ`O,5@TO$)iQ`O'#J}O!$fQlO1G2QO$)nQ`O1G2QO9ZQ`O'#KQO9ZQ`O'#ErO%[QlO'#ErO9ZQ`O'#IyO$)sQ!0LrO,5@yOOQ[1G2|1G2|OOQ[1G4^1G4^OOQ!0Lf1G/z1G/zOOQ!0Lf1G/x1G/xO$+uQ!0MxO1G0SOOQ[1G2x1G2xO!&iQMhO1G2xO%[QlO1G2xO#-|Q`O1G2xO$-yQMhO'#EiOOQ!0Lb,5@R,5@RO$.WQ!0LrO,5@ROOQ[1G.u1G.uO!BYQ!0LrO1G.uO!BeQpO1G.uO!BmQMhO1G.uO$.iQ`O1G0sO$.nQ`O'#CiO$.yQ`O'#KcO$/RQ`O,5=zO$/WQ`O'#KcO$/]Q`O'#KcO$/kQ`O'#JPO$/yQ`O,5@|O$0RQ!fO1G1hOOQ!0Lf1G1j1G1jO9aQ`O1G3eO@iQ`O1G3eO$0YQ`O1G3eO$0_Q`O1G3eOOQ[1G3e1G3eO!DkQ`O1G3TO!&iQMhO1G3QO$0dQ`O1G3QOOQ[1G3R1G3RO!&iQMhO1G3RO$0iQ`O1G3RO$0qQpO'#HPOOQ[1G3T1G3TO!5|QpO'#I{O!DpQ!bO1G3WOOQ[1G3W1G3WOOQ[,5=q,5=qO$0yQMhO,5=sO9aQ`O,5=sO$#yQ`O,5=uO9UQ`O,5=uO!BeQpO,5=uO!BmQMhO,5=uO:YQMhO,5=uO$1XQ`O'#KaO$1dQ`O,5=vOOQ[1G.k1G.kO$1iQ!0LrO1G.kO@iQ`O1G.kO$1tQ`O1G.kO9kQ!0LrO1G.kO$3|Q!fO,5AOO$4ZQ`O,5AOO9ZQ`O,5AOO$4fQlO,5=}O$4mQ`O,5=}OOQ[1G3g1G3gO`QlO1G3gOOQ[1G3m1G3mOOQ[1G3o1G3oO>rQ`O1G3qO$4rQlO1G3sO$8vQlO'#HrOOQ[1G3v1G3vO$9TQ`O'#HxO>wQ`O'#HzOOQ[1G3|1G3|O$9]QlO1G3|O9kQ!0LrO1G4SOOQ[1G4U1G4UOOQ!0Lb'#G^'#G^O9kQ!0LrO1G4WO9kQ!0LrO1G4YO$=dQ`O,5@`O!(yQlO,5;^O9ZQ`O,5;^O>wQ`O,5:VO!(yQlO,5:VO!BeQpO,5:VO$=iQ?MtO,5:VOOQO,5;^,5;^O$=sQpO'#IcO$>ZQ`O,5@_OOQ!0Lf1G/p1G/pO$>cQpO'#IiO$>mQ`O,5@nOOQ!0Lb1G0w1G0wO##hQpO,5:VOOQO'#Ie'#IeO$>uQpO,5:oOOQ!0Ln,5:o,5:oO#'cQ`O1G0XOOQ!0Lf1G0X1G0XO%[QlO1G0XOOQ!0Lf1G0r1G0rO>wQ`O1G0rO!BeQpO1G0rO!BmQMhO1G0rOOQ!0Lb1G5z1G5zO!BYQ!0LrO1G0[OOQO1G0k1G0kO%[QlO1G0kO$>|Q!0LrO1G0kO$?XQ!0LrO1G0kO!BeQpO1G0[OCuQpO1G0[O$?gQ!0LrO1G0kOOQO1G0[1G0[O$?{Q!0MxO1G0kPOOO-E<Y-E<YPOOO1G.h1G.hOOOO1G/g1G/gO$@VQ!bO,5<hO$@_Q!fO1G4hOOQO1G4n1G4nO%[QlO,5>|O$@iQ`O1G5xO$@qQ`O1G6WO$@yQ!fO1G6XO9ZQ`O,5?SO$ATQ!0MxO1G6UO%[QlO1G6UO$AeQ!0LrO1G6UO$AvQ`O1G6TO$AvQ`O1G6TO9ZQ`O1G6TO$BOQ`O,5?VO9ZQ`O,5?VOOQO,5?V,5?VO$BdQ`O,5?VO$)iQ`O,5?VOOQO-E<i-E<iOOQS1G0_1G0_OOQS1G0a1G0aO#-tQ`O1G0aOOQ[7+(d7+(dO!&iQMhO7+(dO%[QlO7+(dO$BrQ`O7+(dO$B}QMhO7+(dO$C]Q!0MzO,5=WO$EhQ!0MzO,5=YO$GsQ!0MzO,5=WO$JUQ!0MzO,5=YO$LgQ!0MzO,59sO$NlQ!0MzO,5<jO%!wQ!0MzO,5<lO%%SQ!0MzO,5<zOOQ!0Lf7+&_7+&_O%'eQ!0MxO7+&_O%(XQlO'#IdO%(fQ`O,5@aO%(nQ!fO,5@aOOQ!0Lf1G/}1G/}O%(xQ`O7+&hOOQ!0Lf7+&h7+&hO%(}Q?MtO,5:dO%[QlO7+&yO%)XQ?MtO,5:`O%)fQ?MtO,5:hO%)pQ?MtO,5:jO%)zQMhO'#IgO%*UQ`O,5@fOOQ!0Lh1G0b1G0bOOQO1G1q1G1qOOQO1G1r1G1rO%*^Q!jO,5<YO!(yQlO,5<XOOQO-E<j-E<jOOQ!0Lf7+'X7+'XOOOW7+'d7+'dOOOW1G1{1G1{O%*iQ`O1G1{OOQ!0Lf1G1}1G1}OOOO,59m,59mO%*nQ!dO,59mOOOO-E<^-E<^OOQ!0Lh1G/V1G/VO%*uQ!0MxO7+'jOOQ!0Lh,5?[,5?[O%+iQMhO1G2eP%+pQ`O'#IpPOQ!0Lh-E<n-E<nO%,^QMjO,5?_OOQ!0Lh-E<q-E<qO%-PQMjO,5?aOOQ!0Lh-E<s-E<sO%-ZQ!dO1G2vO%-bQ!dO'#CrO%-xQMhO'#KQO$#^QlO'#JtOOQ!0Lh1G2^1G2^O%.PQ`O'#IoO%.eQ`O,5@tO%.eQ`O,5@tO%.mQ`O,5@tO%.xQ`O,5@tOOQO1G2`1G2`O%/WQMjO1G2_O!+rQMhO1G2_O%/hQ(CWO'#IqO%/uQ`O,5@uO!&iQMhO,5@uO%/}Q!dO,5@uOOQ!0Lh1G2c1G2cO%2_Q!fO'#CiO%2iQ`O,5=OOOQ!0Lb,5<|,5<|O%2qQpO,5<|OOQ!0Lb,5<},5<}OCfQ`O,5<|O%2|QpO,5<|OOQ!0Lb,5=Q,5=QO$)iQ`O,5=UOOQO,5?^,5?^OOQO-E<p-E<pOOQ!0Lp1G2g1G2gO##hQpO,5<|O$#^QlO,5=OO%3[Q`O,5<}O%3gQpO,5<}O!+rQMhO'#IsO%4aQMjO1G2rO!+rQMhO'#IuO%5SQMjO1G2tO%5^QMjO1G5oO%5hQMjO1G5oOOQO,5?c,5?cOOQO-E<u-E<uOOQO1G.{1G.{O!9lQpO,59uO%[QlO,59uOOQ!0Lh,5<i,5<iO%5uQ`O1G2YO!+rQMhO1G2aO!+rQMhO1G5oO!+rQMhO1G5oO%5zQ!0MxO7+'lOOQ!0Lf7+'l7+'lO!$fQlO7+'lO%6nQ`O,5;^OOQ!0Lb,5?e,5?eOOQ!0Lb-E<w-E<wO%6sQ!dO'#K[O#'cQ`O7+(dO4UQ!fO7+(dO$BuQ`O7+(dO%6}Q!0MvO'#CiO%7nQ!0LrO,5=RO%8PQ!0MvO,5=RO%8dQ`O,5=ROOQ!0Lb1G5m1G5mOOQ[7+$a7+$aO!BYQ!0LrO7+$aO!BeQpO7+$aO!$fQlO7+&_O%8lQ`O'#JOO%9TQ`O,5@}OOQO1G3f1G3fO9aQ`O,5@}O%9TQ`O,5@}O%9]Q`O,5@}OOQO,5?k,5?kOOQO-E<}-E<}OOQ!0Lf7+'S7+'SO%9bQ`O7+)PO9kQ!0LrO7+)PO9aQ`O7+)PO@iQ`O7+)POOQ[7+(o7+(oO%9gQ!0MvO7+(lO!&iQMhO7+(lO!DfQ`O7+(mOOQ[7+(m7+(mO!&iQMhO7+(mO%9qQ`O'#K`O%9|Q`O,5=kOOQO,5?g,5?gOOQO-E<y-E<yOOQ[7+(r7+(rO%;`QpO'#HYOOQ[1G3_1G3_O!&iQMhO1G3_O%[QlO1G3_O%;gQ`O1G3_O%;rQMhO1G3_O9kQ!0LrO1G3aO$#yQ`O1G3aO9UQ`O1G3aO!BeQpO1G3aO!BmQMhO1G3aO%<QQ`O'#I}O%<fQ`O,5@{O%<nQpO,5@{OOQ!0Lb1G3b1G3bOOQ[7+$V7+$VO@iQ`O7+$VO9kQ!0LrO7+$VO%<yQ`O7+$VO%[QlO1G6jO%[QlO1G6kO%=OQ!0LrO1G6jO%=YQlO1G3iO%=aQ`O1G3iO%=fQlO1G3iOOQ[7+)R7+)RO9kQ!0LrO7+)]O`QlO7+)_OOQ['#Kf'#KfOOQ['#JQ'#JQO%=mQlO,5>^OOQ[,5>^,5>^O%[QlO'#HsO%=zQ`O'#HuOOQ[,5>d,5>dO9ZQ`O,5>dOOQ[,5>f,5>fOOQ[7+)h7+)hOOQ[7+)n7+)nOOQ[7+)r7+)rOOQ[7+)t7+)tO%>PQpO1G5zO%>kQ?MtO1G0xO%>uQ`O1G0xOOQO1G/q1G/qO%?QQ?MtO1G/qO>wQ`O1G/qO!(yQlO'#DkOOQO,5>},5>}OOQO-E<a-E<aOOQO,5?T,5?TOOQO-E<g-E<gO!BeQpO1G/qOOQO-E<c-E<cOOQ!0Ln1G0Z1G0ZOOQ!0Lf7+%s7+%sO#'cQ`O7+%sOOQ!0Lf7+&^7+&^O>wQ`O7+&^O!BeQpO7+&^OOQO7+%v7+%vO$?{Q!0MxO7+&VOOQO7+&V7+&VO%[QlO7+&VO%?[Q!0LrO7+&VO!BYQ!0LrO7+%vO!BeQpO7+%vO%?gQ!0LrO7+&VO%?uQ!0MxO7++pO%[QlO7++pO%@VQ`O7++oO%@VQ`O7++oOOQO1G4q1G4qO9ZQ`O1G4qO%@_Q`O1G4qOOQS7+%{7+%{O#'cQ`O<<LOO4UQ!fO<<LOO%@mQ`O<<LOOOQ[<<LO<<LOO!&iQMhO<<LOO%[QlO<<LOO%@uQ`O<<LOO%AQQ!0MzO,5?_O%C]Q!0MzO,5?aO%EhQ!0MzO1G2_O%GyQ!0MzO1G2rO%JUQ!0MzO1G2tO%LaQ!fO,5?OO%[QlO,5?OOOQO-E<b-E<bO%LkQ`O1G5{OOQ!0Lf<<JS<<JSO%LsQ?MtO1G0sO%NzQ?MtO1G0}O& RQ?MtO1G0}O&#SQ?MtO1G0}O&#ZQ?MtO1G0}O&%[Q?MtO1G0}O&']Q?MtO1G0}O&'dQ?MtO1G0}O&'kQ?MtO1G0}O&)lQ?MtO1G0}O&)sQ?MtO1G0}O&)zQ!0MxO<<JeO&+rQ?MtO1G0}O&,oQ?MvO1G0}O&-rQ?MvO'#JjO&/xQ?MtO1G1bO&0VQ?MtO1G0SO&0aQMjO,5?ROOQO-E<e-E<eO!(yQlO'#FpOOQO'#KX'#KXOOQO1G1t1G1tO&0kQ`O1G1sO&0pQ?MtO,5?YOOOW7+'g7+'gOOOO1G/X1G/XO&0zQ!dO1G4vOOQ!0Lh7+(P7+(PP!&iQMhO,5?[O!+rQMhO7+(bO&1RQ`O,5?ZO9ZQ`O,5?ZOOQO-E<m-E<mO&1aQ`O1G6`O&1aQ`O1G6`O&1iQ`O1G6`O&1tQMjO7+'yO&2UQ!dO,5?]O&2`Q`O,5?]O!&iQMhO,5?]OOQO-E<o-E<oO&2eQ!dO1G6aO&2oQ`O1G6aO&2wQ`O1G2jO!&iQMhO1G2jOOQ!0Lb1G2h1G2hOOQ!0Lb1G2i1G2iO%2qQpO1G2hO!BeQpO1G2hOCfQ`O1G2hOOQ!0Lb1G2p1G2pO&2|QpO1G2hO&3[Q`O1G2jO$)iQ`O1G2iOCfQ`O1G2iO$#^QlO1G2jO&3dQ`O1G2iO&4WQMjO,5?_OOQ!0Lh-E<r-E<rO&4yQMjO,5?aOOQ!0Lh-E<t-E<tO!+rQMhO7++ZOOQ!0Lh1G/a1G/aO&5TQ`O1G/aOOQ!0Lh7+'t7+'tO&5YQMjO7+'{O&5jQMjO7++ZO&5tQMjO7++ZO&6RQ!0MxO<<KWOOQ!0Lf<<KW<<KWO&6uQ`O1G0xO!&iQMhO'#IxO&6zQ`O,5@vO&8|Q!fO<<LOO!&iQMhO1G2mO&9TQ!0LrO1G2mOOQ[<<G{<<G{O!BYQ!0LrO<<G{O&9fQ!0MxO<<IyOOQ!0Lf<<Iy<<IyOOQO,5?j,5?jO&:YQ`O,5?jO&:_Q`O,5?jOOQO-E<|-E<|O&:mQ`O1G6iO&:mQ`O1G6iO9aQ`O1G6iO@iQ`O<<LkOOQ[<<Lk<<LkO&:uQ`O<<LkO9kQ!0LrO<<LkOOQ[<<LW<<LWO%9gQ!0MvO<<LWOOQ[<<LX<<LXO!DfQ`O<<LXO&:zQpO'#IzO&;VQ`O,5@zO!(yQlO,5@zOOQ[1G3V1G3VOOQO'#I|'#I|O9kQ!0LrO'#I|O&;_QpO,5=tOOQ[,5=t,5=tO&;fQpO'#EeO&;mQpO'#GdO&;rQ`O7+(yO&;wQ`O7+(yOOQ[7+(y7+(yO!&iQMhO7+(yO%[QlO7+(yO&<PQ`O7+(yOOQ[7+({7+({O9kQ!0LrO7+({O$#yQ`O7+({O9UQ`O7+({O!BeQpO7+({O&<[Q`O,5?iOOQO-E<{-E<{OOQO'#H]'#H]O&<gQ`O1G6gO9kQ!0LrO<<GqOOQ[<<Gq<<GqO@iQ`O<<GqO&<oQ`O7+,UO&<tQ`O7+,VO%[QlO7+,UO%[QlO7+,VOOQ[7+)T7+)TO&<yQ`O7+)TO&=OQlO7+)TO&=VQ`O7+)TOOQ[<<Lw<<LwOOQ[<<Ly<<LyOOQ[-E=O-E=OOOQ[1G3x1G3xO&=[Q`O,5>_OOQ[,5>a,5>aO&=aQ`O1G4OO9ZQ`O7+&dO!(yQlO7+&dOOQO7+%]7+%]O&=fQ?MtO1G6XO>wQ`O7+%]OOQ!0Lf<<I_<<I_OOQ!0Lf<<Ix<<IxO>wQ`O<<IxOOQO<<Iq<<IqO$?{Q!0MxO<<IqO%[QlO<<IqOOQO<<Ib<<IbO!BYQ!0LrO<<IbO&=pQ!0LrO<<IqO&={Q!0MxO<= [O&>]Q`O<= ZOOQO7+*]7+*]O9ZQ`O7+*]OOQ[ANAjANAjO&>eQ!fOANAjO!&iQMhOANAjO#'cQ`OANAjO4UQ!fOANAjO&>lQ`OANAjO%[QlOANAjO&>tQ!0MzO7+'yO&AVQ!0MzO,5?_O&CbQ!0MzO,5?aO&EmQ!0MzO7+'{O&HOQ!fO1G4jO&HYQ?MtO7+&_O&J^Q?MvO,5=WO&LeQ?MvO,5=YO&LuQ?MvO,5=WO&MVQ?MvO,5=YO&MgQ?MvO,59sO' mQ?MvO,5<jO'#pQ?MvO,5<lO'&UQ?MvO,5<zO''zQ?MtO7+'jO'(XQ?MtO7+'lO'(fQ`O,5<[OOQO7+'_7+'_OOQ!0Lh7+*b7+*bO'(kQMjO<<K|OOQO1G4u1G4uO'(rQ`O1G4uO'(}Q`O1G4uO')]Q`O7++zO')]Q`O7++zO!&iQMhO1G4wO')eQ!dO1G4wO')oQ`O7++{O')wQ`O7+(UO'*SQ!dO7+(UOOQ!0Lb7+(S7+(SOOQ!0Lb7+(T7+(TO!BeQpO7+(SOCfQ`O7+(SO'*^Q`O7+(UO!&iQMhO7+(UO$)iQ`O7+(TO'*cQ`O7+(UOCfQ`O7+(TO'*kQMjO<<NuOOQ!0Lh7+${7+${O!+rQMhO<<NuO'*uQ!dO,5?dOOQO-E<v-E<vO'+PQ!0MvO7+(XO!&iQMhO7+(XOOQ[AN=gAN=gO9aQ`O1G5UOOQO1G5U1G5UO'+aQ`O1G5UO'+fQ`O7+,TO'+fQ`O7+,TO9kQ!0LrOANBVO@iQ`OANBVOOQ[ANBVANBVOOQ[ANArANArOOQ[ANAsANAsO'+nQ`O,5?fOOQO-E<x-E<xO'+yQ?MtO1G6fOOQO,5?h,5?hOOQO-E<z-E<zOOQ[1G3`1G3`O',TQ`O,5=OOOQ[<<Le<<LeO!&iQMhO<<LeO&;rQ`O<<LeO',YQ`O<<LeO%[QlO<<LeOOQ[<<Lg<<LgO9kQ!0LrO<<LgO$#yQ`O<<LgO9UQ`O<<LgO',bQpO1G5TO',mQ`O7+,ROOQ[AN=]AN=]O9kQ!0LrOAN=]OOQ[<= p<= pOOQ[<= q<= qO',uQ`O<= pO',zQ`O<= qOOQ[<<Lo<<LoO'-PQ`O<<LoO'-UQlO<<LoOOQ[1G3y1G3yO>wQ`O7+)jO'-]Q`O<<JOO'-hQ?MtO<<JOOOQO<<Hw<<HwOOQ!0LfAN?dAN?dOOQOAN?]AN?]O$?{Q!0MxOAN?]OOQOAN>|AN>|O%[QlOAN?]OOQO<<Mw<<MwOOQ[G27UG27UO!&iQMhOG27UO#'cQ`OG27UO'-rQ!fOG27UO4UQ!fOG27UO'-yQ`OG27UO'.RQ?MtO<<JeO'.`Q?MvO1G2_O'0UQ?MvO,5?_O'2XQ?MvO,5?aO'4[Q?MvO1G2rO'6_Q?MvO1G2tO'8bQ?MtO<<KWO'8oQ?MtO<<IyOOQO1G1v1G1vO!+rQMhOANAhOOQO7+*a7+*aO'8|Q`O7+*aO'9XQ`O<= fO'9aQ!dO7+*cOOQ!0Lb<<Kp<<KpO$)iQ`O<<KpOCfQ`O<<KpO'9kQ`O<<KpO!&iQMhO<<KpOOQ!0Lb<<Kn<<KnO!BeQpO<<KnO'9vQ!dO<<KpOOQ!0Lb<<Ko<<KoO':QQ`O<<KpO!&iQMhO<<KpO$)iQ`O<<KoO':VQMjOANDaO':aQ!0MvO<<KsOOQO7+*p7+*pO9aQ`O7+*pO':qQ`O<= oOOQ[G27qG27qO9kQ!0LrOG27qO!(yQlO1G5QO':yQ`O7+,QO';RQ`O1G2jO&;rQ`OANBPOOQ[ANBPANBPO!&iQMhOANBPO';WQ`OANBPOOQ[ANBRANBRO9kQ!0LrOANBRO$#yQ`OANBROOQO'#H^'#H^OOQO7+*o7+*oOOQ[G22wG22wOOQ[ANE[ANE[OOQ[ANE]ANE]OOQ[ANBZANBZO';`Q`OANBZOOQ[<<MU<<MUO!(yQlOAN?jOOQOG24wG24wO$?{Q!0MxOG24wO#'cQ`OLD,pOOQ[LD,pLD,pO!&iQMhOLD,pO';eQ!fOLD,pO';lQ?MvO7+'yO'=bQ?MvO,5?_O'?eQ?MvO,5?aO'AhQ?MvO7+'{O'C^QMjOG27SOOQO<<M{<<M{OOQ!0LbANA[ANA[O$)iQ`OANA[OCfQ`OANA[O'CnQ!dOANA[OOQ!0LbANAYANAYO'CuQ`OANA[O!&iQMhOANA[O'DQQ!dOANA[OOQ!0LbANAZANAZOOQO<<N[<<N[OOQ[LD-]LD-]O'D[Q?MtO7+*lOOQO'#Ge'#GeOOQ[G27kG27kO&;rQ`OG27kO!&iQMhOG27kOOQ[G27mG27mO9kQ!0LrOG27mOOQ[G27uG27uO'DfQ?MtOG25UOOQOLD*cLD*cOOQ[!$(![!$(![O#'cQ`O!$(![O!&iQMhO!$(![O'DpQ!0MzOG27SOOQ!0LbG26vG26vO$)iQ`OG26vO'GRQ`OG26vOCfQ`OG26vO'G^Q!dOG26vO!&iQMhOG26vOOQ[LD-VLD-VO&;rQ`OLD-VOOQ[LD-XLD-XOOQ[!)9Ev!)9EvO#'cQ`O!)9EvOOQ!0LbLD,bLD,bO$)iQ`OLD,bOCfQ`OLD,bO'GeQ`OLD,bO'GpQ!dOLD,bOOQ[!$(!q!$(!qOOQ[!.K;b!.K;bO'GwQ?MvOG27SOOQ!0Lb!$( |!$( |O$)iQ`O!$( |OCfQ`O!$( |O'ImQ`O!$( |OOQ!0Lb!)9Eh!)9EhO$)iQ`O!)9EhOCfQ`O!)9EhOOQ!0Lb!.K;S!.K;SO$)iQ`O!.K;SOOQ!0Lb!4/0n!4/0nO!(yQlO'#DxO1PQ`O'#EVO'IxQ!fO'#JpO'JPQ!L^O'#DtO'JWQlO'#D|O'J_Q!fO'#CiO'LuQ!fO'#CiO!(yQlO'#EOO'MVQlO,5;XO!(yQlO,5;cO!(yQlO,5;cO!(yQlO,5;cO!(yQlO,5;cO!(yQlO,5;cO!(yQlO,5;cO!(yQlO,5;cO!(yQlO,5;cO!(yQlO,5;cO!(yQlO,5;cO!(yQlO'#InO( YQ`O,5<hO!(yQlO,5;cO( bQMhO,5;cO(!{QMhO,5;cO!(yQlO,5;vO!&iQMhO'#GlO( bQMhO'#GlO!&iQMhO'#GnO( bQMhO'#GnO1SQ`O'#DXO1SQ`O'#DXO!&iQMhO'#GOO( bQMhO'#GOO!&iQMhO'#GQO( bQMhO'#GQO!&iQMhO'#G`O( bQMhO'#G`O!(yQlO,5:hO(#SQpO'#D]O(#^QpO'#JtO!(yQlO,5@mO'MVQlO1G0sO(#hQ?MtO'#CiO!(yQlO1G2OO!&iQMhO'#IsO( bQMhO'#IsO!&iQMhO'#IuO( bQMhO'#IuO(#rQ!dO'#CrO!&iQMhO,5<sO( bQMhO,5<sO'MVQlO1G2QO!(yQlO7+&yO!&iQMhO1G2_O( bQMhO1G2_O!&iQMhO'#IsO( bQMhO'#IsO!&iQMhO'#IuO( bQMhO'#IuO!&iQMhO1G2aO( bQMhO1G2aO'MVQlO7+'lO'MVQlO7+&_O!&iQMhOANAhO( bQMhOANAhO($VQ`O'#EmO($[Q`O'#EmO($dQ`O'#F[O($iQ`O'#EwO($nQ`O'#KRO($yQ`O'#KPO(%UQ`O,5;XO(%ZQMjO,5<dO(%bQ`O'#GXO(%gQ`O'#GXO(%lQ`O,5<fO(%tQ`O,5;XO(%|Q?MtO1G1_O(&TQ`O,5<sO(&YQ`O,5<sO(&_Q`O,5<uO(&dQ`O,5<uO(&iQ`O1G2QO(&nQ`O1G0sO(&sQMjO<<K|O(&zQMjO<<K|O7eQMhO'#F{O9UQ`O'#FzOAdQ`O'#ElO!(yQlO,5;sO!3^Q`O'#GXO!3^Q`O'#GXO!3^Q`O'#GZO!3^Q`O'#GZO!+rQMhO7+(bO!+rQMhO7+(bO%-ZQ!dO1G2vO%-ZQ!dO1G2vO!&iQMhO,5=[O!&iQMhO,5=[",stateData:"((P~O'zOS'{OSTOS'|RQ~OPYOQYOSfOY!VOaqOdzOeyOj!POnkOpYOqkOrkOxkOzYO|YO!QWO!UkO!VkO!]XO!guO!jZO!mYO!nYO!oYO!qvO!swO!vxO!z]O$V|O$miO%g}O%i!QO%k!OO%l!OO%m!OO%p!RO%r!SO%u!TO%v!TO%x!UO&U!WO&[!XO&^!YO&`!ZO&b![O&e!]O&k!^O&q!_O&s!`O&u!aO&w!bO&y!cO(RSO(TTO(WUO(_VO(m[O~OWtO~P`OPYOQYOSfOd!jOe!iOnkOpYOqkOrkOxkOzYO|YO!QWO!UkO!VkO!]!eO!guO!jZO!mYO!nYO!oYO!qvO!s!gO!v!hO$V!kO$miO(R!dO(TTO(WUO(_VO(m[O~Oa!wOq!nO!Q!oO!`!yO!a!vO!b!vO!z;wO#R!pO#S!pO#T!xO#U!pO#V!pO#Y!zO#Z!zO(S!lO(TTO(WUO(c!mO(m!sO~O'|!{O~OP]XR]X[]Xa]Xp]X!O]X!Q]X!Z]X!j]X!n]X#P]X#Q]X#^]X#ifX#l]X#m]X#n]X#o]X#p]X#q]X#r]X#s]X#t]X#u]X#w]X#y]X#z]X$P]X'x]X(_]X(p]X(w]X(x]X~O!e%QX~P(qO_!}O(T#PO(U!}O(V#PO~O_#QO(V#PO(W#PO(X#QO~Ov#SO!S#TO(`#TO(a#VO~OPYOQYOSfOd!jOe!iOnkOpYOqkOrkOxkOzYO|YO!QWO!UkO!VkO!]!eO!guO!jZO!mYO!nYO!oYO!qvO!s!gO!v!hO$V!kO$miO(R;{O(TTO(WUO(_VO(m[O~O!Y#ZO!Z#WO!W(fP!W(tP~P+}O![#cO~P`OPYOQYOSfOd!jOe!iOpYOqkOrkOxkOzYO|YO!QWO!UkO!VkO!]!eO!guO!jZO!mYO!nYO!oYO!qvO!s!gO!v!hO$V!kO$miO(TTO(WUO(_VO(m[O~On#mO!Y#iO!z]O#g#lO#h#iO(R;|O!i(qP~P.iO!j#oO(R#nO~O!v#sO!z]O%g#tO~O#i#uO~O!e#vO#i#uO~OP$[OR#zO[$cOp$aO!O#yO!Q#{O!Z$_O!j#xO!n$[O#P$RO#l$OO#m$PO#n$PO#o$PO#p$QO#q$RO#r$RO#s$bO#t$RO#u$SO#w$UO#y$WO#z$XO(_VO(p$YO(w#|O(x#}O~Oa(dX'x(dX'u(dX!i(dX!W(dX!](dX%h(dX!e(dX~P1qO#Q$dO#^$eO$P$eOP(eXR(eX[(eXp(eX!O(eX!Q(eX!Z(eX!j(eX!n(eX#P(eX#l(eX#m(eX#n(eX#o(eX#p(eX#q(eX#r(eX#s(eX#t(eX#u(eX#w(eX#y(eX#z(eX(_(eX(p(eX(w(eX(x(eX!](eX%h(eX~Oa(eX'x(eX'u(eX!W(eX!i(eXt(eX!e(eX~P4UO#^$eO~O$[$hO$^$gO$e$mO~OSfO!]$nO$h$oO$j$qO~Oh%VOj%cOn%WOp%XOq$tOr$tOx%YOz%ZO|%[O!Q${O!]$|O!g%aO!j$xO#h%bO$V%_O$s%]O$u%^O$x%`O(R$sO(TTO(WUO(_$uO(w$}O(x%POg([P~O!j%dO~O!Q%gO!]%hO(R%fO~O!e%lO~Oa%mO'x%mO~O!O%qO~P%[O(S!lO~P%[O%m%uO~P%[Oh%VO!j%dO(R%fO(S!lO~Oe%|O!j%dO(R%fO~O#t$RO~O!O&RO!]&OO!j&QO%i&UO(R%fO(S!lO(TTO(WUO`)UP~O!v#sO~O%r&WO!Q)QX!])QX(R)QX~O(R&XO~Oj!PO!s&^O%i!QO%k!OO%l!OO%m!OO%p!RO%r!SO%u!TO%v!TO~Od&cOe&bO!v&`O%g&aO%z&_O~P<POd&fOeyOj!PO!]&eO!s&^O!vxO!z]O%g}O%k!OO%l!OO%m!OO%p!RO%r!SO%u!TO%v!TO%x!UO~Ob&iO#^&lO%i&gO(S!lO~P=UO!j&mO!s&qO~O!j#oO~O!]XO~Oa%mO'v&yO'x%mO~Oa%mO'v&|O'x%mO~Oa%mO'v'OO'x%mO~O'u]X!W]Xt]X!i]X&Y]X!]]X%h]X!e]X~P(qO!`']O!a'UO!b'UO(S!lO(TTO(WUO~Oq'SO!Q'RO!Y'VO(c'QO![(gP![(vP~P@]Ol'`O!]'^O(R%fO~Oe'eO!j%dO(R%fO~O!O&RO!j&QO~Oq!nO!Q!oO!z;wO#R!pO#S!pO#U!pO#V!pO(S!lO(TTO(WUO(c!mO(m!sO~O!`'kO!a'jO!b'jO#T!pO#Y'lO#Z'lO~PAwOa%mOh%VO!e#vO!j%dO'x%mO(p'nO~O!n'rO#^'pO~PCVOq!nO!Q!oO(TTO(WUO(c!mO(m!sO~O!]XOq(kX!Q(kX!`(kX!a(kX!b(kX!z(kX#R(kX#S(kX#T(kX#U(kX#V(kX#Y(kX#Z(kX(S(kX(T(kX(W(kX(c(kX(m(kX~O!a'jO!b'jO(S!lO~PCuO'}'vO(O'vO(P'xO~O_!}O(T'zO(U!}O(V'zO~O_#QO(V'zO(W'zO(X#QO~Ot'|O~P%[Ov#SO!S#TO(`#TO(a(PO~O!Y(RO!W'UX!W'[X!Z'UX!Z'[X~P+}O!Z(TO!W(fX~OP$[OR#zO[$cOp$aO!O#yO!Q#{O!Z(TO!j#xO!n$[O#P$RO#l$OO#m$PO#n$PO#o$PO#p$QO#q$RO#r$RO#s$bO#t$RO#u$SO#w$UO#y$WO#z$XO(_VO(p$YO(w#|O(x#}O~O!W(fX~PGpO!W(YO~O!W(sX!Z(sX!e(sX!i(sX(p(sX~O#^(sX#i#bX![(sX~PIsO#^(ZO!W(uX!Z(uX~O!Z([O!W(tX~O!W(_O~O#^$eO~PIsO![(`O~P`OR#zO!O#yO!Q#{O!j#xO(_VOP!la[!lap!la!Z!la!n!la#P!la#l!la#m!la#n!la#o!la#p!la#q!la#r!la#s!la#t!la#u!la#w!la#y!la#z!la(p!la(w!la(x!la~Oa!la'x!la'u!la!W!la!i!lat!la!]!la%h!la!e!la~PKZO!i(aO~O!e#vO#^(bO(p'nO!Z(rXa(rX'x(rX~O!i(rX~PMvO!Q%gO!]%hO!z]O#g(gO#h(fO(R%fO~O!Z(hO!i(qX~O!i(jO~O!Q%gO!]%hO#h(fO(R%fO~OP(eXR(eX[(eXp(eX!O(eX!Q(eX!Z(eX!j(eX!n(eX#P(eX#l(eX#m(eX#n(eX#o(eX#p(eX#q(eX#r(eX#s(eX#t(eX#u(eX#w(eX#y(eX#z(eX(_(eX(p(eX(w(eX(x(eX~O!e#vO!i(eX~P! dOR(lO!O(kO!j#xO#Q$dO!z!ya!Q!ya~O!v!ya%g!ya!]!ya#g!ya#h!ya(R!ya~P!#eO!v(pO~OPYOQYOSfOd!jOe!iOnkOpYOqkOrkOxkOzYO|YO!QWO!UkO!VkO!]XO!guO!jZO!mYO!nYO!oYO!qvO!s!gO!v!hO$V!kO$miO(R!dO(TTO(WUO(_VO(m[O~Oh%VOn%WOp%XOq$tOr$tOx%YOz%ZO|<eO!Q${O!]$|O!g=vO!j$xO#h<kO$V%_O$s<gO$u<iO$x%`O(R(tO(TTO(WUO(_$uO(w$}O(x%PO~O#i(vO~O!Y(xO!i(iP~P%[O(c(zO(m[O~O!Q(|O!j#xO(c(zO(m[O~OP;vOQ;vOSfOd=rOe!iOnkOp;vOqkOrkOxkOz;vO|;vO!QWO!UkO!VkO!]!eO!g;yO!jZO!m;vO!n;vO!o;vO!q;zO!s;}O!v!hO$V!kO$m=pO(R)ZO(TTO(WUO(_VO(m[O~O!Z$_Oa$pa'x$pa'u$pa!i$pa!W$pa!]$pa%h$pa!e$pa~Oj)bO~P!&iOh%VOn%WOp%XOq$tOr$tOx%YOz%ZO|%[O!Q${O!]$|O!g%aO!j$xO#h%bO$V%_O$s%]O$u%^O$x%`O(R(tO(TTO(WUO(_$uO(w$}O(x%PO~Og(nP~P!+rO!O)gO!e)fO!]$]X$Y$]X$[$]X$^$]X$e$]X~O!e)fO!](yX$Y(yX$[(yX$^(yX$e(yX~O!O)gO~P!-{O!O)gO!](yX$Y(yX$[(yX$^(yX$e(yX~O!])iO$Y)mO$[)hO$^)hO$e)nO~O!Y)qO~P!(yO$[$hO$^$gO$e)uO~Ol$yX!O$yX#Q$yX'w$yX(w$yX(x$yX~OgkXg$yXlkX!ZkX#^kX~P!/qOv)wO(`)xO(a)zO~Ol*TO!O)|O'w)}O(w$}O(x%PO~Og){O~P!0uOg*UO~Oh%VOn%WOp%XOq$tOr$tOx%YOz%ZO|<eO!Q*WO!]*XO!g=vO!j$xO#h<kO$V%_O$s<gO$u<iO$x%`O(TTO(WUO(_$uO(w$}O(x%PO~O!Y*[O(R*VO!i(|P~P!1dO#i*^O~O!j*_O~Oh%VOn%WOp%XOq$tOr$tOx%YOz%ZO|<eO!Q${O!]$|O!g=vO!j$xO#h<kO$V%_O$s<gO$u<iO$x%`O(R*aO(TTO(WUO(_$uO(w$}O(x%PO~O!Y*dO!W(}P~P!3cOp*pOq!nO!Q*fO!`*nO!a*hO!b*hO!j*_O#Y*oO%_*jO(S!lO(TTO(WUO(c!mO~O![*mO~P!5WO#Q$dOl(^X!O(^X'w(^X(w(^X(x(^X!Z(^X#^(^X~Og(^X#}(^X~P!6YOl*uO#^*tOg(]X!Z(]X~O!Z*vOg([X~Oj%cO(R&XOg([P~Oq*yO~O!j+OO~O(R(tO~On+TO!Q%gO!Y#iO!]%hO!z]O#g#lO#h#iO(R%fO!i(qP~O!e#vO#i+UO~O!Q%gO!Y+WO!Z([O!]%hO(R%fO!W(tP~Oq'YO!Q+YO!Y+XO(TTO(WUO(c(zO~O![(vP~P!9]O!Z+ZOa)RX'x)RX~OP$[OR#zO[$cOp$aO!O#yO!Q#{O!j#xO!n$[O#P$RO#l$OO#m$PO#n$PO#o$PO#p$QO#q$RO#r$RO#s$bO#t$RO#u$SO#w$UO#y$WO#z$XO(_VO(p$YO(w#|O(x#}O~Oa!ha!Z!ha'x!ha'u!ha!W!ha!i!hat!ha!]!ha%h!ha!e!ha~P!:TOR#zO!O#yO!Q#{O!j#xO(_VOP!pa[!pap!pa!Z!pa!n!pa#P!pa#l!pa#m!pa#n!pa#o!pa#p!pa#q!pa#r!pa#s!pa#t!pa#u!pa#w!pa#y!pa#z!pa(p!pa(w!pa(x!pa~Oa!pa'x!pa'u!pa!W!pa!i!pat!pa!]!pa%h!pa!e!pa~P!<kOR#zO!O#yO!Q#{O!j#xO(_VOP!ra[!rap!ra!Z!ra!n!ra#P!ra#l!ra#m!ra#n!ra#o!ra#p!ra#q!ra#r!ra#s!ra#t!ra#u!ra#w!ra#y!ra#z!ra(p!ra(w!ra(x!ra~Oa!ra'x!ra'u!ra!W!ra!i!rat!ra!]!ra%h!ra!e!ra~P!?ROh%VOl+dO!]'^O%h+cO~O!e+fOa(ZX!](ZX'x(ZX!Z(ZX~Oa%mO!]XO'x%mO~Oh%VO!j%dO~Oh%VO!j%dO(R%fO~O!e#vO#i(vO~Ob+qO%i+rO(R+nO(TTO(WUO![)VP~O!Z+sO`)UX~O[+wO~O`+xO~O!]&OO(R%fO(S!lO`)UP~Oh%VO#^+}O~Oh%VOl,QO!]$|O~O!],SO~O!O,UO!]XO~O%m%uO~O!v,ZO~Oe,`O~Ob,aO(R#nO(TTO(WUO![)TP~Oe%|O~O%i!QO(R&XO~P=UO[,fO`,eO~OPYOQYOSfOdzOeyOnkOpYOqkOrkOxkOzYO|YO!QWO!UkO!VkO!guO!jZO!mYO!nYO!oYO!qvO!vxO!z]O$miO%g}O(TTO(WUO(_VO(m[O~O!]!eO!s!gO$V!kO(R!dO~P!FRO`,eOa%mO'x%mO~OPYOQYOSfOd!jOe!iOnkOpYOqkOrkOxkOzYO|YO!QWO!UkO!VkO!]!eO!guO!jZO!mYO!nYO!oYO!qvO!v!hO$V!kO$miO(R!dO(TTO(WUO(_VO(m[O~Oa,kOj!OO!swO%k!OO%l!OO%m!OO~P!HkO!j&mO~O&[,qO~O!],sO~O&m,uO&o,vOP&jaQ&jaS&jaY&jaa&jad&jae&jaj&jan&jap&jaq&jar&jax&jaz&ja|&ja!Q&ja!U&ja!V&ja!]&ja!g&ja!j&ja!m&ja!n&ja!o&ja!q&ja!s&ja!v&ja!z&ja$V&ja$m&ja%g&ja%i&ja%k&ja%l&ja%m&ja%p&ja%r&ja%u&ja%v&ja%x&ja&U&ja&[&ja&^&ja&`&ja&b&ja&e&ja&k&ja&q&ja&s&ja&u&ja&w&ja&y&ja'u&ja(R&ja(T&ja(W&ja(_&ja(m&ja![&ja&c&jab&ja&h&ja~O(R,{O~Oh!cX!Z!PX![!PX!e!PX!e!cX!j!cX#^!PX~O!Z!cX![!cX~P# qO!e-QO#^-POh(hX!Z#fX![#fX!e(hX!j(hX~O!Z(hX![(hX~P#!dOh%VO!e-SO!j%dO!Z!_X![!_X~Oq!nO!Q!oO(TTO(WUO(c!mO~OP;vOQ;vOSfOd=rOe!iOnkOp;vOqkOrkOxkOz;vO|;vO!QWO!UkO!VkO!]!eO!g;yO!jZO!m;vO!n;vO!o;vO!q;zO!s;}O!v!hO$V!kO$m=pO(TTO(WUO(_VO(m[O~O(R<rO~P##yO!Z-WO![(gX~O![-YO~O!e-QO#^-PO!Z#fX![#fX~O!Z-ZO![(vX~O![-]O~O!a-^O!b-^O(S!lO~P##hO![-aO~P'_Ol-dO!]'^O~O!W-iO~Oq!ya!`!ya!a!ya!b!ya#R!ya#S!ya#T!ya#U!ya#V!ya#Y!ya#Z!ya(S!ya(T!ya(W!ya(c!ya(m!ya~P!#eO!n-nO#^-lO~PCVO!a-pO!b-pO(S!lO~PCuOa%mO#^-lO'x%mO~Oa%mO!e#vO#^-lO'x%mO~Oa%mO!e#vO!n-nO#^-lO'x%mO(p'nO~O'}'vO(O'vO(P-uO~Ot-vO~O!W'Ua!Z'Ua~P!:TO!Y-zO!W'UX!Z'UX~P%[O!Z(TO!W(fa~O!W(fa~PGpO!Z([O!W(ta~O!Q%gO!Y.OO!]%hO(R%fO!W'[X!Z'[X~O#^.QO!Z(ra!i(raa(ra'x(ra~O!e#vO~P#,PO!Z(hO!i(qa~O!Q%gO!]%hO#h.UO(R%fO~On.ZO!Q%gO!Y.WO!]%hO!z]O#g.YO#h.WO(R%fO!Z'_X!i'_X~OR._O!j#xO~Oh%VOl.bO!]'^O%h.aO~Oa#ai!Z#ai'x#ai'u#ai!W#ai!i#ait#ai!]#ai%h#ai!e#ai~P!:TOl=|O!O)|O'w)}O(w$}O(x%PO~O#i#]aa#]a#^#]a'x#]a!Z#]a!i#]a!]#]a!W#]a~P#.{O#i(^XP(^XR(^X[(^Xa(^Xp(^X!Q(^X!j(^X!n(^X#P(^X#l(^X#m(^X#n(^X#o(^X#p(^X#q(^X#r(^X#s(^X#t(^X#u(^X#w(^X#y(^X#z(^X'x(^X(_(^X(p(^X!i(^X!W(^X'u(^Xt(^X!](^X%h(^X!e(^X~P!6YO!Z.oO!i(iX~P!:TO!i.rO~O!W.tO~OP$[OR#zO!O#yO!Q#{O!j#xO!n$[O(_VO[#kia#kip#ki!Z#ki#P#ki#m#ki#n#ki#o#ki#p#ki#q#ki#r#ki#s#ki#t#ki#u#ki#w#ki#y#ki#z#ki'x#ki(p#ki(w#ki(x#ki'u#ki!W#ki!i#kit#ki!]#ki%h#ki!e#ki~O#l#ki~P#2kO#l$OO~P#2kOP$[OR#zOp$aO!O#yO!Q#{O!j#xO!n$[O#l$OO#m$PO#n$PO#o$PO(_VO[#kia#ki!Z#ki#P#ki#q#ki#r#ki#s#ki#t#ki#u#ki#w#ki#y#ki#z#ki'x#ki(p#ki(w#ki(x#ki'u#ki!W#ki!i#kit#ki!]#ki%h#ki!e#ki~O#p#ki~P#5YO#p$QO~P#5YOP$[OR#zO[$cOp$aO!O#yO!Q#{O!j#xO!n$[O#P$RO#l$OO#m$PO#n$PO#o$PO#p$QO#q$RO#r$RO#s$bO#t$RO(_VOa#ki!Z#ki#w#ki#y#ki#z#ki'x#ki(p#ki(w#ki(x#ki'u#ki!W#ki!i#kit#ki!]#ki%h#ki!e#ki~O#u#ki~P#7wOP$[OR#zO[$cOp$aO!O#yO!Q#{O!j#xO!n$[O#P$RO#l$OO#m$PO#n$PO#o$PO#p$QO#q$RO#r$RO#s$bO#t$RO#u$SO(_VO(x#}Oa#ki!Z#ki#y#ki#z#ki'x#ki(p#ki(w#ki'u#ki!W#ki!i#kit#ki!]#ki%h#ki!e#ki~O#w$UO~P#:_O#w#ki~P#:_O#u$SO~P#7wOP$[OR#zO[$cOp$aO!O#yO!Q#{O!j#xO!n$[O#P$RO#l$OO#m$PO#n$PO#o$PO#p$QO#q$RO#r$RO#s$bO#t$RO#u$SO#w$UO(_VO(w#|O(x#}Oa#ki!Z#ki#z#ki'x#ki(p#ki'u#ki!W#ki!i#kit#ki!]#ki%h#ki!e#ki~O#y#ki~P#=TO#y$WO~P#=TOP]XR]X[]Xp]X!O]X!Q]X!j]X!n]X#P]X#Q]X#^]X#ifX#l]X#m]X#n]X#o]X#p]X#q]X#r]X#s]X#t]X#u]X#w]X#y]X#z]X$P]X(_]X(p]X(w]X(x]X!Z]X![]X~O#}]X~P#?rOP$[OR#zO[<_Op<]O!O#yO!Q#{O!j#xO!n$[O#P<SO#l<PO#m<QO#n<QO#o<QO#p<RO#q<SO#r<SO#s<^O#t<SO#u<TO#w<VO#y<XO#z<YO(_VO(p$YO(w#|O(x#}O~O#}.vO~P#BPO#Q$dO#^<`O$P<`O#}(eX![(eX~P! dOa'ba!Z'ba'x'ba'u'ba!i'ba!W'bat'ba!]'ba%h'ba!e'ba~P!:TO[#kia#kip#ki!Z#ki#P#ki#p#ki#q#ki#r#ki#s#ki#t#ki#u#ki#w#ki#y#ki#z#ki'x#ki(p#ki'u#ki!W#ki!i#kit#ki!]#ki%h#ki!e#ki~OP$[OR#zO!O#yO!Q#{O!j#xO!n$[O#l$OO#m$PO#n$PO#o$PO(_VO(w#ki(x#ki~P#EROl=|O!O)|O'w)}O(w$}O(x%POP#kiR#ki!Q#ki!j#ki!n#ki#l#ki#m#ki#n#ki#o#ki(_#ki~P#ERO!Z.zOg(nX~P!0uOg.|O~Oa$Oi!Z$Oi'x$Oi'u$Oi!W$Oi!i$Oit$Oi!]$Oi%h$Oi!e$Oi~P!:TO$[.}O$^.}O~O$[/OO$^/OO~O!e)fO#^/PO!]$bX$Y$bX$[$bX$^$bX$e$bX~O!Y/QO~O!])iO$Y/SO$[)hO$^)hO$e/TO~O!Z<ZO![(dX~P#BPO![/UO~O!e)fO$e(yX~O$e/WO~Ot/XO~P!&iOv)wO(`)xO(a/[O~O!Q/_O~O(w$}Ol%`a!O%`a'w%`a(x%`a!Z%`a#^%`a~Og%`a#}%`a~P#LTO(x%POl%ba!O%ba'w%ba(w%ba!Z%ba#^%ba~Og%ba#}%ba~P#LvO!ZfX!efX!ifX!i$yX(pfX~P!/qO!Y/hO!Z([O(R/gO!W(tP!W(}P~P!1dOp*pO!`*nO!a*hO!b*hO!j*_O#Y*oO%_*jO(S!lO(TTO(WUO~Oq<oO!Q/iO!Y+XO![*mO(c<nO![(vP~P#NaO!i/jO~P#.{O!Z/kO!e#vO(p'nO!i(|X~O!i/pO~O!Q%gO!Y*[O!]%hO(R%fO!i(|P~O#i/rO~O!W$yX!Z$yX!e%QX~P!/qO!Z/sO!W(}X~P#.{O!e/uO~O!W/wO~OnkO(R/xO~P.iOh%VOp/}O!e#vO!j%dO(p'nO~O!e+fO~Oa%mO!Z0RO'x%mO~O![0TO~P!5WO!a0UO!b0UO(S!lO~P##hOq!nO!Q0VO(TTO(WUO(c!mO~O#Y0XO~Og%`a!Z%`a#^%`a#}%`a~P!0uOg%ba!Z%ba#^%ba#}%ba~P!0uOj%cO(R&XOg'kX!Z'kX~O!Z*vOg([a~Og0bO~OR0cO!O0cO!Q0dO#Q$dOl{a'w{a(w{a(x{a!Z{a#^{a~Og{a#}{a~P$&dO!O)|O'w)}Ol$ra(w$ra(x$ra!Z$ra#^$ra~Og$ra#}$ra~P$'`O!O)|O'w)}Ol$ta(w$ta(x$ta!Z$ta#^$ta~Og$ta#}$ta~P$(RO#i0gO~Og%Sa!Z%Sa#^%Sa#}%Sa~P!0uOl0iO#^0hOg(]a!Z(]a~O!e#vO~O#i0lO~O!Z+ZOa)Ra'x)Ra~OR#zO!O#yO!Q#{O!j#xO(_VOP!pi[!pip!pi!Z!pi!n!pi#P!pi#l!pi#m!pi#n!pi#o!pi#p!pi#q!pi#r!pi#s!pi#t!pi#u!pi#w!pi#y!pi#z!pi(p!pi(w!pi(x!pi~Oa!pi'x!pi'u!pi!W!pi!i!pit!pi!]!pi%h!pi!e!pi~P$*OOh%VOp%XOq$tOr$tOx%YOz%ZO|<eO!Q${O!]$|O!g=vO!j$xO#h<kO$V%_O$s<gO$u<iO$x%`O(TTO(WUO(_$uO(w$}O(x%PO~On0vO%[0wO(R0tO~P$,fO!e+fOa(Za!](Za'x(Za!Z(Za~O#i0|O~O[]X!ZfX![fX~O!Z0}O![)VX~O![1PO~O[1QO~Ob1SO(R+nO(TTO(WUO~O!]&OO(R%fO`'sX!Z'sX~O!Z+sO`)Ua~O!i1VO~P!:TO[1YO~O`1ZO~O#^1^O~Ol1aO!]$|O~O(c(zO![)SP~Oh%VOl1jO!]1gO%h1iO~O[1tO!Z1rO![)TX~O![1uO~O`1wOa%mO'x%mO~O(R#nO(TTO(WUO~O#Q$dO#^$eO$P$eOP(eXR(eX[(eXp(eX!O(eX!Q(eX!Z(eX!j(eX!n(eX#P(eX#l(eX#m(eX#n(eX#o(eX#p(eX#q(eX#r(eX#s(eX#u(eX#w(eX#y(eX#z(eX(_(eX(p(eX(w(eX(x(eX~O#t1zO&Y1{Oa(eX~P$2PO#^$eO#t1zO&Y1{O~Oa1}O~P%[Oa2PO~O&c2SOP&aiQ&aiS&aiY&aia&aid&aie&aij&ain&aip&aiq&air&aix&aiz&ai|&ai!Q&ai!U&ai!V&ai!]&ai!g&ai!j&ai!m&ai!n&ai!o&ai!q&ai!s&ai!v&ai!z&ai$V&ai$m&ai%g&ai%i&ai%k&ai%l&ai%m&ai%p&ai%r&ai%u&ai%v&ai%x&ai&U&ai&[&ai&^&ai&`&ai&b&ai&e&ai&k&ai&q&ai&s&ai&u&ai&w&ai&y&ai'u&ai(R&ai(T&ai(W&ai(_&ai(m&ai![&aib&ai&h&ai~Ob2YO![2WO&h2XO~P`O!]XO!j2[O~O&o,vOP&jiQ&jiS&jiY&jia&jid&jie&jij&jin&jip&jiq&jir&jix&jiz&ji|&ji!Q&ji!U&ji!V&ji!]&ji!g&ji!j&ji!m&ji!n&ji!o&ji!q&ji!s&ji!v&ji!z&ji$V&ji$m&ji%g&ji%i&ji%k&ji%l&ji%m&ji%p&ji%r&ji%u&ji%v&ji%x&ji&U&ji&[&ji&^&ji&`&ji&b&ji&e&ji&k&ji&q&ji&s&ji&u&ji&w&ji&y&ji'u&ji(R&ji(T&ji(W&ji(_&ji(m&ji![&ji&c&jib&ji&h&ji~O!W2bO~O!Z!_a![!_a~P#BPOq!nO!Q!oO!Y2hO(c!mO!Z'VX!['VX~P@]O!Z-WO![(ga~O!Z']X![']X~P!9]O!Z-ZO![(va~O![2oO~P'_Oa%mO#^2xO'x%mO~Oa%mO!e#vO#^2xO'x%mO~Oa%mO!e#vO!n2|O#^2xO'x%mO(p'nO~Oa%mO'x%mO~P!:TO!Z$_Ot$pa~O!W'Ui!Z'Ui~P!:TO!Z(TO!W(fi~O!Z([O!W(ti~O!W(ui!Z(ui~P!:TO!Z(ri!i(ria(ri'x(ri~P!:TO#^3OO!Z(ri!i(ria(ri'x(ri~O!Z(hO!i(qi~O!Q%gO!]%hO!z]O#g3TO#h3SO(R%fO~O!Q%gO!]%hO#h3SO(R%fO~Ol3[O!]'^O%h3ZO~Oh%VOl3[O!]'^O%h3ZO~O#i%`aP%`aR%`a[%`aa%`ap%`a!Q%`a!j%`a!n%`a#P%`a#l%`a#m%`a#n%`a#o%`a#p%`a#q%`a#r%`a#s%`a#t%`a#u%`a#w%`a#y%`a#z%`a'x%`a(_%`a(p%`a!i%`a!W%`a'u%`at%`a!]%`a%h%`a!e%`a~P#LTO#i%baP%baR%ba[%baa%bap%ba!Q%ba!j%ba!n%ba#P%ba#l%ba#m%ba#n%ba#o%ba#p%ba#q%ba#r%ba#s%ba#t%ba#u%ba#w%ba#y%ba#z%ba'x%ba(_%ba(p%ba!i%ba!W%ba'u%bat%ba!]%ba%h%ba!e%ba~P#LvO#i%`aP%`aR%`a[%`aa%`ap%`a!Q%`a!Z%`a!j%`a!n%`a#P%`a#l%`a#m%`a#n%`a#o%`a#p%`a#q%`a#r%`a#s%`a#t%`a#u%`a#w%`a#y%`a#z%`a'x%`a(_%`a(p%`a!i%`a!W%`a'u%`a#^%`at%`a!]%`a%h%`a!e%`a~P#.{O#i%baP%baR%ba[%baa%bap%ba!Q%ba!Z%ba!j%ba!n%ba#P%ba#l%ba#m%ba#n%ba#o%ba#p%ba#q%ba#r%ba#s%ba#t%ba#u%ba#w%ba#y%ba#z%ba'x%ba(_%ba(p%ba!i%ba!W%ba'u%ba#^%bat%ba!]%ba%h%ba!e%ba~P#.{O#i{aP{a[{aa{ap{a!j{a!n{a#P{a#l{a#m{a#n{a#o{a#p{a#q{a#r{a#s{a#t{a#u{a#w{a#y{a#z{a'x{a(_{a(p{a!i{a!W{a'u{at{a!]{a%h{a!e{a~P$&dO#i$raP$raR$ra[$raa$rap$ra!Q$ra!j$ra!n$ra#P$ra#l$ra#m$ra#n$ra#o$ra#p$ra#q$ra#r$ra#s$ra#t$ra#u$ra#w$ra#y$ra#z$ra'x$ra(_$ra(p$ra!i$ra!W$ra'u$rat$ra!]$ra%h$ra!e$ra~P$'`O#i$taP$taR$ta[$taa$tap$ta!Q$ta!j$ta!n$ta#P$ta#l$ta#m$ta#n$ta#o$ta#p$ta#q$ta#r$ta#s$ta#t$ta#u$ta#w$ta#y$ta#z$ta'x$ta(_$ta(p$ta!i$ta!W$ta'u$tat$ta!]$ta%h$ta!e$ta~P$(RO#i%SaP%SaR%Sa[%Saa%Sap%Sa!Q%Sa!Z%Sa!j%Sa!n%Sa#P%Sa#l%Sa#m%Sa#n%Sa#o%Sa#p%Sa#q%Sa#r%Sa#s%Sa#t%Sa#u%Sa#w%Sa#y%Sa#z%Sa'x%Sa(_%Sa(p%Sa!i%Sa!W%Sa'u%Sa#^%Sat%Sa!]%Sa%h%Sa!e%Sa~P#.{Oa#aq!Z#aq'x#aq'u#aq!W#aq!i#aqt#aq!]#aq%h#aq!e#aq~P!:TO!Y3dO!Z'WX!i'WX~P%[O!Z.oO!i(ia~O!Z.oO!i(ia~P!:TO!W3gO~O#}!la![!la~PKZO#}!ha!Z!ha![!ha~P#BPO#}!pa![!pa~P!<kO#}!ra![!ra~P!?ROg'ZX!Z'ZX~P!+rO!Z.zOg(na~OSfO!]3{O$c3|O~O![4QO~Ot4RO~P#.{Oa$lq!Z$lq'x$lq'u$lq!W$lq!i$lqt$lq!]$lq%h$lq!e$lq~P!:TO!W4TO~P!&iO!Q4UO~O!O)|O'w)}O(x%POl'ga(w'ga!Z'ga#^'ga~Og'ga#}'ga~P%+uO!O)|O'w)}Ol'ia(w'ia(x'ia!Z'ia#^'ia~Og'ia#}'ia~P%,hO(p$YO~P#.{O!WfX!W$yX!ZfX!Z$yX!e%QX#^fX~P!/qO(R<xO~P!1dO!Q%gO!Y4XO!]%hO(R%fO!Z'cX!i'cX~O!Z/kO!i(|a~O!Z/kO!e#vO!i(|a~O!Z/kO!e#vO(p'nO!i(|a~Og${i!Z${i#^${i#}${i~P!0uO!Y4aO!W'eX!Z'eX~P!3cO!Z/sO!W(}a~O!Z/sO!W(}a~P#.{OP]XR]X[]Xp]X!O]X!Q]X!W]X!Z]X!j]X!n]X#P]X#Q]X#^]X#ifX#l]X#m]X#n]X#o]X#p]X#q]X#r]X#s]X#t]X#u]X#w]X#y]X#z]X$P]X(_]X(p]X(w]X(x]X~O!e%XX#t%XX~P%0XO!e#vO#t4fO~Oh%VO!e#vO!j%dO~Oh%VOp4kO!j%dO(p'nO~Op4pO!e#vO(p'nO~Oq!nO!Q4qO(TTO(WUO(c!mO~O(w$}Ol%`i!O%`i'w%`i(x%`i!Z%`i#^%`i~Og%`i#}%`i~P%3xO(x%POl%bi!O%bi'w%bi(w%bi!Z%bi#^%bi~Og%bi#}%bi~P%4kOg(]i!Z(]i~P!0uO#^4wOg(]i!Z(]i~P!0uO!i4zO~Oa$nq!Z$nq'x$nq'u$nq!W$nq!i$nqt$nq!]$nq%h$nq!e$nq~P!:TO!W5QO~O!Z5RO!])OX~P#.{Oa]Xa$yX!]]X!]$yX%]]X'x]X'x$yX!Z]X!Z$yX~P!/qO%]5UOa%Za!]%Za'x%Za!Z%Za~OlmX!OmX'wmX(wmX(xmX~P%7nOn5VO(R#nO~Ob5]O%i5^O(R+nO(TTO(WUO!Z'rX!['rX~O!Z0}O![)Va~O[5bO~O`5cO~Oa%mO'x%mO~P#.{O!Z5kO#^5mO![)SX~O![5nO~Op5tOq!nO!Q*fO!`!yO!a!vO!b!vO!z;wO#R!pO#S!pO#T!pO#U!pO#V!pO#Y5sO#Z!zO(S!lO(TTO(WUO(c!mO(m!sO~O![5rO~P%:ROl5yO!]1gO%h5xO~Oh%VOl5yO!]1gO%h5xO~Ob6QO(R#nO(TTO(WUO!Z'qX!['qX~O!Z1rO![)Ta~O(TTO(WUO(c6SO~O`6WO~O#t6ZO&Y6[O~PMvO!i6]O~P%[Oa6_O~Oa6_O~P%[Ob2YO![6dO&h2XO~P`O!e6fO~O!e6hOh(hi!Z(hi![(hi!e(hi!j(hip(hi(p(hi~O!Z#fi![#fi~P#BPO#^6iO!Z#fi![#fi~O!Z!_i![!_i~P#BPOa%mO#^6rO'x%mO~Oa%mO!e#vO#^6rO'x%mO~O!Z(rq!i(rqa(rq'x(rq~P!:TO!Z(hO!i(qq~O!Q%gO!]%hO#h6yO(R%fO~O!]'^O%h6|O~Ol7QO!]'^O%h6|O~O#i'gaP'gaR'ga['gaa'gap'ga!Q'ga!j'ga!n'ga#P'ga#l'ga#m'ga#n'ga#o'ga#p'ga#q'ga#r'ga#s'ga#t'ga#u'ga#w'ga#y'ga#z'ga'x'ga(_'ga(p'ga!i'ga!W'ga'u'gat'ga!]'ga%h'ga!e'ga~P%+uO#i'iaP'iaR'ia['iaa'iap'ia!Q'ia!j'ia!n'ia#P'ia#l'ia#m'ia#n'ia#o'ia#p'ia#q'ia#r'ia#s'ia#t'ia#u'ia#w'ia#y'ia#z'ia'x'ia(_'ia(p'ia!i'ia!W'ia'u'iat'ia!]'ia%h'ia!e'ia~P%,hO#i${iP${iR${i[${ia${ip${i!Q${i!Z${i!j${i!n${i#P${i#l${i#m${i#n${i#o${i#p${i#q${i#r${i#s${i#t${i#u${i#w${i#y${i#z${i'x${i(_${i(p${i!i${i!W${i'u${i#^${it${i!]${i%h${i!e${i~P#.{O#i%`iP%`iR%`i[%`ia%`ip%`i!Q%`i!j%`i!n%`i#P%`i#l%`i#m%`i#n%`i#o%`i#p%`i#q%`i#r%`i#s%`i#t%`i#u%`i#w%`i#y%`i#z%`i'x%`i(_%`i(p%`i!i%`i!W%`i'u%`it%`i!]%`i%h%`i!e%`i~P%3xO#i%biP%biR%bi[%bia%bip%bi!Q%bi!j%bi!n%bi#P%bi#l%bi#m%bi#n%bi#o%bi#p%bi#q%bi#r%bi#s%bi#t%bi#u%bi#w%bi#y%bi#z%bi'x%bi(_%bi(p%bi!i%bi!W%bi'u%bit%bi!]%bi%h%bi!e%bi~P%4kO!Z'Wa!i'Wa~P!:TO!Z.oO!i(ii~O#}#ai!Z#ai![#ai~P#BPOP$[OR#zO!O#yO!Q#{O!j#xO!n$[O(_VO[#kip#ki#P#ki#m#ki#n#ki#o#ki#p#ki#q#ki#r#ki#s#ki#t#ki#u#ki#w#ki#y#ki#z#ki#}#ki(p#ki(w#ki(x#ki!Z#ki![#ki~O#l#ki~P%MQO#l<PO~P%MQOP$[OR#zOp<]O!O#yO!Q#{O!j#xO!n$[O#l<PO#m<QO#n<QO#o<QO(_VO[#ki#P#ki#q#ki#r#ki#s#ki#t#ki#u#ki#w#ki#y#ki#z#ki#}#ki(p#ki(w#ki(x#ki!Z#ki![#ki~O#p#ki~P& YO#p<RO~P& YOP$[OR#zO[<_Op<]O!O#yO!Q#{O!j#xO!n$[O#P<SO#l<PO#m<QO#n<QO#o<QO#p<RO#q<SO#r<SO#s<^O#t<SO(_VO#w#ki#y#ki#z#ki#}#ki(p#ki(w#ki(x#ki!Z#ki![#ki~O#u#ki~P&#bOP$[OR#zO[<_Op<]O!O#yO!Q#{O!j#xO!n$[O#P<SO#l<PO#m<QO#n<QO#o<QO#p<RO#q<SO#r<SO#s<^O#t<SO#u<TO(_VO(x#}O#y#ki#z#ki#}#ki(p#ki(w#ki!Z#ki![#ki~O#w<VO~P&%cO#w#ki~P&%cO#u<TO~P&#bOP$[OR#zO[<_Op<]O!O#yO!Q#{O!j#xO!n$[O#P<SO#l<PO#m<QO#n<QO#o<QO#p<RO#q<SO#r<SO#s<^O#t<SO#u<TO#w<VO(_VO(w#|O(x#}O#z#ki#}#ki(p#ki!Z#ki![#ki~O#y#ki~P&'rO#y<XO~P&'rOa#{y!Z#{y'x#{y'u#{y!W#{y!i#{yt#{y!]#{y%h#{y!e#{y~P!:TO[#kip#ki#P#ki#p#ki#q#ki#r#ki#s#ki#t#ki#u#ki#w#ki#y#ki#z#ki#}#ki(p#ki!Z#ki![#ki~OP$[OR#zO!O#yO!Q#{O!j#xO!n$[O#l<PO#m<QO#n<QO#o<QO(_VO(w#ki(x#ki~P&*nOl=}O!O)|O'w)}O(w$}O(x%POP#kiR#ki!Q#ki!j#ki!n#ki#l#ki#m#ki#n#ki#o#ki(_#ki~P&*nO#Q$dOP(^XR(^X[(^Xl(^Xp(^X!O(^X!Q(^X!j(^X!n(^X#P(^X#l(^X#m(^X#n(^X#o(^X#p(^X#q(^X#r(^X#s(^X#t(^X#u(^X#w(^X#y(^X#z(^X#}(^X'w(^X(_(^X(p(^X(w(^X(x(^X!Z(^X![(^X~O#}$Oi!Z$Oi![$Oi~P#BPO#}!pi![!pi~P$*OOg'Za!Z'Za~P!0uO![7dO~O!Z'ba!['ba~P#BPO!W7eO~P#.{O!e#vO(p'nO!Z'ca!i'ca~O!Z/kO!i(|i~O!Z/kO!e#vO!i(|i~Og${q!Z${q#^${q#}${q~P!0uO!W'ea!Z'ea~P#.{O!e7lO~O!Z/sO!W(}i~P#.{O!Z/sO!W(}i~O!W7oO~Oh%VOp7tO!j%dO(p'nO~O!e#vO#t7vO~Op7yO!e#vO(p'nO~O!O)|O'w)}O(x%POl'ha(w'ha!Z'ha#^'ha~Og'ha#}'ha~P&3oO!O)|O'w)}Ol'ja(w'ja(x'ja!Z'ja#^'ja~Og'ja#}'ja~P&4bO!W7{O~Og$}q!Z$}q#^$}q#}$}q~P!0uOg(]q!Z(]q~P!0uO#^7|Og(]q!Z(]q~P!0uOa$ny!Z$ny'x$ny'u$ny!W$ny!i$nyt$ny!]$ny%h$ny!e$ny~P!:TO!e6hO~O!Z5RO!])Oa~O!]'^OP$SaR$Sa[$Sap$Sa!O$Sa!Q$Sa!Z$Sa!j$Sa!n$Sa#P$Sa#l$Sa#m$Sa#n$Sa#o$Sa#p$Sa#q$Sa#r$Sa#s$Sa#t$Sa#u$Sa#w$Sa#y$Sa#z$Sa(_$Sa(p$Sa(w$Sa(x$Sa~O%h6|O~P&7SO%]8QOa%Zi!]%Zi'x%Zi!Z%Zi~Oa#ay!Z#ay'x#ay'u#ay!W#ay!i#ayt#ay!]#ay%h#ay!e#ay~P!:TO[8SO~Ob8UO(R+nO(TTO(WUO~O!Z0}O![)Vi~O`8YO~O(c(zO!Z'nX!['nX~O!Z5kO![)Sa~O![8cO~P%:RO(m!sO~P$$oO#Y8dO~O!]1gO~O!]1gO%h8fO~Ol8iO!]1gO%h8fO~O[8nO!Z'qa!['qa~O!Z1rO![)Ti~O!i8rO~O!i8sO~O!i8vO~O!i8vO~P%[Oa8xO~O!e8yO~O!i8zO~O!Z(ui![(ui~P#BPOa%mO#^9SO'x%mO~O!Z(ry!i(rya(ry'x(ry~P!:TO!Z(hO!i(qy~O%h9VO~P&7SO!]'^O%h9VO~O#i${qP${qR${q[${qa${qp${q!Q${q!Z${q!j${q!n${q#P${q#l${q#m${q#n${q#o${q#p${q#q${q#r${q#s${q#t${q#u${q#w${q#y${q#z${q'x${q(_${q(p${q!i${q!W${q'u${q#^${qt${q!]${q%h${q!e${q~P#.{O#i'haP'haR'ha['haa'hap'ha!Q'ha!j'ha!n'ha#P'ha#l'ha#m'ha#n'ha#o'ha#p'ha#q'ha#r'ha#s'ha#t'ha#u'ha#w'ha#y'ha#z'ha'x'ha(_'ha(p'ha!i'ha!W'ha'u'hat'ha!]'ha%h'ha!e'ha~P&3oO#i'jaP'jaR'ja['jaa'jap'ja!Q'ja!j'ja!n'ja#P'ja#l'ja#m'ja#n'ja#o'ja#p'ja#q'ja#r'ja#s'ja#t'ja#u'ja#w'ja#y'ja#z'ja'x'ja(_'ja(p'ja!i'ja!W'ja'u'jat'ja!]'ja%h'ja!e'ja~P&4bO#i$}qP$}qR$}q[$}qa$}qp$}q!Q$}q!Z$}q!j$}q!n$}q#P$}q#l$}q#m$}q#n$}q#o$}q#p$}q#q$}q#r$}q#s$}q#t$}q#u$}q#w$}q#y$}q#z$}q'x$}q(_$}q(p$}q!i$}q!W$}q'u$}q#^$}qt$}q!]$}q%h$}q!e$}q~P#.{O!Z'Wi!i'Wi~P!:TO#}#aq!Z#aq![#aq~P#BPO(w$}OP%`aR%`a[%`ap%`a!Q%`a!j%`a!n%`a#P%`a#l%`a#m%`a#n%`a#o%`a#p%`a#q%`a#r%`a#s%`a#t%`a#u%`a#w%`a#y%`a#z%`a#}%`a(_%`a(p%`a!Z%`a![%`a~Ol%`a!O%`a'w%`a(x%`a~P&HgO(x%POP%baR%ba[%bap%ba!Q%ba!j%ba!n%ba#P%ba#l%ba#m%ba#n%ba#o%ba#p%ba#q%ba#r%ba#s%ba#t%ba#u%ba#w%ba#y%ba#z%ba#}%ba(_%ba(p%ba!Z%ba![%ba~Ol%ba!O%ba'w%ba(w%ba~P&JnOl=}O!O)|O'w)}O(x%PO~P&HgOl=}O!O)|O'w)}O(w$}O~P&JnOR0cO!O0cO!Q0dO#Q$dOP{a[{al{ap{a!j{a!n{a#P{a#l{a#m{a#n{a#o{a#p{a#q{a#r{a#s{a#t{a#u{a#w{a#y{a#z{a#}{a'w{a(_{a(p{a(w{a(x{a!Z{a![{a~O!O)|O'w)}OP$raR$ra[$ral$rap$ra!Q$ra!j$ra!n$ra#P$ra#l$ra#m$ra#n$ra#o$ra#p$ra#q$ra#r$ra#s$ra#t$ra#u$ra#w$ra#y$ra#z$ra#}$ra(_$ra(p$ra(w$ra(x$ra!Z$ra![$ra~O!O)|O'w)}OP$taR$ta[$tal$tap$ta!Q$ta!j$ta!n$ta#P$ta#l$ta#m$ta#n$ta#o$ta#p$ta#q$ta#r$ta#s$ta#t$ta#u$ta#w$ta#y$ta#z$ta#}$ta(_$ta(p$ta(w$ta(x$ta!Z$ta![$ta~Ol=}O!O)|O'w)}O(w$}O(x%PO~OP%SaR%Sa[%Sap%Sa!Q%Sa!j%Sa!n%Sa#P%Sa#l%Sa#m%Sa#n%Sa#o%Sa#p%Sa#q%Sa#r%Sa#s%Sa#t%Sa#u%Sa#w%Sa#y%Sa#z%Sa#}%Sa(_%Sa(p%Sa!Z%Sa![%Sa~P'%sO#}$lq!Z$lq![$lq~P#BPO#}$nq!Z$nq![$nq~P#BPO![9dO~O#}9eO~P!0uO!e#vO!Z'ci!i'ci~O!e#vO(p'nO!Z'ci!i'ci~O!Z/kO!i(|q~O!W'ei!Z'ei~P#.{O!Z/sO!W(}q~Op9lO!e#vO(p'nO~O[9nO!W9mO~P#.{O!W9mO~O!e#vO#t9tO~Og(]y!Z(]y~P!0uO!Z'la!]'la~P#.{Oa%Zq!]%Zq'x%Zq!Z%Zq~P#.{O[9yO~O!Z0}O![)Vq~O#^9}O!Z'na!['na~O!Z5kO![)Si~P#BPO!Q:PO~O!]1gO%h:SO~O(TTO(WUO(c:XO~O!Z1rO![)Tq~O!i:[O~O!i:]O~O!i:^O~O!i:^O~P%[O#^:aO!Z#fy![#fy~O!Z#fy![#fy~P#BPO%h:fO~P&7SO!]'^O%h:fO~O#}#{y!Z#{y![#{y~P#BPOP${iR${i[${ip${i!Q${i!j${i!n${i#P${i#l${i#m${i#n${i#o${i#p${i#q${i#r${i#s${i#t${i#u${i#w${i#y${i#z${i#}${i(_${i(p${i!Z${i![${i~P'%sO!O)|O'w)}O(x%POP'gaR'ga['gal'gap'ga!Q'ga!j'ga!n'ga#P'ga#l'ga#m'ga#n'ga#o'ga#p'ga#q'ga#r'ga#s'ga#t'ga#u'ga#w'ga#y'ga#z'ga#}'ga(_'ga(p'ga(w'ga!Z'ga!['ga~O!O)|O'w)}OP'iaR'ia['ial'iap'ia!Q'ia!j'ia!n'ia#P'ia#l'ia#m'ia#n'ia#o'ia#p'ia#q'ia#r'ia#s'ia#t'ia#u'ia#w'ia#y'ia#z'ia#}'ia(_'ia(p'ia(w'ia(x'ia!Z'ia!['ia~O(w$}OP%`iR%`i[%`il%`ip%`i!O%`i!Q%`i!j%`i!n%`i#P%`i#l%`i#m%`i#n%`i#o%`i#p%`i#q%`i#r%`i#s%`i#t%`i#u%`i#w%`i#y%`i#z%`i#}%`i'w%`i(_%`i(p%`i(x%`i!Z%`i![%`i~O(x%POP%biR%bi[%bil%bip%bi!O%bi!Q%bi!j%bi!n%bi#P%bi#l%bi#m%bi#n%bi#o%bi#p%bi#q%bi#r%bi#s%bi#t%bi#u%bi#w%bi#y%bi#z%bi#}%bi'w%bi(_%bi(p%bi(w%bi!Z%bi![%bi~O#}$ny!Z$ny![$ny~P#BPO#}#ay!Z#ay![#ay~P#BPO!e#vO!Z'cq!i'cq~O!Z/kO!i(|y~O!W'eq!Z'eq~P#.{Op:pO!e#vO(p'nO~O[:tO!W:sO~P#.{O!W:sO~Og(]!R!Z(]!R~P!0uOa%Zy!]%Zy'x%Zy!Z%Zy~P#.{O!Z0}O![)Vy~O!Z5kO![)Sq~O(R:zO~O!]1gO%h:}O~O!i;QO~O%h;VO~P&7SOP${qR${q[${qp${q!Q${q!j${q!n${q#P${q#l${q#m${q#n${q#o${q#p${q#q${q#r${q#s${q#t${q#u${q#w${q#y${q#z${q#}${q(_${q(p${q!Z${q![${q~P'%sO!O)|O'w)}O(x%POP'haR'ha['hal'hap'ha!Q'ha!j'ha!n'ha#P'ha#l'ha#m'ha#n'ha#o'ha#p'ha#q'ha#r'ha#s'ha#t'ha#u'ha#w'ha#y'ha#z'ha#}'ha(_'ha(p'ha(w'ha!Z'ha!['ha~O!O)|O'w)}OP'jaR'ja['jal'jap'ja!Q'ja!j'ja!n'ja#P'ja#l'ja#m'ja#n'ja#o'ja#p'ja#q'ja#r'ja#s'ja#t'ja#u'ja#w'ja#y'ja#z'ja#}'ja(_'ja(p'ja(w'ja(x'ja!Z'ja!['ja~OP$}qR$}q[$}qp$}q!Q$}q!j$}q!n$}q#P$}q#l$}q#m$}q#n$}q#o$}q#p$}q#q$}q#r$}q#s$}q#t$}q#u$}q#w$}q#y$}q#z$}q#}$}q(_$}q(p$}q!Z$}q![$}q~P'%sOg%d!Z!Z%d!Z#^%d!Z#}%d!Z~P!0uO!W;ZO~P#.{Op;[O!e#vO(p'nO~O[;^O!W;ZO~P#.{O!Z'nq!['nq~P#BPO!Z#f!Z![#f!Z~P#BPO#i%d!ZP%d!ZR%d!Z[%d!Za%d!Zp%d!Z!Q%d!Z!Z%d!Z!j%d!Z!n%d!Z#P%d!Z#l%d!Z#m%d!Z#n%d!Z#o%d!Z#p%d!Z#q%d!Z#r%d!Z#s%d!Z#t%d!Z#u%d!Z#w%d!Z#y%d!Z#z%d!Z'x%d!Z(_%d!Z(p%d!Z!i%d!Z!W%d!Z'u%d!Z#^%d!Zt%d!Z!]%d!Z%h%d!Z!e%d!Z~P#.{Op;fO!e#vO(p'nO~O!W;gO~P#.{Op;nO!e#vO(p'nO~O!W;oO~P#.{OP%d!ZR%d!Z[%d!Zp%d!Z!Q%d!Z!j%d!Z!n%d!Z#P%d!Z#l%d!Z#m%d!Z#n%d!Z#o%d!Z#p%d!Z#q%d!Z#r%d!Z#s%d!Z#t%d!Z#u%d!Z#w%d!Z#y%d!Z#z%d!Z#}%d!Z(_%d!Z(p%d!Z!Z%d!Z![%d!Z~P'%sOp;rO!e#vO(p'nO~Ot(dX~P1qO!O%qO~P!(yO(S!lO~P!(yO!WfX!ZfX#^fX~P%0XOP]XR]X[]Xp]X!O]X!Q]X!Z]X!ZfX!j]X!n]X#P]X#Q]X#^]X#^fX#ifX#l]X#m]X#n]X#o]X#p]X#q]X#r]X#s]X#t]X#u]X#w]X#y]X#z]X$P]X(_]X(p]X(w]X(x]X~O!efX!i]X!ifX(pfX~P'JlOP;vOQ;vOSfOd=rOe!iOnkOp;vOqkOrkOxkOz;vO|;vO!QWO!UkO!VkO!]XO!g;yO!jZO!m;vO!n;vO!o;vO!q;zO!s;}O!v!hO$V!kO$m=pO(R)ZO(TTO(WUO(_VO(m[O~O!Z<ZO![$pa~Oh%VOn%WOp%XOq$tOr$tOx%YOz%ZO|<fO!Q${O!]$|O!g=wO!j$xO#h<lO$V%_O$s<hO$u<jO$x%`O(R(tO(TTO(WUO(_$uO(w$}O(x%PO~Oj)bO~P( bOp!cX(p!cX~P# qOp(hX(p(hX~P#!dO![]X![fX~P'JlO!WfX!W$yX!ZfX!Z$yX#^fX~P!/qO#i<OO~O!e#vO#i<OO~O#^<`O~O#t<SO~O#^<pO!Z(uX![(uX~O#^<`O!Z(sX![(sX~O#i<qO~Og<sO~P!0uO#i<yO~O#i<zO~O!e#vO#i<{O~O!e#vO#i<qO~O#}<|O~P#BPO#i<}O~O#i=OO~O#i=TO~O#i=UO~O#i=VO~O#i=WO~O#}=XO~P!0uO#}=YO~P!0uO#Q#R#S#U#V#Y#g#h#s$m$s$u$x%[%]%g%h%i%p%r%u%v%x%z~'|T#m!V'z(S#nq#l#op!O'{$['{(R$^(c~",goto:"$8f)ZPPPPPP)[PP)_P)pP+Q/VPPPP6aPP6wPP<oP@cP@yP@yPPP@yPCRP@yP@yP@yPCVPC[PCyPHsPPPHwPPPPHwKzPPPLQLrPHwPHwPP! QHwPPPHwPHwP!#XHwP!&o!'t!'}P!(q!(u!(q!,SPPPPPPP!,s!'tPP!-T!.uP!2RHwHw!2W!5d!:Q!:Q!>PPPP!>XHwPPPPPPPPPP!AhP!BuPPHw!DWPHwPHwHwHwHwHwPHw!EjP!HtP!KzP!LO!LY!L^!L^P!HqP!Lb!LbP# hP# lHwPHw# r#$wCV@yP@yP@y@yP#&U@y@y#(h@y#+`@y#-l@y@y#.[#0p#0p#0u#1O#0p#1ZPP#0pP@y#1s@y#5r@y@y6aPPP#9wPPP#:b#:bP#:bP#:x#:bPP#;OP#:uP#:u#;c#:u#;}#<T#<W)_#<Z)_P#<b#<b#<bP)_P)_P)_P)_PP)_P#<h#<kP#<k)_P#<oP#<rP)_P)_P)_P)_P)_P)_)_PP#<x#=O#=Z#=a#=g#=m#=s#>R#>X#>c#>i#>s#>y#?Z#?a#@R#@e#@k#@q#AP#Af#CZ#Ci#Cp#E[#Ej#G[#Gj#Gp#Gv#G|#HW#H^#Hd#Hn#IQ#IWPPPPPPPPPPP#I^PPPPPPP#JR#MY#Nr#Ny$ RPPP$&mP$&v$)o$0Y$0]$0`$1_$1b$1i$1qP$1w$1zP$2h$2l$3d$4r$4w$5_PP$5d$5j$5n$5q$5u$5y$6u$7^$7u$7y$7|$8P$8V$8Y$8^$8bR!|RoqOXst!Z#d%l&p&r&s&u,n,s2S2VY!vQ'^-`1g5qQ%svQ%{yQ&S|Q&h!VS'U!e-WQ'd!iS'j!r!yU*h$|*X*lQ+l%|Q+y&UQ,_&bQ-^']Q-h'eQ-p'kQ0U*nQ1q,`R<m;z%SdOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$_$a$e%l%s&Q&i&l&p&r&s&u&y'R'`'p(R(T(Z(b(v(x(|){*f+U+Y,k,n,s-d-l-z.Q.o.v/i0V0d0l0|1j1z1{1}2P2S2V2X2x3O3d4q5y6Z6[6_6r8i8x9SS#q];w!r)]$Z$n'V)q-P-S/Q2h3{5m6i9}:a;v;y;z;}<O<P<Q<R<S<T<U<V<W<X<Y<Z<]<`<m<p<q<s<{<|=V=W=sU*{%[<e<fQ+q&OQ,a&eQ,h&mQ0r+dQ0u+fQ1S+rQ1y,fQ3W.bQ5V0wQ5]0}Q6Q1rQ7O3[Q8U5^R9Y7Q'QkOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n%l%s&Q&i&l&m&p&r&s&u&y'R'V'`'p(R(T(Z(b(v(x(|)q){*f+U+Y+d,k,n,s-P-S-d-l-z.Q.b.o.v/Q/i0V0d0l0|1j1z1{1}2P2S2V2X2h2x3O3[3d3{4q5m5y6Z6[6_6i6r7Q8i8x9S9}:a;v;y;z;}<O<P<Q<R<S<T<U<V<W<X<Y<Z<]<`<m<p<q<s<{<|=V=W=s!S!nQ!r!v!y!z$|'U']'^'j'k'l*h*l*n*o-W-^-`-p0U0X1g5q5s%[$ti#v$b$c$d$x${%O%Q%]%^%b)w*P*R*T*W*^*d*t*u+c+f+},Q.a.z/_/h/r/s/u0Y0[0g0h0i1^1a1i3Z4U4V4a4f4w5R5U5x6|7l7v7|8Q8f9V9e9n9t:S:f:t:};V;^<^<_<a<b<c<d<g<h<i<j<k<l<t<u<v<w<y<z<}=O=P=Q=R=S=T=U=X=Y=p=x=y=|=}Q&V|Q'S!eS'Y%h-ZQ+q&OQ,a&eQ0f+OQ1S+rQ1X+xQ1x,eQ1y,fQ5]0}Q5f1ZQ6Q1rQ6T1tQ6U1wQ8U5^Q8X5cQ8q6WQ9|8YQ:Y8nR<o*XrnOXst!V!Z#d%l&g&p&r&s&u,n,s2S2VR,c&i&z^OPXYstuvwz!Z!`!g!j!o#S#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n%l%s&Q&i&l&m&p&r&s&u&y'R'`'p(T(Z(b(v(x(|)q){*f+U+Y+d,k,n,s-P-S-d-l-z.Q.b.o.v/Q/i0V0d0l0|1j1z1{1}2P2S2V2X2h2x3O3[3d3{4q5m5y6Z6[6_6i6r7Q8i8x9S9}:a;v;y;z;}<O<P<Q<R<S<T<U<V<W<X<Y<Z<]<`<m<p<q<s<{<|=V=W=r=s[#]WZ#W#Z'V(R!b%im#h#i#l$x%d%g([(f(g(h*W*[*_+W+X+Z,j-Q.O.U.V.W.Y/h/k2[3S3T4X6h6yQ%vxQ%zyS&P|&UQ&]!TQ'a!hQ'c!iQ(o#sS+k%{%|Q+o&OQ,Y&`Q,^&bS-g'd'eQ.d(pQ0{+lQ1R+rQ1T+sQ1W+wQ1l,ZS1p,_,`Q2t-hQ5[0}Q5`1QQ5e1YQ6P1qQ8T5^Q8W5bQ9x8SR:w9y!U$zi$d%O%Q%]%^%b*P*R*^*t*u.z/r0Y0[0g0h0i4V4w7|9e=p=x=y!^%xy!i!u%z%{%|'T'c'd'e'i's*g+k+l-T-g-h-o/{0O0{2m2t2{4i4j4m7s9pQ+e%vQ,O&YQ,R&ZQ,]&bQ.c(oQ1k,YU1o,^,_,`Q3].dQ5z1lS6O1p1qQ8m6P#f=t#v$b$c$x${)w*T*W*d+c+f+},Q.a/_/h/s/u1^1a1i3Z4U4a4f5R5U5x6|7l7v8Q8f9V9n9t:S:f:t:};V;^<a<c<g<i<k<t<v<y<}=P=R=T=X=|=}o=u<^<_<b<d<h<j<l<u<w<z=O=Q=S=U=YW%Ti%V*v=pS&Y!Q&gQ&Z!RQ&[!SQ+S%cR+|&W%]%Si#v$b$c$d$x${%O%Q%]%^%b)w*P*R*T*W*^*d*t*u+c+f+},Q.a.z/_/h/r/s/u0Y0[0g0h0i1^1a1i3Z4U4V4a4f4w5R5U5x6|7l7v7|8Q8f9V9e9n9t:S:f:t:};V;^<^<_<a<b<c<d<g<h<i<j<k<l<t<u<v<w<y<z<}=O=P=Q=R=S=T=U=X=Y=p=x=y=|=}T)x$u)yV*{%[<e<fW'Y!e%h*X-ZS({#y#zQ+`%qQ+v&RS.](k(lQ1b,SQ4x0cR8^5k'QkOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n%l%s&Q&i&l&m&p&r&s&u&y'R'V'`'p(R(T(Z(b(v(x(|)q){*f+U+Y+d,k,n,s-P-S-d-l-z.Q.b.o.v/Q/i0V0d0l0|1j1z1{1}2P2S2V2X2h2x3O3[3d3{4q5m5y6Z6[6_6i6r7Q8i8x9S9}:a;v;y;z;}<O<P<Q<R<S<T<U<V<W<X<Y<Z<]<`<m<p<q<s<{<|=V=W=s$i$^c#Y#e%p%r%t(Q(W(r(w)P)Q)R)S)T)U)V)W)X)Y)[)^)`)e)o+a+u-U-s-x-}.P.n.q.u.w.x.y/]0j2c2f2v2}3c3h3i3j3k3l3m3n3o3p3q3r3s3t3w3x4P5O5Y6k6q6v7V7W7a7b8`8|9Q9[9b9c:c:y;R;x=gT#TV#U'RkOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n%l%s&Q&i&l&m&p&r&s&u&y'R'V'`'p(R(T(Z(b(v(x(|)q){*f+U+Y+d,k,n,s-P-S-d-l-z.Q.b.o.v/Q/i0V0d0l0|1j1z1{1}2P2S2V2X2h2x3O3[3d3{4q5m5y6Z6[6_6i6r7Q8i8x9S9}:a;v;y;z;}<O<P<Q<R<S<T<U<V<W<X<Y<Z<]<`<m<p<q<s<{<|=V=W=sQ'W!eR2i-W!W!nQ!e!r!v!y!z$|'U']'^'j'k'l*X*h*l*n*o-W-^-`-p0U0X1g5q5sR1d,UnqOXst!Z#d%l&p&r&s&u,n,s2S2VQ&w!^Q't!xS(q#u<OQ+i%yQ,W&]Q,X&_Q-e'bQ-r'mS.m(v<qS0k+U<{Q0y+jQ1f,VQ2Z,uQ2],vQ2e-RQ2r-fQ2u-jS5P0l=VQ5W0zS5Z0|=WQ6j2gQ6n2sQ6s2zQ8R5XQ8}6lQ9O6oQ9R6tR:`8z$d$]c#Y#e%r%t(Q(W(r(w)P)Q)R)S)T)U)V)W)X)Y)[)^)`)e)o+a+u-U-s-x-}.P.n.q.u.x.y/]0j2c2f2v2}3c3h3i3j3k3l3m3n3o3p3q3r3s3t3w3x4P5O5Y6k6q6v7V7W7a7b8`8|9Q9[9b9c:c:y;R;x=gS(m#p'gQ(}#zS+_%p.wS.^(l(nR3U._'QkOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n%l%s&Q&i&l&m&p&r&s&u&y'R'V'`'p(R(T(Z(b(v(x(|)q){*f+U+Y+d,k,n,s-P-S-d-l-z.Q.b.o.v/Q/i0V0d0l0|1j1z1{1}2P2S2V2X2h2x3O3[3d3{4q5m5y6Z6[6_6i6r7Q8i8x9S9}:a;v;y;z;}<O<P<Q<R<S<T<U<V<W<X<Y<Z<]<`<m<p<q<s<{<|=V=W=sS#q];wQ&r!XQ&s!YQ&u![Q&v!]R2R,qQ'_!hQ+b%vQ-c'aS.`(o+eQ2p-bW3Y.c.d0q0sQ6m2qW6z3V3X3]5TU9U6{6}7PU:e9W9X9ZS;T:d:gQ;b;UR;j;cU!wQ'^-`T5o1g5q!Q_OXZ`st!V!Z#d#h%d%l&g&i&p&r&s&u(h,n,s.V2S2V]!pQ!r'^-`1g5qT#q];w%^{OPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$_$a$e%l%s&Q&i&l&m&p&r&s&u&y'R'`'p(R(T(Z(b(v(x(|){*f+U+Y+d,k,n,s-d-l-z.Q.b.o.v/i0V0d0l0|1j1z1{1}2P2S2V2X2x3O3[3d4q5y6Z6[6_6r7Q8i8x9SS({#y#zS.](k(l!s=^$Z$n'V)q-P-S/Q2h3{5m6i9}:a;v;y;z;}<O<P<Q<R<S<T<U<V<W<X<Y<Z<]<`<m<p<q<s<{<|=V=W=sU$fd)],hS(n#p'gU*s%R(u3vU0e*z.i7]Q5T0rQ6{3WQ9X7OR:g9Ym!tQ!r!v!y!z'^'j'k'l-`-p1g5q5sQ'r!uS(d#g1|S-n'i'uQ/n*ZQ/{*gQ2|-qQ4]/oQ4i/}Q4j0OQ4o0WQ7h4WS7s4k4mS7w4p4rQ9g7iQ9k7oQ9p7tQ9u7yS:o9l9mS;Y:p:sS;e;Z;[S;m;f;gS;q;n;oR;t;rQ#wbQ'q!uS(c#g1|S(e#m+TQ+V%eQ+g%wQ+m%}U-m'i'r'uQ.R(dQ/m*ZQ/|*gQ0P*iQ0x+hQ1m,[S2y-n-qQ3R.ZS4[/n/oQ4e/yS4h/{0WQ4l0QQ5|1nQ6u2|Q7g4WQ7k4]U7r4i4o4rQ7u4nQ8k5}S9f7h7iQ9j7oQ9r7wQ9s7xQ:V8lQ:m9gS:n9k9mQ:v9uQ;P:WS;X:o:sS;d;Y;ZS;l;e;gS;p;m;oQ;s;qQ;u;tQ=a=[Q=l=eR=m=fV!wQ'^-`%^aOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$_$a$e%l%s&Q&i&l&m&p&r&s&u&y'R'`'p(R(T(Z(b(v(x(|){*f+U+Y+d,k,n,s-d-l-z.Q.b.o.v/i0V0d0l0|1j1z1{1}2P2S2V2X2x3O3[3d4q5y6Z6[6_6r7Q8i8x9SS#wz!j!r=Z$Z$n'V)q-P-S/Q2h3{5m6i9}:a;v;y;z;}<O<P<Q<R<S<T<U<V<W<X<Y<Z<]<`<m<p<q<s<{<|=V=W=sR=a=r%^bOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$_$a$e%l%s&Q&i&l&m&p&r&s&u&y'R'`'p(R(T(Z(b(v(x(|){*f+U+Y+d,k,n,s-d-l-z.Q.b.o.v/i0V0d0l0|1j1z1{1}2P2S2V2X2x3O3[3d4q5y6Z6[6_6r7Q8i8x9SQ%ej!^%wy!i!u%z%{%|'T'c'd'e'i's*g+k+l-T-g-h-o/{0O0{2m2t2{4i4j4m7s9pS%}z!jQ+h%xQ,[&bW1n,],^,_,`U5}1o1p1qS8l6O6PQ:W8m!r=[$Z$n'V)q-P-S/Q2h3{5m6i9}:a;v;y;z;}<O<P<Q<R<S<T<U<V<W<X<Y<Z<]<`<m<p<q<s<{<|=V=W=sQ=e=qR=f=r%QeOPXYstuvw!Z!`!g!o#S#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$_$a$e%l%s&Q&i&l&p&r&s&u&y'R'`'p(T(Z(b(v(x(|){*f+U+Y+d,k,n,s-d-l-z.Q.b.o.v/i0V0d0l0|1j1z1{1}2P2S2V2X2x3O3[3d4q5y6Z6[6_6r7Q8i8x9SY#bWZ#W#Z(R!b%im#h#i#l$x%d%g([(f(g(h*W*[*_+W+X+Z,j-Q.O.U.V.W.Y/h/k2[3S3T4X6h6yQ,i&m!p=]$Z$n)q-P-S/Q2h3{5m6i9}:a;v;y;z;}<O<P<Q<R<S<T<U<V<W<X<Y<Z<]<`<m<p<q<s<{<|=V=W=sR=`'VU'Z!e%h*XR2k-Z%SdOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$_$a$e%l%s&Q&i&l&p&r&s&u&y'R'`'p(R(T(Z(b(v(x(|){*f+U+Y,k,n,s-d-l-z.Q.o.v/i0V0d0l0|1j1z1{1}2P2S2V2X2x3O3d4q5y6Z6[6_6r8i8x9S!r)]$Z$n'V)q-P-S/Q2h3{5m6i9}:a;v;y;z;}<O<P<Q<R<S<T<U<V<W<X<Y<Z<]<`<m<p<q<s<{<|=V=W=sQ,h&mQ0r+dQ3W.bQ7O3[R9Y7Q!b$Tc#Y%p(Q(W(r(w)X)Y)^)e+u-s-x-}.P.n.q/]0j2v2}3c3s5O5Y6q6v7V9Q:c;x!P<U)[)o-U.w2c2f3h3q3r3w4P6k7W7a7b8`8|9[9b9c:y;R=g!f$Vc#Y%p(Q(W(r(w)U)V)X)Y)^)e+u-s-x-}.P.n.q/]0j2v2}3c3s5O5Y6q6v7V9Q:c;x!T<W)[)o-U.w2c2f3h3n3o3q3r3w4P6k7W7a7b8`8|9[9b9c:y;R=g!^$Zc#Y%p(Q(W(r(w)^)e+u-s-x-}.P.n.q/]0j2v2}3c3s5O5Y6q6v7V9Q:c;xQ4V/fz=s)[)o-U.w2c2f3h3w4P6k7W7a7b8`8|9[9b9c:y;R=gQ=x=zR=y={'QkOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n%l%s&Q&i&l&m&p&r&s&u&y'R'V'`'p(R(T(Z(b(v(x(|)q){*f+U+Y+d,k,n,s-P-S-d-l-z.Q.b.o.v/Q/i0V0d0l0|1j1z1{1}2P2S2V2X2h2x3O3[3d3{4q5m5y6Z6[6_6i6r7Q8i8x9S9}:a;v;y;z;}<O<P<Q<R<S<T<U<V<W<X<Y<Z<]<`<m<p<q<s<{<|=V=W=sS$oh$pR3|/P'XgOPWXYZhstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n$p%l%s&Q&i&l&m&p&r&s&u&y'R'V'`'p(R(T(Z(b(v(x(|)q){*f+U+Y+d,k,n,s-P-S-d-l-z.Q.b.o.v/P/Q/i0V0d0l0|1j1z1{1}2P2S2V2X2h2x3O3[3d3{4q5m5y6Z6[6_6i6r7Q8i8x9S9}:a;v;y;z;}<O<P<Q<R<S<T<U<V<W<X<Y<Z<]<`<m<p<q<s<{<|=V=W=sT$kf$qQ$ifS)h$l)lR)t$qT$jf$qT)j$l)l'XhOPWXYZhstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n$p%l%s&Q&i&l&m&p&r&s&u&y'R'V'`'p(R(T(Z(b(v(x(|)q){*f+U+Y+d,k,n,s-P-S-d-l-z.Q.b.o.v/P/Q/i0V0d0l0|1j1z1{1}2P2S2V2X2h2x3O3[3d3{4q5m5y6Z6[6_6i6r7Q8i8x9S9}:a;v;y;z;}<O<P<Q<R<S<T<U<V<W<X<Y<Z<]<`<m<p<q<s<{<|=V=W=sT$oh$pQ$rhR)s$p%^jOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$_$a$e%l%s&Q&i&l&m&p&r&s&u&y'R'`'p(R(T(Z(b(v(x(|){*f+U+Y+d,k,n,s-d-l-z.Q.b.o.v/i0V0d0l0|1j1z1{1}2P2S2V2X2x3O3[3d4q5y6Z6[6_6r7Q8i8x9S!s=q$Z$n'V)q-P-S/Q2h3{5m6i9}:a;v;y;z;}<O<P<Q<R<S<T<U<V<W<X<Y<Z<]<`<m<p<q<s<{<|=V=W=s#glOPXZst!Z!`!o#S#d#o#{$n%l&i&l&m&p&r&s&u&y'R'`(|)q*f+Y+d,k,n,s-d.b/Q/i0V0d1j1z1{1}2P2S2V2X3[3{4q5y6Z6[6_7Q8i8x!U%Ri$d%O%Q%]%^%b*P*R*^*t*u.z/r0Y0[0g0h0i4V4w7|9e=p=x=y#f(u#v$b$c$x${)w*T*W*d+c+f+},Q.a/_/h/s/u1^1a1i3Z4U4a4f5R5U5x6|7l7v8Q8f9V9n9t:S:f:t:};V;^<a<c<g<i<k<t<v<y<}=P=R=T=X=|=}Q+P%`Q/^)|o3v<^<_<b<d<h<j<l<u<w<z=O=Q=S=U=Y!U$yi$d%O%Q%]%^%b*P*R*^*t*u.z/r0Y0[0g0h0i4V4w7|9e=p=x=yQ*`$zU*i$|*X*lQ+Q%aQ0Q*j#f=c#v$b$c$x${)w*T*W*d+c+f+},Q.a/_/h/s/u1^1a1i3Z4U4a4f5R5U5x6|7l7v8Q8f9V9n9t:S:f:t:};V;^<a<c<g<i<k<t<v<y<}=P=R=T=X=|=}n=d<^<_<b<d<h<j<l<u<w<z=O=Q=S=U=YQ=h=tQ=i=uQ=j=vR=k=w!U%Ri$d%O%Q%]%^%b*P*R*^*t*u.z/r0Y0[0g0h0i4V4w7|9e=p=x=y#f(u#v$b$c$x${)w*T*W*d+c+f+},Q.a/_/h/s/u1^1a1i3Z4U4a4f5R5U5x6|7l7v8Q8f9V9n9t:S:f:t:};V;^<a<c<g<i<k<t<v<y<}=P=R=T=X=|=}o3v<^<_<b<d<h<j<l<u<w<z=O=Q=S=U=YnoOXst!Z#d%l&p&r&s&u,n,s2S2VS*c${*WQ,|&|Q,}'OR4`/s%[%Si#v$b$c$d$x${%O%Q%]%^%b)w*P*R*T*W*^*d*t*u+c+f+},Q.a.z/_/h/r/s/u0Y0[0g0h0i1^1a1i3Z4U4V4a4f4w5R5U5x6|7l7v7|8Q8f9V9e9n9t:S:f:t:};V;^<^<_<a<b<c<d<g<h<i<j<k<l<t<u<v<w<y<z<}=O=P=Q=R=S=T=U=X=Y=p=x=y=|=}Q,P&ZQ1`,RQ5i1_R8]5jV*k$|*X*lU*k$|*X*lT5p1g5qS/y*f/iQ4n0VT7x4q:PQ+g%wQ0P*iQ0x+hQ1m,[Q5|1nQ8k5}Q:V8lR;P:W!U%Oi$d%O%Q%]%^%b*P*R*^*t*u.z/r0Y0[0g0h0i4V4w7|9e=p=x=yx*P$v)c*Q*r+R/q0^0_3y4^4{4|4}7f7z9v:l=b=n=oS0Y*q0Z#f<a#v$b$c$x${)w*T*W*d+c+f+},Q.a/_/h/s/u1^1a1i3Z4U4a4f5R5U5x6|7l7v8Q8f9V9n9t:S:f:t:};V;^<a<c<g<i<k<t<v<y<}=P=R=T=X=|=}n<b<^<_<b<d<h<j<l<u<w<z=O=Q=S=U=Y!d<t(s)a*Y*b.e.h.l/Y/f/v0p1]3`4S4_4c5h7R7U7m7p7}8P9i9q9w:q:u;W;];h=z={`<u3u7X7[7`9]:h:k;kS=P.g3aT=Q7Z9`!U%Qi$d%O%Q%]%^%b*P*R*^*t*u.z/r0Y0[0g0h0i4V4w7|9e=p=x=y|*R$v)c*S*q+R/b/q0^0_3y4^4s4{4|4}7f7z9v:l=b=n=oS0[*r0]#f<c#v$b$c$x${)w*T*W*d+c+f+},Q.a/_/h/s/u1^1a1i3Z4U4a4f5R5U5x6|7l7v8Q8f9V9n9t:S:f:t:};V;^<a<c<g<i<k<t<v<y<}=P=R=T=X=|=}n<d<^<_<b<d<h<j<l<u<w<z=O=Q=S=U=Y!h<v(s)a*Y*b.f.g.l/Y/f/v0p1]3^3`4S4_4c5h7R7S7U7m7p7}8P9i9q9w:q:u;W;];h=z={d<w3u7Y7Z7`9]9^:h:i:k;kS=R.h3bT=S7[9arnOXst!V!Z#d%l&g&p&r&s&u,n,s2S2VQ&d!UR,k&mrnOXst!V!Z#d%l&g&p&r&s&u,n,s2S2VR&d!UQ,T&[R1[+|snOXst!V!Z#d%l&g&p&r&s&u,n,s2S2VQ1h,YS5w1k1lU8e5u5v5zS:R8g8hS:{:Q:TQ;_:|R;i;`Q&k!VR,d&gR6T1tR:Y8nS&P|&UR1T+sQ&p!WR,n&qR,t&vT2T,s2VR,x&wQ,w&wR2^,xQ'w!{R-t'wSsOtQ#dXT%os#dQ#OTR'y#OQ#RUR'{#RQ)y$uR/Z)yQ#UVR(O#UQ#XWU(U#X(V-{Q(V#YR-{(WQ-X'WR2j-XQ.p(wS3e.p3fR3f.qQ-`'^R2n-`Y!rQ'^-`1g5qR'h!rQ.{)cR3z.{U#_W%g*WU(]#_(^-|Q(^#`R-|(XQ-['ZR2l-[t`OXst!V!Z#d%l&g&i&p&r&s&u,n,s2S2VS#hZ%dU#r`#h.VR.V(hQ(i#jQ.S(eW.[(i.S3P6wQ3P.TR6w3QQ)l$lR/R)lQ$phR)r$pQ$`cU)_$`-w<[Q-w;xR<[)oQ/l*ZW4Y/l4Z7j9hU4Z/m/n/oS7j4[4]R9h7k$e*O$v(s)a)c*Y*b*q*r*|*}+R.g.h.j.k.l/Y/b/d/f/q/v0^0_0p1]3^3_3`3u3y4S4^4_4c4s4u4{4|4}5h7R7S7T7U7Z7[7^7_7`7f7m7p7z7}8P9]9^9_9i9q9v9w:h:i:j:k:l:q:u;W;];h;k=b=n=o=z={Q/t*bU4b/t4d7nQ4d/vR7n4cS*l$|*XR0S*lx*Q$v)c*q*r+R/q0^0_3y4^4{4|4}7f7z9v:l=b=n=o!d.e(s)a*Y*b.g.h.l/Y/f/v0p1]3`4S4_4c5h7R7U7m7p7}8P9i9q9w:q:u;W;];h=z={U/c*Q.e7Xa7X3u7Z7[7`9]:h:k;kQ0Z*qQ3a.gU4t0Z3a9`R9`7Z|*S$v)c*q*r+R/b/q0^0_3y4^4s4{4|4}7f7z9v:l=b=n=o!h.f(s)a*Y*b.g.h.l/Y/f/v0p1]3^3`4S4_4c5h7R7S7U7m7p7}8P9i9q9w:q:u;W;];h=z={U/e*S.f7Ye7Y3u7Z7[7`9]9^:h:i:k;kQ0]*rQ3b.hU4v0]3b9aR9a7[Q*w%UR0a*wQ5S0pR8O5SQ+[%jR0o+[Q5l1bS8_5l:OR:O8`Q,V&]R1e,VQ5q1gR8b5qQ1s,aS6R1s8oR8o6TQ1O+oW5_1O5a8V9zQ5a1RQ8V5`R9z8WQ+t&PR1U+tQ2V,sR6c2VYrOXst#dQ&t!ZQ+^%lQ,m&pQ,o&rQ,p&sQ,r&uQ2Q,nS2T,s2VR6b2SQ%npQ&x!_Q&{!aQ&}!bQ'P!cQ'o!uQ+]%kQ+i%yQ+{&VQ,c&kQ,z&zW-k'i'q'r'uQ-r'mQ0R*kQ0y+jS1v,d,gQ2_,yQ2`,|Q2a,}Q2u-jW2w-m-n-q-sQ5W0zQ5d1XQ5g1]Q5{1mQ6V1xQ6a2RU6p2v2y2|Q6s2zQ8R5XQ8Z5fQ8[5hQ8a5pQ8j5|Q8p6US9P6q6uQ9R6tQ9{8XQ:U8kQ:Z8qQ:b9QQ:x9|Q;O:VQ;S:cR;a;PQ%yyQ'b!iQ'm!uU+j%z%{%|Q-R'TU-f'c'd'eS-j'i'sQ/z*gS0z+k+lQ2g-TS2s-g-hQ2z-oS4g/{0OQ5X0{Q6l2mQ6o2tQ6t2{U7q4i4j4mQ9o7sR:r9pS$wi=pR*x%VU%Ui%V=pR0`*vQ$viS(s#v+fS)a$b$cQ)c$dQ*Y$xS*b${*WQ*q%OQ*r%QQ*|%]Q*}%^Q+R%bQ.g<aQ.h<cQ.j<gQ.k<iQ.l<kQ/Y)wQ/b*PQ/d*RQ/f*TQ/q*^S/v*d/hQ0^*tQ0_*ul0p+c,Q.a1a1i3Z5x6|8f9V:S:f:};VQ1]+}Q3^<tQ3_<vQ3`<yS3u<^<_Q3y.zS4S/_4UQ4^/rQ4_/sQ4c/uQ4s0YQ4u0[Q4{0gQ4|0hQ4}0iQ5h1^Q7R<}Q7S=PQ7T=RQ7U=TQ7Z<bQ7[<dQ7^<hQ7_<jQ7`<lQ7f4VQ7m4aQ7p4fQ7z4wQ7}5RQ8P5UQ9]<zQ9^<uQ9_<wQ9i7lQ9q7vQ9v7|Q9w8QQ:h=OQ:i=QQ:j=SQ:k=UQ:l9eQ:q9nQ:u9tQ;W=XQ;]:tQ;h;^Q;k=YQ=b=pQ=n=xQ=o=yQ=z=|R={=}Q*z%[Q.i<eR7]<fnpOXst!Z#d%l&p&r&s&u,n,s2S2VQ!fPS#fZ#oQ&z!`W'f!o*f0V4qQ'}#SQ)O#{Q)p$nS,g&i&lQ,l&mQ,y&yS-O'R/iQ-b'`Q.s(|Q/V)qQ0m+YQ0s+dQ2O,kQ2q-dQ3X.bQ4O/QQ4y0dQ5v1jQ6X1zQ6Y1{Q6^1}Q6`2PQ6e2XQ7P3[Q7c3{Q8h5yQ8t6ZQ8u6[Q8w6_Q9Z7QQ:T8iR:_8x#[cOPXZst!Z!`!o#d#o#{%l&i&l&m&p&r&s&u&y'R'`(|*f+Y+d,k,n,s-d.b/i0V0d1j1z1{1}2P2S2V2X3[4q5y6Z6[6_7Q8i8xQ#YWQ#eYQ%puQ%rvS%tw!gS(Q#W(TQ(W#ZQ(r#uQ(w#xQ)P$OQ)Q$PQ)R$QQ)S$RQ)T$SQ)U$TQ)V$UQ)W$VQ)X$WQ)Y$XQ)[$ZQ)^$_Q)`$aQ)e$eW)o$n)q/Q3{Q+a%sQ+u&QS-U'V2hQ-s'pS-x(R-zQ-}(ZQ.P(bQ.n(vQ.q(xQ.u;vQ.w;yQ.x;zQ.y;}Q/]){Q0j+UQ2c-PQ2f-SQ2v-lQ2}.QQ3c.oQ3h<OQ3i<PQ3j<QQ3k<RQ3l<SQ3m<TQ3n<UQ3o<VQ3p<WQ3q<XQ3r<YQ3s.vQ3t<]Q3w<`Q3x<mQ4P<ZQ5O0lQ5Y0|Q6k<pQ6q2xQ6v3OQ7V3dQ7W<qQ7a<sQ7b<{Q8`5mQ8|6iQ9Q6rQ9[<|Q9b=VQ9c=WQ:c9SQ:y9}Q;R:aQ;x#SR=g=sR#[WR'X!el!tQ!r!v!y!z'^'j'k'l-`-p1g5q5sS'T!e-WU*g$|*X*lS-T'U']S0O*h*nQ0W*oQ2m-^Q4m0UR4r0XR(y#xQ!fQT-_'^-`]!qQ!r'^-`1g5qQ#p]R'g;wR)d$dY!uQ'^-`1g5qQ'i!rS's!v!yS'u!z5sS-o'j'kQ-q'lR2{-pT#kZ%dS#jZ%dS%jm,jU(e#h#i#lS.T(f(gQ.X(hQ0n+ZQ3Q.UU3R.V.W.YS6x3S3TR9T6yd#^W#W#Z%g(R([*W+W.O/hr#gZm#h#i#l%d(f(g(h+Z.U.V.W.Y3S3T6yS*Z$x*_Q/o*[Q1|,jQ2d-QQ4W/kQ6g2[Q7i4XQ8{6hT=_'V+XV#aW%g*WU#`W%g*WS(S#W([U(X#Z+W/hS-V'V+XT-y(R.OV'[!e%h*XQ$lfR)v$qT)k$l)lR3}/PT*]$x*_T*e${*WQ0q+cQ1_,QQ3V.aQ5j1aQ5u1iQ6}3ZQ8g5xQ9W6|Q:Q8fQ:d9VQ:|:SQ;U:fQ;`:}R;c;VnqOXst!Z#d%l&p&r&s&u,n,s2S2VQ&j!VR,c&gtmOXst!U!V!Z#d%l&g&p&r&s&u,n,s2S2VR,j&mT%km,jR1c,SR,b&eQ&T|R+z&UR+p&OT&n!W&qT&o!W&qT2U,s2V",nodeNames:"⚠ ArithOp ArithOp ?. JSXStartTag LineComment BlockComment Script Hashbang ExportDeclaration export Star as VariableName String Escape from ; default FunctionDeclaration async function VariableDefinition > < TypeParamList const TypeDefinition extends ThisType this LiteralType ArithOp Number BooleanLiteral TemplateType InterpolationEnd Interpolation InterpolationStart NullType null VoidType void TypeofType typeof MemberExpression . PropertyName [ TemplateString Escape Interpolation super RegExp ] ArrayExpression Spread , } { ObjectExpression Property async get set PropertyDefinition Block : NewTarget new NewExpression ) ( ArgList UnaryExpression delete LogicOp BitOp YieldExpression yield AwaitExpression await ParenthesizedExpression ClassExpression class ClassBody MethodDeclaration Decorator @ MemberExpression PrivatePropertyName CallExpression TypeArgList CompareOp < declare Privacy static abstract override PrivatePropertyDefinition PropertyDeclaration readonly accessor Optional TypeAnnotation Equals StaticBlock FunctionExpression ArrowFunction ParamList ParamList ArrayPattern ObjectPattern PatternProperty Privacy readonly Arrow MemberExpression BinaryExpression ArithOp ArithOp ArithOp ArithOp BitOp CompareOp instanceof satisfies in CompareOp BitOp BitOp BitOp LogicOp LogicOp ConditionalExpression LogicOp LogicOp AssignmentExpression UpdateOp PostfixExpression CallExpression InstantiationExpression TaggedTemplateExpression DynamicImport import ImportMeta JSXElement JSXSelfCloseEndTag JSXSelfClosingTag JSXIdentifier JSXBuiltin JSXIdentifier JSXNamespacedName JSXMemberExpression JSXSpreadAttribute JSXAttribute JSXAttributeValue JSXEscape JSXEndTag JSXOpenTag JSXFragmentTag JSXText JSXEscape JSXStartCloseTag JSXCloseTag PrefixCast < ArrowFunction TypeParamList SequenceExpression InstantiationExpression KeyofType keyof UniqueType unique ImportType InferredType infer TypeName ParenthesizedType FunctionSignature ParamList NewSignature IndexedType TupleType Label ArrayType ReadonlyType ObjectType MethodType PropertyType IndexSignature PropertyDefinition CallSignature TypePredicate asserts is NewSignature new UnionType LogicOp IntersectionType LogicOp ConditionalType ParameterizedType ClassDeclaration abstract implements type VariableDeclaration let var using TypeAliasDeclaration InterfaceDeclaration interface EnumDeclaration enum EnumBody NamespaceDeclaration namespace module AmbientDeclaration declare GlobalDeclaration global ClassDeclaration ClassBody AmbientFunctionDeclaration ExportGroup VariableName VariableName ImportDeclaration ImportGroup ForStatement for ForSpec ForInSpec ForOfSpec of WhileStatement while WithStatement with DoStatement do IfStatement if else SwitchStatement switch SwitchBody CaseLabel case DefaultLabel TryStatement try CatchClause catch FinallyClause finally ReturnStatement return ThrowStatement throw BreakStatement break ContinueStatement continue DebuggerStatement debugger LabeledStatement ExpressionStatement SingleExpression SingleClassItem",maxTerm:378,context:sN,nodeProps:[["isolate",-8,5,6,14,35,37,49,51,53,""],["group",-26,9,17,19,66,206,210,214,215,217,220,223,233,235,241,243,245,247,250,256,262,264,266,268,270,272,273,"Statement",-34,13,14,30,33,34,40,49,52,53,55,60,68,70,74,78,80,82,83,108,109,118,119,135,138,140,141,142,143,144,146,147,166,168,170,"Expression",-23,29,31,35,39,41,43,172,174,176,177,179,180,181,183,184,185,187,188,189,200,202,204,205,"Type",-3,86,101,107,"ClassItem"],["openedBy",23,"<",36,"InterpolationStart",54,"[",58,"{",71,"(",159,"JSXStartCloseTag"],["closedBy",-2,24,167,">",38,"InterpolationEnd",48,"]",59,"}",72,")",164,"JSXEndTag"]],propSources:[cN],skippedNodes:[0,5,6,276],repeatNodeCount:37,tokenData:"$Fq07[R!bOX%ZXY+gYZ-yZ[+g[]%Z]^.c^p%Zpq+gqr/mrs3cst:_tuEruvJSvwLkwx! Yxy!'iyz!(sz{!)}{|!,q|}!.O}!O!,q!O!P!/Y!P!Q!9j!Q!R#:O!R![#<_![!]#I_!]!^#Jk!^!_#Ku!_!`$![!`!a$$v!a!b$*T!b!c$,r!c!}Er!}#O$-|#O#P$/W#P#Q$4o#Q#R$5y#R#SEr#S#T$7W#T#o$8b#o#p$<r#p#q$=h#q#r$>x#r#s$@U#s$f%Z$f$g+g$g#BYEr#BY#BZ$A`#BZ$ISEr$IS$I_$A`$I_$I|Er$I|$I}$Dk$I}$JO$Dk$JO$JTEr$JT$JU$A`$JU$KVEr$KV$KW$A`$KW&FUEr&FU&FV$A`&FV;'SEr;'S;=`I|<%l?HTEr?HT?HU$A`?HUOEr(n%d_$h&j(Up(X!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z&j&hT$h&jO!^&c!_#o&c#p;'S&c;'S;=`&w<%lO&c&j&zP;=`<%l&c'|'U]$h&j(X!bOY&}YZ&cZw&}wx&cx!^&}!^!_'}!_#O&}#O#P&c#P#o&}#o#p'}#p;'S&};'S;=`(l<%lO&}!b(SU(X!bOY'}Zw'}x#O'}#P;'S'};'S;=`(f<%lO'}!b(iP;=`<%l'}'|(oP;=`<%l&}'[(y]$h&j(UpOY(rYZ&cZr(rrs&cs!^(r!^!_)r!_#O(r#O#P&c#P#o(r#o#p)r#p;'S(r;'S;=`*a<%lO(rp)wU(UpOY)rZr)rs#O)r#P;'S)r;'S;=`*Z<%lO)rp*^P;=`<%l)r'[*dP;=`<%l(r#S*nX(Up(X!bOY*gZr*grs'}sw*gwx)rx#O*g#P;'S*g;'S;=`+Z<%lO*g#S+^P;=`<%l*g(n+dP;=`<%l%Z07[+rq$h&j(Up(X!b'z0/lOX%ZXY+gYZ&cZ[+g[p%Zpq+gqr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p$f%Z$f$g+g$g#BY%Z#BY#BZ+g#BZ$IS%Z$IS$I_+g$I_$JT%Z$JT$JU+g$JU$KV%Z$KV$KW+g$KW&FU%Z&FU&FV+g&FV;'S%Z;'S;=`+a<%l?HT%Z?HT?HU+g?HUO%Z07[.ST(V#S$h&j'{0/lO!^&c!_#o&c#p;'S&c;'S;=`&w<%lO&c07[.n_$h&j(Up(X!b'{0/lOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z)3p/x`$h&j!n),Q(Up(X!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`0z!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW1V`#u(Ch$h&j(Up(X!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`2X!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW2d_#u(Ch$h&j(Up(X!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'At3l_(T':f$h&j(X!bOY4kYZ5qZr4krs7nsw4kwx5qx!^4k!^!_8p!_#O4k#O#P5q#P#o4k#o#p8p#p;'S4k;'S;=`:X<%lO4k(^4r_$h&j(X!bOY4kYZ5qZr4krs7nsw4kwx5qx!^4k!^!_8p!_#O4k#O#P5q#P#o4k#o#p8p#p;'S4k;'S;=`:X<%lO4k&z5vX$h&jOr5qrs6cs!^5q!^!_6y!_#o5q#o#p6y#p;'S5q;'S;=`7h<%lO5q&z6jT$c`$h&jO!^&c!_#o&c#p;'S&c;'S;=`&w<%lO&c`6|TOr6yrs7]s;'S6y;'S;=`7b<%lO6y`7bO$c``7eP;=`<%l6y&z7kP;=`<%l5q(^7w]$c`$h&j(X!bOY&}YZ&cZw&}wx&cx!^&}!^!_'}!_#O&}#O#P&c#P#o&}#o#p'}#p;'S&};'S;=`(l<%lO&}!r8uZ(X!bOY8pYZ6yZr8prs9hsw8pwx6yx#O8p#O#P6y#P;'S8p;'S;=`:R<%lO8p!r9oU$c`(X!bOY'}Zw'}x#O'}#P;'S'};'S;=`(f<%lO'}!r:UP;=`<%l8p(^:[P;=`<%l4k%9[:hh$h&j(Up(X!bOY%ZYZ&cZq%Zqr<Srs&}st%ZtuCruw%Zwx(rx!^%Z!^!_*g!_!c%Z!c!}Cr!}#O%Z#O#P&c#P#R%Z#R#SCr#S#T%Z#T#oCr#o#p*g#p$g%Z$g;'SCr;'S;=`El<%lOCr(r<__WS$h&j(Up(X!bOY<SYZ&cZr<Srs=^sw<Swx@nx!^<S!^!_Bm!_#O<S#O#P>`#P#o<S#o#pBm#p;'S<S;'S;=`Cl<%lO<S(Q=g]WS$h&j(X!bOY=^YZ&cZw=^wx>`x!^=^!^!_?q!_#O=^#O#P>`#P#o=^#o#p?q#p;'S=^;'S;=`@h<%lO=^&n>gXWS$h&jOY>`YZ&cZ!^>`!^!_?S!_#o>`#o#p?S#p;'S>`;'S;=`?k<%lO>`S?XSWSOY?SZ;'S?S;'S;=`?e<%lO?SS?hP;=`<%l?S&n?nP;=`<%l>`!f?xWWS(X!bOY?qZw?qwx?Sx#O?q#O#P?S#P;'S?q;'S;=`@b<%lO?q!f@eP;=`<%l?q(Q@kP;=`<%l=^'`@w]WS$h&j(UpOY@nYZ&cZr@nrs>`s!^@n!^!_Ap!_#O@n#O#P>`#P#o@n#o#pAp#p;'S@n;'S;=`Bg<%lO@ntAwWWS(UpOYApZrAprs?Ss#OAp#O#P?S#P;'SAp;'S;=`Ba<%lOAptBdP;=`<%lAp'`BjP;=`<%l@n#WBvYWS(Up(X!bOYBmZrBmrs?qswBmwxApx#OBm#O#P?S#P;'SBm;'S;=`Cf<%lOBm#WCiP;=`<%lBm(rCoP;=`<%l<S%9[C}i$h&j(m%1l(Up(X!bOY%ZYZ&cZr%Zrs&}st%ZtuCruw%Zwx(rx!Q%Z!Q![Cr![!^%Z!^!_*g!_!c%Z!c!}Cr!}#O%Z#O#P&c#P#R%Z#R#SCr#S#T%Z#T#oCr#o#p*g#p$g%Z$g;'SCr;'S;=`El<%lOCr%9[EoP;=`<%lCr07[FRk$h&j(Up(X!b$[#t(R,2j(c$I[OY%ZYZ&cZr%Zrs&}st%ZtuEruw%Zwx(rx}%Z}!OGv!O!Q%Z!Q![Er![!^%Z!^!_*g!_!c%Z!c!}Er!}#O%Z#O#P&c#P#R%Z#R#SEr#S#T%Z#T#oEr#o#p*g#p$g%Z$g;'SEr;'S;=`I|<%lOEr+dHRk$h&j(Up(X!b$[#tOY%ZYZ&cZr%Zrs&}st%ZtuGvuw%Zwx(rx}%Z}!OGv!O!Q%Z!Q![Gv![!^%Z!^!_*g!_!c%Z!c!}Gv!}#O%Z#O#P&c#P#R%Z#R#SGv#S#T%Z#T#oGv#o#p*g#p$g%Z$g;'SGv;'S;=`Iv<%lOGv+dIyP;=`<%lGv07[JPP;=`<%lEr(KWJ_`$h&j(Up(X!b#n(ChOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KWKl_$h&j$P(Ch(Up(X!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z,#xLva(x+JY$h&j(Up(X!bOY%ZYZ&cZr%Zrs&}sv%ZvwM{wx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KWNW`$h&j#y(Ch(Up(X!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'At! c_(W';W$h&j(UpOY!!bYZ!#hZr!!brs!#hsw!!bwx!$xx!^!!b!^!_!%z!_#O!!b#O#P!#h#P#o!!b#o#p!%z#p;'S!!b;'S;=`!'c<%lO!!b'l!!i_$h&j(UpOY!!bYZ!#hZr!!brs!#hsw!!bwx!$xx!^!!b!^!_!%z!_#O!!b#O#P!#h#P#o!!b#o#p!%z#p;'S!!b;'S;=`!'c<%lO!!b&z!#mX$h&jOw!#hwx6cx!^!#h!^!_!$Y!_#o!#h#o#p!$Y#p;'S!#h;'S;=`!$r<%lO!#h`!$]TOw!$Ywx7]x;'S!$Y;'S;=`!$l<%lO!$Y`!$oP;=`<%l!$Y&z!$uP;=`<%l!#h'l!%R]$c`$h&j(UpOY(rYZ&cZr(rrs&cs!^(r!^!_)r!_#O(r#O#P&c#P#o(r#o#p)r#p;'S(r;'S;=`*a<%lO(r!Q!&PZ(UpOY!%zYZ!$YZr!%zrs!$Ysw!%zwx!&rx#O!%z#O#P!$Y#P;'S!%z;'S;=`!']<%lO!%z!Q!&yU$c`(UpOY)rZr)rs#O)r#P;'S)r;'S;=`*Z<%lO)r!Q!'`P;=`<%l!%z'l!'fP;=`<%l!!b/5|!'t_!j/.^$h&j(Up(X!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z#&U!)O_!i!Lf$h&j(Up(X!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z-!n!*[b$h&j(Up(X!b(S%&f#o(ChOY%ZYZ&cZr%Zrs&}sw%Zwx(rxz%Zz{!+d{!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW!+o`$h&j(Up(X!b#l(ChOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z+;x!,|`$h&j(Up(X!bp+4YOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z,$U!.Z_!Z+Jf$h&j(Up(X!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z07[!/ec$h&j(Up(X!b!O.2^OY%ZYZ&cZr%Zrs&}sw%Zwx(rx!O%Z!O!P!0p!P!Q%Z!Q![!3Y![!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z#%|!0ya$h&j(Up(X!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!O%Z!O!P!2O!P!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z#%|!2Z_!Y!L^$h&j(Up(X!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad!3eg$h&j(Up(X!bq'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q![!3Y![!^%Z!^!_*g!_!g%Z!g!h!4|!h#O%Z#O#P&c#P#R%Z#R#S!3Y#S#X%Z#X#Y!4|#Y#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad!5Vg$h&j(Up(X!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx{%Z{|!6n|}%Z}!O!6n!O!Q%Z!Q![!8S![!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S!8S#S#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad!6wc$h&j(Up(X!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q![!8S![!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S!8S#S#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad!8_c$h&j(Up(X!bq'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q![!8S![!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S!8S#S#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z07[!9uf$h&j(Up(X!b#m(ChOY!;ZYZ&cZr!;Zrs!<nsw!;Zwx!Lcxz!;Zz{#-}{!P!;Z!P!Q#/d!Q!^!;Z!^!_#(i!_!`#7S!`!a#8i!a!}!;Z!}#O#,f#O#P!Dy#P#o!;Z#o#p#(i#p;'S!;Z;'S;=`#-w<%lO!;Z?O!;fb$h&j(Up(X!b!V7`OY!;ZYZ&cZr!;Zrs!<nsw!;Zwx!Lcx!P!;Z!P!Q#&`!Q!^!;Z!^!_#(i!_!}!;Z!}#O#,f#O#P!Dy#P#o!;Z#o#p#(i#p;'S!;Z;'S;=`#-w<%lO!;Z>^!<w`$h&j(X!b!V7`OY!<nYZ&cZw!<nwx!=yx!P!<n!P!Q!Eq!Q!^!<n!^!_!Gr!_!}!<n!}#O!KS#O#P!Dy#P#o!<n#o#p!Gr#p;'S!<n;'S;=`!L]<%lO!<n<z!>Q^$h&j!V7`OY!=yYZ&cZ!P!=y!P!Q!>|!Q!^!=y!^!_!@c!_!}!=y!}#O!CW#O#P!Dy#P#o!=y#o#p!@c#p;'S!=y;'S;=`!Ek<%lO!=y<z!?Td$h&j!V7`O!^&c!_#W&c#W#X!>|#X#Z&c#Z#[!>|#[#]&c#]#^!>|#^#a&c#a#b!>|#b#g&c#g#h!>|#h#i&c#i#j!>|#j#k!>|#k#m&c#m#n!>|#n#o&c#p;'S&c;'S;=`&w<%lO&c7`!@hX!V7`OY!@cZ!P!@c!P!Q!AT!Q!}!@c!}#O!Ar#O#P!Bq#P;'S!@c;'S;=`!CQ<%lO!@c7`!AYW!V7`#W#X!AT#Z#[!AT#]#^!AT#a#b!AT#g#h!AT#i#j!AT#j#k!AT#m#n!AT7`!AuVOY!ArZ#O!Ar#O#P!B[#P#Q!@c#Q;'S!Ar;'S;=`!Bk<%lO!Ar7`!B_SOY!ArZ;'S!Ar;'S;=`!Bk<%lO!Ar7`!BnP;=`<%l!Ar7`!BtSOY!@cZ;'S!@c;'S;=`!CQ<%lO!@c7`!CTP;=`<%l!@c<z!C][$h&jOY!CWYZ&cZ!^!CW!^!_!Ar!_#O!CW#O#P!DR#P#Q!=y#Q#o!CW#o#p!Ar#p;'S!CW;'S;=`!Ds<%lO!CW<z!DWX$h&jOY!CWYZ&cZ!^!CW!^!_!Ar!_#o!CW#o#p!Ar#p;'S!CW;'S;=`!Ds<%lO!CW<z!DvP;=`<%l!CW<z!EOX$h&jOY!=yYZ&cZ!^!=y!^!_!@c!_#o!=y#o#p!@c#p;'S!=y;'S;=`!Ek<%lO!=y<z!EnP;=`<%l!=y>^!Ezl$h&j(X!b!V7`OY&}YZ&cZw&}wx&cx!^&}!^!_'}!_#O&}#O#P&c#P#W&}#W#X!Eq#X#Z&}#Z#[!Eq#[#]&}#]#^!Eq#^#a&}#a#b!Eq#b#g&}#g#h!Eq#h#i&}#i#j!Eq#j#k!Eq#k#m&}#m#n!Eq#n#o&}#o#p'}#p;'S&};'S;=`(l<%lO&}8r!GyZ(X!b!V7`OY!GrZw!Grwx!@cx!P!Gr!P!Q!Hl!Q!}!Gr!}#O!JU#O#P!Bq#P;'S!Gr;'S;=`!J|<%lO!Gr8r!Hse(X!b!V7`OY'}Zw'}x#O'}#P#W'}#W#X!Hl#X#Z'}#Z#[!Hl#[#]'}#]#^!Hl#^#a'}#a#b!Hl#b#g'}#g#h!Hl#h#i'}#i#j!Hl#j#k!Hl#k#m'}#m#n!Hl#n;'S'};'S;=`(f<%lO'}8r!JZX(X!bOY!JUZw!JUwx!Arx#O!JU#O#P!B[#P#Q!Gr#Q;'S!JU;'S;=`!Jv<%lO!JU8r!JyP;=`<%l!JU8r!KPP;=`<%l!Gr>^!KZ^$h&j(X!bOY!KSYZ&cZw!KSwx!CWx!^!KS!^!_!JU!_#O!KS#O#P!DR#P#Q!<n#Q#o!KS#o#p!JU#p;'S!KS;'S;=`!LV<%lO!KS>^!LYP;=`<%l!KS>^!L`P;=`<%l!<n=l!Ll`$h&j(Up!V7`OY!LcYZ&cZr!Lcrs!=ys!P!Lc!P!Q!Mn!Q!^!Lc!^!_# o!_!}!Lc!}#O#%P#O#P!Dy#P#o!Lc#o#p# o#p;'S!Lc;'S;=`#&Y<%lO!Lc=l!Mwl$h&j(Up!V7`OY(rYZ&cZr(rrs&cs!^(r!^!_)r!_#O(r#O#P&c#P#W(r#W#X!Mn#X#Z(r#Z#[!Mn#[#](r#]#^!Mn#^#a(r#a#b!Mn#b#g(r#g#h!Mn#h#i(r#i#j!Mn#j#k!Mn#k#m(r#m#n!Mn#n#o(r#o#p)r#p;'S(r;'S;=`*a<%lO(r8Q# vZ(Up!V7`OY# oZr# ors!@cs!P# o!P!Q#!i!Q!}# o!}#O#$R#O#P!Bq#P;'S# o;'S;=`#$y<%lO# o8Q#!pe(Up!V7`OY)rZr)rs#O)r#P#W)r#W#X#!i#X#Z)r#Z#[#!i#[#])r#]#^#!i#^#a)r#a#b#!i#b#g)r#g#h#!i#h#i)r#i#j#!i#j#k#!i#k#m)r#m#n#!i#n;'S)r;'S;=`*Z<%lO)r8Q#$WX(UpOY#$RZr#$Rrs!Ars#O#$R#O#P!B[#P#Q# o#Q;'S#$R;'S;=`#$s<%lO#$R8Q#$vP;=`<%l#$R8Q#$|P;=`<%l# o=l#%W^$h&j(UpOY#%PYZ&cZr#%Prs!CWs!^#%P!^!_#$R!_#O#%P#O#P!DR#P#Q!Lc#Q#o#%P#o#p#$R#p;'S#%P;'S;=`#&S<%lO#%P=l#&VP;=`<%l#%P=l#&]P;=`<%l!Lc?O#&kn$h&j(Up(X!b!V7`OY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#W%Z#W#X#&`#X#Z%Z#Z#[#&`#[#]%Z#]#^#&`#^#a%Z#a#b#&`#b#g%Z#g#h#&`#h#i%Z#i#j#&`#j#k#&`#k#m%Z#m#n#&`#n#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z9d#(r](Up(X!b!V7`OY#(iZr#(irs!Grsw#(iwx# ox!P#(i!P!Q#)k!Q!}#(i!}#O#+`#O#P!Bq#P;'S#(i;'S;=`#,`<%lO#(i9d#)th(Up(X!b!V7`OY*gZr*grs'}sw*gwx)rx#O*g#P#W*g#W#X#)k#X#Z*g#Z#[#)k#[#]*g#]#^#)k#^#a*g#a#b#)k#b#g*g#g#h#)k#h#i*g#i#j#)k#j#k#)k#k#m*g#m#n#)k#n;'S*g;'S;=`+Z<%lO*g9d#+gZ(Up(X!bOY#+`Zr#+`rs!JUsw#+`wx#$Rx#O#+`#O#P!B[#P#Q#(i#Q;'S#+`;'S;=`#,Y<%lO#+`9d#,]P;=`<%l#+`9d#,cP;=`<%l#(i?O#,o`$h&j(Up(X!bOY#,fYZ&cZr#,frs!KSsw#,fwx#%Px!^#,f!^!_#+`!_#O#,f#O#P!DR#P#Q!;Z#Q#o#,f#o#p#+`#p;'S#,f;'S;=`#-q<%lO#,f?O#-tP;=`<%l#,f?O#-zP;=`<%l!;Z07[#.[b$h&j(Up(X!b'|0/l!V7`OY!;ZYZ&cZr!;Zrs!<nsw!;Zwx!Lcx!P!;Z!P!Q#&`!Q!^!;Z!^!_#(i!_!}!;Z!}#O#,f#O#P!Dy#P#o!;Z#o#p#(i#p;'S!;Z;'S;=`#-w<%lO!;Z07[#/o_$h&j(Up(X!bT0/lOY#/dYZ&cZr#/drs#0nsw#/dwx#4Ox!^#/d!^!_#5}!_#O#/d#O#P#1p#P#o#/d#o#p#5}#p;'S#/d;'S;=`#6|<%lO#/d06j#0w]$h&j(X!bT0/lOY#0nYZ&cZw#0nwx#1px!^#0n!^!_#3R!_#O#0n#O#P#1p#P#o#0n#o#p#3R#p;'S#0n;'S;=`#3x<%lO#0n05W#1wX$h&jT0/lOY#1pYZ&cZ!^#1p!^!_#2d!_#o#1p#o#p#2d#p;'S#1p;'S;=`#2{<%lO#1p0/l#2iST0/lOY#2dZ;'S#2d;'S;=`#2u<%lO#2d0/l#2xP;=`<%l#2d05W#3OP;=`<%l#1p01O#3YW(X!bT0/lOY#3RZw#3Rwx#2dx#O#3R#O#P#2d#P;'S#3R;'S;=`#3r<%lO#3R01O#3uP;=`<%l#3R06j#3{P;=`<%l#0n05x#4X]$h&j(UpT0/lOY#4OYZ&cZr#4Ors#1ps!^#4O!^!_#5Q!_#O#4O#O#P#1p#P#o#4O#o#p#5Q#p;'S#4O;'S;=`#5w<%lO#4O00^#5XW(UpT0/lOY#5QZr#5Qrs#2ds#O#5Q#O#P#2d#P;'S#5Q;'S;=`#5q<%lO#5Q00^#5tP;=`<%l#5Q05x#5zP;=`<%l#4O01p#6WY(Up(X!bT0/lOY#5}Zr#5}rs#3Rsw#5}wx#5Qx#O#5}#O#P#2d#P;'S#5};'S;=`#6v<%lO#5}01p#6yP;=`<%l#5}07[#7PP;=`<%l#/d)3h#7ab$h&j$P(Ch(Up(X!b!V7`OY!;ZYZ&cZr!;Zrs!<nsw!;Zwx!Lcx!P!;Z!P!Q#&`!Q!^!;Z!^!_#(i!_!}!;Z!}#O#,f#O#P!Dy#P#o!;Z#o#p#(i#p;'S!;Z;'S;=`#-w<%lO!;ZAt#8vb$Y#t$h&j(Up(X!b!V7`OY!;ZYZ&cZr!;Zrs!<nsw!;Zwx!Lcx!P!;Z!P!Q#&`!Q!^!;Z!^!_#(i!_!}!;Z!}#O#,f#O#P!Dy#P#o!;Z#o#p#(i#p;'S!;Z;'S;=`#-w<%lO!;Z'Ad#:Zp$h&j(Up(X!bq'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!O%Z!O!P!3Y!P!Q%Z!Q![#<_![!^%Z!^!_*g!_!g%Z!g!h!4|!h#O%Z#O#P&c#P#R%Z#R#S#<_#S#U%Z#U#V#?i#V#X%Z#X#Y!4|#Y#b%Z#b#c#>_#c#d#Bq#d#l%Z#l#m#Es#m#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#<jk$h&j(Up(X!bq'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!O%Z!O!P!3Y!P!Q%Z!Q![#<_![!^%Z!^!_*g!_!g%Z!g!h!4|!h#O%Z#O#P&c#P#R%Z#R#S#<_#S#X%Z#X#Y!4|#Y#b%Z#b#c#>_#c#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#>j_$h&j(Up(X!bq'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#?rd$h&j(Up(X!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q!R#AQ!R!S#AQ!S!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S#AQ#S#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#A]f$h&j(Up(X!bq'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q!R#AQ!R!S#AQ!S!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S#AQ#S#b%Z#b#c#>_#c#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#Bzc$h&j(Up(X!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q!Y#DV!Y!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S#DV#S#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#Dbe$h&j(Up(X!bq'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q!Y#DV!Y!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S#DV#S#b%Z#b#c#>_#c#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#E|g$h&j(Up(X!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q![#Ge![!^%Z!^!_*g!_!c%Z!c!i#Ge!i#O%Z#O#P&c#P#R%Z#R#S#Ge#S#T%Z#T#Z#Ge#Z#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#Gpi$h&j(Up(X!bq'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q![#Ge![!^%Z!^!_*g!_!c%Z!c!i#Ge!i#O%Z#O#P&c#P#R%Z#R#S#Ge#S#T%Z#T#Z#Ge#Z#b%Z#b#c#>_#c#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z*)x#Il_!e$b$h&j#})Lv(Up(X!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z)[#Jv_al$h&j(Up(X!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z04f#LS^h#)`#P-<U(Up(X!b$m7`OY*gZr*grs'}sw*gwx)rx!P*g!P!Q#MO!Q!^*g!^!_#Mt!_!`$ f!`#O*g#P;'S*g;'S;=`+Z<%lO*g(n#MXX$j&j(Up(X!bOY*gZr*grs'}sw*gwx)rx#O*g#P;'S*g;'S;=`+Z<%lO*g(El#M}Z#p(Ch(Up(X!bOY*gZr*grs'}sw*gwx)rx!_*g!_!`#Np!`#O*g#P;'S*g;'S;=`+Z<%lO*g(El#NyX$P(Ch(Up(X!bOY*gZr*grs'}sw*gwx)rx#O*g#P;'S*g;'S;=`+Z<%lO*g(El$ oX#q(Ch(Up(X!bOY*gZr*grs'}sw*gwx)rx#O*g#P;'S*g;'S;=`+Z<%lO*g*)x$!ga#^*!Y$h&j(Up(X!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`0z!`!a$#l!a#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(K[$#w_#i(Cl$h&j(Up(X!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z*)x$%Vag!*r#q(Ch$e#|$h&j(Up(X!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`$&[!`!a$'f!a#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW$&g_#q(Ch$h&j(Up(X!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW$'qa#p(Ch$h&j(Up(X!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`!a$(v!a#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW$)R`#p(Ch$h&j(Up(X!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(Kd$*`a(p(Ct$h&j(Up(X!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!a%Z!a!b$+e!b#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW$+p`$h&j#z(Ch(Up(X!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z%#`$,}_!z$Ip$h&j(Up(X!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z04f$.X_!Q0,v$h&j(Up(X!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(n$/]Z$h&jO!^$0O!^!_$0f!_#i$0O#i#j$0k#j#l$0O#l#m$2^#m#o$0O#o#p$0f#p;'S$0O;'S;=`$4i<%lO$0O(n$0VT_#S$h&jO!^&c!_#o&c#p;'S&c;'S;=`&w<%lO&c#S$0kO_#S(n$0p[$h&jO!Q&c!Q![$1f![!^&c!_!c&c!c!i$1f!i#T&c#T#Z$1f#Z#o&c#o#p$3|#p;'S&c;'S;=`&w<%lO&c(n$1kZ$h&jO!Q&c!Q![$2^![!^&c!_!c&c!c!i$2^!i#T&c#T#Z$2^#Z#o&c#p;'S&c;'S;=`&w<%lO&c(n$2cZ$h&jO!Q&c!Q![$3U![!^&c!_!c&c!c!i$3U!i#T&c#T#Z$3U#Z#o&c#p;'S&c;'S;=`&w<%lO&c(n$3ZZ$h&jO!Q&c!Q![$0O![!^&c!_!c&c!c!i$0O!i#T&c#T#Z$0O#Z#o&c#p;'S&c;'S;=`&w<%lO&c#S$4PR!Q![$4Y!c!i$4Y#T#Z$4Y#S$4]S!Q![$4Y!c!i$4Y#T#Z$4Y#q#r$0f(n$4lP;=`<%l$0O#1[$4z_!W#)l$h&j(Up(X!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW$6U`#w(Ch$h&j(Up(X!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z+;p$7c_$h&j(Up(X!b(_+4QOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z07[$8qk$h&j(Up(X!b(R,2j$^#t(c$I[OY%ZYZ&cZr%Zrs&}st%Ztu$8buw%Zwx(rx}%Z}!O$:f!O!Q%Z!Q![$8b![!^%Z!^!_*g!_!c%Z!c!}$8b!}#O%Z#O#P&c#P#R%Z#R#S$8b#S#T%Z#T#o$8b#o#p*g#p$g%Z$g;'S$8b;'S;=`$<l<%lO$8b+d$:qk$h&j(Up(X!b$^#tOY%ZYZ&cZr%Zrs&}st%Ztu$:fuw%Zwx(rx}%Z}!O$:f!O!Q%Z!Q![$:f![!^%Z!^!_*g!_!c%Z!c!}$:f!}#O%Z#O#P&c#P#R%Z#R#S$:f#S#T%Z#T#o$:f#o#p*g#p$g%Z$g;'S$:f;'S;=`$<f<%lO$:f+d$<iP;=`<%l$:f07[$<oP;=`<%l$8b#Jf$<{X!]#Hb(Up(X!bOY*gZr*grs'}sw*gwx)rx#O*g#P;'S*g;'S;=`+Z<%lO*g,#x$=sa(w+JY$h&j(Up(X!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p#q$+e#q;'S%Z;'S;=`+a<%lO%Z)>v$?V_![(CdtBr$h&j(Up(X!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z?O$@a_!o7`$h&j(Up(X!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z07[$Aq|$h&j(Up(X!b'z0/l$[#t(R,2j(c$I[OX%ZXY+gYZ&cZ[+g[p%Zpq+gqr%Zrs&}st%ZtuEruw%Zwx(rx}%Z}!OGv!O!Q%Z!Q![Er![!^%Z!^!_*g!_!c%Z!c!}Er!}#O%Z#O#P&c#P#R%Z#R#SEr#S#T%Z#T#oEr#o#p*g#p$f%Z$f$g+g$g#BYEr#BY#BZ$A`#BZ$ISEr$IS$I_$A`$I_$JTEr$JT$JU$A`$JU$KVEr$KV$KW$A`$KW&FUEr&FU&FV$A`&FV;'SEr;'S;=`I|<%l?HTEr?HT?HU$A`?HUOEr07[$D|k$h&j(Up(X!b'{0/l$[#t(R,2j(c$I[OY%ZYZ&cZr%Zrs&}st%ZtuEruw%Zwx(rx}%Z}!OGv!O!Q%Z!Q![Er![!^%Z!^!_*g!_!c%Z!c!}Er!}#O%Z#O#P&c#P#R%Z#R#SEr#S#T%Z#T#oEr#o#p*g#p$g%Z$g;'SEr;'S;=`I|<%lOEr",tokenizers:[oN,aN,lN,uN,2,3,4,5,6,7,8,9,10,11,12,13,14,rN,new Xc("$S~RRtu[#O#Pg#S#T#|~_P#o#pb~gOv~~jVO#i!P#i#j!U#j#l!P#l#m!q#m;'S!P;'S;=`#v<%lO!P~!UO!S~~!XS!Q![!e!c!i!e#T#Z!e#o#p#Z~!hR!Q![!q!c!i!q#T#Z!q~!tR!Q![!}!c!i!}#T#Z!}~#QR!Q![!P!c!i!P#T#Z!P~#^R!Q![#g!c!i#g#T#Z#g~#jS!Q![#g!c!i#g#T#Z#g#q#r!P~#yP;=`<%l!P~$RO(a~~",141,338),new Xc("j~RQYZXz{^~^O(O~~aP!P!Qd~iO(P~~",25,321)],topRules:{Script:[0,7],SingleExpression:[1,274],SingleClassItem:[2,275]},dialects:{jsx:0,ts:15091},dynamicPrecedences:{78:1,80:1,92:1,168:1,198:1},specialized:[{term:325,get:n=>hN[n]||-1},{term:341,get:n=>dN[n]||-1},{term:93,get:n=>fN[n]||-1}],tokenPrec:15116});function Vp(n){let e=Object.keys(n).join(""),t=/\w/.test(e);return t&&(e=e.replace(/\w/g,"")),`[${t?"\\w":""}${e.replace(/[^\w\s]/g,"\\$&")}]`}function mN(n){let e=Object.create(null),t=Object.create(null);for(let{label:s}of n){e[s[0]]=!0;for(let r=1;r<s.length;r++)t[s[r]]=!0}let i=Vp(e)+Vp(t)+"*$";return[new RegExp("^"+i),new RegExp(i)]}function gN(n){let e=n.map(s=>typeof s=="string"?{label:s}:s),[t,i]=e.every(s=>/^\w+$/.test(s.label))?[/\w*$/,/\w+$/]:mN(e);return s=>{let r=s.matchBefore(i);return r||s.explicit?{from:r?r.from:s.pos,options:e,validFor:t}:null}}function ON(n,e){return t=>{for(let i=It(t.state).resolveInner(t.pos,-1);i;i=i.parent){if(n.indexOf(i.name)>-1)return null;if(i.type.isTop)break}return e(t)}}const yN=Ki.define(),vN=_e.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",minWidth:"250px",maxHeight:"10em",height:"100%",listStyle:"none",margin:0,padding:0,"& > li, & > completion-section":{padding:"1px 3px",lineHeight:1.2},"& > li":{overflowX:"hidden",textOverflow:"ellipsis",cursor:"pointer"},"& > completion-section":{display:"list-item",borderBottom:"1px solid silver",paddingLeft:"0.5em",opacity:.7}}},"&light .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#17c",color:"white"},"&light .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#777"},"&dark .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#347",color:"white"},"&dark .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#444"},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'"···"',opacity:.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:"400px",boxSizing:"border-box",whiteSpace:"pre-line"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},".cm-completionInfo.cm-completionInfo-left-narrow":{right:"30px"},".cm-completionInfo.cm-completionInfo-right-narrow":{left:"30px"},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",display:"inline-block",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6",boxSizing:"content-box"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"'ƒ'"}},".cm-completionIcon-class":{"&:after":{content:"'○'"}},".cm-completionIcon-interface":{"&:after":{content:"'◌'"}},".cm-completionIcon-variable":{"&:after":{content:"'𝑥'"}},".cm-completionIcon-constant":{"&:after":{content:"'𝐶'"}},".cm-completionIcon-type":{"&:after":{content:"'𝑡'"}},".cm-completionIcon-enum":{"&:after":{content:"'∪'"}},".cm-completionIcon-property":{"&:after":{content:"'□'"}},".cm-completionIcon-keyword":{"&:after":{content:"'🔑︎'"}},".cm-completionIcon-namespace":{"&:after":{content:"'▢'"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}});class wN{constructor(e,t,i,s){this.field=e,this.line=t,this.from=i,this.to=s}}class Nh{constructor(e,t,i){this.field=e,this.from=t,this.to=i}map(e){let t=e.mapPos(this.from,-1,wt.TrackDel),i=e.mapPos(this.to,1,wt.TrackDel);return t==null||i==null?null:new Nh(this.field,t,i)}}class Ih{constructor(e,t){this.lines=e,this.fieldPositions=t}instantiate(e,t){let i=[],s=[t],r=e.doc.lineAt(t),o=/^\s*/.exec(r.text)[0];for(let l of this.lines){if(i.length){let u=o,c=/^\t*/.exec(l)[0].length;for(let h=0;h<c;h++)u+=e.facet(Ol);s.push(t+u.length-c),l=u+l.slice(c)}i.push(l),t+=l.length+1}let a=this.fieldPositions.map(l=>new Nh(l.field,s[l.line]+l.from,s[l.line]+l.to));return{text:i,ranges:a}}static parse(e){let t=[],i=[],s=[],r;for(let o of e.split(/\r\n?|\n/)){for(;r=/[#$]\{(?:(\d+)(?::([^}]*))?|((?:\\[{}]|[^}])*))\}/.exec(o);){let a=r[1]?+r[1]:null,l=r[2]||r[3]||"",u=-1,c=l.replace(/\\[{}]/g,h=>h[1]);for(let h=0;h<t.length;h++)(a!=null?t[h].seq==a:c&&t[h].name==c)&&(u=h);if(u<0){let h=0;for(;h<t.length&&(a==null||t[h].seq!=null&&t[h].seq<a);)h++;t.splice(h,0,{seq:a,name:c}),u=h;for(let d of s)d.field>=u&&d.field++}s.push(new wN(u,i.length,r.index,r.index+c.length)),o=o.slice(0,r.index)+l+o.slice(r.index+r[0].length)}o=o.replace(/\\([{}])/g,(a,l,u)=>{for(let c of s)c.line==i.length&&c.from>u&&(c.from--,c.to--);return l}),i.push(o)}return new Ih(i,s)}}let bN=tt.widget({widget:new class extends ml{toDOM(){let n=document.createElement("span");return n.className="cm-snippetFieldPosition",n}ignoreEvent(){return!1}}}),xN=tt.mark({class:"cm-snippetField"});class Ns{constructor(e,t){this.ranges=e,this.active=t,this.deco=tt.set(e.map(i=>(i.from==i.to?bN:xN).range(i.from,i.to)))}map(e){let t=[];for(let i of this.ranges){let s=i.map(e);if(!s)return null;t.push(s)}return new Ns(t,this.active)}selectionInsideField(e){return e.ranges.every(t=>this.ranges.some(i=>i.field==this.active&&i.from<=t.from&&i.to>=t.to))}}const Jr=Fe.define({map(n,e){return n&&n.map(e)}}),SN=Fe.define(),Xr=yi.define({create(){return null},update(n,e){for(let t of e.effects){if(t.is(Jr))return t.value;if(t.is(SN)&&n)return new Ns(n.ranges,t.value)}return n&&e.docChanged&&(n=n.map(e.changes)),n&&e.selection&&!n.selectionInsideField(e.selection)&&(n=null),n},provide:n=>_e.decorations.from(n,e=>e?e.deco:tt.none)});function Lh(n,e){return ee.create(n.filter(t=>t.field==e).map(t=>ee.range(t.from,t.to)))}function _N(n){let e=Ih.parse(n);return(t,i,s,r)=>{let{text:o,ranges:a}=e.instantiate(t.state,s),{main:l}=t.state.selection,u={changes:{from:s,to:r==l.from?l.to:r,insert:De.of(o)},scrollIntoView:!0,annotations:i?[yN.of(i),ft.userEvent.of("input.complete")]:void 0};if(a.length&&(u.selection=Lh(a,0)),a.some(c=>c.field>0)){let c=new Ns(a,0),h=u.effects=[Jr.of(c)];t.state.field(Xr,!1)===void 0&&h.push(Fe.appendConfig.of([Xr,TN,AN,vN]))}t.dispatch(t.state.update(u))}}function Py(n){return({state:e,dispatch:t})=>{let i=e.field(Xr,!1);if(!i||n<0&&i.active==0)return!1;let s=i.active+n,r=n>0&&!i.ranges.some(o=>o.field==s+n);return t(e.update({selection:Lh(i.ranges,s),effects:Jr.of(r?null:new Ns(i.ranges,s)),scrollIntoView:!0})),!0}}const $N=({state:n,dispatch:e})=>n.field(Xr,!1)?(e(n.update({effects:Jr.of(null)})),!0):!1,kN=Py(1),PN=Py(-1),QN=[{key:"Tab",run:kN,shift:PN},{key:"Escape",run:$N}],Xp=ge.define({combine(n){return n.length?n[0]:QN}}),TN=cl.highest(Ma.compute([Xp],n=>n.facet(Xp)));function $t(n,e){return Object.assign(Object.assign({},e),{apply:_N(n)})}const AN=_e.domEventHandlers({mousedown(n,e){let t=e.state.field(Xr,!1),i;if(!t||(i=e.posAtCoords({x:n.clientX,y:n.clientY}))==null)return!1;let s=t.ranges.find(r=>r.from<=i&&r.to>=i);return!s||s.field==t.active?!1:(e.dispatch({selection:Lh(t.ranges,s.field),effects:Jr.of(t.ranges.some(r=>r.field>s.field)?new Ns(t.ranges,s.field):null),scrollIntoView:!0}),!0)}}),Qy=new class extends Wi{};Qy.startSide=1;Qy.endSide=-1;const Ty=[$t("function ${name}(${params}) {\n	${}\n}",{label:"function",detail:"definition",type:"keyword"}),$t("for (let ${index} = 0; ${index} < ${bound}; ${index}++) {\n	${}\n}",{label:"for",detail:"loop",type:"keyword"}),$t("for (let ${name} of ${collection}) {\n	${}\n}",{label:"for",detail:"of loop",type:"keyword"}),$t("do {\n	${}\n} while (${})",{label:"do",detail:"loop",type:"keyword"}),$t("while (${}) {\n	${}\n}",{label:"while",detail:"loop",type:"keyword"}),$t(`try {
	\${}
} catch (\${error}) {
	\${}
}`,{label:"try",detail:"/ catch block",type:"keyword"}),$t("if (${}) {\n	${}\n}",{label:"if",detail:"block",type:"keyword"}),$t(`if (\${}) {
	\${}
} else {
	\${}
}`,{label:"if",detail:"/ else block",type:"keyword"}),$t(`class \${name} {
	constructor(\${params}) {
		\${}
	}
}`,{label:"class",detail:"definition",type:"keyword"}),$t('import {${names}} from "${module}"\n${}',{label:"import",detail:"named",type:"keyword"}),$t('import ${name} from "${module}"\n${}',{label:"import",detail:"default",type:"keyword"})],CN=Ty.concat([$t("interface ${name} {\n	${}\n}",{label:"interface",detail:"definition",type:"keyword"}),$t("type ${name} = ${type}",{label:"type",detail:"definition",type:"keyword"}),$t("enum ${name} {\n	${}\n}",{label:"enum",detail:"definition",type:"keyword"})]),Bp=new YZ,Ay=new Set(["Script","Block","FunctionExpression","FunctionDeclaration","ArrowFunction","MethodDeclaration","ForStatement"]);function Gs(n){return(e,t)=>{let i=e.node.getChild("VariableDefinition");return i&&t(i,n),!0}}const EN=["FunctionDeclaration"],MN={FunctionDeclaration:Gs("function"),ClassDeclaration:Gs("class"),ClassExpression:()=>!0,EnumDeclaration:Gs("constant"),TypeAliasDeclaration:Gs("type"),NamespaceDeclaration:Gs("namespace"),VariableDefinition(n,e){n.matchContext(EN)||e(n,"variable")},TypeDefinition(n,e){e(n,"type")},__proto__:null};function Cy(n,e){let t=Bp.get(e);if(t)return t;let i=[],s=!0;function r(o,a){let l=n.sliceString(o.from,o.to);i.push({label:l,type:a})}return e.cursor(at.IncludeAnonymous).iterate(o=>{if(s)s=!1;else if(o.name){let a=MN[o.name];if(a&&a(o,r)||Ay.has(o.name))return!1}else if(o.to-o.from>8192){for(let a of Cy(n,o.node))i.push(a);return!1}}),Bp.set(e,i),i}const Up=/^[\w$\xa1-\uffff][\w$\d\xa1-\uffff]*$/,Ey=["TemplateString","String","RegExp","LineComment","BlockComment","VariableDefinition","TypeDefinition","Label","PropertyDefinition","PropertyName","PrivatePropertyDefinition","PrivatePropertyName",".","?."];function RN(n){let e=It(n.state).resolveInner(n.pos,-1);if(Ey.indexOf(e.name)>-1)return null;let t=e.name=="VariableName"||e.to-e.from<20&&Up.test(n.state.sliceDoc(e.from,e.to));if(!t&&!n.explicit)return null;let i=[];for(let s=e;s;s=s.parent)Ay.has(s.name)&&(i=i.concat(Cy(n.state.doc,s)));return{options:i,from:t?e.from:n.pos,validFor:Up}}const Xi=Na.define({name:"javascript",parser:pN.configure({props:[Y0.add({IfStatement:cu({except:/^\s*({|else\b)/}),TryStatement:cu({except:/^\s*({|catch\b|finally\b)/}),LabeledStatement:m5,SwitchBody:n=>{let e=n.textAfter,t=/^\s*\}/.test(e),i=/^\s*(case|default)\b/.test(e);return n.baseIndent+(t?0:i?1:2)*n.unit},Block:p5({closing:"}"}),ArrowFunction:n=>n.baseIndent+n.unit,"TemplateString BlockComment":()=>null,"Statement Property":cu({except:/^{/}),JSXElement(n){let e=/^\s*<\//.test(n.textAfter);return n.lineIndent(n.node.from)+(e?0:n.unit)},JSXEscape(n){let e=/\s*\}/.test(n.textAfter);return n.lineIndent(n.node.from)+(e?0:n.unit)},"JSXOpenTag JSXSelfClosingTag"(n){return n.column(n.node.from)+n.unit}}),g5.add({"Block ClassBody SwitchBody EnumBody ObjectExpression ArrayExpression ObjectType":O5,BlockComment(n){return{from:n.from+2,to:n.to-2}}})]}),languageData:{closeBrackets:{brackets:["(","[","{","'",'"',"`"]},commentTokens:{line:"//",block:{open:"/*",close:"*/"}},indentOnInput:/^\s*(?:case |default:|\{|\}|<\/)$/,wordChars:"$"}}),My={test:n=>/^JSX/.test(n.name),facet:j0({commentTokens:{block:{open:"{/*",close:"*/}"}}})},ZN=Xi.configure({dialect:"ts"},"typescript"),DN=Xi.configure({dialect:"jsx",props:[Eh.add(n=>n.isTop?[My]:void 0)]}),NN=Xi.configure({dialect:"jsx ts",props:[Eh.add(n=>n.isTop?[My]:void 0)]},"typescript");let Ry=n=>({label:n,type:"keyword"});const Zy="break case const continue default delete export extends false finally in instanceof let new return static super switch this throw true typeof var yield".split(" ").map(Ry),IN=Zy.concat(["declare","implements","private","protected","public"].map(Ry));function LN(n={}){let e=n.jsx?n.typescript?NN:DN:n.typescript?ZN:Xi,t=n.typescript?CN.concat(IN):Ty.concat(Zy);return new o5(e,[Xi.data.of({autocomplete:ON(Ey,gN(t))}),Xi.data.of({autocomplete:RN}),n.jsx?XN:[]])}function zN(n){for(;;){if(n.name=="JSXOpenTag"||n.name=="JSXSelfClosingTag"||n.name=="JSXFragmentTag")return n;if(n.name=="JSXEscape"||!n.parent)return null;n=n.parent}}function jp(n,e,t=n.length){for(let i=e==null?void 0:e.firstChild;i;i=i.nextSibling)if(i.name=="JSXIdentifier"||i.name=="JSXBuiltin"||i.name=="JSXNamespacedName"||i.name=="JSXMemberExpression")return n.sliceString(i.from,Math.min(i.to,t));return""}const VN=typeof navigator=="object"&&/Android\b/.test(navigator.userAgent),XN=_e.inputHandler.of((n,e,t,i,s)=>{if((VN?n.composing:n.compositionStarted)||n.state.readOnly||e!=t||i!=">"&&i!="/"||!Xi.isActiveAt(n.state,e,-1))return!1;let r=s(),{state:o}=r,a=o.changeByRange(l=>{var u;let{head:c}=l,h=It(o).resolveInner(c-1,-1),d;if(h.name=="JSXStartTag"&&(h=h.parent),!(o.doc.sliceString(c-1,c)!=i||h.name=="JSXAttributeValue"&&h.to>c)){if(i==">"&&h.name=="JSXFragmentTag")return{range:l,changes:{from:c,insert:"</>"}};if(i=="/"&&h.name=="JSXStartCloseTag"){let f=h.parent,p=f.parent;if(p&&f.from==c-2&&((d=jp(o.doc,p.firstChild,c))||((u=p.firstChild)===null||u===void 0?void 0:u.name)=="JSXFragmentTag")){let m=`${d}>`;return{range:ee.cursor(c+m.length,-1),changes:{from:c,insert:m}}}}else if(i==">"){let f=zN(h);if(f&&f.name=="JSXOpenTag"&&!/^\/?>|^<\//.test(o.doc.sliceString(c,c+2))&&(d=jp(o.doc,f,c)))return{range:l,changes:{from:c,insert:`</${d}>`}}}}return{range:l}});return a.changes.empty?!1:(n.dispatch([r,o.update(a,{userEvent:"input.complete",scrollIntoView:!0})]),!0)}),BN="#e5c07b",Wp="#e06c75",UN="#56b6c2",jN="#ffffff",ia="#abb2bf",jc="#7d8799",WN="#61afef",qN="#98c379",qp="#d19a66",YN="#c678dd",GN="#21252b",Yp="#2c313a",Gp="#282c34",gu="#353a42",HN="#3E4451",Hp="#528bff",FN=_e.theme({"&":{color:ia,backgroundColor:Gp},".cm-content":{caretColor:Hp},".cm-cursor, .cm-dropCursor":{borderLeftColor:Hp},"&.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground, .cm-selectionBackground, .cm-content ::selection":{backgroundColor:HN},".cm-panels":{backgroundColor:GN,color:ia},".cm-panels.cm-panels-top":{borderBottom:"2px solid black"},".cm-panels.cm-panels-bottom":{borderTop:"2px solid black"},".cm-searchMatch":{backgroundColor:"#72a1ff59",outline:"1px solid #457dff"},".cm-searchMatch.cm-searchMatch-selected":{backgroundColor:"#6199ff2f"},".cm-activeLine":{backgroundColor:"#6699ff0b"},".cm-selectionMatch":{backgroundColor:"#aafe661a"},"&.cm-focused .cm-matchingBracket, &.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bad0f847"},".cm-gutters":{backgroundColor:Gp,color:jc,border:"none"},".cm-activeLineGutter":{backgroundColor:Yp},".cm-foldPlaceholder":{backgroundColor:"transparent",border:"none",color:"#ddd"},".cm-tooltip":{border:"none",backgroundColor:gu},".cm-tooltip .cm-tooltip-arrow:before":{borderTopColor:"transparent",borderBottomColor:"transparent"},".cm-tooltip .cm-tooltip-arrow:after":{borderTopColor:gu,borderBottomColor:gu},".cm-tooltip-autocomplete":{"& > ul > li[aria-selected]":{backgroundColor:Yp,color:ia}}},{dark:!0}),Dy=Hr.define([{tag:I.keyword,color:YN},{tag:[I.name,I.deleted,I.character,I.propertyName,I.macroName],color:Wp},{tag:[I.function(I.variableName),I.labelName],color:WN},{tag:[I.color,I.constant(I.name),I.standard(I.name)],color:qp},{tag:[I.definition(I.name),I.separator],color:ia},{tag:[I.typeName,I.className,I.number,I.changed,I.annotation,I.modifier,I.self,I.namespace],color:BN},{tag:[I.operator,I.operatorKeyword,I.url,I.escape,I.regexp,I.link,I.special(I.string)],color:UN},{tag:[I.meta,I.comment],color:jc},{tag:I.strong,fontWeight:"bold"},{tag:I.emphasis,fontStyle:"italic"},{tag:I.strikethrough,textDecoration:"line-through"},{tag:I.link,color:jc,textDecoration:"underline"},{tag:I.heading,fontWeight:"bold",color:Wp},{tag:[I.atom,I.bool,I.special(I.variableName)],color:qp},{tag:[I.processingInstruction,I.string,I.inserted],color:qN},{tag:I.invalid,color:jN}]),KN=[FN,F0(Dy)],JN={class:"serial-script"},e3={class:"script-select"},t3={class:"script-editor"},n3={class:"script-name-container"},i3=Oe({__name:"SerialScript",setup(n){const e=la.getInstance(),t=ae(e.getScripts()),i=ae(e.getCurrentScript()),s=ae(i.value.id),r=ae(null),o=Zs(),a=p=>{r.value&&r.value.dispatch({changes:{from:0,to:r.value.state.doc.length,insert:p}})},l=p=>{e.setCurrentScript(p),i.value=p,a(p.code),s.value=i.value.id},u=()=>{const p=e.addScript();t.value=e.getScripts(),l(p)},c=p=>{e.removeScript(p),t.value=e.getScripts(),t.value.length==0&&u(),l(t.value[0])},h=async()=>{i.value.isRunning?await e.stopScript():await e.runScript()},d=()=>{const p=t.value.find(m=>m.id===s.value);p&&l(p)},f=()=>{const p=document.getElementById("script-editor-container");if(p){const m=Ne.create({doc:i.value.code,extensions:[Ma.of(PD),Ma.of([QD]),F0(o.value?Dy:b5),LN(),o.value?KN:[],VZ(),_e.updateListener.of(O=>{O.docChanged&&(i.value.code=O.state.doc.toString())})]});r.value=new _e({state:m,parent:p})}};return St(()=>{f()}),Qe(o,()=>{r.value&&(r.value.destroy(),f())}),Qe(t,()=>{e.saveScripts()},{deep:!0}),(p,m)=>{const O=ie("el-option"),y=ie("el-select"),b=ie("Plus"),v=ie("el-icon"),g=ie("el-button"),k=ie("el-button-group"),S=ie("el-input"),Q=ie("Compass"),T=ie("el-tooltip");return G(),K("div",JN,[q("div",e3,[x(y,{size:"small",modelValue:s.value,"onUpdate:modelValue":m[0]||(m[0]=P=>s.value=P),onChange:d,placeholder:"选择脚本"},{default:A(()=>[(G(!0),K(ke,null,Xe(t.value,P=>(G(),be(O,{key:P.id,label:P.name,value:P.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),x(k,{class:"ms-2",style:{width:"250px"}},{default:A(()=>[x(g,{size:"small",onClick:u},{default:A(()=>[x(v,null,{default:A(()=>[x(b)]),_:1}),m[4]||(m[4]=te(" 新建 "))]),_:1}),x(g,{size:"small",type:"danger",onClick:m[1]||(m[1]=P=>c(i.value.id))},{default:A(()=>m[5]||(m[5]=[te("删除")])),_:1})]),_:1})]),q("div",t3,[q("div",n3,[x(S,{size:"small",modelValue:i.value.name,"onUpdate:modelValue":m[2]||(m[2]=P=>i.value.name=P),placeholder:"脚本名称",class:"script-name-input"},null,8,["modelValue"]),x(g,{type:i.value.isRunning?"success":"primary",size:"small",onClick:m[3]||(m[3]=P=>h()),class:"run-button"},{default:A(()=>[te(ve(i.value.isRunning?"停止":"运行"),1)]),_:1},8,["type"]),x(T,{effect:"dark",placement:"bottom"},{content:A(()=>m[6]||(m[6]=[q("p",null,"可用的API:",-1),q("ul",null,[q("li",null,"sendText(text) - 发送文本数据"),q("li",null,"sendHex(hex) - 发送HEX格式数据"),q("li",null,"sleep(ms) - 延时指定毫秒数"),q("li",null,"updateDataTable({pitch: 1.0, roll: 1.0, yaw: 1.0}); 更新IMU数据")],-1)])),default:A(()=>[x(g,{size:"small",style:{"margin-left":"0"}},{default:A(()=>[x(v,null,{default:A(()=>[x(Q)]),_:1})]),_:1})]),_:1})]),m[7]||(m[7]=q("div",{id:"script-editor-container",class:"editor-container"},null,-1))])])}}}),s3=yt(i3,[["__scopeId","data-v-3c8fbedf"]]);function Fp(n){return typeof n=="function"||Object.prototype.toString.call(n)==="[object Function]"}function ss(n,e,t,i=1){const[s,r]=typeof i=="number"?[i,i]:i,o=Math.round(e/s/n[0])*n[0],a=Math.round(t/r/n[1])*n[1];return[o,a]}function Ou(n,e,t){return n-e-t}function yu(n,e,t){return n-e-t}function zt(n,e,t){return e!==null&&n<e?e:t!==null&&t<n?t:n}function Kp(n,e,t){let i=n;const s=["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"].find(r=>Fp(i[r]));if(!Fp(i[s]))return!1;do{if(i[s](e))return!0;if(i===t)return!1;i=i.parentNode}while(i);return!1}function r3(n){const e=window.getComputedStyle(n);return[parseFloat(e.getPropertyValue("width"),10),parseFloat(e.getPropertyValue("height"),10)]}function xi(n,e,t){n&&(n.attachEvent?n.attachEvent("on"+e,t):n.addEventListener?n.addEventListener(e,t,!0):n["on"+e]=t)}function kn(n,e,t){n&&(n.detachEvent?n.detachEvent("on"+e,t):n.removeEventListener?n.removeEventListener(e,t,!0):n["on"+e]=null)}const o3=(n,e)=>{const t=n.__vccOpts||n;for(const[i,s]of e)t[i]=s;return t},sa={mouse:{start:"mousedown",move:"mousemove",stop:"mouseup"},touch:{start:"touchstart",move:"touchmove",stop:"touchend"}},a3={userSelect:"none",MozUserSelect:"none",WebkitUserSelect:"none",MsUserSelect:"none"},l3={userSelect:"auto",MozUserSelect:"auto",WebkitUserSelect:"auto",MsUserSelect:"auto"};let Pn=sa.mouse;const u3={replace:!0,name:"vue-draggable-resizable",props:{className:{type:String,default:"vdr"},classNameDraggable:{type:String,default:"draggable"},classNameResizable:{type:String,default:"resizable"},classNameDragging:{type:String,default:"dragging"},classNameResizing:{type:String,default:"resizing"},classNameActive:{type:String,default:"active"},classNameHandle:{type:String,default:"handle"},disableUserSelect:{type:Boolean,default:!0},enableNativeDrag:{type:Boolean,default:!1},preventDeactivation:{type:Boolean,default:!1},active:{type:Boolean,default:!1},draggable:{type:Boolean,default:!0},resizable:{type:Boolean,default:!0},lockAspectRatio:{type:Boolean,default:!1},w:{type:[Number,String],default:200,validator:n=>typeof n=="number"?n>0:n==="auto"},h:{type:[Number,String],default:200,validator:n=>typeof n=="number"?n>0:n==="auto"},minWidth:{type:Number,default:0,validator:n=>n>=0},minHeight:{type:Number,default:0,validator:n=>n>=0},maxWidth:{type:Number,default:null,validator:n=>n>=0},maxHeight:{type:Number,default:null,validator:n=>n>=0},x:{type:Number,default:0},y:{type:Number,default:0},z:{type:[String,Number],default:"auto",validator:n=>typeof n=="string"?n==="auto":n>=0},handles:{type:Array,default:()=>["tl","tm","tr","mr","br","bm","bl","ml"],validator:n=>{const e=new Set(["tl","tm","tr","mr","br","bm","bl","ml"]);return new Set(n.filter(t=>e.has(t))).size===n.length}},dragHandle:{type:String,default:null},dragCancel:{type:String,default:null},axis:{type:String,default:"both",validator:n=>["x","y","both"].includes(n)},grid:{type:Array,default:()=>[1,1]},parent:{type:Boolean,default:!1},scale:{type:[Number,Array],default:1,validator:n=>typeof n=="number"?n>0:n.length===2&&n[0]>0&&n[1]>0},onDragStart:{type:Function,default:()=>!0},onDrag:{type:Function,default:()=>!0},onResizeStart:{type:Function,default:()=>!0},onResize:{type:Function,default:()=>!0}},data:function(){return{left:this.x,top:this.y,right:null,bottom:null,width:null,height:null,widthTouched:!1,heightTouched:!1,aspectFactor:null,parentWidth:null,parentHeight:null,handle:null,enabled:this.active,resizing:!1,dragging:!1,dragEnable:!1,resizeEnable:!1,zIndex:this.z}},created:function(){this.maxWidth&&this.minWidth>this.maxWidth&&console.warn("[Vdr warn]: Invalid prop: minWidth cannot be greater than maxWidth"),this.maxHeight&&this.minHeight>this.maxHeight&&console.warn("[Vdr warn]: Invalid prop: minHeight cannot be greater than maxHeight"),this.resetBoundsAndMouseState()},mounted:function(){this.enableNativeDrag||(this.$el.ondragstart=()=>!1);const[n,e]=this.getParentSize();this.parentWidth=n,this.parentHeight=e;const[t,i]=r3(this.$el);this.aspectFactor=(this.w!=="auto"?this.w:t)/(this.h!=="auto"?this.h:i),this.width=this.w!=="auto"?this.w:t,this.height=this.h!=="auto"?this.h:i,this.right=this.parentWidth-this.width-this.left,this.bottom=this.parentHeight-this.height-this.top,this.active&&this.$emit("activated"),xi(document.documentElement,"mousedown",this.deselect),xi(document.documentElement,"touchend touchcancel",this.deselect),xi(window,"resize",this.checkParentSize)},beforeUnmount:function(){kn(document.documentElement,"mousedown",this.deselect),kn(document.documentElement,"touchstart",this.handleUp),kn(document.documentElement,"mousemove",this.move),kn(document.documentElement,"touchmove",this.move),kn(document.documentElement,"mouseup",this.handleUp),kn(document.documentElement,"touchend touchcancel",this.deselect),kn(window,"resize",this.checkParentSize)},methods:{resetBoundsAndMouseState(){this.mouseClickPosition={mouseX:0,mouseY:0,x:0,y:0,w:0,h:0},this.bounds={minLeft:null,maxLeft:null,minRight:null,maxRight:null,minTop:null,maxTop:null,minBottom:null,maxBottom:null}},checkParentSize(){if(this.parent){const[n,e]=this.getParentSize();this.parentWidth=n,this.parentHeight=e,this.right=this.parentWidth-this.width-this.left,this.bottom=this.parentHeight-this.height-this.top}},getParentSize(){if(this.parent){const n=window.getComputedStyle(this.$el.parentNode,null);return[parseInt(n.getPropertyValue("width"),10),parseInt(n.getPropertyValue("height"),10)]}return[null,null]},elementTouchDown(n){Pn=sa.touch,this.elementDown(n)},elementMouseDown(n){Pn=sa.mouse,this.elementDown(n)},elementDown(n){if(n instanceof MouseEvent&&n.button!==0)return;const e=n.target||n.srcElement;if(this.$el.contains(e)){if(this.onDragStart(n)===!1)return;if(this.dragHandle&&!Kp(e,this.dragHandle,this.$el)||this.dragCancel&&Kp(e,this.dragCancel,this.$el)){this.dragging=!1;return}this.enabled||(this.enabled=!0,this.$emit("activated"),this.$emit("update:active",!0)),this.draggable&&(this.dragEnable=!0),this.mouseClickPosition.mouseX=n.touches?n.touches[0].pageX:n.pageX,this.mouseClickPosition.mouseY=n.touches?n.touches[0].pageY:n.pageY,this.mouseClickPosition.left=this.left,this.mouseClickPosition.right=this.right,this.mouseClickPosition.top=this.top,this.mouseClickPosition.bottom=this.bottom,this.parent&&(this.bounds=this.calcDragLimits()),xi(document.documentElement,Pn.move,this.move),xi(document.documentElement,Pn.stop,this.handleUp)}},calcDragLimits(){return{minLeft:this.left%this.grid[0],maxLeft:Math.floor((this.parentWidth-this.width-this.left)/this.grid[0])*this.grid[0]+this.left,minRight:this.right%this.grid[0],maxRight:Math.floor((this.parentWidth-this.width-this.right)/this.grid[0])*this.grid[0]+this.right,minTop:this.top%this.grid[1],maxTop:Math.floor((this.parentHeight-this.height-this.top)/this.grid[1])*this.grid[1]+this.top,minBottom:this.bottom%this.grid[1],maxBottom:Math.floor((this.parentHeight-this.height-this.bottom)/this.grid[1])*this.grid[1]+this.bottom}},deselect(n){const e=n.target||n.srcElement,t=new RegExp(this.className+"-([trmbl]{2})","");!this.$el.contains(e)&&!t.test(e.className)&&(this.enabled&&!this.preventDeactivation&&(this.enabled=!1,this.$emit("deactivated"),this.$emit("update:active",!1)),kn(document.documentElement,Pn.move,this.handleResize)),this.resetBoundsAndMouseState()},handleTouchDown(n,e){Pn=sa.touch,this.handleDown(n,e)},handleDown(n,e){e instanceof MouseEvent&&e.which!==1||this.onResizeStart(n,e)!==!1&&(e.stopPropagation&&e.stopPropagation(),this.lockAspectRatio&&!n.includes("m")?this.handle="m"+n.substring(1):this.handle=n,this.resizeEnable=!0,this.mouseClickPosition.mouseX=e.touches?e.touches[0].pageX:e.pageX,this.mouseClickPosition.mouseY=e.touches?e.touches[0].pageY:e.pageY,this.mouseClickPosition.left=this.left,this.mouseClickPosition.right=this.right,this.mouseClickPosition.top=this.top,this.mouseClickPosition.bottom=this.bottom,this.bounds=this.calcResizeLimits(),xi(document.documentElement,Pn.move,this.handleResize),xi(document.documentElement,Pn.stop,this.handleUp))},calcResizeLimits(){let n=this.minW,e=this.minH,t=this.maxW,i=this.maxH;const s=this.aspectFactor,[r,o]=this.grid,a=this.width,l=this.height,u=this.left,c=this.top,h=this.right,d=this.bottom;this.lockAspectRatio&&(n/e>s?e=n/s:n=s*e,t&&i?(t=Math.min(t,s*i),i=Math.min(i,t/s)):t?i=t/s:i&&(t=s*i)),t=t-t%r,i=i-i%o;const f={minLeft:null,maxLeft:null,minTop:null,maxTop:null,minRight:null,maxRight:null,minBottom:null,maxBottom:null};return this.parent?(f.minLeft=u%r,f.maxLeft=u+Math.floor((a-n)/r)*r,f.minTop=c%o,f.maxTop=c+Math.floor((l-e)/o)*o,f.minRight=h%r,f.maxRight=h+Math.floor((a-n)/r)*r,f.minBottom=d%o,f.maxBottom=d+Math.floor((l-e)/o)*o,t&&(f.minLeft=Math.max(f.minLeft,this.parentWidth-h-t),f.minRight=Math.max(f.minRight,this.parentWidth-u-t)),i&&(f.minTop=Math.max(f.minTop,this.parentHeight-d-i),f.minBottom=Math.max(f.minBottom,this.parentHeight-c-i)),this.lockAspectRatio&&(f.minLeft=Math.max(f.minLeft,u-c*s),f.minTop=Math.max(f.minTop,c-u/s),f.minRight=Math.max(f.minRight,h-d*s),f.minBottom=Math.max(f.minBottom,d-h/s))):(f.minLeft=null,f.maxLeft=u+Math.floor((a-n)/r)*r,f.minTop=null,f.maxTop=c+Math.floor((l-e)/o)*o,f.minRight=null,f.maxRight=h+Math.floor((a-n)/r)*r,f.minBottom=null,f.maxBottom=d+Math.floor((l-e)/o)*o,t&&(f.minLeft=-(h+t),f.minRight=-(u+t)),i&&(f.minTop=-(d+i),f.minBottom=-(c+i)),this.lockAspectRatio&&t&&i&&(f.minLeft=Math.min(f.minLeft,-(h+t)),f.minTop=Math.min(f.minTop,-(i+d)),f.minRight=Math.min(f.minRight,-u-t),f.minBottom=Math.min(f.minBottom,-c-i))),f},move(n){this.resizing?this.handleResize(n):this.dragEnable&&this.handleDrag(n)},handleDrag(n){const e=this.axis,t=this.grid,i=this.bounds,s=this.mouseClickPosition,r=e&&e!=="y"?s.mouseX-(n.touches?n.touches[0].pageX:n.pageX):0,o=e&&e!=="x"?s.mouseY-(n.touches?n.touches[0].pageY:n.pageY):0,[a,l]=ss(t,r,o,this.scale),u=zt(s.left-a,i.minLeft,i.maxLeft),c=zt(s.top-l,i.minTop,i.maxTop);if(this.onDrag(u,c)===!1)return;const h=zt(s.right+a,i.minRight,i.maxRight),d=zt(s.bottom+l,i.minBottom,i.maxBottom);this.left=u,this.top=c,this.right=h,this.bottom=d,this.$emit("dragging",this.left,this.top),this.dragging=!0},moveHorizontally(n){const[e,t]=ss(this.grid,n,this.top,1),i=zt(e,this.bounds.minLeft,this.bounds.maxLeft);this.left=i,this.right=this.parentWidth-this.width-i},moveVertically(n){const[e,t]=ss(this.grid,this.left,n,1),i=zt(t,this.bounds.minTop,this.bounds.maxTop);this.top=i,this.bottom=this.parentHeight-this.height-i},handleResize(n){let e=this.left,t=this.top,i=this.right,s=this.bottom;const r=this.mouseClickPosition,o=this.aspectFactor,a=r.mouseX-(n.touches?n.touches[0].pageX:n.pageX),l=r.mouseY-(n.touches?n.touches[0].pageY:n.pageY);!this.widthTouched&&a&&(this.widthTouched=!0),!this.heightTouched&&l&&(this.heightTouched=!0);const[u,c]=ss(this.grid,a,l,this.scale);this.handle.includes("b")?(s=zt(r.bottom+c,this.bounds.minBottom,this.bounds.maxBottom),this.lockAspectRatio&&this.resizingOnY&&(i=this.right-(this.bottom-s)*o)):this.handle.includes("t")&&(t=zt(r.top-c,this.bounds.minTop,this.bounds.maxTop),this.lockAspectRatio&&this.resizingOnY&&(e=this.left-(this.top-t)*o)),this.handle.includes("r")?(i=zt(r.right+u,this.bounds.minRight,this.bounds.maxRight),this.lockAspectRatio&&this.resizingOnX&&(s=this.bottom-(this.right-i)/o)):this.handle.includes("l")&&(e=zt(r.left-u,this.bounds.minLeft,this.bounds.maxLeft),this.lockAspectRatio&&this.resizingOnX&&(t=this.top-(this.left-e)/o));const h=Ou(this.parentWidth,e,i),d=yu(this.parentHeight,t,s);this.onResize(this.handle,e,t,h,d)!==!1&&(this.left=e,this.top=t,this.right=i,this.bottom=s,this.width=h,this.height=d,this.$emit("resizing",this.left,this.top,this.width,this.height),this.resizing=!0)},changeWidth(n){const[e,t]=ss(this.grid,n,0,1),i=zt(this.parentWidth-e-this.left,this.bounds.minRight,this.bounds.maxRight);let s=this.bottom;this.lockAspectRatio&&(s=this.bottom-(this.right-i)/this.aspectFactor);const r=Ou(this.parentWidth,this.left,i),o=yu(this.parentHeight,this.top,s);this.right=i,this.bottom=s,this.width=r,this.height=o},changeHeight(n){const[e,t]=ss(this.grid,0,n,1),i=zt(this.parentHeight-t-this.top,this.bounds.minBottom,this.bounds.maxBottom);let s=this.right;this.lockAspectRatio&&(s=this.right-(this.bottom-i)*this.aspectFactor);const r=Ou(this.parentWidth,this.left,s),o=yu(this.parentHeight,this.top,i);this.right=s,this.bottom=i,this.width=r,this.height=o},handleUp(n){this.handle=null,this.resetBoundsAndMouseState(),this.dragEnable=!1,this.resizeEnable=!1,this.resizing&&(this.resizing=!1,this.$emit("resizeStop",this.left,this.top,this.width,this.height)),this.dragging&&(this.dragging=!1,this.$emit("dragStop",this.left,this.top)),kn(document.documentElement,Pn.move,this.handleResize)}},computed:{style(){return{transform:`translate(${this.left}px, ${this.top}px)`,width:this.computedWidth,height:this.computedHeight,zIndex:this.zIndex,...this.dragging&&this.disableUserSelect?a3:l3}},actualHandles(){return this.resizable?this.handles:[]},computedWidth(){return this.w==="auto"&&!this.widthTouched?"auto":this.width+"px"},computedHeight(){return this.h==="auto"&&!this.heightTouched?"auto":this.height+"px"},minW(){return this.minWidth},minH(){return this.minHeight},maxW(){return this.maxWidth},maxH(){return this.maxHeight},resizingOnX(){return!!this.handle&&(this.handle.includes("l")||this.handle.includes("r"))},resizingOnY(){return!!this.handle&&(this.handle.includes("t")||this.handle.includes("b"))},isCornerHandle(){return!!this.handle&&["tl","tr","br","bl"].includes(this.handle)}},watch:{active(n){this.enabled=n,n?this.$emit("activated"):this.$emit("deactivated")},z(n){(n>=0||n==="auto")&&(this.zIndex=n)},x(n){this.resizing||this.dragging||(this.parent&&(this.bounds=this.calcDragLimits()),this.moveHorizontally(n))},y(n){this.resizing||this.dragging||(this.parent&&(this.bounds=this.calcDragLimits()),this.moveVertically(n))},lockAspectRatio(n){n?this.aspectFactor=this.width/this.height:this.aspectFactor=void 0},w(n){this.resizing||this.dragging||(this.parent&&(this.bounds=this.calcResizeLimits()),this.changeWidth(n))},h(n){this.resizing||this.dragging||(this.parent&&(this.bounds=this.calcResizeLimits()),this.changeHeight(n))}}},c3=["onMousedown","onTouchstart"];function h3(n,e,t,i,s,r){return G(),K("div",{style:gt(r.style),class:Ge([{[t.classNameActive]:n.enabled,[t.classNameDragging]:n.dragging,[t.classNameResizing]:n.resizing,[t.classNameDraggable]:t.draggable,[t.classNameResizable]:t.resizable},t.className]),onMousedown:e[0]||(e[0]=(...o)=>r.elementMouseDown&&r.elementMouseDown(...o)),onTouchstart:e[1]||(e[1]=(...o)=>r.elementTouchDown&&r.elementTouchDown(...o))},[(G(!0),K(ke,null,Xe(r.actualHandles,o=>(G(),K("div",{key:o,class:Ge([t.classNameHandle,t.classNameHandle+"-"+o]),style:gt({display:n.enabled?"block":"none"}),onMousedown:zh(a=>r.handleDown(o,a),["stop","prevent"]),onTouchstart:zh(a=>r.handleTouchDown(o,a),["stop","prevent"])},[Be(n.$slots,o)],46,c3))),128)),Be(n.$slots,"default")],38)}const Ny=o3(u3,[["render",h3]]);function Wc(n){Wc.installed||(Wc.installed=!0,n.component("VueDraggableResizable",Ny))}const d3={install:Wc};let Ua=null;typeof window<"u"?Ua=window.Vue:typeof global<"u"&&(Ua=global.Vue);Ua&&Ua.use(d3);const f3={class:"canvas-panel"},p3={class:"toolbar"},Hs=10,m3=Oe({__name:"CanvasPanel",setup(n){var p;const e=Vn.getInstance(),t=e.useConfig("canvas"),i=ae(((p=t.value)==null?void 0:p.items)||[]),s=Zs(),r={chart:wO,table:bO,"3d":vO},o=m=>{const O={id:Date.now(),type:m,x:0,y:0,width:400,height:300};i.value.push(O),h()},a=m=>Math.round(m/Hs)*Hs,l=(m,O,y,b,v)=>{const g=i.value.find(k=>k.id===v);g&&(g.x=a(m),g.y=a(O),g.width=a(y),g.height=a(b),h(),f())},u=(m,O,y)=>{const b=i.value.find(v=>v.id===y);b&&(b.x=a(m),b.y=a(O),h())},c=m=>{const O=i.value.findIndex(y=>y.id===m);O!==-1&&(i.value.splice(O,1),h())},h=()=>{e.setConfig("canvas",{items:i.value})};let d;const f=()=>{clearTimeout(d),d=setTimeout(()=>{window.dispatchEvent(new CustomEvent("resize",{}))},100)};return(m,O)=>{const y=ie("el-button"),b=ie("el-button-group");return G(),K("div",f3,[q("div",p3,[x(b,{class:"tool-group"},{default:A(()=>[x(y,{type:"primary",size:"small",onClick:O[0]||(O[0]=v=>o("chart"))},{default:A(()=>O[3]||(O[3]=[te("添加图表")])),_:1}),x(y,{type:"primary",size:"small",onClick:O[1]||(O[1]=v=>o("table"))},{default:A(()=>O[4]||(O[4]=[te("添加数据表")])),_:1}),x(y,{type:"primary",size:"small",onClick:O[2]||(O[2]=v=>o("3d"))},{default:A(()=>O[5]||(O[5]=[te("添加3D视图")])),_:1})]),_:1})]),q("div",{class:Ge(["canvas-container",{dark:$(s)}])},[O[6]||(O[6]=q("div",{class:"grid-background"},null,-1)),(G(!0),K(ke,null,Xe(i.value,v=>(G(),be($(Ny),{key:v.id,x:v.x,y:v.y,w:v.width,h:v.height,width:v.width,height:v.height,draggable:!0,resizable:!0,grid:[Hs,Hs],snap:!0,"snap-tolerance":Hs,class:"canvas-item",onResizing:(g,k,S,Q)=>l(g,k,S,Q,v.id),onDragging:(g,k)=>u(g,k,v.id)},{default:A(()=>[(G(),be(ni(r[v.type]))),x(y,{class:"remove-btn",type:"danger",circle:"",size:"small",onClick:g=>c(v.id),icon:"Delete"},null,8,["onClick"])]),_:2},1032,["x","y","w","h","width","height","grid","onResizing","onDragging"]))),128))],2)])}}}),g3=yt(m3,[["__scopeId","data-v-8966f8c9"]]),O3={class:"header-content"},y3={class:"header-left"},v3={class:"header-links"},w3=Oe({__name:"App",setup(n){const t=Vn.getInstance().useConfig("layout"),i=Zs({initialValue:"dark",storage:localStorage}),s=Hy(i),r=ae(!1),o=()=>{document.fullscreenElement?(document.exitFullscreen(),r.value=!1):(document.documentElement.requestFullscreen(),r.value=!0)},a=h=>{t.value.splitPaneSize=h[0].size,c()},l=()=>{c()};let u;const c=()=>{clearTimeout(u),u=setTimeout(()=>{window.dispatchEvent(new CustomEvent("resize",{}))},100)};return c(),(h,d)=>{const f=ie("el-button"),p=ie("el-header"),m=ie("el-tab-pane"),O=ie("el-tabs"),y=ie("el-container");return G(),be(y,{class:"app-container"},{default:A(()=>[x(p,{class:"app-header"},{default:A(()=>[q("div",O3,[q("div",y3,[d[4]||(d[4]=q("h1",null,[q("a",{href:"https://github.com/qdsang/web-serial-debug",target:"_blank"},"Web Serial")],-1)),x($v,{class:"header-serial-config"})]),q("div",v3,[x(f,{class:"theme-toggle",icon:$(i)?"Sunny":"Moon",circle:"",onClick:d[0]||(d[0]=b=>$(s)())},null,8,["icon"]),x(f,{class:"fullscreen-toggle",icon:"FullScreen",circle:"",onClick:d[1]||(d[1]=b=>o())})])])]),_:1}),x(y,{class:"main-container"},{default:A(()=>[x($(t1),{class:"default-theme",onResize:a},{default:A(()=>[x($(Vh),{size:$(t).splitPaneSize,class:"w75"},{default:A(()=>[x(O,{type:"card",class:"lv-card lv-tabs",addable:"",modelValue:$(t).leftActiveTab,"onUpdate:modelValue":d[2]||(d[2]=b=>$(t).leftActiveTab=b),onTabClick:l},{default:A(()=>[x(m,{label:"命令行"},{default:A(()=>[x(Xv)]),_:1}),x(m,{label:"姿态",lazy:""},{default:A(()=>[x(vO)]),_:1}),x(m,{label:"数据表",lazy:""},{default:A(()=>[x(bO)]),_:1}),x(m,{label:"可视化",lazy:""},{default:A(()=>[x(wO)]),_:1}),x(m,{label:"流程图"},{default:A(()=>[x(WC)]),_:1}),x(m,{label:"画板",lazy:""},{default:A(()=>[x(g3)]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["size"]),x($(Vh),{class:"w25"},{default:A(()=>[x(O,{type:"card",class:"lv-card lv-tabs",modelValue:$(t).rightActiveTab,"onUpdate:modelValue":d[3]||(d[3]=b=>$(t).rightActiveTab=b)},{default:A(()=>[x(m,{label:"快捷发送"},{default:A(()=>[x($M)]),_:1}),x(m,{label:"脚本"},{default:A(()=>[x(s3)]),_:1}),x(m,{label:"设置"})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})}}}),b3=yt(w3,[["__scopeId","data-v-ef1e6fb1"]]),xl=Fy(b3),x3=Ky();for(const[n,e]of Object.entries(n1))xl.component(n,e);xl.use(x3);xl.use(i1);xl.mount("#app");"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("./sw.js").then(n=>{console.log("ServiceWorker registration successful")}).catch(n=>{console.error("ServiceWorker registration failed:",n)})});
